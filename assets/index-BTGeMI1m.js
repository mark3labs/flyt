function Lm(t,r){for(var a=0;a<r.length;a++){const l=r[a];if(typeof l!="string"&&!Array.isArray(l)){for(const s in l)if(s!=="default"&&!(s in t)){const c=Object.getOwnPropertyDescriptor(l,s);c&&Object.defineProperty(t,s,c.get?c:{enumerable:!0,get:()=>l[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const A of c.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&l(A)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();function gi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $c={exports:{}},Ho={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function c6(){if(qh)return Ho;qh=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(l,s,c){var A=null;if(c!==void 0&&(A=""+c),s.key!==void 0&&(A=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:t,type:l,key:A,ref:s!==void 0?s:null,props:c}}return Ho.Fragment=r,Ho.jsx=a,Ho.jsxs=a,Ho}var $h;function u6(){return $h||($h=1,$c.exports=c6()),$c.exports}var C=u6();const A6=gi(C),f6=Lm({__proto__:null,default:A6},[C]);var Yc={exports:{}},Vo={},Kc={exports:{}},Zc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function d6(){return Yh||(Yh=1,function(t){function r(O,G){var X=O.length;O.push(G);e:for(;0<X;){var K=X-1>>>1,k=O[K];if(0<s(k,G))O[K]=G,O[X]=k,X=K;else break e}}function a(O){return O.length===0?null:O[0]}function l(O){if(O.length===0)return null;var G=O[0],X=O.pop();if(X!==G){O[0]=X;e:for(var K=0,k=O.length,Q=k>>>1;K<Q;){var J=2*(K+1)-1,n0=O[J],f0=J+1,x0=O[f0];if(0>s(n0,X))f0<k&&0>s(x0,n0)?(O[K]=x0,O[f0]=X,K=f0):(O[K]=n0,O[J]=X,K=J);else if(f0<k&&0>s(x0,X))O[K]=x0,O[f0]=X,K=f0;else break e}}return G}function s(O,G){var X=O.sortIndex-G.sortIndex;return X!==0?X:O.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var A=Date,f=A.now();t.unstable_now=function(){return A.now()-f}}var p=[],h=[],g=1,m=null,v=3,D=!1,x=!1,w=!1,B=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function _(O){for(var G=a(h);G!==null;){if(G.callback===null)l(h);else if(G.startTime<=O)l(h),G.sortIndex=G.expirationTime,r(p,G);else break;G=a(h)}}function T(O){if(w=!1,_(O),!x)if(a(p)!==null)x=!0,R||(R=!0,l0());else{var G=a(h);G!==null&&A0(T,G.startTime-O)}}var R=!1,L=-1,I=5,V=-1;function r0(){return B?!0:!(t.unstable_now()-V<I)}function u0(){if(B=!1,R){var O=t.unstable_now();V=O;var G=!0;try{e:{x=!1,w&&(w=!1,E(L),L=-1),D=!0;var X=v;try{t:{for(_(O),m=a(p);m!==null&&!(m.expirationTime>O&&r0());){var K=m.callback;if(typeof K=="function"){m.callback=null,v=m.priorityLevel;var k=K(m.expirationTime<=O);if(O=t.unstable_now(),typeof k=="function"){m.callback=k,_(O),G=!0;break t}m===a(p)&&l(p),_(O)}else l(p);m=a(p)}if(m!==null)G=!0;else{var Q=a(h);Q!==null&&A0(T,Q.startTime-O),G=!1}}break e}finally{m=null,v=X,D=!1}G=void 0}}finally{G?l0():R=!1}}}var l0;if(typeof N=="function")l0=function(){N(u0)};else if(typeof MessageChannel<"u"){var i0=new MessageChannel,q=i0.port2;i0.port1.onmessage=u0,l0=function(){q.postMessage(null)}}else l0=function(){b(u0,0)};function A0(O,G){L=b(function(){O(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(O){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var X=v;v=G;try{return O()}finally{v=X}},t.unstable_requestPaint=function(){B=!0},t.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=v;v=O;try{return G()}finally{v=X}},t.unstable_scheduleCallback=function(O,G,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,O){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=X+k,O={id:g++,callback:G,priorityLevel:O,startTime:X,expirationTime:k,sortIndex:-1},X>K?(O.sortIndex=X,r(h,O),a(p)===null&&O===a(h)&&(w?(E(L),L=-1):w=!0,A0(T,X-K))):(O.sortIndex=k,r(p,O),x||D||(x=!0,R||(R=!0,l0()))),O},t.unstable_shouldYield=r0,t.unstable_wrapCallback=function(O){var G=v;return function(){var X=v;v=G;try{return O.apply(this,arguments)}finally{v=X}}}}(Zc)),Zc}var Kh;function h6(){return Kh||(Kh=1,Kc.exports=d6()),Kc.exports}var Xc={exports:{}},k0={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function p6(){if(Zh)return k0;Zh=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),A=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function B(k,Q,J){this.props=k,this.context=Q,this.refs=w,this.updater=J||D}B.prototype.isReactComponent={},B.prototype.setState=function(k,Q){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Q,"setState")},B.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function b(){}b.prototype=B.prototype;function E(k,Q,J){this.props=k,this.context=Q,this.refs=w,this.updater=J||D}var N=E.prototype=new b;N.constructor=E,x(N,B.prototype),N.isPureReactComponent=!0;var _=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function L(k,Q,J,n0,f0,x0){return J=x0.ref,{$$typeof:t,type:k,key:Q,ref:J!==void 0?J:null,props:x0}}function I(k,Q){return L(k.type,Q,void 0,void 0,void 0,k.props)}function V(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function r0(k){var Q={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(J){return Q[J]})}var u0=/\/+/g;function l0(k,Q){return typeof k=="object"&&k!==null&&k.key!=null?r0(""+k.key):Q.toString(36)}function i0(){}function q(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(i0,i0):(k.status="pending",k.then(function(Q){k.status==="pending"&&(k.status="fulfilled",k.value=Q)},function(Q){k.status==="pending"&&(k.status="rejected",k.reason=Q)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function A0(k,Q,J,n0,f0){var x0=typeof k;(x0==="undefined"||x0==="boolean")&&(k=null);var m0=!1;if(k===null)m0=!0;else switch(x0){case"bigint":case"string":case"number":m0=!0;break;case"object":switch(k.$$typeof){case t:case r:m0=!0;break;case g:return m0=k._init,A0(m0(k._payload),Q,J,n0,f0)}}if(m0)return f0=f0(k),m0=n0===""?"."+l0(k,0):n0,_(f0)?(J="",m0!=null&&(J=m0.replace(u0,"$&/")+"/"),A0(f0,Q,J,"",function(T0){return T0})):f0!=null&&(V(f0)&&(f0=I(f0,J+(f0.key==null||k&&k.key===f0.key?"":(""+f0.key).replace(u0,"$&/")+"/")+m0)),Q.push(f0)),1;m0=0;var $0=n0===""?".":n0+":";if(_(k))for(var b0=0;b0<k.length;b0++)n0=k[b0],x0=$0+l0(n0,b0),m0+=A0(n0,Q,J,x0,f0);else if(b0=v(k),typeof b0=="function")for(k=b0.call(k),b0=0;!(n0=k.next()).done;)n0=n0.value,x0=$0+l0(n0,b0++),m0+=A0(n0,Q,J,x0,f0);else if(x0==="object"){if(typeof k.then=="function")return A0(q(k),Q,J,n0,f0);throw Q=String(k),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return m0}function O(k,Q,J){if(k==null)return k;var n0=[],f0=0;return A0(k,n0,"","",function(x0){return Q.call(J,x0,f0++)}),n0}function G(k){if(k._status===-1){var Q=k._result;Q=Q(),Q.then(function(J){(k._status===0||k._status===-1)&&(k._status=1,k._result=J)},function(J){(k._status===0||k._status===-1)&&(k._status=2,k._result=J)}),k._status===-1&&(k._status=0,k._result=Q)}if(k._status===1)return k._result.default;throw k._result}var X=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function K(){}return k0.Children={map:O,forEach:function(k,Q,J){O(k,function(){Q.apply(this,arguments)},J)},count:function(k){var Q=0;return O(k,function(){Q++}),Q},toArray:function(k){return O(k,function(Q){return Q})||[]},only:function(k){if(!V(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},k0.Component=B,k0.Fragment=a,k0.Profiler=s,k0.PureComponent=E,k0.StrictMode=l,k0.Suspense=p,k0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,k0.__COMPILER_RUNTIME={__proto__:null,c:function(k){return T.H.useMemoCache(k)}},k0.cache=function(k){return function(){return k.apply(null,arguments)}},k0.cloneElement=function(k,Q,J){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var n0=x({},k.props),f0=k.key,x0=void 0;if(Q!=null)for(m0 in Q.ref!==void 0&&(x0=void 0),Q.key!==void 0&&(f0=""+Q.key),Q)!R.call(Q,m0)||m0==="key"||m0==="__self"||m0==="__source"||m0==="ref"&&Q.ref===void 0||(n0[m0]=Q[m0]);var m0=arguments.length-2;if(m0===1)n0.children=J;else if(1<m0){for(var $0=Array(m0),b0=0;b0<m0;b0++)$0[b0]=arguments[b0+2];n0.children=$0}return L(k.type,f0,void 0,void 0,x0,n0)},k0.createContext=function(k){return k={$$typeof:A,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},k0.createElement=function(k,Q,J){var n0,f0={},x0=null;if(Q!=null)for(n0 in Q.key!==void 0&&(x0=""+Q.key),Q)R.call(Q,n0)&&n0!=="key"&&n0!=="__self"&&n0!=="__source"&&(f0[n0]=Q[n0]);var m0=arguments.length-2;if(m0===1)f0.children=J;else if(1<m0){for(var $0=Array(m0),b0=0;b0<m0;b0++)$0[b0]=arguments[b0+2];f0.children=$0}if(k&&k.defaultProps)for(n0 in m0=k.defaultProps,m0)f0[n0]===void 0&&(f0[n0]=m0[n0]);return L(k,x0,void 0,void 0,null,f0)},k0.createRef=function(){return{current:null}},k0.forwardRef=function(k){return{$$typeof:f,render:k}},k0.isValidElement=V,k0.lazy=function(k){return{$$typeof:g,_payload:{_status:-1,_result:k},_init:G}},k0.memo=function(k,Q){return{$$typeof:h,type:k,compare:Q===void 0?null:Q}},k0.startTransition=function(k){var Q=T.T,J={};T.T=J;try{var n0=k(),f0=T.S;f0!==null&&f0(J,n0),typeof n0=="object"&&n0!==null&&typeof n0.then=="function"&&n0.then(K,X)}catch(x0){X(x0)}finally{T.T=Q}},k0.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},k0.use=function(k){return T.H.use(k)},k0.useActionState=function(k,Q,J){return T.H.useActionState(k,Q,J)},k0.useCallback=function(k,Q){return T.H.useCallback(k,Q)},k0.useContext=function(k){return T.H.useContext(k)},k0.useDebugValue=function(){},k0.useDeferredValue=function(k,Q){return T.H.useDeferredValue(k,Q)},k0.useEffect=function(k,Q,J){var n0=T.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return n0.useEffect(k,Q)},k0.useId=function(){return T.H.useId()},k0.useImperativeHandle=function(k,Q,J){return T.H.useImperativeHandle(k,Q,J)},k0.useInsertionEffect=function(k,Q){return T.H.useInsertionEffect(k,Q)},k0.useLayoutEffect=function(k,Q){return T.H.useLayoutEffect(k,Q)},k0.useMemo=function(k,Q){return T.H.useMemo(k,Q)},k0.useOptimistic=function(k,Q){return T.H.useOptimistic(k,Q)},k0.useReducer=function(k,Q,J){return T.H.useReducer(k,Q,J)},k0.useRef=function(k){return T.H.useRef(k)},k0.useState=function(k){return T.H.useState(k)},k0.useSyncExternalStore=function(k,Q,J){return T.H.useSyncExternalStore(k,Q,J)},k0.useTransition=function(){return T.H.useTransition()},k0.version="19.1.1",k0}var Xh;function uA(){return Xh||(Xh=1,Xc.exports=p6()),Xc.exports}var Qc={exports:{}},L2={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh;function m6(){if(Qh)return L2;Qh=1;var t=uA();function r(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var l={d:{f:a,r:function(){throw Error(r(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(p,h,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:p,containerInfo:h,implementation:g}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return L2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,L2.createPortal=function(p,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(r(299));return c(p,h,null,g)},L2.flushSync=function(p){var h=A.T,g=l.p;try{if(A.T=null,l.p=2,p)return p()}finally{A.T=h,l.p=g,l.d.f()}},L2.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(p,h))},L2.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},L2.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var g=h.as,m=f(g,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,D=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?l.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:D}):g==="script"&&l.d.X(p,{crossOrigin:m,integrity:v,fetchPriority:D,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},L2.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=f(h.as,h.crossOrigin);l.d.M(p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(p)},L2.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,m=f(g,h.crossOrigin);l.d.L(p,g,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},L2.preloadModule=function(p,h){if(typeof p=="string")if(h){var g=f(h.as,h.crossOrigin);l.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(p)},L2.requestFormReset=function(p){l.d.r(p)},L2.unstable_batchedUpdates=function(p,h){return p(h)},L2.useFormState=function(p,h,g){return A.H.useFormState(p,h,g)},L2.useFormStatus=function(){return A.H.useHostTransitionStatus()},L2.version="19.1.1",L2}var Jh;function Om(){if(Jh)return Qc.exports;Jh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Qc.exports=m6(),Qc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function C6(){if(ep)return Vo;ep=1;var t=h6(),r=uA(),a=Om();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function A(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(c(e)!==e)throw Error(l(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(l(188));return n!==e?null:e}for(var o=e,i=n;;){var u=o.return;if(u===null)break;var d=u.alternate;if(d===null){if(i=u.return,i!==null){o=i;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===o)return f(u),e;if(d===i)return f(u),n;d=d.sibling}throw Error(l(188))}if(o.return!==i.return)o=u,i=d;else{for(var F=!1,S=u.child;S;){if(S===o){F=!0,o=u,i=d;break}if(S===i){F=!0,i=u,o=d;break}S=S.sibling}if(!F){for(S=d.child;S;){if(S===o){F=!0,o=d,i=u;break}if(S===i){F=!0,i=d,o=u;break}S=S.sibling}if(!F)throw Error(l(189))}}if(o.alternate!==i)throw Error(l(190))}if(o.tag!==3)throw Error(l(188));return o.stateNode.current===o?e:n}function h(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=h(e),n!==null)return n;e=e.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),N=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),r0=Symbol.for("react.memo_cache_sentinel"),u0=Symbol.iterator;function l0(e){return e===null||typeof e!="object"?null:(e=u0&&e[u0]||e["@@iterator"],typeof e=="function"?e:null)}var i0=Symbol.for("react.client.reference");function q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===i0?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case x:return"Fragment";case B:return"Profiler";case w:return"StrictMode";case T:return"Suspense";case R:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case N:return(e.displayName||"Context")+".Provider";case E:return(e._context.displayName||"Context")+".Consumer";case _:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case L:return n=e.displayName||null,n!==null?n:q(e.type)||"Memo";case I:n=e._payload,e=e._init;try{return q(e(n))}catch{}}return null}var A0=Array.isArray,O=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},K=[],k=-1;function Q(e){return{current:e}}function J(e){0>k||(e.current=K[k],K[k]=null,k--)}function n0(e,n){k++,K[k]=e.current,e.current=n}var f0=Q(null),x0=Q(null),m0=Q(null),$0=Q(null);function b0(e,n){switch(n0(m0,n),n0(x0,e),n0(f0,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?vh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=vh(n),e=Dh(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(f0),n0(f0,e)}function T0(){J(f0),J(x0),J(m0)}function H0(e){e.memoizedState!==null&&n0($0,e);var n=f0.current,o=Dh(n,e.type);n!==o&&(n0(x0,e),n0(f0,o))}function u2(e){x0.current===e&&(J(f0),J(x0)),$0.current===e&&(J($0),Oo._currentValue=X)}var M2=Object.prototype.hasOwnProperty,Ee=t.unstable_scheduleCallback,W2=t.unstable_cancelCallback,Vr=t.unstable_shouldYield,Wr=t.unstable_requestPaint,U2=t.unstable_now,Gr=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,Ca=t.unstable_UserBlockingPriority,In=t.unstable_NormalPriority,tt=t.unstable_LowPriority,Ft=t.unstable_IdlePriority,ga=t.log,qr=t.unstable_setDisableYieldValue,G2=null,i2=null;function Re(e){if(typeof ga=="function"&&qr(e),i2&&typeof i2.setStrictMode=="function")try{i2.setStrictMode(G2,e)}catch{}}var E2=Math.clz32?Math.clz32:ya,Vi=Math.log,Ue=Math.LN2;function ya(e){return e>>>=0,e===0?32:31-(Vi(e)/Ue|0)|0}var on=256,an=4194304;function nt(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ln(e,n,o){var i=e.pendingLanes;if(i===0)return 0;var u=0,d=e.suspendedLanes,F=e.pingedLanes;e=e.warmLanes;var S=i&134217727;return S!==0?(i=S&~d,i!==0?u=nt(i):(F&=S,F!==0?u=nt(F):o||(o=S&~e,o!==0&&(u=nt(o))))):(S=i&~d,S!==0?u=nt(S):F!==0?u=nt(F):o||(o=i&~e,o!==0&&(u=nt(o)))),u===0?0:n!==0&&n!==u&&(n&d)===0&&(d=u&-u,o=n&-n,d>=o||d===32&&(o&4194048)!==0)?n:u}function Ie(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function va(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var e=on;return on<<=1,(on&4194048)===0&&(on=256),e}function Da(){var e=an;return an<<=1,(an&62914560)===0&&(an=4194304),e}function Hn(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function sn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function wa(e,n,o,i,u,d){var F=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var S=e.entanglements,M=e.expirationTimes,W=e.hiddenUpdates;for(o=F&~o;0<o;){var e0=31-E2(o),o0=1<<e0;S[e0]=0,M[e0]=-1;var $=W[e0];if($!==null)for(W[e0]=null,e0=0;e0<$.length;e0++){var Y=$[e0];Y!==null&&(Y.lane&=-536870913)}o&=~o0}i!==0&&cn(e,i,0),d!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=d&~(F&~n))}function cn(e,n,o){e.pendingLanes|=n,e.suspendedLanes&=~n;var i=31-E2(n);e.entangledLanes|=n,e.entanglements[i]=e.entanglements[i]|1073741824|o&4194090}function un(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var i=31-E2(o),u=1<<i;u&n|e[i]&n&&(e[i]|=n),o&=~u}}function $r(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function P(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Ih(e.type))}function z(e,n){var o=G.p;try{return G.p=e,n()}finally{G.p=o}}var Z=Math.random().toString(36).slice(2),a0="__reactFiber$"+Z,c0="__reactProps$"+Z,p0="__reactContainer$"+Z,g0="__reactEvents$"+Z,C0="__reactListeners$"+Z,D0="__reactHandles$"+Z,F0="__reactResources$"+Z,w0="__reactMarker$"+Z;function y0(e){delete e[a0],delete e[c0],delete e[g0],delete e[C0],delete e[D0]}function S0(e){var n=e[a0];if(n)return n;for(var o=e.parentNode;o;){if(n=o[p0]||o[a0]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=Bh(e);e!==null;){if(o=e[a0])return o;e=Bh(e)}return n}e=o,o=e.parentNode}return null}function G0(e){if(e=e[a0]||e[p0]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function A2(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function f2(e){var n=e[F0];return n||(n=e[F0]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function _0(e){e[w0]=!0}var Z0=new Set,ze={};function X2(e,n){I2(e,n),I2(e+"Capture",n)}function I2(e,n){for(ze[e]=n,e=0;e<n.length;e++)Z0.add(n[e])}var ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vn={},Bt={};function rt(e){return M2.call(Bt,e)?!0:M2.call(Vn,e)?!1:ue.test(e)?Bt[e]=!0:(Vn[e]=!0,!1)}function ot(e,n,o){if(rt(n))if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var i=n.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+o)}}function at(e,n,o){if(o===null)e.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+o)}}function j0(e,n,o,i){if(i===null)e.removeAttribute(o);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(n,o,""+i)}}var v2,An;function Ae(e){if(v2===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);v2=n&&n[1]||"",An=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+v2+e+An}var s2=!1;function bt(e,n){if(!e||s2)return"";s2=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(n){var o0=function(){throw Error()};if(Object.defineProperty(o0.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o0,[])}catch(Y){var $=Y}Reflect.construct(e,[],o0)}else{try{o0.call()}catch(Y){$=Y}e.call(o0.prototype)}}else{try{throw Error()}catch(Y){$=Y}(o0=e())&&typeof o0.catch=="function"&&o0.catch(function(){})}}catch(Y){if(Y&&$&&typeof Y.stack=="string")return[Y.stack,$.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=i.DetermineComponentFrameRoot(),F=d[0],S=d[1];if(F&&S){var M=F.split(`
`),W=S.split(`
`);for(u=i=0;i<M.length&&!M[i].includes("DetermineComponentFrameRoot");)i++;for(;u<W.length&&!W[u].includes("DetermineComponentFrameRoot");)u++;if(i===M.length||u===W.length)for(i=M.length-1,u=W.length-1;1<=i&&0<=u&&M[i]!==W[u];)u--;for(;1<=i&&0<=u;i--,u--)if(M[i]!==W[u]){if(i!==1||u!==1)do if(i--,u--,0>u||M[i]!==W[u]){var e0=`
`+M[i].replace(" at new "," at ");return e.displayName&&e0.includes("<anonymous>")&&(e0=e0.replace("<anonymous>",e.displayName)),e0}while(1<=i&&0<=u);break}}}finally{s2=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Ae(o):""}function xa(e){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return bt(e.type,!1);case 11:return bt(e.type.render,!1);case 1:return bt(e.type,!0);case 31:return Ae("Activity");default:return""}}function Fa(e){try{var n="";do n+=xa(e),e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oD(e){var n=pf(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),i=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,d=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(F){i=""+F,d.call(this,F)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(F){i=""+F},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ba(e){e._valueTracker||(e._valueTracker=oD(e))}function mf(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),i="";return e&&(i=pf(e)?e.checked?"true":"false":e.value),e=i,e!==o?(n.setValue(e),!0):!1}function ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var aD=/[\n"\\]/g;function de(e){return e.replace(aD,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Wi(e,n,o,i,u,d,F,S){e.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?e.type=F:e.removeAttribute("type"),n!=null?F==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+fe(n)):e.value!==""+fe(n)&&(e.value=""+fe(n)):F!=="submit"&&F!=="reset"||e.removeAttribute("value"),n!=null?Gi(e,F,fe(n)):o!=null?Gi(e,F,fe(o)):i!=null&&e.removeAttribute("value"),u==null&&d!=null&&(e.defaultChecked=!!d),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+fe(S):e.removeAttribute("name")}function Cf(e,n,o,i,u,d,F,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;o=o!=null?""+fe(o):"",n=n!=null?""+fe(n):o,S||n===e.value||(e.value=n),e.defaultValue=n}i=i??u,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=S?e.checked:!!i,e.defaultChecked=!!i,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(e.name=F)}function Gi(e,n,o){n==="number"&&ba(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Wn(e,n,o,i){if(e=e.options,n){n={};for(var u=0;u<o.length;u++)n["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=n.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&i&&(e[o].defaultSelected=!0)}else{for(o=""+fe(o),n=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function gf(e,n,o){if(n!=null&&(n=""+fe(n),n!==e.value&&(e.value=n),o==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=o!=null?""+fe(o):""}function yf(e,n,o,i){if(n==null){if(i!=null){if(o!=null)throw Error(l(92));if(A0(i)){if(1<i.length)throw Error(l(93));i=i[0]}o=i}o==null&&(o=""),n=o}o=fe(n),e.defaultValue=o,i=e.textContent,i===o&&i!==""&&i!==null&&(e.value=i)}function Gn(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var lD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vf(e,n,o){var i=n.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?i?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":i?e.setProperty(n,o):typeof o!="number"||o===0||lD.has(n)?n==="float"?e.cssFloat=o:e[n]=(""+o).trim():e[n]=o+"px"}function Df(e,n,o){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,o!=null){for(var i in o)!o.hasOwnProperty(i)||n!=null&&n.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var u in n)i=n[u],n.hasOwnProperty(u)&&o[u]!==i&&vf(e,u,i)}else for(var d in n)n.hasOwnProperty(d)&&vf(e,d,n[d])}function qi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(e){return sD.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var $i=null;function Yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qn=null,$n=null;function wf(e){var n=G0(e);if(n&&(e=n.stateNode)){var o=e[c0]||null;e:switch(e=n.stateNode,n.type){case"input":if(Wi(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+de(""+n)+'"][type="radio"]'),n=0;n<o.length;n++){var i=o[n];if(i!==e&&i.form===e.form){var u=i[c0]||null;if(!u)throw Error(l(90));Wi(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<o.length;n++)i=o[n],i.form===e.form&&mf(i)}break e;case"textarea":gf(e,o.value,o.defaultValue);break e;case"select":n=o.value,n!=null&&Wn(e,!!o.multiple,n,!1)}}}var Ki=!1;function xf(e,n,o){if(Ki)return e(n,o);Ki=!0;try{var i=e(n);return i}finally{if(Ki=!1,(qn!==null||$n!==null)&&(fl(),qn&&(n=qn,e=$n,$n=qn=null,wf(n),e)))for(n=0;n<e.length;n++)wf(e[n])}}function Kr(e,n){var o=e.stateNode;if(o===null)return null;var i=o[c0]||null;if(i===null)return null;o=i[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(l(231,n,typeof o));return o}var lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zi=!1;if(lt)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Zi=!1}var Nt=null,Xi=null,Sa=null;function Ff(){if(Sa)return Sa;var e,n=Xi,o=n.length,i,u="value"in Nt?Nt.value:Nt.textContent,d=u.length;for(e=0;e<o&&n[e]===u[e];e++);var F=o-e;for(i=1;i<=F&&n[o-i]===u[d-i];i++);return Sa=u.slice(e,1<i?1-i:void 0)}function Ea(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ra(){return!0}function Bf(){return!1}function q2(e){function n(o,i,u,d,F){this._reactName=o,this._targetInst=u,this.type=i,this.nativeEvent=d,this.target=F,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(o=e[S],this[S]=o?o(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ra:Bf,this.isPropagationStopped=Bf,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),n}var fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=q2(fn),Xr=g({},fn,{view:0,detail:0}),cD=q2(Xr),Qi,Ji,Qr,ka=g({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(Qi=e.screenX-Qr.screenX,Ji=e.screenY-Qr.screenY):Ji=Qi=0,Qr=e),Qi)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),bf=q2(ka),uD=g({},ka,{dataTransfer:0}),AD=q2(uD),fD=g({},Xr,{relatedTarget:0}),es=q2(fD),dD=g({},fn,{animationName:0,elapsedTime:0,pseudoElement:0}),hD=q2(dD),pD=g({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mD=q2(pD),CD=g({},fn,{data:0}),Nf=q2(CD),gD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DD(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=vD[e])?!!n[e]:!1}function ts(){return DD}var wD=g({},Xr,{key:function(e){if(e.key){var n=gD[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ea(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(e){return e.type==="keypress"?Ea(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ea(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xD=q2(wD),FD=g({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sf=q2(FD),BD=g({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),bD=q2(BD),ND=g({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),SD=q2(ND),ED=g({},ka,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),RD=q2(ED),_D=g({},fn,{newState:0,oldState:0}),kD=q2(_D),TD=[9,13,27,32],ns=lt&&"CompositionEvent"in window,Jr=null;lt&&"documentMode"in document&&(Jr=document.documentMode);var MD=lt&&"TextEvent"in window&&!Jr,Ef=lt&&(!ns||Jr&&8<Jr&&11>=Jr),Rf=" ",_f=!1;function kf(e,n){switch(e){case"keyup":return TD.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function PD(e,n){switch(e){case"compositionend":return Tf(n);case"keypress":return n.which!==32?null:(_f=!0,Rf);case"textInput":return e=n.data,e===Rf&&_f?null:e;default:return null}}function LD(e,n){if(Yn)return e==="compositionend"||!ns&&kf(e,n)?(e=Ff(),Sa=Xi=Nt=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ef&&n.locale!=="ko"?null:n.data;default:return null}}var OD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!OD[e.type]:n==="textarea"}function Pf(e,n,o,i){qn?$n?$n.push(i):$n=[i]:qn=i,n=gl(n,"onChange"),0<n.length&&(o=new _a("onChange","change",null,o,i),e.push({event:o,listeners:n}))}var eo=null,to=null;function jD(e){ph(e,0)}function Ta(e){var n=A2(e);if(mf(n))return e}function Lf(e,n){if(e==="change")return n}var Of=!1;if(lt){var rs;if(lt){var os="oninput"in document;if(!os){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),os=typeof jf.oninput=="function"}rs=os}else rs=!1;Of=rs&&(!document.documentMode||9<document.documentMode)}function Uf(){eo&&(eo.detachEvent("onpropertychange",If),to=eo=null)}function If(e){if(e.propertyName==="value"&&Ta(to)){var n=[];Pf(n,to,e,Yi(e)),xf(jD,n)}}function UD(e,n,o){e==="focusin"?(Uf(),eo=n,to=o,eo.attachEvent("onpropertychange",If)):e==="focusout"&&Uf()}function ID(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ta(to)}function zD(e,n){if(e==="click")return Ta(n)}function HD(e,n){if(e==="input"||e==="change")return Ta(n)}function VD(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Q2=typeof Object.is=="function"?Object.is:VD;function no(e,n){if(Q2(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),i=Object.keys(n);if(o.length!==i.length)return!1;for(i=0;i<o.length;i++){var u=o[i];if(!M2.call(n,u)||!Q2(e[u],n[u]))return!1}return!0}function zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hf(e,n){var o=zf(e);e=0;for(var i;o;){if(o.nodeType===3){if(i=e+o.textContent.length,e<=n&&i>=n)return{node:o,offset:n-e};e=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zf(o)}}function Vf(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Vf(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Wf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ba(e.document);n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=ba(e.document)}return n}function as(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var WD=lt&&"documentMode"in document&&11>=document.documentMode,Kn=null,ls=null,ro=null,is=!1;function Gf(e,n,o){var i=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;is||Kn==null||Kn!==ba(i)||(i=Kn,"selectionStart"in i&&as(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ro&&no(ro,i)||(ro=i,i=gl(ls,"onSelect"),0<i.length&&(n=new _a("onSelect","select",null,n,o),e.push({event:n,listeners:i}),n.target=Kn)))}function dn(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var Zn={animationend:dn("Animation","AnimationEnd"),animationiteration:dn("Animation","AnimationIteration"),animationstart:dn("Animation","AnimationStart"),transitionrun:dn("Transition","TransitionRun"),transitionstart:dn("Transition","TransitionStart"),transitioncancel:dn("Transition","TransitionCancel"),transitionend:dn("Transition","TransitionEnd")},ss={},qf={};lt&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function hn(e){if(ss[e])return ss[e];if(!Zn[e])return e;var n=Zn[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in qf)return ss[e]=n[o];return e}var $f=hn("animationend"),Yf=hn("animationiteration"),Kf=hn("animationstart"),GD=hn("transitionrun"),qD=hn("transitionstart"),$D=hn("transitioncancel"),Zf=hn("transitionend"),Xf=new Map,cs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cs.push("scrollEnd");function _e(e,n){Xf.set(e,n),X2(n,[e])}var Qf=new WeakMap;function he(e,n){if(typeof e=="object"&&e!==null){var o=Qf.get(e);return o!==void 0?o:(n={value:e,source:n,stack:Fa(n)},Qf.set(e,n),n)}return{value:e,source:n,stack:Fa(n)}}var pe=[],Xn=0,us=0;function Ma(){for(var e=Xn,n=us=Xn=0;n<e;){var o=pe[n];pe[n++]=null;var i=pe[n];pe[n++]=null;var u=pe[n];pe[n++]=null;var d=pe[n];if(pe[n++]=null,i!==null&&u!==null){var F=i.pending;F===null?u.next=u:(u.next=F.next,F.next=u),i.pending=u}d!==0&&Jf(o,u,d)}}function Pa(e,n,o,i){pe[Xn++]=e,pe[Xn++]=n,pe[Xn++]=o,pe[Xn++]=i,us|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function As(e,n,o,i){return Pa(e,n,o,i),La(e)}function Qn(e,n){return Pa(e,null,null,n),La(e)}function Jf(e,n,o){e.lanes|=o;var i=e.alternate;i!==null&&(i.lanes|=o);for(var u=!1,d=e.return;d!==null;)d.childLanes|=o,i=d.alternate,i!==null&&(i.childLanes|=o),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(u=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,u&&n!==null&&(u=31-E2(o),e=d.hiddenUpdates,i=e[u],i===null?e[u]=[n]:i.push(n),n.lane=o|536870912),d):null}function La(e){if(50<Eo)throw Eo=0,Cc=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Jn={};function YD(e,n,o,i){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function J2(e,n,o,i){return new YD(e,n,o,i)}function fs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function it(e,n){var o=e.alternate;return o===null?(o=J2(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function ed(e,n){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,n=o.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Oa(e,n,o,i,u,d){var F=0;if(i=e,typeof e=="function")fs(e)&&(F=1);else if(typeof e=="string")F=Z7(e,o,f0.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=J2(31,o,n,u),e.elementType=V,e.lanes=d,e;case x:return pn(o.children,u,d,n);case w:F=8,u|=24;break;case B:return e=J2(12,o,n,u|2),e.elementType=B,e.lanes=d,e;case T:return e=J2(13,o,n,u),e.elementType=T,e.lanes=d,e;case R:return e=J2(19,o,n,u),e.elementType=R,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b:case N:F=10;break e;case E:F=9;break e;case _:F=11;break e;case L:F=14;break e;case I:F=16,i=null;break e}F=29,o=Error(l(130,e===null?"null":typeof e,"")),i=null}return n=J2(F,o,n,u),n.elementType=e,n.type=i,n.lanes=d,n}function pn(e,n,o,i){return e=J2(7,e,i,n),e.lanes=o,e}function ds(e,n,o){return e=J2(6,e,null,n),e.lanes=o,e}function hs(e,n,o){return n=J2(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var er=[],tr=0,ja=null,Ua=0,me=[],Ce=0,mn=null,st=1,ct="";function Cn(e,n){er[tr++]=Ua,er[tr++]=ja,ja=e,Ua=n}function td(e,n,o){me[Ce++]=st,me[Ce++]=ct,me[Ce++]=mn,mn=e;var i=st;e=ct;var u=32-E2(i)-1;i&=~(1<<u),o+=1;var d=32-E2(n)+u;if(30<d){var F=u-u%5;d=(i&(1<<F)-1).toString(32),i>>=F,u-=F,st=1<<32-E2(n)+u|o<<u|i,ct=d+e}else st=1<<d|o<<u|i,ct=e}function ps(e){e.return!==null&&(Cn(e,1),td(e,1,0))}function ms(e){for(;e===ja;)ja=er[--tr],er[tr]=null,Ua=er[--tr],er[tr]=null;for(;e===mn;)mn=me[--Ce],me[Ce]=null,ct=me[--Ce],me[Ce]=null,st=me[--Ce],me[Ce]=null}var z2=null,d2=null,q0=!1,gn=null,He=!1,Cs=Error(l(519));function yn(e){var n=Error(l(418,""));throw lo(he(n,e)),Cs}function nd(e){var n=e.stateNode,o=e.type,i=e.memoizedProps;switch(n[a0]=e,n[c0]=i,o){case"dialog":z0("cancel",n),z0("close",n);break;case"iframe":case"object":case"embed":z0("load",n);break;case"video":case"audio":for(o=0;o<_o.length;o++)z0(_o[o],n);break;case"source":z0("error",n);break;case"img":case"image":case"link":z0("error",n),z0("load",n);break;case"details":z0("toggle",n);break;case"input":z0("invalid",n),Cf(n,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ba(n);break;case"select":z0("invalid",n);break;case"textarea":z0("invalid",n),yf(n,i.value,i.defaultValue,i.children),Ba(n)}o=i.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||n.textContent===""+o||i.suppressHydrationWarning===!0||yh(n.textContent,o)?(i.popover!=null&&(z0("beforetoggle",n),z0("toggle",n)),i.onScroll!=null&&z0("scroll",n),i.onScrollEnd!=null&&z0("scrollend",n),i.onClick!=null&&(n.onclick=yl),n=!0):n=!1,n||yn(e)}function rd(e){for(z2=e.return;z2;)switch(z2.tag){case 5:case 13:He=!1;return;case 27:case 3:He=!0;return;default:z2=z2.return}}function oo(e){if(e!==z2)return!1;if(!q0)return rd(e),q0=!0,!1;var n=e.tag,o;if((o=n!==3&&n!==27)&&((o=n===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Tc(e.type,e.memoizedProps)),o=!o),o&&d2&&yn(e),rd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(n===0){d2=Te(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++;e=e.nextSibling}d2=null}}else n===27?(n=d2,Vt(e.type)?(e=Oc,Oc=null,d2=e):d2=n):d2=z2?Te(e.stateNode.nextSibling):null;return!0}function ao(){d2=z2=null,q0=!1}function od(){var e=gn;return e!==null&&(K2===null?K2=e:K2.push.apply(K2,e),gn=null),e}function lo(e){gn===null?gn=[e]:gn.push(e)}var gs=Q(null),vn=null,ut=null;function St(e,n,o){n0(gs,n._currentValue),n._currentValue=o}function At(e){e._currentValue=gs.current,J(gs)}function ys(e,n,o){for(;e!==null;){var i=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,i!==null&&(i.childLanes|=n)):i!==null&&(i.childLanes&n)!==n&&(i.childLanes|=n),e===o)break;e=e.return}}function vs(e,n,o,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var d=u.dependencies;if(d!==null){var F=u.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=u;for(var M=0;M<n.length;M++)if(S.context===n[M]){d.lanes|=o,S=d.alternate,S!==null&&(S.lanes|=o),ys(d.return,o,e),i||(F=null);break e}d=S.next}}else if(u.tag===18){if(F=u.return,F===null)throw Error(l(341));F.lanes|=o,d=F.alternate,d!==null&&(d.lanes|=o),ys(F,o,e),F=null}else F=u.child;if(F!==null)F.return=u;else for(F=u;F!==null;){if(F===e){F=null;break}if(u=F.sibling,u!==null){u.return=F.return,F=u;break}F=F.return}u=F}}function io(e,n,o,i){e=null;for(var u=n,d=!1;u!==null;){if(!d){if((u.flags&524288)!==0)d=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var F=u.alternate;if(F===null)throw Error(l(387));if(F=F.memoizedProps,F!==null){var S=u.type;Q2(u.pendingProps.value,F.value)||(e!==null?e.push(S):e=[S])}}else if(u===$0.current){if(F=u.alternate,F===null)throw Error(l(387));F.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Oo):e=[Oo])}u=u.return}e!==null&&vs(n,e,o,i),n.flags|=262144}function Ia(e){for(e=e.firstContext;e!==null;){if(!Q2(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dn(e){vn=e,ut=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function P2(e){return ad(vn,e)}function za(e,n){return vn===null&&Dn(e),ad(e,n)}function ad(e,n){var o=n._currentValue;if(n={context:n,memoizedValue:o,next:null},ut===null){if(e===null)throw Error(l(308));ut=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ut=ut.next=n;return o}var KD=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(o,i){e.push(i)}};this.abort=function(){n.aborted=!0,e.forEach(function(o){return o()})}},ZD=t.unstable_scheduleCallback,XD=t.unstable_NormalPriority,x2={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ds(){return{controller:new KD,data:new Map,refCount:0}}function so(e){e.refCount--,e.refCount===0&&ZD(XD,function(){e.controller.abort()})}var co=null,ws=0,nr=0,rr=null;function QD(e,n){if(co===null){var o=co=[];ws=0,nr=Fc(),rr={status:"pending",value:void 0,then:function(i){o.push(i)}}}return ws++,n.then(ld,ld),n}function ld(){if(--ws===0&&co!==null){rr!==null&&(rr.status="fulfilled");var e=co;co=null,nr=0,rr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function JD(e,n){var o=[],i={status:"pending",value:null,reason:null,then:function(u){o.push(u)}};return e.then(function(){i.status="fulfilled",i.value=n;for(var u=0;u<o.length;u++)(0,o[u])(n)},function(u){for(i.status="rejected",i.reason=u,u=0;u<o.length;u++)(0,o[u])(void 0)}),i}var id=O.S;O.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&QD(e,n),id!==null&&id(e,n)};var wn=Q(null);function xs(){var e=wn.current;return e!==null?e:t2.pooledCache}function Ha(e,n){n===null?n0(wn,wn.current):n0(wn,n.pool)}function sd(){var e=xs();return e===null?null:{parent:x2._currentValue,pool:e}}var uo=Error(l(460)),cd=Error(l(474)),Va=Error(l(542)),Fs={then:function(){}};function ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Wa(){}function Ad(e,n,o){switch(o=e[o],o===void 0?e.push(n):o!==n&&(n.then(Wa,Wa),n=o),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,dd(e),e;default:if(typeof n.status=="string")n.then(Wa,Wa);else{if(e=t2,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(i){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=i}},function(i){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=i}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,dd(e),e}throw Ao=n,uo}}var Ao=null;function fd(){if(Ao===null)throw Error(l(459));var e=Ao;return Ao=null,e}function dd(e){if(e===uo||e===Va)throw Error(l(483))}var Et=!1;function Bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bs(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Rt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _t(e,n,o){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Y0&2)!==0){var u=i.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),i.pending=n,n=La(e),Jf(e,null,o),n}return Pa(e,i,n,o),La(e)}function fo(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194048)!==0)){var i=n.lanes;i&=e.pendingLanes,o|=i,n.lanes=o,un(e,o)}}function Ns(e,n){var o=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,o===i)){var u=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var F={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?u=d=F:d=d.next=F,o=o.next}while(o!==null);d===null?u=d=n:d=d.next=n}else u=d=n;o={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:i.shared,callbacks:i.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}var Ss=!1;function ho(){if(Ss){var e=rr;if(e!==null)throw e}}function po(e,n,o,i){Ss=!1;var u=e.updateQueue;Et=!1;var d=u.firstBaseUpdate,F=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var M=S,W=M.next;M.next=null,F===null?d=W:F.next=W,F=M;var e0=e.alternate;e0!==null&&(e0=e0.updateQueue,S=e0.lastBaseUpdate,S!==F&&(S===null?e0.firstBaseUpdate=W:S.next=W,e0.lastBaseUpdate=M))}if(d!==null){var o0=u.baseState;F=0,e0=W=M=null,S=d;do{var $=S.lane&-536870913,Y=$!==S.lane;if(Y?(V0&$)===$:(i&$)===$){$!==0&&$===nr&&(Ss=!0),e0!==null&&(e0=e0.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var E0=e,B0=S;$=n;var J0=o;switch(B0.tag){case 1:if(E0=B0.payload,typeof E0=="function"){o0=E0.call(J0,o0,$);break e}o0=E0;break e;case 3:E0.flags=E0.flags&-65537|128;case 0:if(E0=B0.payload,$=typeof E0=="function"?E0.call(J0,o0,$):E0,$==null)break e;o0=g({},o0,$);break e;case 2:Et=!0}}$=S.callback,$!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=u.callbacks,Y===null?u.callbacks=[$]:Y.push($))}else Y={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},e0===null?(W=e0=Y,M=o0):e0=e0.next=Y,F|=$;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,u.lastBaseUpdate=Y,u.shared.pending=null}}while(!0);e0===null&&(M=o0),u.baseState=M,u.firstBaseUpdate=W,u.lastBaseUpdate=e0,d===null&&(u.shared.lanes=0),Ut|=F,e.lanes=F,e.memoizedState=o0}}function hd(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function pd(e,n){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)hd(o[e],n)}var or=Q(null),Ga=Q(0);function md(e,n){e=gt,n0(Ga,e),n0(or,n),gt=e|n.baseLanes}function Es(){n0(Ga,gt),n0(or,or.current)}function Rs(){gt=Ga.current,J(or),J(Ga)}var kt=0,M0=null,X0=null,D2=null,qa=!1,ar=!1,xn=!1,$a=0,mo=0,lr=null,e7=0;function C2(){throw Error(l(321))}function _s(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!Q2(e[o],n[o]))return!1;return!0}function ks(e,n,o,i,u,d){return kt=d,M0=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,O.H=e===null||e.memoizedState===null?Jd:e3,xn=!1,d=o(i,u),xn=!1,ar&&(d=gd(n,o,i,u)),Cd(e),d}function Cd(e){O.H=Ja;var n=X0!==null&&X0.next!==null;if(kt=0,D2=X0=M0=null,qa=!1,mo=0,lr=null,n)throw Error(l(300));e===null||B2||(e=e.dependencies,e!==null&&Ia(e)&&(B2=!0))}function gd(e,n,o,i){M0=e;var u=0;do{if(ar&&(lr=null),mo=0,ar=!1,25<=u)throw Error(l(301));if(u+=1,D2=X0=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}O.H=i7,d=n(o,i)}while(ar);return d}function t7(){var e=O.H,n=e.useState()[0];return n=typeof n.then=="function"?Co(n):n,e=e.useState()[0],(X0!==null?X0.memoizedState:null)!==e&&(M0.flags|=1024),n}function Ts(){var e=$a!==0;return $a=0,e}function Ms(e,n,o){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~o}function Ps(e){if(qa){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}qa=!1}kt=0,D2=X0=M0=null,ar=!1,mo=$a=0,lr=null}function $2(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return D2===null?M0.memoizedState=D2=e:D2=D2.next=e,D2}function w2(){if(X0===null){var e=M0.alternate;e=e!==null?e.memoizedState:null}else e=X0.next;var n=D2===null?M0.memoizedState:D2.next;if(n!==null)D2=n,X0=e;else{if(e===null)throw M0.alternate===null?Error(l(467)):Error(l(310));X0=e,e={memoizedState:X0.memoizedState,baseState:X0.baseState,baseQueue:X0.baseQueue,queue:X0.queue,next:null},D2===null?M0.memoizedState=D2=e:D2=D2.next=e}return D2}function Ls(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Co(e){var n=mo;return mo+=1,lr===null&&(lr=[]),e=Ad(lr,e,n),n=M0,(D2===null?n.memoizedState:D2.next)===null&&(n=n.alternate,O.H=n===null||n.memoizedState===null?Jd:e3),e}function Ya(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Co(e);if(e.$$typeof===N)return P2(e)}throw Error(l(438,String(e)))}function Os(e){var n=null,o=M0.updateQueue;if(o!==null&&(n=o.memoCache),n==null){var i=M0.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(n={data:i.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),o===null&&(o=Ls(),M0.updateQueue=o),o.memoCache=n,o=n.data[n.index],o===void 0)for(o=n.data[n.index]=Array(e),i=0;i<e;i++)o[i]=r0;return n.index++,o}function ft(e,n){return typeof n=="function"?n(e):n}function Ka(e){var n=w2();return js(n,X0,e)}function js(e,n,o){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=o;var u=e.baseQueue,d=i.pending;if(d!==null){if(u!==null){var F=u.next;u.next=d.next,d.next=F}n.baseQueue=u=d,i.pending=null}if(d=e.baseState,u===null)e.memoizedState=d;else{n=u.next;var S=F=null,M=null,W=n,e0=!1;do{var o0=W.lane&-536870913;if(o0!==W.lane?(V0&o0)===o0:(kt&o0)===o0){var $=W.revertLane;if($===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),o0===nr&&(e0=!0);else if((kt&$)===$){W=W.next,$===nr&&(e0=!0);continue}else o0={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},M===null?(S=M=o0,F=d):M=M.next=o0,M0.lanes|=$,Ut|=$;o0=W.action,xn&&o(d,o0),d=W.hasEagerState?W.eagerState:o(d,o0)}else $={lane:o0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},M===null?(S=M=$,F=d):M=M.next=$,M0.lanes|=o0,Ut|=o0;W=W.next}while(W!==null&&W!==n);if(M===null?F=d:M.next=S,!Q2(d,e.memoizedState)&&(B2=!0,e0&&(o=rr,o!==null)))throw o;e.memoizedState=d,e.baseState=F,e.baseQueue=M,i.lastRenderedState=d}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Us(e){var n=w2(),o=n.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=e;var i=o.dispatch,u=o.pending,d=n.memoizedState;if(u!==null){o.pending=null;var F=u=u.next;do d=e(d,F.action),F=F.next;while(F!==u);Q2(d,n.memoizedState)||(B2=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),o.lastRenderedState=d}return[d,i]}function yd(e,n,o){var i=M0,u=w2(),d=q0;if(d){if(o===void 0)throw Error(l(407));o=o()}else o=n();var F=!Q2((X0||u).memoizedState,o);F&&(u.memoizedState=o,B2=!0),u=u.queue;var S=wd.bind(null,i,u,e);if(go(2048,8,S,[e]),u.getSnapshot!==n||F||D2!==null&&D2.memoizedState.tag&1){if(i.flags|=2048,ir(9,Za(),Dd.bind(null,i,u,o,n),null),t2===null)throw Error(l(349));d||(kt&124)!==0||vd(i,n,o)}return o}function vd(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=M0.updateQueue,n===null?(n=Ls(),M0.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function Dd(e,n,o,i){n.value=o,n.getSnapshot=i,xd(n)&&Fd(e)}function wd(e,n,o){return o(function(){xd(n)&&Fd(e)})}function xd(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!Q2(e,o)}catch{return!0}}function Fd(e){var n=Qn(e,2);n!==null&&oe(n,e,2)}function Is(e){var n=$2();if(typeof e=="function"){var o=e;if(e=o(),xn){Re(!0);try{o()}finally{Re(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:e},n}function Bd(e,n,o,i){return e.baseState=o,js(e,X0,typeof i=="function"?i:ft)}function n7(e,n,o,i,u){if(Qa(e))throw Error(l(485));if(e=n.action,e!==null){var d={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){d.listeners.push(F)}};O.T!==null?o(!0):d.isTransition=!1,i(d),o=n.pending,o===null?(d.next=n.pending=d,bd(n,d)):(d.next=o.next,n.pending=o.next=d)}}function bd(e,n){var o=n.action,i=n.payload,u=e.state;if(n.isTransition){var d=O.T,F={};O.T=F;try{var S=o(u,i),M=O.S;M!==null&&M(F,S),Nd(e,n,S)}catch(W){zs(e,n,W)}finally{O.T=d}}else try{d=o(u,i),Nd(e,n,d)}catch(W){zs(e,n,W)}}function Nd(e,n,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(i){Sd(e,n,i)},function(i){return zs(e,n,i)}):Sd(e,n,o)}function Sd(e,n,o){n.status="fulfilled",n.value=o,Ed(n),e.state=o,n=e.pending,n!==null&&(o=n.next,o===n?e.pending=null:(o=o.next,n.next=o,bd(e,o)))}function zs(e,n,o){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do n.status="rejected",n.reason=o,Ed(n),n=n.next;while(n!==i)}e.action=null}function Ed(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Rd(e,n){return n}function _d(e,n){if(q0){var o=t2.formState;if(o!==null){e:{var i=M0;if(q0){if(d2){t:{for(var u=d2,d=He;u.nodeType!==8;){if(!d){u=null;break t}if(u=Te(u.nextSibling),u===null){u=null;break t}}d=u.data,u=d==="F!"||d==="F"?u:null}if(u){d2=Te(u.nextSibling),i=u.data==="F!";break e}}yn(i)}i=!1}i&&(n=o[0])}}return o=$2(),o.memoizedState=o.baseState=n,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rd,lastRenderedState:n},o.queue=i,o=Zd.bind(null,M0,i),i.dispatch=o,i=Is(!1),d=qs.bind(null,M0,!1,i.queue),i=$2(),u={state:n,dispatch:null,action:e,pending:null},i.queue=u,o=n7.bind(null,M0,u,d,o),u.dispatch=o,i.memoizedState=e,[n,o,!1]}function kd(e){var n=w2();return Td(n,X0,e)}function Td(e,n,o){if(n=js(e,n,Rd)[0],e=Ka(ft)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var i=Co(n)}catch(F){throw F===uo?Va:F}else i=n;n=w2();var u=n.queue,d=u.dispatch;return o!==n.memoizedState&&(M0.flags|=2048,ir(9,Za(),r7.bind(null,u,o),null)),[i,d,e]}function r7(e,n){e.action=n}function Md(e){var n=w2(),o=X0;if(o!==null)return Td(n,o,e);w2(),n=n.memoizedState,o=w2();var i=o.queue.dispatch;return o.memoizedState=e,[n,i,!1]}function ir(e,n,o,i){return e={tag:e,create:o,deps:i,inst:n,next:null},n=M0.updateQueue,n===null&&(n=Ls(),M0.updateQueue=n),o=n.lastEffect,o===null?n.lastEffect=e.next=e:(i=o.next,o.next=e,e.next=i,n.lastEffect=e),e}function Za(){return{destroy:void 0,resource:void 0}}function Pd(){return w2().memoizedState}function Xa(e,n,o,i){var u=$2();i=i===void 0?null:i,M0.flags|=e,u.memoizedState=ir(1|n,Za(),o,i)}function go(e,n,o,i){var u=w2();i=i===void 0?null:i;var d=u.memoizedState.inst;X0!==null&&i!==null&&_s(i,X0.memoizedState.deps)?u.memoizedState=ir(n,d,o,i):(M0.flags|=e,u.memoizedState=ir(1|n,d,o,i))}function Ld(e,n){Xa(8390656,8,e,n)}function Od(e,n){go(2048,8,e,n)}function jd(e,n){return go(4,2,e,n)}function Ud(e,n){return go(4,4,e,n)}function Id(e,n){if(typeof n=="function"){e=e();var o=n(e);return function(){typeof o=="function"?o():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function zd(e,n,o){o=o!=null?o.concat([e]):null,go(4,4,Id.bind(null,n,e),o)}function Hs(){}function Hd(e,n){var o=w2();n=n===void 0?null:n;var i=o.memoizedState;return n!==null&&_s(n,i[1])?i[0]:(o.memoizedState=[e,n],e)}function Vd(e,n){var o=w2();n=n===void 0?null:n;var i=o.memoizedState;if(n!==null&&_s(n,i[1]))return i[0];if(i=e(),xn){Re(!0);try{e()}finally{Re(!1)}}return o.memoizedState=[i,n],i}function Vs(e,n,o){return o===void 0||(kt&1073741824)!==0?e.memoizedState=n:(e.memoizedState=o,e=q3(),M0.lanes|=e,Ut|=e,o)}function Wd(e,n,o,i){return Q2(o,n)?o:or.current!==null?(e=Vs(e,o,i),Q2(e,n)||(B2=!0),e):(kt&42)===0?(B2=!0,e.memoizedState=o):(e=q3(),M0.lanes|=e,Ut|=e,n)}function Gd(e,n,o,i,u){var d=G.p;G.p=d!==0&&8>d?d:8;var F=O.T,S={};O.T=S,qs(e,!1,n,o);try{var M=u(),W=O.S;if(W!==null&&W(S,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var e0=JD(M,i);yo(e,n,e0,re(e))}else yo(e,n,i,re(e))}catch(o0){yo(e,n,{then:function(){},status:"rejected",reason:o0},re())}finally{G.p=d,O.T=F}}function o7(){}function Ws(e,n,o,i){if(e.tag!==5)throw Error(l(476));var u=qd(e).queue;Gd(e,u,n,X,o===null?o7:function(){return $d(e),o(i)})}function qd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:X},next:null};var o={};return n.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:o},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function $d(e){var n=qd(e).next.queue;yo(e,n,{},re())}function Gs(){return P2(Oo)}function Yd(){return w2().memoizedState}function Kd(){return w2().memoizedState}function a7(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var o=re();e=Rt(o);var i=_t(n,e,o);i!==null&&(oe(i,n,o),fo(i,n,o)),n={cache:Ds()},e.payload=n;return}n=n.return}}function l7(e,n,o){var i=re();o={lane:i,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qa(e)?Xd(n,o):(o=As(e,n,o,i),o!==null&&(oe(o,e,i),Qd(o,n,i)))}function Zd(e,n,o){var i=re();yo(e,n,o,i)}function yo(e,n,o,i){var u={lane:i,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Xd(n,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var F=n.lastRenderedState,S=d(F,o);if(u.hasEagerState=!0,u.eagerState=S,Q2(S,F))return Pa(e,n,u,0),t2===null&&Ma(),!1}catch{}finally{}if(o=As(e,n,u,i),o!==null)return oe(o,e,i),Qd(o,n,i),!0}return!1}function qs(e,n,o,i){if(i={lane:2,revertLane:Fc(),action:i,hasEagerState:!1,eagerState:null,next:null},Qa(e)){if(n)throw Error(l(479))}else n=As(e,o,i,2),n!==null&&oe(n,e,2)}function Qa(e){var n=e.alternate;return e===M0||n!==null&&n===M0}function Xd(e,n){ar=qa=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Qd(e,n,o){if((o&4194048)!==0){var i=n.lanes;i&=e.pendingLanes,o|=i,n.lanes=o,un(e,o)}}var Ja={readContext:P2,use:Ya,useCallback:C2,useContext:C2,useEffect:C2,useImperativeHandle:C2,useLayoutEffect:C2,useInsertionEffect:C2,useMemo:C2,useReducer:C2,useRef:C2,useState:C2,useDebugValue:C2,useDeferredValue:C2,useTransition:C2,useSyncExternalStore:C2,useId:C2,useHostTransitionStatus:C2,useFormState:C2,useActionState:C2,useOptimistic:C2,useMemoCache:C2,useCacheRefresh:C2},Jd={readContext:P2,use:Ya,useCallback:function(e,n){return $2().memoizedState=[e,n===void 0?null:n],e},useContext:P2,useEffect:Ld,useImperativeHandle:function(e,n,o){o=o!=null?o.concat([e]):null,Xa(4194308,4,Id.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Xa(4194308,4,e,n)},useInsertionEffect:function(e,n){Xa(4,2,e,n)},useMemo:function(e,n){var o=$2();n=n===void 0?null:n;var i=e();if(xn){Re(!0);try{e()}finally{Re(!1)}}return o.memoizedState=[i,n],i},useReducer:function(e,n,o){var i=$2();if(o!==void 0){var u=o(n);if(xn){Re(!0);try{o(n)}finally{Re(!1)}}}else u=n;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=l7.bind(null,M0,e),[i.memoizedState,e]},useRef:function(e){var n=$2();return e={current:e},n.memoizedState=e},useState:function(e){e=Is(e);var n=e.queue,o=Zd.bind(null,M0,n);return n.dispatch=o,[e.memoizedState,o]},useDebugValue:Hs,useDeferredValue:function(e,n){var o=$2();return Vs(o,e,n)},useTransition:function(){var e=Is(!1);return e=Gd.bind(null,M0,e.queue,!0,!1),$2().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,o){var i=M0,u=$2();if(q0){if(o===void 0)throw Error(l(407));o=o()}else{if(o=n(),t2===null)throw Error(l(349));(V0&124)!==0||vd(i,n,o)}u.memoizedState=o;var d={value:o,getSnapshot:n};return u.queue=d,Ld(wd.bind(null,i,d,e),[e]),i.flags|=2048,ir(9,Za(),Dd.bind(null,i,d,o,n),null),o},useId:function(){var e=$2(),n=t2.identifierPrefix;if(q0){var o=ct,i=st;o=(i&~(1<<32-E2(i)-1)).toString(32)+o,n=""+n+"R"+o,o=$a++,0<o&&(n+="H"+o.toString(32)),n+=""}else o=e7++,n=""+n+"r"+o.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:Gs,useFormState:_d,useActionState:_d,useOptimistic:function(e){var n=$2();n.memoizedState=n.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=o,n=qs.bind(null,M0,!0,o),o.dispatch=n,[e,n]},useMemoCache:Os,useCacheRefresh:function(){return $2().memoizedState=a7.bind(null,M0)}},e3={readContext:P2,use:Ya,useCallback:Hd,useContext:P2,useEffect:Od,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Ud,useMemo:Vd,useReducer:Ka,useRef:Pd,useState:function(){return Ka(ft)},useDebugValue:Hs,useDeferredValue:function(e,n){var o=w2();return Wd(o,X0.memoizedState,e,n)},useTransition:function(){var e=Ka(ft)[0],n=w2().memoizedState;return[typeof e=="boolean"?e:Co(e),n]},useSyncExternalStore:yd,useId:Yd,useHostTransitionStatus:Gs,useFormState:kd,useActionState:kd,useOptimistic:function(e,n){var o=w2();return Bd(o,X0,e,n)},useMemoCache:Os,useCacheRefresh:Kd},i7={readContext:P2,use:Ya,useCallback:Hd,useContext:P2,useEffect:Od,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Ud,useMemo:Vd,useReducer:Us,useRef:Pd,useState:function(){return Us(ft)},useDebugValue:Hs,useDeferredValue:function(e,n){var o=w2();return X0===null?Vs(o,e,n):Wd(o,X0.memoizedState,e,n)},useTransition:function(){var e=Us(ft)[0],n=w2().memoizedState;return[typeof e=="boolean"?e:Co(e),n]},useSyncExternalStore:yd,useId:Yd,useHostTransitionStatus:Gs,useFormState:Md,useActionState:Md,useOptimistic:function(e,n){var o=w2();return X0!==null?Bd(o,X0,e,n):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Os,useCacheRefresh:Kd},sr=null,vo=0;function el(e){var n=vo;return vo+=1,sr===null&&(sr=[]),Ad(sr,e,n)}function Do(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function tl(e,n){throw n.$$typeof===m?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function t3(e){var n=e._init;return n(e._payload)}function n3(e){function n(U,j){if(e){var H=U.deletions;H===null?(U.deletions=[j],U.flags|=16):H.push(j)}}function o(U,j){if(!e)return null;for(;j!==null;)n(U,j),j=j.sibling;return null}function i(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function u(U,j){return U=it(U,j),U.index=0,U.sibling=null,U}function d(U,j,H){return U.index=H,e?(H=U.alternate,H!==null?(H=H.index,H<j?(U.flags|=67108866,j):H):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function F(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function S(U,j,H,t0){return j===null||j.tag!==6?(j=ds(H,U.mode,t0),j.return=U,j):(j=u(j,H),j.return=U,j)}function M(U,j,H,t0){var d0=H.type;return d0===x?e0(U,j,H.props.children,t0,H.key):j!==null&&(j.elementType===d0||typeof d0=="object"&&d0!==null&&d0.$$typeof===I&&t3(d0)===j.type)?(j=u(j,H.props),Do(j,H),j.return=U,j):(j=Oa(H.type,H.key,H.props,null,U.mode,t0),Do(j,H),j.return=U,j)}function W(U,j,H,t0){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=hs(H,U.mode,t0),j.return=U,j):(j=u(j,H.children||[]),j.return=U,j)}function e0(U,j,H,t0,d0){return j===null||j.tag!==7?(j=pn(H,U.mode,t0,d0),j.return=U,j):(j=u(j,H),j.return=U,j)}function o0(U,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=ds(""+j,U.mode,H),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return H=Oa(j.type,j.key,j.props,null,U.mode,H),Do(H,j),H.return=U,H;case D:return j=hs(j,U.mode,H),j.return=U,j;case I:var t0=j._init;return j=t0(j._payload),o0(U,j,H)}if(A0(j)||l0(j))return j=pn(j,U.mode,H,null),j.return=U,j;if(typeof j.then=="function")return o0(U,el(j),H);if(j.$$typeof===N)return o0(U,za(U,j),H);tl(U,j)}return null}function $(U,j,H,t0){var d0=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return d0!==null?null:S(U,j,""+H,t0);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case v:return H.key===d0?M(U,j,H,t0):null;case D:return H.key===d0?W(U,j,H,t0):null;case I:return d0=H._init,H=d0(H._payload),$(U,j,H,t0)}if(A0(H)||l0(H))return d0!==null?null:e0(U,j,H,t0,null);if(typeof H.then=="function")return $(U,j,el(H),t0);if(H.$$typeof===N)return $(U,j,za(U,H),t0);tl(U,H)}return null}function Y(U,j,H,t0,d0){if(typeof t0=="string"&&t0!==""||typeof t0=="number"||typeof t0=="bigint")return U=U.get(H)||null,S(j,U,""+t0,d0);if(typeof t0=="object"&&t0!==null){switch(t0.$$typeof){case v:return U=U.get(t0.key===null?H:t0.key)||null,M(j,U,t0,d0);case D:return U=U.get(t0.key===null?H:t0.key)||null,W(j,U,t0,d0);case I:var U0=t0._init;return t0=U0(t0._payload),Y(U,j,H,t0,d0)}if(A0(t0)||l0(t0))return U=U.get(H)||null,e0(j,U,t0,d0,null);if(typeof t0.then=="function")return Y(U,j,H,el(t0),d0);if(t0.$$typeof===N)return Y(U,j,H,za(j,t0),d0);tl(j,t0)}return null}function E0(U,j,H,t0){for(var d0=null,U0=null,v0=j,N0=j=0,N2=null;v0!==null&&N0<H.length;N0++){v0.index>N0?(N2=v0,v0=null):N2=v0.sibling;var W0=$(U,v0,H[N0],t0);if(W0===null){v0===null&&(v0=N2);break}e&&v0&&W0.alternate===null&&n(U,v0),j=d(W0,j,N0),U0===null?d0=W0:U0.sibling=W0,U0=W0,v0=N2}if(N0===H.length)return o(U,v0),q0&&Cn(U,N0),d0;if(v0===null){for(;N0<H.length;N0++)v0=o0(U,H[N0],t0),v0!==null&&(j=d(v0,j,N0),U0===null?d0=v0:U0.sibling=v0,U0=v0);return q0&&Cn(U,N0),d0}for(v0=i(v0);N0<H.length;N0++)N2=Y(v0,U,N0,H[N0],t0),N2!==null&&(e&&N2.alternate!==null&&v0.delete(N2.key===null?N0:N2.key),j=d(N2,j,N0),U0===null?d0=N2:U0.sibling=N2,U0=N2);return e&&v0.forEach(function(Yt){return n(U,Yt)}),q0&&Cn(U,N0),d0}function B0(U,j,H,t0){if(H==null)throw Error(l(151));for(var d0=null,U0=null,v0=j,N0=j=0,N2=null,W0=H.next();v0!==null&&!W0.done;N0++,W0=H.next()){v0.index>N0?(N2=v0,v0=null):N2=v0.sibling;var Yt=$(U,v0,W0.value,t0);if(Yt===null){v0===null&&(v0=N2);break}e&&v0&&Yt.alternate===null&&n(U,v0),j=d(Yt,j,N0),U0===null?d0=Yt:U0.sibling=Yt,U0=Yt,v0=N2}if(W0.done)return o(U,v0),q0&&Cn(U,N0),d0;if(v0===null){for(;!W0.done;N0++,W0=H.next())W0=o0(U,W0.value,t0),W0!==null&&(j=d(W0,j,N0),U0===null?d0=W0:U0.sibling=W0,U0=W0);return q0&&Cn(U,N0),d0}for(v0=i(v0);!W0.done;N0++,W0=H.next())W0=Y(v0,U,N0,W0.value,t0),W0!==null&&(e&&W0.alternate!==null&&v0.delete(W0.key===null?N0:W0.key),j=d(W0,j,N0),U0===null?d0=W0:U0.sibling=W0,U0=W0);return e&&v0.forEach(function(s6){return n(U,s6)}),q0&&Cn(U,N0),d0}function J0(U,j,H,t0){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case v:e:{for(var d0=H.key;j!==null;){if(j.key===d0){if(d0=H.type,d0===x){if(j.tag===7){o(U,j.sibling),t0=u(j,H.props.children),t0.return=U,U=t0;break e}}else if(j.elementType===d0||typeof d0=="object"&&d0!==null&&d0.$$typeof===I&&t3(d0)===j.type){o(U,j.sibling),t0=u(j,H.props),Do(t0,H),t0.return=U,U=t0;break e}o(U,j);break}else n(U,j);j=j.sibling}H.type===x?(t0=pn(H.props.children,U.mode,t0,H.key),t0.return=U,U=t0):(t0=Oa(H.type,H.key,H.props,null,U.mode,t0),Do(t0,H),t0.return=U,U=t0)}return F(U);case D:e:{for(d0=H.key;j!==null;){if(j.key===d0)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){o(U,j.sibling),t0=u(j,H.children||[]),t0.return=U,U=t0;break e}else{o(U,j);break}else n(U,j);j=j.sibling}t0=hs(H,U.mode,t0),t0.return=U,U=t0}return F(U);case I:return d0=H._init,H=d0(H._payload),J0(U,j,H,t0)}if(A0(H))return E0(U,j,H,t0);if(l0(H)){if(d0=l0(H),typeof d0!="function")throw Error(l(150));return H=d0.call(H),B0(U,j,H,t0)}if(typeof H.then=="function")return J0(U,j,el(H),t0);if(H.$$typeof===N)return J0(U,j,za(U,H),t0);tl(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(o(U,j.sibling),t0=u(j,H),t0.return=U,U=t0):(o(U,j),t0=ds(H,U.mode,t0),t0.return=U,U=t0),F(U)):o(U,j)}return function(U,j,H,t0){try{vo=0;var d0=J0(U,j,H,t0);return sr=null,d0}catch(v0){if(v0===uo||v0===Va)throw v0;var U0=J2(29,v0,null,U.mode);return U0.lanes=t0,U0.return=U,U0}finally{}}}var cr=n3(!0),r3=n3(!1),ge=Q(null),Ve=null;function Tt(e){var n=e.alternate;n0(F2,F2.current&1),n0(ge,e),Ve===null&&(n===null||or.current!==null||n.memoizedState!==null)&&(Ve=e)}function o3(e){if(e.tag===22){if(n0(F2,F2.current),n0(ge,e),Ve===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Ve=e)}}else Mt()}function Mt(){n0(F2,F2.current),n0(ge,ge.current)}function dt(e){J(ge),Ve===e&&(Ve=null),J(F2)}var F2=Q(0);function nl(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Lc(o)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function $s(e,n,o,i){n=e.memoizedState,o=o(i,n),o=o==null?n:g({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ys={enqueueSetState:function(e,n,o){e=e._reactInternals;var i=re(),u=Rt(i);u.payload=n,o!=null&&(u.callback=o),n=_t(e,u,i),n!==null&&(oe(n,e,i),fo(n,e,i))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var i=re(),u=Rt(i);u.tag=1,u.payload=n,o!=null&&(u.callback=o),n=_t(e,u,i),n!==null&&(oe(n,e,i),fo(n,e,i))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=re(),i=Rt(o);i.tag=2,n!=null&&(i.callback=n),n=_t(e,i,o),n!==null&&(oe(n,e,o),fo(n,e,o))}};function a3(e,n,o,i,u,d,F){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,F):n.prototype&&n.prototype.isPureReactComponent?!no(o,i)||!no(u,d):!0}function l3(e,n,o,i){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,i),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,i),n.state!==e&&Ys.enqueueReplaceState(n,n.state,null)}function Fn(e,n){var o=n;if("ref"in n){o={};for(var i in n)i!=="ref"&&(o[i]=n[i])}if(e=e.defaultProps){o===n&&(o=g({},o));for(var u in e)o[u]===void 0&&(o[u]=e[u])}return o}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function i3(e){rl(e)}function s3(e){console.error(e)}function c3(e){rl(e)}function ol(e,n){try{var o=e.onUncaughtError;o(n.value,{componentStack:n.stack})}catch(i){setTimeout(function(){throw i})}}function u3(e,n,o){try{var i=e.onCaughtError;i(o.value,{componentStack:o.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Ks(e,n,o){return o=Rt(o),o.tag=3,o.payload={element:null},o.callback=function(){ol(e,n)},o}function A3(e){return e=Rt(e),e.tag=3,e}function f3(e,n,o,i){var u=o.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;e.payload=function(){return u(d)},e.callback=function(){u3(n,o,i)}}var F=o.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(e.callback=function(){u3(n,o,i),typeof u!="function"&&(It===null?It=new Set([this]):It.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})})}function s7(e,n,o,i,u){if(o.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(n=o.alternate,n!==null&&io(n,o,u,!0),o=ge.current,o!==null){switch(o.tag){case 13:return Ve===null?yc():o.alternate===null&&h2===0&&(h2=3),o.flags&=-257,o.flags|=65536,o.lanes=u,i===Fs?o.flags|=16384:(n=o.updateQueue,n===null?o.updateQueue=new Set([i]):n.add(i),Dc(e,i,u)),!1;case 22:return o.flags|=65536,i===Fs?o.flags|=16384:(n=o.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([i])},o.updateQueue=n):(o=n.retryQueue,o===null?n.retryQueue=new Set([i]):o.add(i)),Dc(e,i,u)),!1}throw Error(l(435,o.tag))}return Dc(e,i,u),yc(),!1}if(q0)return n=ge.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,i!==Cs&&(e=Error(l(422),{cause:i}),lo(he(e,o)))):(i!==Cs&&(n=Error(l(423),{cause:i}),lo(he(n,o))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=he(i,o),u=Ks(e.stateNode,i,u),Ns(e,u),h2!==4&&(h2=2)),!1;var d=Error(l(520),{cause:i});if(d=he(d,o),So===null?So=[d]:So.push(d),h2!==4&&(h2=2),n===null)return!0;i=he(i,o),o=n;do{switch(o.tag){case 3:return o.flags|=65536,e=u&-u,o.lanes|=e,e=Ks(o.stateNode,i,e),Ns(o,e),!1;case 1:if(n=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(It===null||!It.has(d))))return o.flags|=65536,u&=-u,o.lanes|=u,u=A3(u),f3(u,e,o,i),Ns(o,u),!1}o=o.return}while(o!==null);return!1}var d3=Error(l(461)),B2=!1;function R2(e,n,o,i){n.child=e===null?r3(n,null,o,i):cr(n,e.child,o,i)}function h3(e,n,o,i,u){o=o.render;var d=n.ref;if("ref"in i){var F={};for(var S in i)S!=="ref"&&(F[S]=i[S])}else F=i;return Dn(n),i=ks(e,n,o,F,d,u),S=Ts(),e!==null&&!B2?(Ms(e,n,u),ht(e,n,u)):(q0&&S&&ps(n),n.flags|=1,R2(e,n,i,u),n.child)}function p3(e,n,o,i,u){if(e===null){var d=o.type;return typeof d=="function"&&!fs(d)&&d.defaultProps===void 0&&o.compare===null?(n.tag=15,n.type=d,m3(e,n,d,i,u)):(e=Oa(o.type,null,i,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!rc(e,u)){var F=d.memoizedProps;if(o=o.compare,o=o!==null?o:no,o(F,i)&&e.ref===n.ref)return ht(e,n,u)}return n.flags|=1,e=it(d,i),e.ref=n.ref,e.return=n,n.child=e}function m3(e,n,o,i,u){if(e!==null){var d=e.memoizedProps;if(no(d,i)&&e.ref===n.ref)if(B2=!1,n.pendingProps=i=d,rc(e,u))(e.flags&131072)!==0&&(B2=!0);else return n.lanes=e.lanes,ht(e,n,u)}return Zs(e,n,o,i,u)}function C3(e,n,o){var i=n.pendingProps,u=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if((n.flags&128)!==0){if(i=d!==null?d.baseLanes|o:o,e!==null){for(u=n.child=e.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;n.childLanes=d&~i}else n.childLanes=0,n.child=null;return g3(e,n,i,o)}if((o&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ha(n,d!==null?d.cachePool:null),d!==null?md(n,d):Es(),o3(n);else return n.lanes=n.childLanes=536870912,g3(e,n,d!==null?d.baseLanes|o:o,o)}else d!==null?(Ha(n,d.cachePool),md(n,d),Mt(),n.memoizedState=null):(e!==null&&Ha(n,null),Es(),Mt());return R2(e,n,u,o),n.child}function g3(e,n,o,i){var u=xs();return u=u===null?null:{parent:x2._currentValue,pool:u},n.memoizedState={baseLanes:o,cachePool:u},e!==null&&Ha(n,null),Es(),o3(n),e!==null&&io(e,n,i,!0),null}function al(e,n){var o=n.ref;if(o===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(l(284));(e===null||e.ref!==o)&&(n.flags|=4194816)}}function Zs(e,n,o,i,u){return Dn(n),o=ks(e,n,o,i,void 0,u),i=Ts(),e!==null&&!B2?(Ms(e,n,u),ht(e,n,u)):(q0&&i&&ps(n),n.flags|=1,R2(e,n,o,u),n.child)}function y3(e,n,o,i,u,d){return Dn(n),n.updateQueue=null,o=gd(n,i,o,u),Cd(e),i=Ts(),e!==null&&!B2?(Ms(e,n,d),ht(e,n,d)):(q0&&i&&ps(n),n.flags|=1,R2(e,n,o,d),n.child)}function v3(e,n,o,i,u){if(Dn(n),n.stateNode===null){var d=Jn,F=o.contextType;typeof F=="object"&&F!==null&&(d=P2(F)),d=new o(i,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ys,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=i,d.state=n.memoizedState,d.refs={},Bs(n),F=o.contextType,d.context=typeof F=="object"&&F!==null?P2(F):Jn,d.state=n.memoizedState,F=o.getDerivedStateFromProps,typeof F=="function"&&($s(n,o,F,i),d.state=n.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(F=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),F!==d.state&&Ys.enqueueReplaceState(d,d.state,null),po(n,i,d,u),ho(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),i=!0}else if(e===null){d=n.stateNode;var S=n.memoizedProps,M=Fn(o,S);d.props=M;var W=d.context,e0=o.contextType;F=Jn,typeof e0=="object"&&e0!==null&&(F=P2(e0));var o0=o.getDerivedStateFromProps;e0=typeof o0=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,e0||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||W!==F)&&l3(n,d,i,F),Et=!1;var $=n.memoizedState;d.state=$,po(n,i,d,u),ho(),W=n.memoizedState,S||$!==W||Et?(typeof o0=="function"&&($s(n,o,o0,i),W=n.memoizedState),(M=Et||a3(n,o,M,i,$,W,F))?(e0||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=i,n.memoizedState=W),d.props=i,d.state=W,d.context=F,i=M):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),i=!1)}else{d=n.stateNode,bs(e,n),F=n.memoizedProps,e0=Fn(o,F),d.props=e0,o0=n.pendingProps,$=d.context,W=o.contextType,M=Jn,typeof W=="object"&&W!==null&&(M=P2(W)),S=o.getDerivedStateFromProps,(W=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(F!==o0||$!==M)&&l3(n,d,i,M),Et=!1,$=n.memoizedState,d.state=$,po(n,i,d,u),ho();var Y=n.memoizedState;F!==o0||$!==Y||Et||e!==null&&e.dependencies!==null&&Ia(e.dependencies)?(typeof S=="function"&&($s(n,o,S,i),Y=n.memoizedState),(e0=Et||a3(n,o,e0,i,$,Y,M)||e!==null&&e.dependencies!==null&&Ia(e.dependencies))?(W||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,Y,M),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,Y,M)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),n.memoizedProps=i,n.memoizedState=Y),d.props=i,d.state=Y,d.context=M,i=e0):(typeof d.componentDidUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(n.flags|=1024),i=!1)}return d=i,al(e,n),i=(n.flags&128)!==0,d||i?(d=n.stateNode,o=i&&typeof o.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&i?(n.child=cr(n,e.child,null,u),n.child=cr(n,null,o,u)):R2(e,n,o,u),n.memoizedState=d.state,e=n.child):e=ht(e,n,u),e}function D3(e,n,o,i){return ao(),n.flags|=256,R2(e,n,o,i),n.child}var Xs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qs(e){return{baseLanes:e,cachePool:sd()}}function Js(e,n,o){return e=e!==null?e.childLanes&~o:0,n&&(e|=ye),e}function w3(e,n,o){var i=n.pendingProps,u=!1,d=(n.flags&128)!==0,F;if((F=d)||(F=e!==null&&e.memoizedState===null?!1:(F2.current&2)!==0),F&&(u=!0,n.flags&=-129),F=(n.flags&32)!==0,n.flags&=-33,e===null){if(q0){if(u?Tt(n):Mt(),q0){var S=d2,M;if(M=S){e:{for(M=S,S=He;M.nodeType!==8;){if(!S){S=null;break e}if(M=Te(M.nextSibling),M===null){S=null;break e}}S=M}S!==null?(n.memoizedState={dehydrated:S,treeContext:mn!==null?{id:st,overflow:ct}:null,retryLane:536870912,hydrationErrors:null},M=J2(18,null,null,0),M.stateNode=S,M.return=n,n.child=M,z2=n,d2=null,M=!0):M=!1}M||yn(n)}if(S=n.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Lc(S)?n.lanes=32:n.lanes=536870912,null;dt(n)}return S=i.children,i=i.fallback,u?(Mt(),u=n.mode,S=ll({mode:"hidden",children:S},u),i=pn(i,u,o,null),S.return=n,i.return=n,S.sibling=i,n.child=S,u=n.child,u.memoizedState=Qs(o),u.childLanes=Js(e,F,o),n.memoizedState=Xs,i):(Tt(n),ec(n,S))}if(M=e.memoizedState,M!==null&&(S=M.dehydrated,S!==null)){if(d)n.flags&256?(Tt(n),n.flags&=-257,n=tc(e,n,o)):n.memoizedState!==null?(Mt(),n.child=e.child,n.flags|=128,n=null):(Mt(),u=i.fallback,S=n.mode,i=ll({mode:"visible",children:i.children},S),u=pn(u,S,o,null),u.flags|=2,i.return=n,u.return=n,i.sibling=u,n.child=i,cr(n,e.child,null,o),i=n.child,i.memoizedState=Qs(o),i.childLanes=Js(e,F,o),n.memoizedState=Xs,n=u);else if(Tt(n),Lc(S)){if(F=S.nextSibling&&S.nextSibling.dataset,F)var W=F.dgst;F=W,i=Error(l(419)),i.stack="",i.digest=F,lo({value:i,source:null,stack:null}),n=tc(e,n,o)}else if(B2||io(e,n,o,!1),F=(o&e.childLanes)!==0,B2||F){if(F=t2,F!==null&&(i=o&-o,i=(i&42)!==0?1:$r(i),i=(i&(F.suspendedLanes|o))!==0?0:i,i!==0&&i!==M.retryLane))throw M.retryLane=i,Qn(e,i),oe(F,e,i),d3;S.data==="$?"||yc(),n=tc(e,n,o)}else S.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,d2=Te(S.nextSibling),z2=n,q0=!0,gn=null,He=!1,e!==null&&(me[Ce++]=st,me[Ce++]=ct,me[Ce++]=mn,st=e.id,ct=e.overflow,mn=n),n=ec(n,i.children),n.flags|=4096);return n}return u?(Mt(),u=i.fallback,S=n.mode,M=e.child,W=M.sibling,i=it(M,{mode:"hidden",children:i.children}),i.subtreeFlags=M.subtreeFlags&65011712,W!==null?u=it(W,u):(u=pn(u,S,o,null),u.flags|=2),u.return=n,i.return=n,i.sibling=u,n.child=i,i=u,u=n.child,S=e.child.memoizedState,S===null?S=Qs(o):(M=S.cachePool,M!==null?(W=x2._currentValue,M=M.parent!==W?{parent:W,pool:W}:M):M=sd(),S={baseLanes:S.baseLanes|o,cachePool:M}),u.memoizedState=S,u.childLanes=Js(e,F,o),n.memoizedState=Xs,i):(Tt(n),o=e.child,e=o.sibling,o=it(o,{mode:"visible",children:i.children}),o.return=n,o.sibling=null,e!==null&&(F=n.deletions,F===null?(n.deletions=[e],n.flags|=16):F.push(e)),n.child=o,n.memoizedState=null,o)}function ec(e,n){return n=ll({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function ll(e,n){return e=J2(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function tc(e,n,o){return cr(n,e.child,null,o),e=ec(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function x3(e,n,o){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n),ys(e.return,n,o)}function nc(e,n,o,i,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:i,tail:o,tailMode:u}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=o,d.tailMode=u)}function F3(e,n,o){var i=n.pendingProps,u=i.revealOrder,d=i.tail;if(R2(e,n,i.children,o),i=F2.current,(i&2)!==0)i=i&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&x3(e,o,n);else if(e.tag===19)x3(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(n0(F2,i),u){case"forwards":for(o=n.child,u=null;o!==null;)e=o.alternate,e!==null&&nl(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=n.child,n.child=null):(u=o.sibling,o.sibling=null),nc(n,!1,u,o,d);break;case"backwards":for(o=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&nl(e)===null){n.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}nc(n,!0,o,null,d);break;case"together":nc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ht(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),Ut|=n.lanes,(o&n.childLanes)===0)if(e!==null){if(io(e,n,o,!1),(o&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,o=it(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=it(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function rc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Ia(e)))}function c7(e,n,o){switch(n.tag){case 3:b0(n,n.stateNode.containerInfo),St(n,x2,e.memoizedState.cache),ao();break;case 27:case 5:H0(n);break;case 4:b0(n,n.stateNode.containerInfo);break;case 10:St(n,n.type,n.memoizedProps.value);break;case 13:var i=n.memoizedState;if(i!==null)return i.dehydrated!==null?(Tt(n),n.flags|=128,null):(o&n.child.childLanes)!==0?w3(e,n,o):(Tt(n),e=ht(e,n,o),e!==null?e.sibling:null);Tt(n);break;case 19:var u=(e.flags&128)!==0;if(i=(o&n.childLanes)!==0,i||(io(e,n,o,!1),i=(o&n.childLanes)!==0),u){if(i)return F3(e,n,o);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),n0(F2,F2.current),i)break;return null;case 22:case 23:return n.lanes=0,C3(e,n,o);case 24:St(n,x2,e.memoizedState.cache)}return ht(e,n,o)}function B3(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps)B2=!0;else{if(!rc(e,o)&&(n.flags&128)===0)return B2=!1,c7(e,n,o);B2=(e.flags&131072)!==0}else B2=!1,q0&&(n.flags&1048576)!==0&&td(n,Ua,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var i=n.elementType,u=i._init;if(i=u(i._payload),n.type=i,typeof i=="function")fs(i)?(e=Fn(i,e),n.tag=1,n=v3(null,n,i,e,o)):(n.tag=0,n=Zs(null,n,i,e,o));else{if(i!=null){if(u=i.$$typeof,u===_){n.tag=11,n=h3(null,n,i,e,o);break e}else if(u===L){n.tag=14,n=p3(null,n,i,e,o);break e}}throw n=q(i)||i,Error(l(306,n,""))}}return n;case 0:return Zs(e,n,n.type,n.pendingProps,o);case 1:return i=n.type,u=Fn(i,n.pendingProps),v3(e,n,i,u,o);case 3:e:{if(b0(n,n.stateNode.containerInfo),e===null)throw Error(l(387));i=n.pendingProps;var d=n.memoizedState;u=d.element,bs(e,n),po(n,i,null,o);var F=n.memoizedState;if(i=F.cache,St(n,x2,i),i!==d.cache&&vs(n,[x2],o,!0),ho(),i=F.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:F.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=D3(e,n,i,o);break e}else if(i!==u){u=he(Error(l(424)),n),lo(u),n=D3(e,n,i,o);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(d2=Te(e.firstChild),z2=n,q0=!0,gn=null,He=!0,o=r3(n,null,i,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ao(),i===u){n=ht(e,n,o);break e}R2(e,n,i,o)}n=n.child}return n;case 26:return al(e,n),e===null?(o=Eh(n.type,null,n.pendingProps,null))?n.memoizedState=o:q0||(o=n.type,e=n.pendingProps,i=vl(m0.current).createElement(o),i[a0]=n,i[c0]=e,k2(i,o,e),_0(i),n.stateNode=i):n.memoizedState=Eh(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return H0(n),e===null&&q0&&(i=n.stateNode=bh(n.type,n.pendingProps,m0.current),z2=n,He=!0,u=d2,Vt(n.type)?(Oc=u,d2=Te(i.firstChild)):d2=u),R2(e,n,n.pendingProps.children,o),al(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&q0&&((u=i=d2)&&(i=O7(i,n.type,n.pendingProps,He),i!==null?(n.stateNode=i,z2=n,d2=Te(i.firstChild),He=!1,u=!0):u=!1),u||yn(n)),H0(n),u=n.type,d=n.pendingProps,F=e!==null?e.memoizedProps:null,i=d.children,Tc(u,d)?i=null:F!==null&&Tc(u,F)&&(n.flags|=32),n.memoizedState!==null&&(u=ks(e,n,t7,null,null,o),Oo._currentValue=u),al(e,n),R2(e,n,i,o),n.child;case 6:return e===null&&q0&&((e=o=d2)&&(o=j7(o,n.pendingProps,He),o!==null?(n.stateNode=o,z2=n,d2=null,e=!0):e=!1),e||yn(n)),null;case 13:return w3(e,n,o);case 4:return b0(n,n.stateNode.containerInfo),i=n.pendingProps,e===null?n.child=cr(n,null,i,o):R2(e,n,i,o),n.child;case 11:return h3(e,n,n.type,n.pendingProps,o);case 7:return R2(e,n,n.pendingProps,o),n.child;case 8:return R2(e,n,n.pendingProps.children,o),n.child;case 12:return R2(e,n,n.pendingProps.children,o),n.child;case 10:return i=n.pendingProps,St(n,n.type,i.value),R2(e,n,i.children,o),n.child;case 9:return u=n.type._context,i=n.pendingProps.children,Dn(n),u=P2(u),i=i(u),n.flags|=1,R2(e,n,i,o),n.child;case 14:return p3(e,n,n.type,n.pendingProps,o);case 15:return m3(e,n,n.type,n.pendingProps,o);case 19:return F3(e,n,o);case 31:return i=n.pendingProps,o=n.mode,i={mode:i.mode,children:i.children},e===null?(o=ll(i,o),o.ref=n.ref,n.child=o,o.return=n,n=o):(o=it(e.child,i),o.ref=n.ref,n.child=o,o.return=n,n=o),n;case 22:return C3(e,n,o);case 24:return Dn(n),i=P2(x2),e===null?(u=xs(),u===null&&(u=t2,d=Ds(),u.pooledCache=d,d.refCount++,d!==null&&(u.pooledCacheLanes|=o),u=d),n.memoizedState={parent:i,cache:u},Bs(n),St(n,x2,u)):((e.lanes&o)!==0&&(bs(e,n),po(n,null,null,o),ho()),u=e.memoizedState,d=n.memoizedState,u.parent!==i?(u={parent:i,cache:i},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),St(n,x2,i)):(i=d.cache,St(n,x2,i),i!==u.cache&&vs(n,[x2],o,!0))),R2(e,n,n.pendingProps.children,o),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function pt(e){e.flags|=4}function b3(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Mh(n)){if(n=ge.current,n!==null&&((V0&4194048)===V0?Ve!==null:(V0&62914560)!==V0&&(V0&536870912)===0||n!==Ve))throw Ao=Fs,cd;e.flags|=8192}}function il(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Da():536870912,e.lanes|=n,dr|=n)}function wo(e,n){if(!q0)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var i=null;o!==null;)o.alternate!==null&&(i=o),o=o.sibling;i===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function c2(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,i=0;if(n)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,i|=u.subtreeFlags&65011712,i|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=o,n}function u7(e,n,o){var i=n.pendingProps;switch(ms(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return c2(n),null;case 1:return c2(n),null;case 3:return o=n.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),At(x2),T0(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(oo(n)?pt(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,od())),c2(n),null;case 26:return o=n.memoizedState,e===null?(pt(n),o!==null?(c2(n),b3(n,o)):(c2(n),n.flags&=-16777217)):o?o!==e.memoizedState?(pt(n),c2(n),b3(n,o)):(c2(n),n.flags&=-16777217):(e.memoizedProps!==i&&pt(n),c2(n),n.flags&=-16777217),null;case 27:u2(n),o=m0.current;var u=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==i&&pt(n);else{if(!i){if(n.stateNode===null)throw Error(l(166));return c2(n),null}e=f0.current,oo(n)?nd(n):(e=bh(u,i,o),n.stateNode=e,pt(n))}return c2(n),null;case 5:if(u2(n),o=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==i&&pt(n);else{if(!i){if(n.stateNode===null)throw Error(l(166));return c2(n),null}if(e=f0.current,oo(n))nd(n);else{switch(u=vl(m0.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?u.createElement("select",{is:i.is}):u.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?u.createElement(o,{is:i.is}):u.createElement(o)}}e[a0]=n,e[c0]=i;e:for(u=n.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===n)break e;for(;u.sibling===null;){if(u.return===null||u.return===n)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}n.stateNode=e;e:switch(k2(e,o,i),o){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&pt(n)}}return c2(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==i&&pt(n);else{if(typeof i!="string"&&n.stateNode===null)throw Error(l(166));if(e=m0.current,oo(n)){if(e=n.stateNode,o=n.memoizedProps,i=null,u=z2,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}e[a0]=n,e=!!(e.nodeValue===o||i!==null&&i.suppressHydrationWarning===!0||yh(e.nodeValue,o)),e||yn(n)}else e=vl(e).createTextNode(i),e[a0]=n,n.stateNode=e}return c2(n),null;case 13:if(i=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=oo(n),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[a0]=n}else ao(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;c2(n),u=!1}else u=od(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(dt(n),n):(dt(n),null)}if(dt(n),(n.flags&128)!==0)return n.lanes=o,n;if(o=i!==null,e=e!==null&&e.memoizedState!==null,o){i=n.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool);var d=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==u&&(i.flags|=2048)}return o!==e&&o&&(n.child.flags|=8192),il(n,n.updateQueue),c2(n),null;case 4:return T0(),e===null&&Sc(n.stateNode.containerInfo),c2(n),null;case 10:return At(n.type),c2(n),null;case 19:if(J(F2),u=n.memoizedState,u===null)return c2(n),null;if(i=(n.flags&128)!==0,d=u.rendering,d===null)if(i)wo(u,!1);else{if(h2!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=nl(e),d!==null){for(n.flags|=128,wo(u,!1),e=d.updateQueue,n.updateQueue=e,il(n,e),n.subtreeFlags=0,e=o,o=n.child;o!==null;)ed(o,e),o=o.sibling;return n0(F2,F2.current&1|2),n.child}e=e.sibling}u.tail!==null&&U2()>ul&&(n.flags|=128,i=!0,wo(u,!1),n.lanes=4194304)}else{if(!i)if(e=nl(d),e!==null){if(n.flags|=128,i=!0,e=e.updateQueue,n.updateQueue=e,il(n,e),wo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!q0)return c2(n),null}else 2*U2()-u.renderingStartTime>ul&&o!==536870912&&(n.flags|=128,i=!0,wo(u,!1),n.lanes=4194304);u.isBackwards?(d.sibling=n.child,n.child=d):(e=u.last,e!==null?e.sibling=d:n.child=d,u.last=d)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=U2(),n.sibling=null,e=F2.current,n0(F2,i?e&1|2:e&1),n):(c2(n),null);case 22:case 23:return dt(n),Rs(),i=n.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(n.flags|=8192):i&&(n.flags|=8192),i?(o&536870912)!==0&&(n.flags&128)===0&&(c2(n),n.subtreeFlags&6&&(n.flags|=8192)):c2(n),o=n.updateQueue,o!==null&&il(n,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),i=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==o&&(n.flags|=2048),e!==null&&J(wn),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),At(x2),c2(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function A7(e,n){switch(ms(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return At(x2),T0(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return u2(n),null;case 13:if(dt(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));ao()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return J(F2),null;case 4:return T0(),null;case 10:return At(n.type),null;case 22:case 23:return dt(n),Rs(),e!==null&&J(wn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return At(x2),null;case 25:return null;default:return null}}function N3(e,n){switch(ms(n),n.tag){case 3:At(x2),T0();break;case 26:case 27:case 5:u2(n);break;case 4:T0();break;case 13:dt(n);break;case 19:J(F2);break;case 10:At(n.type);break;case 22:case 23:dt(n),Rs(),e!==null&&J(wn);break;case 24:At(x2)}}function xo(e,n){try{var o=n.updateQueue,i=o!==null?o.lastEffect:null;if(i!==null){var u=i.next;o=u;do{if((o.tag&e)===e){i=void 0;var d=o.create,F=o.inst;i=d(),F.destroy=i}o=o.next}while(o!==u)}}catch(S){e2(n,n.return,S)}}function Pt(e,n,o){try{var i=n.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var d=u.next;i=d;do{if((i.tag&e)===e){var F=i.inst,S=F.destroy;if(S!==void 0){F.destroy=void 0,u=n;var M=o,W=S;try{W()}catch(e0){e2(u,M,e0)}}}i=i.next}while(i!==d)}}catch(e0){e2(n,n.return,e0)}}function S3(e){var n=e.updateQueue;if(n!==null){var o=e.stateNode;try{pd(n,o)}catch(i){e2(e,e.return,i)}}}function E3(e,n,o){o.props=Fn(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(i){e2(e,n,i)}}function Fo(e,n){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof o=="function"?e.refCleanup=o(i):o.current=i}}catch(u){e2(e,n,u)}}function We(e,n){var o=e.ref,i=e.refCleanup;if(o!==null)if(typeof i=="function")try{i()}catch(u){e2(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(u){e2(e,n,u)}else o.current=null}function R3(e){var n=e.type,o=e.memoizedProps,i=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":o.autoFocus&&i.focus();break e;case"img":o.src?i.src=o.src:o.srcSet&&(i.srcset=o.srcSet)}}catch(u){e2(e,e.return,u)}}function oc(e,n,o){try{var i=e.stateNode;k7(i,e.type,o,n),i[c0]=n}catch(u){e2(e,e.return,u)}}function _3(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Vt(e.type)||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Vt(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lc(e,n,o){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,n):(n=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,n.appendChild(e),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=yl));else if(i!==4&&(i===27&&Vt(e.type)&&(o=e.stateNode,n=null),e=e.child,e!==null))for(lc(e,n,o),e=e.sibling;e!==null;)lc(e,n,o),e=e.sibling}function sl(e,n,o){var i=e.tag;if(i===5||i===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(i!==4&&(i===27&&Vt(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(sl(e,n,o),e=e.sibling;e!==null;)sl(e,n,o),e=e.sibling}function k3(e){var n=e.stateNode,o=e.memoizedProps;try{for(var i=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);k2(n,i,o),n[a0]=e,n[c0]=o}catch(d){e2(e,e.return,d)}}var mt=!1,g2=!1,ic=!1,T3=typeof WeakSet=="function"?WeakSet:Set,b2=null;function f7(e,n){if(e=e.containerInfo,_c=bl,e=Wf(e),as(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var i=o.getSelection&&o.getSelection();if(i&&i.rangeCount!==0){o=i.anchorNode;var u=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var F=0,S=-1,M=-1,W=0,e0=0,o0=e,$=null;t:for(;;){for(var Y;o0!==o||u!==0&&o0.nodeType!==3||(S=F+u),o0!==d||i!==0&&o0.nodeType!==3||(M=F+i),o0.nodeType===3&&(F+=o0.nodeValue.length),(Y=o0.firstChild)!==null;)$=o0,o0=Y;for(;;){if(o0===e)break t;if($===o&&++W===u&&(S=F),$===d&&++e0===i&&(M=F),(Y=o0.nextSibling)!==null)break;o0=$,$=o0.parentNode}o0=Y}o=S===-1||M===-1?null:{start:S,end:M}}else o=null}o=o||{start:0,end:0}}else o=null;for(kc={focusedElem:e,selectionRange:o},bl=!1,b2=n;b2!==null;)if(n=b2,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,b2=e;else for(;b2!==null;){switch(n=b2,d=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,o=n,u=d.memoizedProps,d=d.memoizedState,i=o.stateNode;try{var E0=Fn(o.type,u,o.elementType===o.type);e=i.getSnapshotBeforeUpdate(E0,d),i.__reactInternalSnapshotBeforeUpdate=e}catch(B0){e2(o,o.return,B0)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,o=e.nodeType,o===9)Pc(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,b2=e;break}b2=n.return}}function M3(e,n,o){var i=o.flags;switch(o.tag){case 0:case 11:case 15:Lt(e,o),i&4&&xo(5,o);break;case 1:if(Lt(e,o),i&4)if(e=o.stateNode,n===null)try{e.componentDidMount()}catch(F){e2(o,o.return,F)}else{var u=Fn(o.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(F){e2(o,o.return,F)}}i&64&&S3(o),i&512&&Fo(o,o.return);break;case 3:if(Lt(e,o),i&64&&(e=o.updateQueue,e!==null)){if(n=null,o.child!==null)switch(o.child.tag){case 27:case 5:n=o.child.stateNode;break;case 1:n=o.child.stateNode}try{pd(e,n)}catch(F){e2(o,o.return,F)}}break;case 27:n===null&&i&4&&k3(o);case 26:case 5:Lt(e,o),n===null&&i&4&&R3(o),i&512&&Fo(o,o.return);break;case 12:Lt(e,o);break;case 13:Lt(e,o),i&4&&O3(e,o),i&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=D7.bind(null,o),U7(e,o))));break;case 22:if(i=o.memoizedState!==null||mt,!i){n=n!==null&&n.memoizedState!==null||g2,u=mt;var d=g2;mt=i,(g2=n)&&!d?Ot(e,o,(o.subtreeFlags&8772)!==0):Lt(e,o),mt=u,g2=d}break;case 30:break;default:Lt(e,o)}}function P3(e){var n=e.alternate;n!==null&&(e.alternate=null,P3(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&y0(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var l2=null,Y2=!1;function Ct(e,n,o){for(o=o.child;o!==null;)L3(e,n,o),o=o.sibling}function L3(e,n,o){if(i2&&typeof i2.onCommitFiberUnmount=="function")try{i2.onCommitFiberUnmount(G2,o)}catch{}switch(o.tag){case 26:g2||We(o,n),Ct(e,n,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:g2||We(o,n);var i=l2,u=Y2;Vt(o.type)&&(l2=o.stateNode,Y2=!1),Ct(e,n,o),To(o.stateNode),l2=i,Y2=u;break;case 5:g2||We(o,n);case 6:if(i=l2,u=Y2,l2=null,Ct(e,n,o),l2=i,Y2=u,l2!==null)if(Y2)try{(l2.nodeType===9?l2.body:l2.nodeName==="HTML"?l2.ownerDocument.body:l2).removeChild(o.stateNode)}catch(d){e2(o,n,d)}else try{l2.removeChild(o.stateNode)}catch(d){e2(o,n,d)}break;case 18:l2!==null&&(Y2?(e=l2,Fh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),zo(e)):Fh(l2,o.stateNode));break;case 4:i=l2,u=Y2,l2=o.stateNode.containerInfo,Y2=!0,Ct(e,n,o),l2=i,Y2=u;break;case 0:case 11:case 14:case 15:g2||Pt(2,o,n),g2||Pt(4,o,n),Ct(e,n,o);break;case 1:g2||(We(o,n),i=o.stateNode,typeof i.componentWillUnmount=="function"&&E3(o,n,i)),Ct(e,n,o);break;case 21:Ct(e,n,o);break;case 22:g2=(i=g2)||o.memoizedState!==null,Ct(e,n,o),g2=i;break;default:Ct(e,n,o)}}function O3(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zo(e)}catch(o){e2(n,n.return,o)}}function d7(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new T3),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new T3),n;default:throw Error(l(435,e.tag))}}function sc(e,n){var o=d7(e);n.forEach(function(i){var u=w7.bind(null,e,i);o.has(i)||(o.add(i),i.then(u,u))})}function ee(e,n){var o=n.deletions;if(o!==null)for(var i=0;i<o.length;i++){var u=o[i],d=e,F=n,S=F;e:for(;S!==null;){switch(S.tag){case 27:if(Vt(S.type)){l2=S.stateNode,Y2=!1;break e}break;case 5:l2=S.stateNode,Y2=!1;break e;case 3:case 4:l2=S.stateNode.containerInfo,Y2=!0;break e}S=S.return}if(l2===null)throw Error(l(160));L3(d,F,u),l2=null,Y2=!1,d=u.alternate,d!==null&&(d.return=null),u.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)j3(n,e),n=n.sibling}var ke=null;function j3(e,n){var o=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ee(n,e),te(e),i&4&&(Pt(3,e,e.return),xo(3,e),Pt(5,e,e.return));break;case 1:ee(n,e),te(e),i&512&&(g2||o===null||We(o,o.return)),i&64&&mt&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?i:o.concat(i))));break;case 26:var u=ke;if(ee(n,e),te(e),i&512&&(g2||o===null||We(o,o.return)),i&4){var d=o!==null?o.memoizedState:null;if(i=e.memoizedState,o===null)if(i===null)if(e.stateNode===null){e:{i=e.type,o=e.memoizedProps,u=u.ownerDocument||u;t:switch(i){case"title":d=u.getElementsByTagName("title")[0],(!d||d[w0]||d[a0]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=u.createElement(i),u.head.insertBefore(d,u.querySelector("head > title"))),k2(d,i,o),d[a0]=e,_0(d),i=d;break e;case"link":var F=kh("link","href",u).get(i+(o.href||""));if(F){for(var S=0;S<F.length;S++)if(d=F[S],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){F.splice(S,1);break t}}d=u.createElement(i),k2(d,i,o),u.head.appendChild(d);break;case"meta":if(F=kh("meta","content",u).get(i+(o.content||""))){for(S=0;S<F.length;S++)if(d=F[S],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){F.splice(S,1);break t}}d=u.createElement(i),k2(d,i,o),u.head.appendChild(d);break;default:throw Error(l(468,i))}d[a0]=e,_0(d),i=d}e.stateNode=i}else Th(u,e.type,e.stateNode);else e.stateNode=_h(u,i,e.memoizedProps);else d!==i?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,i===null?Th(u,e.type,e.stateNode):_h(u,i,e.memoizedProps)):i===null&&e.stateNode!==null&&oc(e,e.memoizedProps,o.memoizedProps)}break;case 27:ee(n,e),te(e),i&512&&(g2||o===null||We(o,o.return)),o!==null&&i&4&&oc(e,e.memoizedProps,o.memoizedProps);break;case 5:if(ee(n,e),te(e),i&512&&(g2||o===null||We(o,o.return)),e.flags&32){u=e.stateNode;try{Gn(u,"")}catch(Y){e2(e,e.return,Y)}}i&4&&e.stateNode!=null&&(u=e.memoizedProps,oc(e,u,o!==null?o.memoizedProps:u)),i&1024&&(ic=!0);break;case 6:if(ee(n,e),te(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,o=e.stateNode;try{o.nodeValue=i}catch(Y){e2(e,e.return,Y)}}break;case 3:if(xl=null,u=ke,ke=Dl(n.containerInfo),ee(n,e),ke=u,te(e),i&4&&o!==null&&o.memoizedState.isDehydrated)try{zo(n.containerInfo)}catch(Y){e2(e,e.return,Y)}ic&&(ic=!1,U3(e));break;case 4:i=ke,ke=Dl(e.stateNode.containerInfo),ee(n,e),te(e),ke=i;break;case 12:ee(n,e),te(e);break;case 13:ee(n,e),te(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hc=U2()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sc(e,i)));break;case 22:u=e.memoizedState!==null;var M=o!==null&&o.memoizedState!==null,W=mt,e0=g2;if(mt=W||u,g2=e0||M,ee(n,e),g2=e0,mt=W,te(e),i&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(o===null||M||mt||g2||Bn(e)),o=null,n=e;;){if(n.tag===5||n.tag===26){if(o===null){M=o=n;try{if(d=M.stateNode,u)F=d.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{S=M.stateNode;var o0=M.memoizedProps.style,$=o0!=null&&o0.hasOwnProperty("display")?o0.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Y){e2(M,M.return,Y)}}}else if(n.tag===6){if(o===null){M=n;try{M.stateNode.nodeValue=u?"":M.memoizedProps}catch(Y){e2(M,M.return,Y)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;o===n&&(o=null),n=n.return}o===n&&(o=null),n.sibling.return=n.return,n=n.sibling}i&4&&(i=e.updateQueue,i!==null&&(o=i.retryQueue,o!==null&&(i.retryQueue=null,sc(e,o))));break;case 19:ee(n,e),te(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sc(e,i)));break;case 30:break;case 21:break;default:ee(n,e),te(e)}}function te(e){var n=e.flags;if(n&2){try{for(var o,i=e.return;i!==null;){if(_3(i)){o=i;break}i=i.return}if(o==null)throw Error(l(160));switch(o.tag){case 27:var u=o.stateNode,d=ac(e);sl(e,d,u);break;case 5:var F=o.stateNode;o.flags&32&&(Gn(F,""),o.flags&=-33);var S=ac(e);sl(e,S,F);break;case 3:case 4:var M=o.stateNode.containerInfo,W=ac(e);lc(e,W,M);break;default:throw Error(l(161))}}catch(e0){e2(e,e.return,e0)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function U3(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;U3(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Lt(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)M3(e,n.alternate,n),n=n.sibling}function Bn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Pt(4,n,n.return),Bn(n);break;case 1:We(n,n.return);var o=n.stateNode;typeof o.componentWillUnmount=="function"&&E3(n,n.return,o),Bn(n);break;case 27:To(n.stateNode);case 26:case 5:We(n,n.return),Bn(n);break;case 22:n.memoizedState===null&&Bn(n);break;case 30:Bn(n);break;default:Bn(n)}e=e.sibling}}function Ot(e,n,o){for(o=o&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var i=n.alternate,u=e,d=n,F=d.flags;switch(d.tag){case 0:case 11:case 15:Ot(u,d,o),xo(4,d);break;case 1:if(Ot(u,d,o),i=d,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(W){e2(i,i.return,W)}if(i=d,u=i.updateQueue,u!==null){var S=i.stateNode;try{var M=u.shared.hiddenCallbacks;if(M!==null)for(u.shared.hiddenCallbacks=null,u=0;u<M.length;u++)hd(M[u],S)}catch(W){e2(i,i.return,W)}}o&&F&64&&S3(d),Fo(d,d.return);break;case 27:k3(d);case 26:case 5:Ot(u,d,o),o&&i===null&&F&4&&R3(d),Fo(d,d.return);break;case 12:Ot(u,d,o);break;case 13:Ot(u,d,o),o&&F&4&&O3(u,d);break;case 22:d.memoizedState===null&&Ot(u,d,o),Fo(d,d.return);break;case 30:break;default:Ot(u,d,o)}n=n.sibling}}function cc(e,n){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&so(o))}function uc(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&so(e))}function Ge(e,n,o,i){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)I3(e,n,o,i),n=n.sibling}function I3(e,n,o,i){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ge(e,n,o,i),u&2048&&xo(9,n);break;case 1:Ge(e,n,o,i);break;case 3:Ge(e,n,o,i),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&so(e)));break;case 12:if(u&2048){Ge(e,n,o,i),e=n.stateNode;try{var d=n.memoizedProps,F=d.id,S=d.onPostCommit;typeof S=="function"&&S(F,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){e2(n,n.return,M)}}else Ge(e,n,o,i);break;case 13:Ge(e,n,o,i);break;case 23:break;case 22:d=n.stateNode,F=n.alternate,n.memoizedState!==null?d._visibility&2?Ge(e,n,o,i):Bo(e,n):d._visibility&2?Ge(e,n,o,i):(d._visibility|=2,ur(e,n,o,i,(n.subtreeFlags&10256)!==0)),u&2048&&cc(F,n);break;case 24:Ge(e,n,o,i),u&2048&&uc(n.alternate,n);break;default:Ge(e,n,o,i)}}function ur(e,n,o,i,u){for(u=u&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=e,F=n,S=o,M=i,W=F.flags;switch(F.tag){case 0:case 11:case 15:ur(d,F,S,M,u),xo(8,F);break;case 23:break;case 22:var e0=F.stateNode;F.memoizedState!==null?e0._visibility&2?ur(d,F,S,M,u):Bo(d,F):(e0._visibility|=2,ur(d,F,S,M,u)),u&&W&2048&&cc(F.alternate,F);break;case 24:ur(d,F,S,M,u),u&&W&2048&&uc(F.alternate,F);break;default:ur(d,F,S,M,u)}n=n.sibling}}function Bo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var o=e,i=n,u=i.flags;switch(i.tag){case 22:Bo(o,i),u&2048&&cc(i.alternate,i);break;case 24:Bo(o,i),u&2048&&uc(i.alternate,i);break;default:Bo(o,i)}n=n.sibling}}var bo=8192;function Ar(e){if(e.subtreeFlags&bo)for(e=e.child;e!==null;)z3(e),e=e.sibling}function z3(e){switch(e.tag){case 26:Ar(e),e.flags&bo&&e.memoizedState!==null&&Q7(ke,e.memoizedState,e.memoizedProps);break;case 5:Ar(e);break;case 3:case 4:var n=ke;ke=Dl(e.stateNode.containerInfo),Ar(e),ke=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=bo,bo=16777216,Ar(e),bo=n):Ar(e));break;default:Ar(e)}}function H3(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function No(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var i=n[o];b2=i,W3(i,e)}H3(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)V3(e),e=e.sibling}function V3(e){switch(e.tag){case 0:case 11:case 15:No(e),e.flags&2048&&Pt(9,e,e.return);break;case 3:No(e);break;case 12:No(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,cl(e)):No(e);break;default:No(e)}}function cl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var o=0;o<n.length;o++){var i=n[o];b2=i,W3(i,e)}H3(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Pt(8,n,n.return),cl(n);break;case 22:o=n.stateNode,o._visibility&2&&(o._visibility&=-3,cl(n));break;default:cl(n)}e=e.sibling}}function W3(e,n){for(;b2!==null;){var o=b2;switch(o.tag){case 0:case 11:case 15:Pt(8,o,n);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var i=o.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:so(o.memoizedState.cache)}if(i=o.child,i!==null)i.return=o,b2=i;else e:for(o=e;b2!==null;){i=b2;var u=i.sibling,d=i.return;if(P3(i),i===o){b2=null;break e}if(u!==null){u.return=d,b2=u;break e}b2=d}}}var h7={getCacheForType:function(e){var n=P2(x2),o=n.data.get(e);return o===void 0&&(o=e(),n.data.set(e,o)),o}},p7=typeof WeakMap=="function"?WeakMap:Map,Y0=0,t2=null,I0=null,V0=0,K0=0,ne=null,jt=!1,fr=!1,Ac=!1,gt=0,h2=0,Ut=0,bn=0,fc=0,ye=0,dr=0,So=null,K2=null,dc=!1,hc=0,ul=1/0,Al=null,It=null,_2=0,zt=null,hr=null,pr=0,pc=0,mc=null,G3=null,Eo=0,Cc=null;function re(){if((Y0&2)!==0&&V0!==0)return V0&-V0;if(O.T!==null){var e=nr;return e!==0?e:Fc()}return P()}function q3(){ye===0&&(ye=(V0&536870912)===0||q0?zn():536870912);var e=ge.current;return e!==null&&(e.flags|=32),ye}function oe(e,n,o){(e===t2&&(K0===2||K0===9)||e.cancelPendingCommit!==null)&&(mr(e,0),Ht(e,V0,ye,!1)),sn(e,o),((Y0&2)===0||e!==t2)&&(e===t2&&((Y0&2)===0&&(bn|=o),h2===4&&Ht(e,V0,ye,!1)),qe(e))}function $3(e,n,o){if((Y0&6)!==0)throw Error(l(327));var i=!o&&(n&124)===0&&(n&e.expiredLanes)===0||Ie(e,n),u=i?g7(e,n):vc(e,n,!0),d=i;do{if(u===0){fr&&!i&&Ht(e,n,0,!1);break}else{if(o=e.current.alternate,d&&!m7(o)){u=vc(e,n,!1),d=!1;continue}if(u===2){if(d=n,e.errorRecoveryDisabledLanes&d)var F=0;else F=e.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){n=F;e:{var S=e;u=So;var M=S.current.memoizedState.isDehydrated;if(M&&(mr(S,F).flags|=256),F=vc(S,F,!1),F!==2){if(Ac&&!M){S.errorRecoveryDisabledLanes|=d,bn|=d,u=4;break e}d=K2,K2=u,d!==null&&(K2===null?K2=d:K2.push.apply(K2,d))}u=F}if(d=!1,u!==2)continue}}if(u===1){mr(e,0),Ht(e,n,0,!0);break}e:{switch(i=e,d=u,d){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Ht(i,n,ye,!jt);break e;case 2:K2=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(u=hc+300-U2(),10<u)){if(Ht(i,n,ye,!jt),ln(i,0,!0)!==0)break e;i.timeoutHandle=wh(Y3.bind(null,i,o,K2,Al,dc,n,ye,bn,dr,jt,d,2,-0,0),u);break e}Y3(i,o,K2,Al,dc,n,ye,bn,dr,jt,d,0,-0,0)}}break}while(!0);qe(e)}function Y3(e,n,o,i,u,d,F,S,M,W,e0,o0,$,Y){if(e.timeoutHandle=-1,o0=n.subtreeFlags,(o0&8192||(o0&16785408)===16785408)&&(Lo={stylesheets:null,count:0,unsuspend:X7},z3(n),o0=J7(),o0!==null)){e.cancelPendingCommit=o0(th.bind(null,e,n,d,o,i,u,F,S,M,e0,1,$,Y)),Ht(e,d,F,!W);return}th(e,n,d,o,i,u,F,S,M)}function m7(e){for(var n=e;;){var o=n.tag;if((o===0||o===11||o===15)&&n.flags&16384&&(o=n.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var i=0;i<o.length;i++){var u=o[i],d=u.getSnapshot;u=u.value;try{if(!Q2(d(),u))return!1}catch{return!1}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ht(e,n,o,i){n&=~fc,n&=~bn,e.suspendedLanes|=n,e.pingedLanes&=~n,i&&(e.warmLanes|=n),i=e.expirationTimes;for(var u=n;0<u;){var d=31-E2(u),F=1<<d;i[d]=-1,u&=~F}o!==0&&cn(e,o,n)}function fl(){return(Y0&6)===0?(Ro(0),!1):!0}function gc(){if(I0!==null){if(K0===0)var e=I0.return;else e=I0,ut=vn=null,Ps(e),sr=null,vo=0,e=I0;for(;e!==null;)N3(e.alternate,e),e=e.return;I0=null}}function mr(e,n){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,M7(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),gc(),t2=e,I0=o=it(e.current,null),V0=n,K0=0,ne=null,jt=!1,fr=Ie(e,n),Ac=!1,dr=ye=fc=bn=Ut=h2=0,K2=So=null,dc=!1,(n&8)!==0&&(n|=n&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=n;0<i;){var u=31-E2(i),d=1<<u;n|=e[u],i&=~d}return gt=n,Ma(),o}function K3(e,n){M0=null,O.H=Ja,n===uo||n===Va?(n=fd(),K0=3):n===cd?(n=fd(),K0=4):K0=n===d3?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ne=n,I0===null&&(h2=1,ol(e,he(n,e.current)))}function Z3(){var e=O.H;return O.H=Ja,e===null?Ja:e}function X3(){var e=O.A;return O.A=h7,e}function yc(){h2=4,jt||(V0&4194048)!==V0&&ge.current!==null||(fr=!0),(Ut&134217727)===0&&(bn&134217727)===0||t2===null||Ht(t2,V0,ye,!1)}function vc(e,n,o){var i=Y0;Y0|=2;var u=Z3(),d=X3();(t2!==e||V0!==n)&&(Al=null,mr(e,n)),n=!1;var F=h2;e:do try{if(K0!==0&&I0!==null){var S=I0,M=ne;switch(K0){case 8:gc(),F=6;break e;case 3:case 2:case 9:case 6:ge.current===null&&(n=!0);var W=K0;if(K0=0,ne=null,Cr(e,S,M,W),o&&fr){F=0;break e}break;default:W=K0,K0=0,ne=null,Cr(e,S,M,W)}}C7(),F=h2;break}catch(e0){K3(e,e0)}while(!0);return n&&e.shellSuspendCounter++,ut=vn=null,Y0=i,O.H=u,O.A=d,I0===null&&(t2=null,V0=0,Ma()),F}function C7(){for(;I0!==null;)Q3(I0)}function g7(e,n){var o=Y0;Y0|=2;var i=Z3(),u=X3();t2!==e||V0!==n?(Al=null,ul=U2()+500,mr(e,n)):fr=Ie(e,n);e:do try{if(K0!==0&&I0!==null){n=I0;var d=ne;t:switch(K0){case 1:K0=0,ne=null,Cr(e,n,d,1);break;case 2:case 9:if(ud(d)){K0=0,ne=null,J3(n);break}n=function(){K0!==2&&K0!==9||t2!==e||(K0=7),qe(e)},d.then(n,n);break e;case 3:K0=7;break e;case 4:K0=5;break e;case 7:ud(d)?(K0=0,ne=null,J3(n)):(K0=0,ne=null,Cr(e,n,d,7));break;case 5:var F=null;switch(I0.tag){case 26:F=I0.memoizedState;case 5:case 27:var S=I0;if(!F||Mh(F)){K0=0,ne=null;var M=S.sibling;if(M!==null)I0=M;else{var W=S.return;W!==null?(I0=W,dl(W)):I0=null}break t}}K0=0,ne=null,Cr(e,n,d,5);break;case 6:K0=0,ne=null,Cr(e,n,d,6);break;case 8:gc(),h2=6;break e;default:throw Error(l(462))}}y7();break}catch(e0){K3(e,e0)}while(!0);return ut=vn=null,O.H=i,O.A=u,Y0=o,I0!==null?0:(t2=null,V0=0,Ma(),h2)}function y7(){for(;I0!==null&&!Vr();)Q3(I0)}function Q3(e){var n=B3(e.alternate,e,gt);e.memoizedProps=e.pendingProps,n===null?dl(e):I0=n}function J3(e){var n=e,o=n.alternate;switch(n.tag){case 15:case 0:n=y3(o,n,n.pendingProps,n.type,void 0,V0);break;case 11:n=y3(o,n,n.pendingProps,n.type.render,n.ref,V0);break;case 5:Ps(n);default:N3(o,n),n=I0=ed(n,gt),n=B3(o,n,gt)}e.memoizedProps=e.pendingProps,n===null?dl(e):I0=n}function Cr(e,n,o,i){ut=vn=null,Ps(n),sr=null,vo=0;var u=n.return;try{if(s7(e,u,n,o,V0)){h2=1,ol(e,he(o,e.current)),I0=null;return}}catch(d){if(u!==null)throw I0=u,d;h2=1,ol(e,he(o,e.current)),I0=null;return}n.flags&32768?(q0||i===1?e=!0:fr||(V0&536870912)!==0?e=!1:(jt=e=!0,(i===2||i===9||i===3||i===6)&&(i=ge.current,i!==null&&i.tag===13&&(i.flags|=16384))),eh(n,e)):dl(n)}function dl(e){var n=e;do{if((n.flags&32768)!==0){eh(n,jt);return}e=n.return;var o=u7(n.alternate,n,gt);if(o!==null){I0=o;return}if(n=n.sibling,n!==null){I0=n;return}I0=n=e}while(n!==null);h2===0&&(h2=5)}function eh(e,n){do{var o=A7(e.alternate,e);if(o!==null){o.flags&=32767,I0=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!n&&(e=e.sibling,e!==null)){I0=e;return}I0=e=o}while(e!==null);h2=6,I0=null}function th(e,n,o,i,u,d,F,S,M){e.cancelPendingCommit=null;do hl();while(_2!==0);if((Y0&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(d=n.lanes|n.childLanes,d|=us,wa(e,o,d,F,S,M),e===t2&&(I0=t2=null,V0=0),hr=n,zt=e,pr=o,pc=d,mc=u,G3=i,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,x7(In,function(){return lh(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||i){i=O.T,O.T=null,u=G.p,G.p=2,F=Y0,Y0|=4;try{f7(e,n,o)}finally{Y0=F,G.p=u,O.T=i}}_2=1,nh(),rh(),oh()}}function nh(){if(_2===1){_2=0;var e=zt,n=hr,o=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var i=G.p;G.p=2;var u=Y0;Y0|=4;try{j3(n,e);var d=kc,F=Wf(e.containerInfo),S=d.focusedElem,M=d.selectionRange;if(F!==S&&S&&S.ownerDocument&&Vf(S.ownerDocument.documentElement,S)){if(M!==null&&as(S)){var W=M.start,e0=M.end;if(e0===void 0&&(e0=W),"selectionStart"in S)S.selectionStart=W,S.selectionEnd=Math.min(e0,S.value.length);else{var o0=S.ownerDocument||document,$=o0&&o0.defaultView||window;if($.getSelection){var Y=$.getSelection(),E0=S.textContent.length,B0=Math.min(M.start,E0),J0=M.end===void 0?B0:Math.min(M.end,E0);!Y.extend&&B0>J0&&(F=J0,J0=B0,B0=F);var U=Hf(S,B0),j=Hf(S,J0);if(U&&j&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==j.node||Y.focusOffset!==j.offset)){var H=o0.createRange();H.setStart(U.node,U.offset),Y.removeAllRanges(),B0>J0?(Y.addRange(H),Y.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),Y.addRange(H))}}}}for(o0=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&o0.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<o0.length;S++){var t0=o0[S];t0.element.scrollLeft=t0.left,t0.element.scrollTop=t0.top}}bl=!!_c,kc=_c=null}finally{Y0=u,G.p=i,O.T=o}}e.current=n,_2=2}}function rh(){if(_2===2){_2=0;var e=zt,n=hr,o=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var i=G.p;G.p=2;var u=Y0;Y0|=4;try{M3(e,n.alternate,n)}finally{Y0=u,G.p=i,O.T=o}}_2=3}}function oh(){if(_2===4||_2===3){_2=0,Wr();var e=zt,n=hr,o=pr,i=G3;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?_2=5:(_2=0,hr=zt=null,ah(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(It=null),Yr(o),n=n.stateNode,i2&&typeof i2.onCommitFiberRoot=="function")try{i2.onCommitFiberRoot(G2,n,void 0,(n.current.flags&128)===128)}catch{}if(i!==null){n=O.T,u=G.p,G.p=2,O.T=null;try{for(var d=e.onRecoverableError,F=0;F<i.length;F++){var S=i[F];d(S.value,{componentStack:S.stack})}}finally{O.T=n,G.p=u}}(pr&3)!==0&&hl(),qe(e),u=e.pendingLanes,(o&4194090)!==0&&(u&42)!==0?e===Cc?Eo++:(Eo=0,Cc=e):Eo=0,Ro(0)}}function ah(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,so(n)))}function hl(e){return nh(),rh(),oh(),lh()}function lh(){if(_2!==5)return!1;var e=zt,n=pc;pc=0;var o=Yr(pr),i=O.T,u=G.p;try{G.p=32>o?32:o,O.T=null,o=mc,mc=null;var d=zt,F=pr;if(_2=0,hr=zt=null,pr=0,(Y0&6)!==0)throw Error(l(331));var S=Y0;if(Y0|=4,V3(d.current),I3(d,d.current,F,o),Y0=S,Ro(0,!1),i2&&typeof i2.onPostCommitFiberRoot=="function")try{i2.onPostCommitFiberRoot(G2,d)}catch{}return!0}finally{G.p=u,O.T=i,ah(e,n)}}function ih(e,n,o){n=he(o,n),n=Ks(e.stateNode,n,2),e=_t(e,n,2),e!==null&&(sn(e,2),qe(e))}function e2(e,n,o){if(e.tag===3)ih(e,e,o);else for(;n!==null;){if(n.tag===3){ih(n,e,o);break}else if(n.tag===1){var i=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(It===null||!It.has(i))){e=he(o,e),o=A3(2),i=_t(n,o,2),i!==null&&(f3(o,i,n,e),sn(i,2),qe(i));break}}n=n.return}}function Dc(e,n,o){var i=e.pingCache;if(i===null){i=e.pingCache=new p7;var u=new Set;i.set(n,u)}else u=i.get(n),u===void 0&&(u=new Set,i.set(n,u));u.has(o)||(Ac=!0,u.add(o),e=v7.bind(null,e,n,o),n.then(e,e))}function v7(e,n,o){var i=e.pingCache;i!==null&&i.delete(n),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,t2===e&&(V0&o)===o&&(h2===4||h2===3&&(V0&62914560)===V0&&300>U2()-hc?(Y0&2)===0&&mr(e,0):fc|=o,dr===V0&&(dr=0)),qe(e)}function sh(e,n){n===0&&(n=Da()),e=Qn(e,n),e!==null&&(sn(e,n),qe(e))}function D7(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),sh(e,o)}function w7(e,n){var o=0;switch(e.tag){case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(n),sh(e,o)}function x7(e,n){return Ee(e,n)}var pl=null,gr=null,wc=!1,ml=!1,xc=!1,Nn=0;function qe(e){e!==gr&&e.next===null&&(gr===null?pl=gr=e:gr=gr.next=e),ml=!0,wc||(wc=!0,B7())}function Ro(e,n){if(!xc&&ml){xc=!0;do for(var o=!1,i=pl;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var d=0;else{var F=i.suspendedLanes,S=i.pingedLanes;d=(1<<31-E2(42|e)+1)-1,d&=u&~(F&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,fh(i,d))}else d=V0,d=ln(i,i===t2?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(d&3)===0||Ie(i,d)||(o=!0,fh(i,d));i=i.next}while(o);xc=!1}}function F7(){ch()}function ch(){ml=wc=!1;var e=0;Nn!==0&&(T7()&&(e=Nn),Nn=0);for(var n=U2(),o=null,i=pl;i!==null;){var u=i.next,d=uh(i,n);d===0?(i.next=null,o===null?pl=u:o.next=u,u===null&&(gr=o)):(o=i,(e!==0||(d&3)!==0)&&(ml=!0)),i=u}Ro(e)}function uh(e,n){for(var o=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var F=31-E2(d),S=1<<F,M=u[F];M===-1?((S&o)===0||(S&i)!==0)&&(u[F]=va(S,n)):M<=n&&(e.expiredLanes|=S),d&=~S}if(n=t2,o=V0,o=ln(e,e===n?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,o===0||e===n&&(K0===2||K0===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&W2(i),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ie(e,o)){if(n=o&-o,n===e.callbackPriority)return n;switch(i!==null&&W2(i),Yr(o)){case 2:case 8:o=Ca;break;case 32:o=In;break;case 268435456:o=Ft;break;default:o=In}return i=Ah.bind(null,e),o=Ee(o,i),e.callbackPriority=n,e.callbackNode=o,n}return i!==null&&i!==null&&W2(i),e.callbackPriority=2,e.callbackNode=null,2}function Ah(e,n){if(_2!==0&&_2!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(hl()&&e.callbackNode!==o)return null;var i=V0;return i=ln(e,e===t2?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:($3(e,i,n),uh(e,U2()),e.callbackNode!=null&&e.callbackNode===o?Ah.bind(null,e):null)}function fh(e,n){if(hl())return null;$3(e,n,!0)}function B7(){P7(function(){(Y0&6)!==0?Ee(et,F7):ch()})}function Fc(){return Nn===0&&(Nn=zn()),Nn}function dh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Na(""+e)}function hh(e,n){var o=n.ownerDocument.createElement("input");return o.name=n.name,o.value=n.value,e.id&&o.setAttribute("form",e.id),n.parentNode.insertBefore(o,n),e=new FormData(e),o.parentNode.removeChild(o),e}function b7(e,n,o,i,u){if(n==="submit"&&o&&o.stateNode===u){var d=dh((u[c0]||null).action),F=i.submitter;F&&(n=(n=F[c0]||null)?dh(n.formAction):F.getAttribute("formAction"),n!==null&&(d=n,F=null));var S=new _a("action","action",null,i,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Nn!==0){var M=F?hh(u,F):new FormData(u);Ws(o,{pending:!0,data:M,method:u.method,action:d},null,M)}}else typeof d=="function"&&(S.preventDefault(),M=F?hh(u,F):new FormData(u),Ws(o,{pending:!0,data:M,method:u.method,action:d},d,M))},currentTarget:u}]})}}for(var Bc=0;Bc<cs.length;Bc++){var bc=cs[Bc],N7=bc.toLowerCase(),S7=bc[0].toUpperCase()+bc.slice(1);_e(N7,"on"+S7)}_e($f,"onAnimationEnd"),_e(Yf,"onAnimationIteration"),_e(Kf,"onAnimationStart"),_e("dblclick","onDoubleClick"),_e("focusin","onFocus"),_e("focusout","onBlur"),_e(GD,"onTransitionRun"),_e(qD,"onTransitionStart"),_e($D,"onTransitionCancel"),_e(Zf,"onTransitionEnd"),I2("onMouseEnter",["mouseout","mouseover"]),I2("onMouseLeave",["mouseout","mouseover"]),I2("onPointerEnter",["pointerout","pointerover"]),I2("onPointerLeave",["pointerout","pointerover"]),X2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),X2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),X2("onBeforeInput",["compositionend","keypress","textInput","paste"]),X2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),X2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),X2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function ph(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var i=e[o],u=i.event;i=i.listeners;e:{var d=void 0;if(n)for(var F=i.length-1;0<=F;F--){var S=i[F],M=S.instance,W=S.currentTarget;if(S=S.listener,M!==d&&u.isPropagationStopped())break e;d=S,u.currentTarget=W;try{d(u)}catch(e0){rl(e0)}u.currentTarget=null,d=M}else for(F=0;F<i.length;F++){if(S=i[F],M=S.instance,W=S.currentTarget,S=S.listener,M!==d&&u.isPropagationStopped())break e;d=S,u.currentTarget=W;try{d(u)}catch(e0){rl(e0)}u.currentTarget=null,d=M}}}}function z0(e,n){var o=n[g0];o===void 0&&(o=n[g0]=new Set);var i=e+"__bubble";o.has(i)||(mh(n,e,2,!1),o.add(i))}function Nc(e,n,o){var i=0;n&&(i|=4),mh(o,e,i,n)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function Sc(e){if(!e[Cl]){e[Cl]=!0,Z0.forEach(function(o){o!=="selectionchange"&&(E7.has(o)||Nc(o,!1,e),Nc(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Cl]||(n[Cl]=!0,Nc("selectionchange",!1,n))}}function mh(e,n,o,i){switch(Ih(n)){case 2:var u=n6;break;case 8:u=r6;break;default:u=Hc}o=u.bind(null,n,o,e),u=void 0,!Zi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(n,o,{capture:!0,passive:u}):e.addEventListener(n,o,!0):u!==void 0?e.addEventListener(n,o,{passive:u}):e.addEventListener(n,o,!1)}function Ec(e,n,o,i,u){var d=i;if((n&1)===0&&(n&2)===0&&i!==null)e:for(;;){if(i===null)return;var F=i.tag;if(F===3||F===4){var S=i.stateNode.containerInfo;if(S===u)break;if(F===4)for(F=i.return;F!==null;){var M=F.tag;if((M===3||M===4)&&F.stateNode.containerInfo===u)return;F=F.return}for(;S!==null;){if(F=S0(S),F===null)return;if(M=F.tag,M===5||M===6||M===26||M===27){i=d=F;continue e}S=S.parentNode}}i=i.return}xf(function(){var W=d,e0=Yi(o),o0=[];e:{var $=Xf.get(e);if($!==void 0){var Y=_a,E0=e;switch(e){case"keypress":if(Ea(o)===0)break e;case"keydown":case"keyup":Y=xD;break;case"focusin":E0="focus",Y=es;break;case"focusout":E0="blur",Y=es;break;case"beforeblur":case"afterblur":Y=es;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=AD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=bD;break;case $f:case Yf:case Kf:Y=hD;break;case Zf:Y=SD;break;case"scroll":case"scrollend":Y=cD;break;case"wheel":Y=RD;break;case"copy":case"cut":case"paste":Y=mD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Sf;break;case"toggle":case"beforetoggle":Y=kD}var B0=(n&4)!==0,J0=!B0&&(e==="scroll"||e==="scrollend"),U=B0?$!==null?$+"Capture":null:$;B0=[];for(var j=W,H;j!==null;){var t0=j;if(H=t0.stateNode,t0=t0.tag,t0!==5&&t0!==26&&t0!==27||H===null||U===null||(t0=Kr(j,U),t0!=null&&B0.push(ko(j,t0,H))),J0)break;j=j.return}0<B0.length&&($=new Y($,E0,null,o,e0),o0.push({event:$,listeners:B0}))}}if((n&7)===0){e:{if($=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",$&&o!==$i&&(E0=o.relatedTarget||o.fromElement)&&(S0(E0)||E0[p0]))break e;if((Y||$)&&($=e0.window===e0?e0:($=e0.ownerDocument)?$.defaultView||$.parentWindow:window,Y?(E0=o.relatedTarget||o.toElement,Y=W,E0=E0?S0(E0):null,E0!==null&&(J0=c(E0),B0=E0.tag,E0!==J0||B0!==5&&B0!==27&&B0!==6)&&(E0=null)):(Y=null,E0=W),Y!==E0)){if(B0=bf,t0="onMouseLeave",U="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(B0=Sf,t0="onPointerLeave",U="onPointerEnter",j="pointer"),J0=Y==null?$:A2(Y),H=E0==null?$:A2(E0),$=new B0(t0,j+"leave",Y,o,e0),$.target=J0,$.relatedTarget=H,t0=null,S0(e0)===W&&(B0=new B0(U,j+"enter",E0,o,e0),B0.target=H,B0.relatedTarget=J0,t0=B0),J0=t0,Y&&E0)t:{for(B0=Y,U=E0,j=0,H=B0;H;H=yr(H))j++;for(H=0,t0=U;t0;t0=yr(t0))H++;for(;0<j-H;)B0=yr(B0),j--;for(;0<H-j;)U=yr(U),H--;for(;j--;){if(B0===U||U!==null&&B0===U.alternate)break t;B0=yr(B0),U=yr(U)}B0=null}else B0=null;Y!==null&&Ch(o0,$,Y,B0,!1),E0!==null&&J0!==null&&Ch(o0,J0,E0,B0,!0)}}e:{if($=W?A2(W):window,Y=$.nodeName&&$.nodeName.toLowerCase(),Y==="select"||Y==="input"&&$.type==="file")var d0=Lf;else if(Mf($))if(Of)d0=HD;else{d0=ID;var U0=UD}else Y=$.nodeName,!Y||Y.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?W&&qi(W.elementType)&&(d0=Lf):d0=zD;if(d0&&(d0=d0(e,W))){Pf(o0,d0,o,e0);break e}U0&&U0(e,$,W),e==="focusout"&&W&&$.type==="number"&&W.memoizedProps.value!=null&&Gi($,"number",$.value)}switch(U0=W?A2(W):window,e){case"focusin":(Mf(U0)||U0.contentEditable==="true")&&(Kn=U0,ls=W,ro=null);break;case"focusout":ro=ls=Kn=null;break;case"mousedown":is=!0;break;case"contextmenu":case"mouseup":case"dragend":is=!1,Gf(o0,o,e0);break;case"selectionchange":if(WD)break;case"keydown":case"keyup":Gf(o0,o,e0)}var v0;if(ns)e:{switch(e){case"compositionstart":var N0="onCompositionStart";break e;case"compositionend":N0="onCompositionEnd";break e;case"compositionupdate":N0="onCompositionUpdate";break e}N0=void 0}else Yn?kf(e,o)&&(N0="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(N0="onCompositionStart");N0&&(Ef&&o.locale!=="ko"&&(Yn||N0!=="onCompositionStart"?N0==="onCompositionEnd"&&Yn&&(v0=Ff()):(Nt=e0,Xi="value"in Nt?Nt.value:Nt.textContent,Yn=!0)),U0=gl(W,N0),0<U0.length&&(N0=new Nf(N0,e,null,o,e0),o0.push({event:N0,listeners:U0}),v0?N0.data=v0:(v0=Tf(o),v0!==null&&(N0.data=v0)))),(v0=MD?PD(e,o):LD(e,o))&&(N0=gl(W,"onBeforeInput"),0<N0.length&&(U0=new Nf("onBeforeInput","beforeinput",null,o,e0),o0.push({event:U0,listeners:N0}),U0.data=v0)),b7(o0,e,W,o,e0)}ph(o0,n)})}function ko(e,n,o){return{instance:e,listener:n,currentTarget:o}}function gl(e,n){for(var o=n+"Capture",i=[];e!==null;){var u=e,d=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||d===null||(u=Kr(e,o),u!=null&&i.unshift(ko(e,u,d)),u=Kr(e,n),u!=null&&i.push(ko(e,u,d))),e.tag===3)return i;e=e.return}return[]}function yr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ch(e,n,o,i,u){for(var d=n._reactName,F=[];o!==null&&o!==i;){var S=o,M=S.alternate,W=S.stateNode;if(S=S.tag,M!==null&&M===i)break;S!==5&&S!==26&&S!==27||W===null||(M=W,u?(W=Kr(o,d),W!=null&&F.unshift(ko(o,W,M))):u||(W=Kr(o,d),W!=null&&F.push(ko(o,W,M)))),o=o.return}F.length!==0&&e.push({event:n,listeners:F})}var R7=/\r\n?/g,_7=/\u0000|\uFFFD/g;function gh(e){return(typeof e=="string"?e:""+e).replace(R7,`
`).replace(_7,"")}function yh(e,n){return n=gh(n),gh(e)===n}function yl(){}function Q0(e,n,o,i,u,d){switch(o){case"children":typeof i=="string"?n==="body"||n==="textarea"&&i===""||Gn(e,i):(typeof i=="number"||typeof i=="bigint")&&n!=="body"&&Gn(e,""+i);break;case"className":at(e,"class",i);break;case"tabIndex":at(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,o,i);break;case"style":Df(e,i,d);break;case"data":if(n!=="object"){at(e,"data",i);break}case"src":case"href":if(i===""&&(n!=="a"||o!=="href")){e.removeAttribute(o);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(o);break}i=Na(""+i),e.setAttribute(o,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(n!=="input"&&Q0(e,n,"name",u.name,u,null),Q0(e,n,"formEncType",u.formEncType,u,null),Q0(e,n,"formMethod",u.formMethod,u,null),Q0(e,n,"formTarget",u.formTarget,u,null)):(Q0(e,n,"encType",u.encType,u,null),Q0(e,n,"method",u.method,u,null),Q0(e,n,"target",u.target,u,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(o);break}i=Na(""+i),e.setAttribute(o,i);break;case"onClick":i!=null&&(e.onclick=yl);break;case"onScroll":i!=null&&z0("scroll",e);break;case"onScrollEnd":i!=null&&z0("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(o=i.__html,o!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=o}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}o=Na(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(o,""+i):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":i===!0?e.setAttribute(o,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(o,i):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(o,i):e.removeAttribute(o);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(o):e.setAttribute(o,i);break;case"popover":z0("beforetoggle",e),z0("toggle",e),ot(e,"popover",i);break;case"xlinkActuate":j0(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":j0(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":j0(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":j0(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":j0(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":j0(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":j0(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":j0(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":j0(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ot(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=iD.get(o)||o,ot(e,o,i))}}function Rc(e,n,o,i,u,d){switch(o){case"style":Df(e,i,d);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(o=i.__html,o!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=o}}break;case"children":typeof i=="string"?Gn(e,i):(typeof i=="number"||typeof i=="bigint")&&Gn(e,""+i);break;case"onScroll":i!=null&&z0("scroll",e);break;case"onScrollEnd":i!=null&&z0("scrollend",e);break;case"onClick":i!=null&&(e.onclick=yl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ze.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(u=o.endsWith("Capture"),n=o.slice(2,u?o.length-7:void 0),d=e[c0]||null,d=d!=null?d[o]:null,typeof d=="function"&&e.removeEventListener(n,d,u),typeof i=="function")){typeof d!="function"&&d!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(n,i,u);break e}o in e?e[o]=i:i===!0?e.setAttribute(o,""):ot(e,o,i)}}}function k2(e,n,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":z0("error",e),z0("load",e);var i=!1,u=!1,d;for(d in o)if(o.hasOwnProperty(d)){var F=o[d];if(F!=null)switch(d){case"src":i=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Q0(e,n,d,F,o,null)}}u&&Q0(e,n,"srcSet",o.srcSet,o,null),i&&Q0(e,n,"src",o.src,o,null);return;case"input":z0("invalid",e);var S=d=F=u=null,M=null,W=null;for(i in o)if(o.hasOwnProperty(i)){var e0=o[i];if(e0!=null)switch(i){case"name":u=e0;break;case"type":F=e0;break;case"checked":M=e0;break;case"defaultChecked":W=e0;break;case"value":d=e0;break;case"defaultValue":S=e0;break;case"children":case"dangerouslySetInnerHTML":if(e0!=null)throw Error(l(137,n));break;default:Q0(e,n,i,e0,o,null)}}Cf(e,d,S,M,W,F,u,!1),Ba(e);return;case"select":z0("invalid",e),i=F=d=null;for(u in o)if(o.hasOwnProperty(u)&&(S=o[u],S!=null))switch(u){case"value":d=S;break;case"defaultValue":F=S;break;case"multiple":i=S;default:Q0(e,n,u,S,o,null)}n=d,o=F,e.multiple=!!i,n!=null?Wn(e,!!i,n,!1):o!=null&&Wn(e,!!i,o,!0);return;case"textarea":z0("invalid",e),d=u=i=null;for(F in o)if(o.hasOwnProperty(F)&&(S=o[F],S!=null))switch(F){case"value":i=S;break;case"defaultValue":u=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:Q0(e,n,F,S,o,null)}yf(e,i,u,d),Ba(e);return;case"option":for(M in o)if(o.hasOwnProperty(M)&&(i=o[M],i!=null))switch(M){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Q0(e,n,M,i,o,null)}return;case"dialog":z0("beforetoggle",e),z0("toggle",e),z0("cancel",e),z0("close",e);break;case"iframe":case"object":z0("load",e);break;case"video":case"audio":for(i=0;i<_o.length;i++)z0(_o[i],e);break;case"image":z0("error",e),z0("load",e);break;case"details":z0("toggle",e);break;case"embed":case"source":case"link":z0("error",e),z0("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(i=o[W],i!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:Q0(e,n,W,i,o,null)}return;default:if(qi(n)){for(e0 in o)o.hasOwnProperty(e0)&&(i=o[e0],i!==void 0&&Rc(e,n,e0,i,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(i=o[S],i!=null&&Q0(e,n,S,i,o,null))}function k7(e,n,o,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,d=null,F=null,S=null,M=null,W=null,e0=null;for(Y in o){var o0=o[Y];if(o.hasOwnProperty(Y)&&o0!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":M=o0;default:i.hasOwnProperty(Y)||Q0(e,n,Y,null,i,o0)}}for(var $ in i){var Y=i[$];if(o0=o[$],i.hasOwnProperty($)&&(Y!=null||o0!=null))switch($){case"type":d=Y;break;case"name":u=Y;break;case"checked":W=Y;break;case"defaultChecked":e0=Y;break;case"value":F=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(l(137,n));break;default:Y!==o0&&Q0(e,n,$,Y,i,o0)}}Wi(e,F,S,M,W,e0,d,u);return;case"select":Y=F=S=$=null;for(d in o)if(M=o[d],o.hasOwnProperty(d)&&M!=null)switch(d){case"value":break;case"multiple":Y=M;default:i.hasOwnProperty(d)||Q0(e,n,d,null,i,M)}for(u in i)if(d=i[u],M=o[u],i.hasOwnProperty(u)&&(d!=null||M!=null))switch(u){case"value":$=d;break;case"defaultValue":S=d;break;case"multiple":F=d;default:d!==M&&Q0(e,n,u,d,i,M)}n=S,o=F,i=Y,$!=null?Wn(e,!!o,$,!1):!!i!=!!o&&(n!=null?Wn(e,!!o,n,!0):Wn(e,!!o,o?[]:"",!1));return;case"textarea":Y=$=null;for(S in o)if(u=o[S],o.hasOwnProperty(S)&&u!=null&&!i.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Q0(e,n,S,null,i,u)}for(F in i)if(u=i[F],d=o[F],i.hasOwnProperty(F)&&(u!=null||d!=null))switch(F){case"value":$=u;break;case"defaultValue":Y=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==d&&Q0(e,n,F,u,i,d)}gf(e,$,Y);return;case"option":for(var E0 in o)if($=o[E0],o.hasOwnProperty(E0)&&$!=null&&!i.hasOwnProperty(E0))switch(E0){case"selected":e.selected=!1;break;default:Q0(e,n,E0,null,i,$)}for(M in i)if($=i[M],Y=o[M],i.hasOwnProperty(M)&&$!==Y&&($!=null||Y!=null))switch(M){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Q0(e,n,M,$,i,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var B0 in o)$=o[B0],o.hasOwnProperty(B0)&&$!=null&&!i.hasOwnProperty(B0)&&Q0(e,n,B0,null,i,$);for(W in i)if($=i[W],Y=o[W],i.hasOwnProperty(W)&&$!==Y&&($!=null||Y!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,n));break;default:Q0(e,n,W,$,i,Y)}return;default:if(qi(n)){for(var J0 in o)$=o[J0],o.hasOwnProperty(J0)&&$!==void 0&&!i.hasOwnProperty(J0)&&Rc(e,n,J0,void 0,i,$);for(e0 in i)$=i[e0],Y=o[e0],!i.hasOwnProperty(e0)||$===Y||$===void 0&&Y===void 0||Rc(e,n,e0,$,i,Y);return}}for(var U in o)$=o[U],o.hasOwnProperty(U)&&$!=null&&!i.hasOwnProperty(U)&&Q0(e,n,U,null,i,$);for(o0 in i)$=i[o0],Y=o[o0],!i.hasOwnProperty(o0)||$===Y||$==null&&Y==null||Q0(e,n,o0,$,i,Y)}var _c=null,kc=null;function vl(e){return e.nodeType===9?e:e.ownerDocument}function vh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dh(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Tc(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mc=null;function T7(){var e=window.event;return e&&e.type==="popstate"?e===Mc?!1:(Mc=e,!0):(Mc=null,!1)}var wh=typeof setTimeout=="function"?setTimeout:void 0,M7=typeof clearTimeout=="function"?clearTimeout:void 0,xh=typeof Promise=="function"?Promise:void 0,P7=typeof queueMicrotask=="function"?queueMicrotask:typeof xh<"u"?function(e){return xh.resolve(null).then(e).catch(L7)}:wh;function L7(e){setTimeout(function(){throw e})}function Vt(e){return e==="head"}function Fh(e,n){var o=n,i=0,u=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(0<i&&8>i){o=i;var F=e.ownerDocument;if(o&1&&To(F.documentElement),o&2&&To(F.body),o&4)for(o=F.head,To(o),F=o.firstChild;F;){var S=F.nextSibling,M=F.nodeName;F[w0]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&F.rel.toLowerCase()==="stylesheet"||o.removeChild(F),F=S}}if(u===0){e.removeChild(d),zo(n);return}u--}else o==="$"||o==="$?"||o==="$!"?u++:i=o.charCodeAt(0)-48;else i=0;o=d}while(o);zo(n)}function Pc(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var o=n;switch(n=n.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Pc(o),y0(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function O7(e,n,o,i){for(;e.nodeType===1;){var u=o;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[w0])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Te(e.nextSibling),e===null)break}return null}function j7(e,n,o){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Te(e.nextSibling),e===null))return null;return e}function Lc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function U7(e,n){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")n();else{var i=function(){n(),o.removeEventListener("DOMContentLoaded",i)};o.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Te(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Oc=null;function Bh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}function bh(e,n,o){switch(n=vl(o),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function To(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);y0(e)}var ve=new Map,Nh=new Set;function Dl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yt=G.d;G.d={f:I7,r:z7,D:H7,C:V7,L:W7,m:G7,X:$7,S:q7,M:Y7};function I7(){var e=yt.f(),n=fl();return e||n}function z7(e){var n=G0(e);n!==null&&n.tag===5&&n.type==="form"?$d(n):yt.r(e)}var vr=typeof document>"u"?null:document;function Sh(e,n,o){var i=vr;if(i&&typeof n=="string"&&n){var u=de(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof o=="string"&&(u+='[crossorigin="'+o+'"]'),Nh.has(u)||(Nh.add(u),e={rel:e,crossOrigin:o,href:n},i.querySelector(u)===null&&(n=i.createElement("link"),k2(n,"link",e),_0(n),i.head.appendChild(n)))}}function H7(e){yt.D(e),Sh("dns-prefetch",e,null)}function V7(e,n){yt.C(e,n),Sh("preconnect",e,n)}function W7(e,n,o){yt.L(e,n,o);var i=vr;if(i&&e&&n){var u='link[rel="preload"][as="'+de(n)+'"]';n==="image"&&o&&o.imageSrcSet?(u+='[imagesrcset="'+de(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(u+='[imagesizes="'+de(o.imageSizes)+'"]')):u+='[href="'+de(e)+'"]';var d=u;switch(n){case"style":d=Dr(e);break;case"script":d=wr(e)}ve.has(d)||(e=g({rel:"preload",href:n==="image"&&o&&o.imageSrcSet?void 0:e,as:n},o),ve.set(d,e),i.querySelector(u)!==null||n==="style"&&i.querySelector(Mo(d))||n==="script"&&i.querySelector(Po(d))||(n=i.createElement("link"),k2(n,"link",e),_0(n),i.head.appendChild(n)))}}function G7(e,n){yt.m(e,n);var o=vr;if(o&&e){var i=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+de(i)+'"][href="'+de(e)+'"]',d=u;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=wr(e)}if(!ve.has(d)&&(e=g({rel:"modulepreload",href:e},n),ve.set(d,e),o.querySelector(u)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Po(d)))return}i=o.createElement("link"),k2(i,"link",e),_0(i),o.head.appendChild(i)}}}function q7(e,n,o){yt.S(e,n,o);var i=vr;if(i&&e){var u=f2(i).hoistableStyles,d=Dr(e);n=n||"default";var F=u.get(d);if(!F){var S={loading:0,preload:null};if(F=i.querySelector(Mo(d)))S.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":n},o),(o=ve.get(d))&&jc(e,o);var M=F=i.createElement("link");_0(M),k2(M,"link",e),M._p=new Promise(function(W,e0){M.onload=W,M.onerror=e0}),M.addEventListener("load",function(){S.loading|=1}),M.addEventListener("error",function(){S.loading|=2}),S.loading|=4,wl(F,n,i)}F={type:"stylesheet",instance:F,count:1,state:S},u.set(d,F)}}}function $7(e,n){yt.X(e,n);var o=vr;if(o&&e){var i=f2(o).hoistableScripts,u=wr(e),d=i.get(u);d||(d=o.querySelector(Po(u)),d||(e=g({src:e,async:!0},n),(n=ve.get(u))&&Uc(e,n),d=o.createElement("script"),_0(d),k2(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},i.set(u,d))}}function Y7(e,n){yt.M(e,n);var o=vr;if(o&&e){var i=f2(o).hoistableScripts,u=wr(e),d=i.get(u);d||(d=o.querySelector(Po(u)),d||(e=g({src:e,async:!0,type:"module"},n),(n=ve.get(u))&&Uc(e,n),d=o.createElement("script"),_0(d),k2(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},i.set(u,d))}}function Eh(e,n,o,i){var u=(u=m0.current)?Dl(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(n=Dr(o.href),o=f2(u).hoistableStyles,i=o.get(n),i||(i={type:"style",instance:null,count:0,state:null},o.set(n,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=Dr(o.href);var d=f2(u).hoistableStyles,F=d.get(e);if(F||(u=u.ownerDocument||u,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,F),(d=u.querySelector(Mo(e)))&&!d._p&&(F.instance=d,F.state.loading=5),ve.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ve.set(e,o),d||K7(u,e,o,F.state))),n&&i===null)throw Error(l(528,""));return F}if(n&&i!==null)throw Error(l(529,""));return null;case"script":return n=o.async,o=o.src,typeof o=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=wr(o),o=f2(u).hoistableScripts,i=o.get(n),i||(i={type:"script",instance:null,count:0,state:null},o.set(n,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Dr(e){return'href="'+de(e)+'"'}function Mo(e){return'link[rel="stylesheet"]['+e+"]"}function Rh(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function K7(e,n,o,i){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?i.loading=1:(n=e.createElement("link"),i.preload=n,n.addEventListener("load",function(){return i.loading|=1}),n.addEventListener("error",function(){return i.loading|=2}),k2(n,"link",o),_0(n),e.head.appendChild(n))}function wr(e){return'[src="'+de(e)+'"]'}function Po(e){return"script[async]"+e}function _h(e,n,o){if(n.count++,n.instance===null)switch(n.type){case"style":var i=e.querySelector('style[data-href~="'+de(o.href)+'"]');if(i)return n.instance=i,_0(i),i;var u=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),_0(i),k2(i,"style",u),wl(i,o.precedence,e),n.instance=i;case"stylesheet":u=Dr(o.href);var d=e.querySelector(Mo(u));if(d)return n.state.loading|=4,n.instance=d,_0(d),d;i=Rh(o),(u=ve.get(u))&&jc(i,u),d=(e.ownerDocument||e).createElement("link"),_0(d);var F=d;return F._p=new Promise(function(S,M){F.onload=S,F.onerror=M}),k2(d,"link",i),n.state.loading|=4,wl(d,o.precedence,e),n.instance=d;case"script":return d=wr(o.src),(u=e.querySelector(Po(d)))?(n.instance=u,_0(u),u):(i=o,(u=ve.get(d))&&(i=g({},o),Uc(i,u)),e=e.ownerDocument||e,u=e.createElement("script"),_0(u),k2(u,"link",i),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(i=n.instance,n.state.loading|=4,wl(i,o.precedence,e));return n.instance}function wl(e,n,o){for(var i=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=i.length?i[i.length-1]:null,d=u,F=0;F<i.length;F++){var S=i[F];if(S.dataset.precedence===n)d=S;else if(d!==u)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=o.nodeType===9?o.head:o,n.insertBefore(e,n.firstChild))}function jc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Uc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var xl=null;function kh(e,n,o){if(xl===null){var i=new Map,u=xl=new Map;u.set(o,i)}else u=xl,i=u.get(o),i||(i=new Map,u.set(o,i));if(i.has(e))return i;for(i.set(e,null),o=o.getElementsByTagName(e),u=0;u<o.length;u++){var d=o[u];if(!(d[w0]||d[a0]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var F=d.getAttribute(n)||"";F=e+F;var S=i.get(F);S?S.push(d):i.set(F,[d])}}return i}function Th(e,n,o){e=e.ownerDocument||e,e.head.insertBefore(o,n==="title"?e.querySelector("head > title"):null)}function Z7(e,n,o){if(o===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Mh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Lo=null;function X7(){}function Q7(e,n,o){if(Lo===null)throw Error(l(475));var i=Lo;if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=Dr(o.href),d=e.querySelector(Mo(u));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Fl.bind(i),e.then(i,i)),n.state.loading|=4,n.instance=d,_0(d);return}d=e.ownerDocument||e,o=Rh(o),(u=ve.get(u))&&jc(o,u),d=d.createElement("link"),_0(d);var F=d;F._p=new Promise(function(S,M){F.onload=S,F.onerror=M}),k2(d,"link",o),n.instance=d}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(i.count++,n=Fl.bind(i),e.addEventListener("load",n),e.addEventListener("error",n))}}function J7(){if(Lo===null)throw Error(l(475));var e=Lo;return e.stylesheets&&e.count===0&&Ic(e,e.stylesheets),0<e.count?function(n){var o=setTimeout(function(){if(e.stylesheets&&Ic(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Fl(){if(this.count--,this.count===0){if(this.stylesheets)Ic(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bl=null;function Ic(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bl=new Map,n.forEach(e6,e),Bl=null,Fl.call(e))}function e6(e,n){if(!(n.state.loading&4)){var o=Bl.get(e);if(o)var i=o.get(null);else{o=new Map,Bl.set(e,o);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<u.length;d++){var F=u[d];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(o.set(F.dataset.precedence,F),i=F)}i&&o.set(null,i)}u=n.instance,F=u.getAttribute("data-precedence"),d=o.get(F)||i,d===i&&o.set(null,u),o.set(F,u),this.count++,i=Fl.bind(this),u.addEventListener("load",i),u.addEventListener("error",i),d?d.parentNode.insertBefore(u,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var Oo={$$typeof:N,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function t6(e,n,o,i,u,d,F,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=d,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Ph(e,n,o,i,u,d,F,S,M,W,e0,o0){return e=new t6(e,n,o,F,S,M,W,o0),n=1,d===!0&&(n|=24),d=J2(3,null,null,n),e.current=d,d.stateNode=e,n=Ds(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:i,isDehydrated:o,cache:n},Bs(d),e}function Lh(e){return e?(e=Jn,e):Jn}function Oh(e,n,o,i,u,d){u=Lh(u),i.context===null?i.context=u:i.pendingContext=u,i=Rt(n),i.payload={element:o},d=d===void 0?null:d,d!==null&&(i.callback=d),o=_t(e,i,n),o!==null&&(oe(o,e,n),fo(o,e,n))}function jh(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function zc(e,n){jh(e,n),(e=e.alternate)&&jh(e,n)}function Uh(e){if(e.tag===13){var n=Qn(e,67108864);n!==null&&oe(n,e,67108864),zc(e,67108864)}}var bl=!0;function n6(e,n,o,i){var u=O.T;O.T=null;var d=G.p;try{G.p=2,Hc(e,n,o,i)}finally{G.p=d,O.T=u}}function r6(e,n,o,i){var u=O.T;O.T=null;var d=G.p;try{G.p=8,Hc(e,n,o,i)}finally{G.p=d,O.T=u}}function Hc(e,n,o,i){if(bl){var u=Vc(i);if(u===null)Ec(e,n,i,Nl,o),zh(e,i);else if(a6(u,e,n,o,i))i.stopPropagation();else if(zh(e,i),n&4&&-1<o6.indexOf(e)){for(;u!==null;){var d=G0(u);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var F=nt(d.pendingLanes);if(F!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;F;){var M=1<<31-E2(F);S.entanglements[1]|=M,F&=~M}qe(d),(Y0&6)===0&&(ul=U2()+500,Ro(0))}}break;case 13:S=Qn(d,2),S!==null&&oe(S,d,2),fl(),zc(d,2)}if(d=Vc(i),d===null&&Ec(e,n,i,Nl,o),d===u)break;u=d}u!==null&&i.stopPropagation()}else Ec(e,n,i,null,o)}}function Vc(e){return e=Yi(e),Wc(e)}var Nl=null;function Wc(e){if(Nl=null,e=S0(e),e!==null){var n=c(e);if(n===null)e=null;else{var o=n.tag;if(o===13){if(e=A(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Nl=e,null}function Ih(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gr()){case et:return 2;case Ca:return 8;case In:case tt:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var Gc=!1,Wt=null,Gt=null,qt=null,jo=new Map,Uo=new Map,$t=[],o6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zh(e,n){switch(e){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":jo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(n.pointerId)}}function Io(e,n,o,i,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:o,eventSystemFlags:i,nativeEvent:d,targetContainers:[u]},n!==null&&(n=G0(n),n!==null&&Uh(n)),e):(e.eventSystemFlags|=i,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function a6(e,n,o,i,u){switch(n){case"focusin":return Wt=Io(Wt,e,n,o,i,u),!0;case"dragenter":return Gt=Io(Gt,e,n,o,i,u),!0;case"mouseover":return qt=Io(qt,e,n,o,i,u),!0;case"pointerover":var d=u.pointerId;return jo.set(d,Io(jo.get(d)||null,e,n,o,i,u)),!0;case"gotpointercapture":return d=u.pointerId,Uo.set(d,Io(Uo.get(d)||null,e,n,o,i,u)),!0}return!1}function Hh(e){var n=S0(e.target);if(n!==null){var o=c(n);if(o!==null){if(n=o.tag,n===13){if(n=A(o),n!==null){e.blockedOn=n,z(e.priority,function(){if(o.tag===13){var i=re();i=$r(i);var u=Qn(o,i);u!==null&&oe(u,o,i),zc(o,i)}});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=Vc(e.nativeEvent);if(o===null){o=e.nativeEvent;var i=new o.constructor(o.type,o);$i=i,o.target.dispatchEvent(i),$i=null}else return n=G0(o),n!==null&&Uh(n),e.blockedOn=o,!1;n.shift()}return!0}function Vh(e,n,o){Sl(e)&&o.delete(n)}function l6(){Gc=!1,Wt!==null&&Sl(Wt)&&(Wt=null),Gt!==null&&Sl(Gt)&&(Gt=null),qt!==null&&Sl(qt)&&(qt=null),jo.forEach(Vh),Uo.forEach(Vh)}function El(e,n){e.blockedOn===n&&(e.blockedOn=null,Gc||(Gc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,l6)))}var Rl=null;function Wh(e){Rl!==e&&(Rl=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Rl===e&&(Rl=null);for(var n=0;n<e.length;n+=3){var o=e[n],i=e[n+1],u=e[n+2];if(typeof i!="function"){if(Wc(i||o)===null)continue;break}var d=G0(o);d!==null&&(e.splice(n,3),n-=3,Ws(d,{pending:!0,data:u,method:o.method,action:i},i,u))}}))}function zo(e){function n(M){return El(M,e)}Wt!==null&&El(Wt,e),Gt!==null&&El(Gt,e),qt!==null&&El(qt,e),jo.forEach(n),Uo.forEach(n);for(var o=0;o<$t.length;o++){var i=$t[o];i.blockedOn===e&&(i.blockedOn=null)}for(;0<$t.length&&(o=$t[0],o.blockedOn===null);)Hh(o),o.blockedOn===null&&$t.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(i=0;i<o.length;i+=3){var u=o[i],d=o[i+1],F=u[c0]||null;if(typeof d=="function")F||Wh(o);else if(F){var S=null;if(d&&d.hasAttribute("formAction")){if(u=d,F=d[c0]||null)S=F.formAction;else if(Wc(u)!==null)continue}else S=F.action;typeof S=="function"?o[i+1]=S:(o.splice(i,3),i-=3),Wh(o)}}}function qc(e){this._internalRoot=e}_l.prototype.render=qc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var o=n.current,i=re();Oh(o,i,e,n,null,null)},_l.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Oh(e.current,2,null,e,null,null),fl(),n[p0]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var n=P();e={blockedOn:null,target:e,priority:n};for(var o=0;o<$t.length&&n!==0&&n<$t[o].priority;o++);$t.splice(o,0,e),o===0&&Hh(e)}};var Gh=r.version;if(Gh!=="19.1.1")throw Error(l(527,Gh,"19.1.1"));G.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(n),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var i6={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{G2=kl.inject(i6),i2=kl}catch{}}return Vo.createRoot=function(e,n){if(!s(e))throw Error(l(299));var o=!1,i="",u=i3,d=s3,F=c3,S=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(F=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(S=n.unstable_transitionCallbacks)),n=Ph(e,1,!1,null,null,o,i,u,d,F,S,null),e[p0]=n.current,Sc(e),new qc(n)},Vo.hydrateRoot=function(e,n,o){if(!s(e))throw Error(l(299));var i=!1,u="",d=i3,F=s3,S=c3,M=null,W=null;return o!=null&&(o.unstable_strictMode===!0&&(i=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(F=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(M=o.unstable_transitionCallbacks),o.formState!==void 0&&(W=o.formState)),n=Ph(e,1,!0,n,o??null,i,u,d,F,S,M,W),n.context=Lh(null),o=n.current,i=re(),i=$r(i),u=Rt(i),u.callback=null,_t(o,u,i),o=i,n.current.lanes=o,sn(n,o),qe(n),e[p0]=n.current,Sc(e),new _l(n)},Vo.version="19.1.1",Vo}var tp;function g6(){if(tp)return Yc.exports;tp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Yc.exports=C6(),Yc.exports}var y6=g6(),y=uA();const r2=gi(y),yi=Lm({__proto__:null,default:r2},[y]);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jm=t=>{throw TypeError(t)},v6=(t,r,a)=>r.has(t)||jm("Cannot "+a),Jc=(t,r,a)=>(v6(t,r,"read from private field"),a?a.call(t):r.get(t)),D6=(t,r,a)=>r.has(t)?jm("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(t):r.set(t,a),np="popstate";function w6(t={}){function r(l,s){let{pathname:c,search:A,hash:f}=l.location;return Jo("",{pathname:c,search:A,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(l,s){return typeof s=="string"?s:Xt(s)}return F6(r,a,null,t)}function O0(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function p2(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function x6(){return Math.random().toString(36).substring(2,10)}function rp(t,r){return{usr:t.state,key:t.key,idx:r}}function Jo(t,r,a=null,l){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof r=="string"?en(r):r,state:a,key:r&&r.key||l||x6()}}function Xt({pathname:t="/",search:r="",hash:a=""}){return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function en(t){let r={};if(t){let a=t.indexOf("#");a>=0&&(r.hash=t.substring(a),t=t.substring(0,a));let l=t.indexOf("?");l>=0&&(r.search=t.substring(l),t=t.substring(0,l)),t&&(r.pathname=t)}return r}function F6(t,r,a,l={}){let{window:s=document.defaultView,v5Compat:c=!1}=l,A=s.history,f="POP",p=null,h=g();h==null&&(h=0,A.replaceState({...A.state,idx:h},""));function g(){return(A.state||{idx:null}).idx}function m(){f="POP";let B=g(),b=B==null?null:B-h;h=B,p&&p({action:f,location:w.location,delta:b})}function v(B,b){f="PUSH";let E=Jo(w.location,B,b);h=g()+1;let N=rp(E,h),_=w.createHref(E);try{A.pushState(N,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(_)}c&&p&&p({action:f,location:w.location,delta:1})}function D(B,b){f="REPLACE";let E=Jo(w.location,B,b);h=g();let N=rp(E,h),_=w.createHref(E);A.replaceState(N,"",_),c&&p&&p({action:f,location:w.location,delta:0})}function x(B){return Um(B)}let w={get action(){return f},get location(){return t(s,A)},listen(B){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(np,m),p=B,()=>{s.removeEventListener(np,m),p=null}},createHref(B){return r(s,B)},createURL:x,encodeLocation(B){let b=x(B);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:D,go(B){return A.go(B)}};return w}function Um(t,r=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),O0(a,"No window.location.(origin|href) available to create URL");let l=typeof t=="string"?t:Xt(t);return l=l.replace(/ $/,"%20"),!r&&l.startsWith("//")&&(l=a+l),new URL(l,a)}var Yo,op=class{constructor(t){if(D6(this,Yo,new Map),t)for(let[r,a]of t)this.set(r,a)}get(t){if(Jc(this,Yo).has(t))return Jc(this,Yo).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,r){Jc(this,Yo).set(t,r)}};Yo=new WeakMap;var B6=new Set(["lazy","caseSensitive","path","id","index","children"]);function b6(t){return B6.has(t)}var N6=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function S6(t){return N6.has(t)}function E6(t){return t.index===!0}function ea(t,r,a=[],l={},s=!1){return t.map((c,A)=>{let f=[...a,String(A)],p=typeof c.id=="string"?c.id:f.join("-");if(O0(c.index!==!0||!c.children,"Cannot specify children on an index route"),O0(s||!l[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),E6(c)){let h={...c,...r(c),id:p};return l[p]=h,h}else{let h={...c,...r(c),id:p,children:void 0};return l[p]=h,c.children&&(h.children=ea(c.children,r,f,l,s)),h}})}function vt(t,r,a="/"){return Kl(t,r,a,!1)}function Kl(t,r,a,l){let s=typeof r=="string"?en(r):r,c=ce(s.pathname||"/",a);if(c==null)return null;let A=zm(t);R6(A);let f=null;for(let p=0;f==null&&p<A.length;++p){let h=Vm(c);f=U6(A[p],h,l)}return f}function Im(t,r){let{route:a,pathname:l,params:s}=t;return{id:a.id,pathname:l,params:s,data:r[a.id],handle:a.handle}}function zm(t,r=[],a=[],l=""){let s=(c,A,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:A,route:c};p.relativePath.startsWith("/")&&(O0(p.relativePath.startsWith(l),`Absolute route path "${p.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(l.length));let h=Ke([l,p.relativePath]),g=a.concat(p);c.children&&c.children.length>0&&(O0(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),zm(c.children,r,g,h)),!(c.path==null&&!c.index)&&r.push({path:h,score:O6(h,c.index),routesMeta:g})};return t.forEach((c,A)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))s(c,A);else for(let p of Hm(c.path))s(c,A,p)}),r}function Hm(t){let r=t.split("/");if(r.length===0)return[];let[a,...l]=r,s=a.endsWith("?"),c=a.replace(/\?$/,"");if(l.length===0)return s?[c,""]:[c];let A=Hm(l.join("/")),f=[];return f.push(...A.map(p=>p===""?c:[c,p].join("/"))),s&&f.push(...A),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function R6(t){t.sort((r,a)=>r.score!==a.score?a.score-r.score:j6(r.routesMeta.map(l=>l.childrenIndex),a.routesMeta.map(l=>l.childrenIndex)))}var _6=/^:[\w-]+$/,k6=3,T6=2,M6=1,P6=10,L6=-2,ap=t=>t==="*";function O6(t,r){let a=t.split("/"),l=a.length;return a.some(ap)&&(l+=L6),r&&(l+=T6),a.filter(s=>!ap(s)).reduce((s,c)=>s+(_6.test(c)?k6:c===""?M6:P6),l)}function j6(t,r){return t.length===r.length&&t.slice(0,-1).every((l,s)=>l===r[s])?t[t.length-1]-r[r.length-1]:0}function U6(t,r,a=!1){let{routesMeta:l}=t,s={},c="/",A=[];for(let f=0;f<l.length;++f){let p=l[f],h=f===l.length-1,g=c==="/"?r:r.slice(c.length)||"/",m=Rn({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},g),v=p.route;if(!m&&h&&a&&!l[l.length-1].route.index&&(m=Rn({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},g)),!m)return null;Object.assign(s,m.params),A.push({params:s,pathname:Ke([c,m.pathname]),pathnameBase:W6(Ke([c,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(c=Ke([c,m.pathnameBase]))}return A}function Rn(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,l]=I6(t.path,t.caseSensitive,t.end),s=r.match(a);if(!s)return null;let c=s[0],A=c.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:l.reduce((h,{paramName:g,isOptional:m},v)=>{if(g==="*"){let x=f[v]||"";A=c.slice(0,c.length-x.length).replace(/(.)\/+$/,"$1")}const D=f[v];return m&&!D?h[g]=void 0:h[g]=(D||"").replace(/%2F/g,"/"),h},{}),pathname:c,pathnameBase:A,pattern:t}}function I6(t,r=!1,a=!0){p2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let l=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(A,f,p)=>(l.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(l.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,r?void 0:"i"),l]}function Vm(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return p2(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),t}}function ce(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,l=t.charAt(a);return l&&l!=="/"?null:t.slice(a)||"/"}function z6({basename:t,pathname:r}){return r==="/"?t:Ke([t,r])}function H6(t,r="/"){let{pathname:a,search:l="",hash:s=""}=typeof t=="string"?en(t):t;return{pathname:a?a.startsWith("/")?a:V6(a,r):r,search:G6(l),hash:q6(s)}}function V6(t,r){let a=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function eu(t,r,a,l){return`Cannot include a '${t}' character in a manually specified \`to.${r}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wm(t){return t.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function AA(t){let r=Wm(t);return r.map((a,l)=>l===r.length-1?a.pathname:a.pathnameBase)}function fA(t,r,a,l=!1){let s;typeof t=="string"?s=en(t):(s={...t},O0(!s.pathname||!s.pathname.includes("?"),eu("?","pathname","search",s)),O0(!s.pathname||!s.pathname.includes("#"),eu("#","pathname","hash",s)),O0(!s.search||!s.search.includes("#"),eu("#","search","hash",s)));let c=t===""||s.pathname==="",A=c?"/":s.pathname,f;if(A==null)f=a;else{let m=r.length-1;if(!l&&A.startsWith("..")){let v=A.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}f=m>=0?r[m]:"/"}let p=H6(s,f),h=A&&A!=="/"&&A.endsWith("/"),g=(c||A===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(h||g)&&(p.pathname+="/"),p}var Ke=t=>t.join("/").replace(/\/\/+/g,"/"),W6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),G6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,q6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,oi=class{constructor(t,r,a,l=!1){this.status=t,this.statusText=r||"",this.internal=l,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function ta(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Gm=["POST","PUT","PATCH","DELETE"],$6=new Set(Gm),Y6=["GET",...Gm],K6=new Set(Y6),Z6=new Set([301,302,303,307,308]),X6=new Set([307,308]),tu={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Q6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},J6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dA=t=>J6.test(t),e1=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),qm="remix-router-transitions",$m=Symbol("ResetLoaderData");function t1(t){const r=t.window?t.window:typeof window<"u"?window:void 0,a=typeof r<"u"&&typeof r.document<"u"&&typeof r.document.createElement<"u";O0(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let l=t.hydrationRouteProperties||[],s=t.mapRouteProperties||e1,c={},A=ea(t.routes,s,void 0,c),f,p=t.basename||"/",h=t.dataStrategy||l1,g={unstable_middleware:!1,...t.future},m=null,v=new Set,D=null,x=null,w=null,B=t.hydrationData!=null,b=vt(A,t.history.location,p),E=!1,N=null,_;if(b==null&&!t.patchRoutesOnNavigation){let P=De(404,{pathname:t.history.location.pathname}),{matches:z,route:Z}=Cp(A);_=!0,b=z,N={[Z.id]:P}}else if(b&&!t.hydrationData&&cn(b,A,t.history.location.pathname).active&&(b=null),b)if(b.some(P=>P.route.lazy))_=!1;else if(!b.some(P=>P.route.loader))_=!0;else{let P=t.hydrationData?t.hydrationData.loaderData:null,z=t.hydrationData?t.hydrationData.errors:null;if(z){let Z=b.findIndex(a0=>z[a0.route.id]!==void 0);_=b.slice(0,Z+1).every(a0=>!Tu(a0.route,P,z))}else _=b.every(Z=>!Tu(Z.route,P,z))}else{_=!1,b=[];let P=cn(null,A,t.history.location.pathname);P.active&&P.matches&&(E=!0,b=P.matches)}let T,R={historyAction:t.history.action,location:t.history.location,matches:b,initialized:_,navigation:tu,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||N,fetchers:new Map,blockers:new Map},L="POP",I=!1,V,r0=!1,u0=new Map,l0=null,i0=!1,q=!1,A0=new Set,O=new Map,G=0,X=-1,K=new Map,k=new Set,Q=new Map,J=new Map,n0=new Set,f0=new Map,x0,m0=null;function $0(){if(m=t.history.listen(({action:P,location:z,delta:Z})=>{if(x0){x0(),x0=void 0;return}p2(f0.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a0=va({currentLocation:R.location,nextLocation:z,historyAction:P});if(a0&&Z!=null){let c0=new Promise(p0=>{x0=p0});t.history.go(Z*-1),Ie(a0,{state:"blocked",location:z,proceed(){Ie(a0,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),c0.then(()=>t.history.go(Z))},reset(){let p0=new Map(R.blockers);p0.set(a0,Wo),H0({blockers:p0})}});return}return W2(P,z)}),a){C1(r,u0);let P=()=>g1(r,u0);r.addEventListener("pagehide",P),l0=()=>r.removeEventListener("pagehide",P)}return R.initialized||W2("POP",R.location,{initialHydration:!0}),T}function b0(){m&&m(),l0&&l0(),v.clear(),V&&V.abort(),R.fetchers.forEach((P,z)=>E2(z)),R.blockers.forEach((P,z)=>ln(z))}function T0(P){return v.add(P),()=>v.delete(P)}function H0(P,z={}){P.matches&&(P.matches=P.matches.map(c0=>{let p0=c[c0.route.id],g0=c0.route;return g0.element!==p0.element||g0.errorElement!==p0.errorElement||g0.hydrateFallbackElement!==p0.hydrateFallbackElement?{...c0,route:p0}:c0})),R={...R,...P};let Z=[],a0=[];R.fetchers.forEach((c0,p0)=>{c0.state==="idle"&&(n0.has(p0)?Z.push(p0):a0.push(p0))}),n0.forEach(c0=>{!R.fetchers.has(c0)&&!O.has(c0)&&Z.push(c0)}),[...v].forEach(c0=>c0(R,{deletedFetchers:Z,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),Z.forEach(c0=>E2(c0)),a0.forEach(c0=>R.fetchers.delete(c0))}function u2(P,z,{flushSync:Z}={}){var w0,y0;let a0=R.actionData!=null&&R.navigation.formMethod!=null&&Z2(R.navigation.formMethod)&&R.navigation.state==="loading"&&((w0=P.state)==null?void 0:w0._isRedirect)!==!0,c0;z.actionData?Object.keys(z.actionData).length>0?c0=z.actionData:c0=null:a0?c0=R.actionData:c0=null;let p0=z.loaderData?pp(R.loaderData,z.loaderData,z.matches||[],z.errors):R.loaderData,g0=R.blockers;g0.size>0&&(g0=new Map(g0),g0.forEach((S0,G0)=>g0.set(G0,Wo)));let C0=i0?!1:wa(P,z.matches||R.matches),D0=I===!0||R.navigation.formMethod!=null&&Z2(R.navigation.formMethod)&&((y0=P.state)==null?void 0:y0._isRedirect)!==!0;f&&(A=f,f=void 0),i0||L==="POP"||(L==="PUSH"?t.history.push(P,P.state):L==="REPLACE"&&t.history.replace(P,P.state));let F0;if(L==="POP"){let S0=u0.get(R.location.pathname);S0&&S0.has(P.pathname)?F0={currentLocation:R.location,nextLocation:P}:u0.has(P.pathname)&&(F0={currentLocation:P,nextLocation:R.location})}else if(r0){let S0=u0.get(R.location.pathname);S0?S0.add(P.pathname):(S0=new Set([P.pathname]),u0.set(R.location.pathname,S0)),F0={currentLocation:R.location,nextLocation:P}}H0({...z,actionData:c0,loaderData:p0,historyAction:L,location:P,initialized:!0,navigation:tu,revalidation:"idle",restoreScrollPosition:C0,preventScrollReset:D0,blockers:g0},{viewTransitionOpts:F0,flushSync:Z===!0}),L="POP",I=!1,r0=!1,i0=!1,q=!1,m0==null||m0.resolve(),m0=null}async function M2(P,z){if(typeof P=="number"){t.history.go(P);return}let Z=ku(R.location,R.matches,p,P,z==null?void 0:z.fromRouteId,z==null?void 0:z.relative),{path:a0,submission:c0,error:p0}=lp(!1,Z,z),g0=R.location,C0=Jo(R.location,a0,z&&z.state);C0={...C0,...t.history.encodeLocation(C0)};let D0=z&&z.replace!=null?z.replace:void 0,F0="PUSH";D0===!0?F0="REPLACE":D0===!1||c0!=null&&Z2(c0.formMethod)&&c0.formAction===R.location.pathname+R.location.search&&(F0="REPLACE");let w0=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,y0=(z&&z.flushSync)===!0,S0=va({currentLocation:g0,nextLocation:C0,historyAction:F0});if(S0){Ie(S0,{state:"blocked",location:C0,proceed(){Ie(S0,{state:"proceeding",proceed:void 0,reset:void 0,location:C0}),M2(P,z)},reset(){let G0=new Map(R.blockers);G0.set(S0,Wo),H0({blockers:G0})}});return}await W2(F0,C0,{submission:c0,pendingError:p0,preventScrollReset:w0,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:y0})}function Ee(){m0||(m0=y1()),qr(),H0({revalidation:"loading"});let P=m0.promise;return R.navigation.state==="submitting"?P:R.navigation.state==="idle"?(W2(R.historyAction,R.location,{startUninterruptedRevalidation:!0}),P):(W2(L||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:r0===!0}),P)}async function W2(P,z,Z){V&&V.abort(),V=null,L=P,i0=(Z&&Z.startUninterruptedRevalidation)===!0,sn(R.location,R.matches),I=(Z&&Z.preventScrollReset)===!0,r0=(Z&&Z.enableViewTransition)===!0;let a0=f||A,c0=Z&&Z.overrideNavigation,p0=Z!=null&&Z.initialHydration&&R.matches&&R.matches.length>0&&!E?R.matches:vt(a0,z,p),g0=(Z&&Z.flushSync)===!0;if(p0&&R.initialized&&!q&&f1(R.location,z)&&!(Z&&Z.submission&&Z2(Z.submission.formMethod))){u2(z,{matches:p0},{flushSync:g0});return}let C0=cn(p0,a0,z.pathname);if(C0.active&&C0.matches&&(p0=C0.matches),!p0){let{error:f2,notFoundMatches:_0,route:Z0}=zn(z.pathname);u2(z,{matches:_0,loaderData:{},errors:{[Z0.id]:f2}},{flushSync:g0});return}V=new AbortController;let D0=Nr(t.history,z,V.signal,Z&&Z.submission),F0=new op(t.unstable_getContext?await t.unstable_getContext():void 0),w0;if(Z&&Z.pendingError)w0=[Sn(p0).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&Z2(Z.submission.formMethod)){let f2=await Vr(D0,z,Z.submission,p0,F0,C0.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:g0});if(f2.shortCircuited)return;if(f2.pendingActionResult){let[_0,Z0]=f2.pendingActionResult;if(le(Z0)&&ta(Z0.error)&&Z0.error.status===404){V=null,u2(z,{matches:f2.matches,loaderData:{},errors:{[_0]:Z0.error}});return}}p0=f2.matches||p0,w0=f2.pendingActionResult,c0=nu(z,Z.submission),g0=!1,C0.active=!1,D0=Nr(t.history,D0.url,D0.signal)}let{shortCircuited:y0,matches:S0,loaderData:G0,errors:A2}=await Wr(D0,z,p0,F0,C0.active,c0,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,g0,w0);y0||(V=null,u2(z,{matches:S0||p0,...mp(w0),loaderData:G0,errors:A2}))}async function Vr(P,z,Z,a0,c0,p0,g0,C0={}){qr();let D0=p1(z,Z);if(H0({navigation:D0},{flushSync:C0.flushSync===!0}),p0){let y0=await un(a0,z.pathname,P.signal);if(y0.type==="aborted")return{shortCircuited:!0};if(y0.type==="error"){let S0=Sn(y0.partialMatches).route.id;return{matches:y0.partialMatches,pendingActionResult:[S0,{type:"error",error:y0.error}]}}else if(y0.matches)a0=y0.matches;else{let{notFoundMatches:S0,error:G0,route:A2}=zn(z.pathname);return{matches:S0,pendingActionResult:[A2.id,{type:"error",error:G0}]}}}let F0,w0=Zl(a0,z);if(!w0.route.action&&!w0.route.lazy)F0={type:"error",error:De(405,{method:P.method,pathname:z.pathname,routeId:w0.route.id})};else{let y0=Er(s,c,P,a0,w0,g0?[]:l,c0),S0=await Ft(P,y0,c0,null);if(F0=S0[w0.route.id],!F0){for(let G0 of a0)if(S0[G0.route.id]){F0=S0[G0.route.id];break}}if(P.signal.aborted)return{shortCircuited:!0}}if(En(F0)){let y0;return C0&&C0.replace!=null?y0=C0.replace:y0=fp(F0.response.headers.get("Location"),new URL(P.url),p)===R.location.pathname+R.location.search,await tt(P,F0,!0,{submission:Z,replace:y0}),{shortCircuited:!0}}if(le(F0)){let y0=Sn(a0,w0.route.id);return(C0&&C0.replace)!==!0&&(L="PUSH"),{matches:a0,pendingActionResult:[y0.route.id,F0,w0.route.id]}}return{matches:a0,pendingActionResult:[w0.route.id,F0]}}async function Wr(P,z,Z,a0,c0,p0,g0,C0,D0,F0,w0,y0){let S0=p0||nu(z,g0),G0=g0||C0||yp(S0),A2=!i0&&!F0;if(c0){if(A2){let v2=U2(y0);H0({navigation:S0,...v2!==void 0?{actionData:v2}:{}},{flushSync:w0})}let j0=await un(Z,z.pathname,P.signal);if(j0.type==="aborted")return{shortCircuited:!0};if(j0.type==="error"){let v2=Sn(j0.partialMatches).route.id;return{matches:j0.partialMatches,loaderData:{},errors:{[v2]:j0.error}}}else if(j0.matches)Z=j0.matches;else{let{error:v2,notFoundMatches:An,route:Ae}=zn(z.pathname);return{matches:An,loaderData:{},errors:{[Ae.id]:v2}}}}let f2=f||A,{dsMatches:_0,revalidatingFetchers:Z0}=ip(P,a0,s,c,t.history,R,Z,G0,z,F0?[]:l,F0===!0,q,A0,n0,Q,k,f2,p,t.patchRoutesOnNavigation!=null,y0);if(X=++G,!t.dataStrategy&&!_0.some(j0=>j0.shouldLoad)&&Z0.length===0){let j0=on();return u2(z,{matches:Z,loaderData:{},errors:y0&&le(y0[1])?{[y0[0]]:y0[1].error}:null,...mp(y0),...j0?{fetchers:new Map(R.fetchers)}:{}},{flushSync:w0}),{shortCircuited:!0}}if(A2){let j0={};if(!c0){j0.navigation=S0;let v2=U2(y0);v2!==void 0&&(j0.actionData=v2)}Z0.length>0&&(j0.fetchers=Gr(Z0)),H0(j0,{flushSync:w0})}Z0.forEach(j0=>{Ue(j0.key),j0.controller&&O.set(j0.key,j0.controller)});let ze=()=>Z0.forEach(j0=>Ue(j0.key));V&&V.signal.addEventListener("abort",ze);let{loaderResults:X2,fetcherResults:I2}=await ga(_0,Z0,P,a0);if(P.signal.aborted)return{shortCircuited:!0};V&&V.signal.removeEventListener("abort",ze),Z0.forEach(j0=>O.delete(j0.key));let ue=Tl(X2);if(ue)return await tt(P,ue.result,!0,{replace:D0}),{shortCircuited:!0};if(ue=Tl(I2),ue)return k.add(ue.key),await tt(P,ue.result,!0,{replace:D0}),{shortCircuited:!0};let{loaderData:Vn,errors:Bt}=hp(R,Z,X2,y0,Z0,I2);F0&&R.errors&&(Bt={...R.errors,...Bt});let rt=on(),ot=an(X),at=rt||ot||Z0.length>0;return{matches:Z,loaderData:Vn,errors:Bt,...at?{fetchers:new Map(R.fetchers)}:{}}}function U2(P){if(P&&!le(P[1]))return{[P[0]]:P[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function Gr(P){return P.forEach(z=>{let Z=R.fetchers.get(z.key),a0=Go(void 0,Z?Z.data:void 0);R.fetchers.set(z.key,a0)}),new Map(R.fetchers)}async function et(P,z,Z,a0){Ue(P);let c0=(a0&&a0.flushSync)===!0,p0=f||A,g0=ku(R.location,R.matches,p,Z,z,a0==null?void 0:a0.relative),C0=vt(p0,g0,p),D0=cn(C0,p0,g0);if(D0.active&&D0.matches&&(C0=D0.matches),!C0){i2(P,z,De(404,{pathname:g0}),{flushSync:c0});return}let{path:F0,submission:w0,error:y0}=lp(!0,g0,a0);if(y0){i2(P,z,y0,{flushSync:c0});return}let S0=new op(t.unstable_getContext?await t.unstable_getContext():void 0),G0=(a0&&a0.preventScrollReset)===!0;if(w0&&Z2(w0.formMethod)){await Ca(P,z,F0,C0,S0,D0.active,c0,G0,w0);return}Q.set(P,{routeId:z,path:F0}),await In(P,z,F0,C0,S0,D0.active,c0,G0,w0)}async function Ca(P,z,Z,a0,c0,p0,g0,C0,D0){qr(),Q.delete(P);let F0=R.fetchers.get(P);G2(P,m1(D0,F0),{flushSync:g0});let w0=new AbortController,y0=Nr(t.history,Z,w0.signal,D0);if(p0){let s2=await un(a0,new URL(y0.url).pathname,y0.signal,P);if(s2.type==="aborted")return;if(s2.type==="error"){i2(P,z,s2.error,{flushSync:g0});return}else if(s2.matches)a0=s2.matches;else{i2(P,z,De(404,{pathname:Z}),{flushSync:g0});return}}let S0=Zl(a0,Z);if(!S0.route.action&&!S0.route.lazy){let s2=De(405,{method:D0.formMethod,pathname:Z,routeId:z});i2(P,z,s2,{flushSync:g0});return}O.set(P,w0);let G0=G,A2=Er(s,c,y0,a0,S0,l,c0),_0=(await Ft(y0,A2,c0,P))[S0.route.id];if(y0.signal.aborted){O.get(P)===w0&&O.delete(P);return}if(n0.has(P)){if(En(_0)||le(_0)){G2(P,Kt(void 0));return}}else{if(En(_0))if(O.delete(P),X>G0){G2(P,Kt(void 0));return}else return k.add(P),G2(P,Go(D0)),tt(y0,_0,!1,{fetcherSubmission:D0,preventScrollReset:C0});if(le(_0)){i2(P,z,_0.error);return}}let Z0=R.navigation.location||R.location,ze=Nr(t.history,Z0,w0.signal),X2=f||A,I2=R.navigation.state!=="idle"?vt(X2,R.navigation.location,p):R.matches;O0(I2,"Didn't find any matches after fetcher action");let ue=++G;K.set(P,ue);let Vn=Go(D0,_0.data);R.fetchers.set(P,Vn);let{dsMatches:Bt,revalidatingFetchers:rt}=ip(ze,c0,s,c,t.history,R,I2,D0,Z0,l,!1,q,A0,n0,Q,k,X2,p,t.patchRoutesOnNavigation!=null,[S0.route.id,_0]);rt.filter(s2=>s2.key!==P).forEach(s2=>{let bt=s2.key,xa=R.fetchers.get(bt),Fa=Go(void 0,xa?xa.data:void 0);R.fetchers.set(bt,Fa),Ue(bt),s2.controller&&O.set(bt,s2.controller)}),H0({fetchers:new Map(R.fetchers)});let ot=()=>rt.forEach(s2=>Ue(s2.key));w0.signal.addEventListener("abort",ot);let{loaderResults:at,fetcherResults:j0}=await ga(Bt,rt,ze,c0);if(w0.signal.aborted)return;if(w0.signal.removeEventListener("abort",ot),K.delete(P),O.delete(P),rt.forEach(s2=>O.delete(s2.key)),R.fetchers.has(P)){let s2=Kt(_0.data);R.fetchers.set(P,s2)}let v2=Tl(at);if(v2)return tt(ze,v2.result,!1,{preventScrollReset:C0});if(v2=Tl(j0),v2)return k.add(v2.key),tt(ze,v2.result,!1,{preventScrollReset:C0});let{loaderData:An,errors:Ae}=hp(R,I2,at,void 0,rt,j0);an(ue),R.navigation.state==="loading"&&ue>X?(O0(L,"Expected pending action"),V&&V.abort(),u2(R.navigation.location,{matches:I2,loaderData:An,errors:Ae,fetchers:new Map(R.fetchers)})):(H0({errors:Ae,loaderData:pp(R.loaderData,An,I2,Ae),fetchers:new Map(R.fetchers)}),q=!1)}async function In(P,z,Z,a0,c0,p0,g0,C0,D0){let F0=R.fetchers.get(P);G2(P,Go(D0,F0?F0.data:void 0),{flushSync:g0});let w0=new AbortController,y0=Nr(t.history,Z,w0.signal);if(p0){let Z0=await un(a0,new URL(y0.url).pathname,y0.signal,P);if(Z0.type==="aborted")return;if(Z0.type==="error"){i2(P,z,Z0.error,{flushSync:g0});return}else if(Z0.matches)a0=Z0.matches;else{i2(P,z,De(404,{pathname:Z}),{flushSync:g0});return}}let S0=Zl(a0,Z);O.set(P,w0);let G0=G,A2=Er(s,c,y0,a0,S0,l,c0),_0=(await Ft(y0,A2,c0,P))[S0.route.id];if(O.get(P)===w0&&O.delete(P),!y0.signal.aborted){if(n0.has(P)){G2(P,Kt(void 0));return}if(En(_0))if(X>G0){G2(P,Kt(void 0));return}else{k.add(P),await tt(y0,_0,!1,{preventScrollReset:C0});return}if(le(_0)){i2(P,z,_0.error);return}G2(P,Kt(_0.data))}}async function tt(P,z,Z,{submission:a0,fetcherSubmission:c0,preventScrollReset:p0,replace:g0}={}){z.response.headers.has("X-Remix-Revalidate")&&(q=!0);let C0=z.response.headers.get("Location");O0(C0,"Expected a Location header on the redirect Response"),C0=fp(C0,new URL(P.url),p);let D0=Jo(R.location,C0,{_isRedirect:!0});if(a){let A2=!1;if(z.response.headers.has("X-Remix-Reload-Document"))A2=!0;else if(dA(C0)){const f2=Um(C0,!0);A2=f2.origin!==r.location.origin||ce(f2.pathname,p)==null}if(A2){g0?r.location.replace(C0):r.location.assign(C0);return}}V=null;let F0=g0===!0||z.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:w0,formAction:y0,formEncType:S0}=R.navigation;!a0&&!c0&&w0&&y0&&S0&&(a0=yp(R.navigation));let G0=a0||c0;if(X6.has(z.response.status)&&G0&&Z2(G0.formMethod))await W2(F0,D0,{submission:{...G0,formAction:C0},preventScrollReset:p0||I,enableViewTransition:Z?r0:void 0});else{let A2=nu(D0,a0);await W2(F0,D0,{overrideNavigation:A2,fetcherSubmission:c0,preventScrollReset:p0||I,enableViewTransition:Z?r0:void 0})}}async function Ft(P,z,Z,a0){let c0,p0={};try{c0=await i1(h,P,z,a0,Z,!1)}catch(g0){return z.filter(C0=>C0.shouldLoad).forEach(C0=>{p0[C0.route.id]={type:"error",error:g0}}),p0}if(P.signal.aborted)return p0;for(let[g0,C0]of Object.entries(c0))if(d1(C0)){let D0=C0.result;p0[g0]={type:"redirect",response:u1(D0,P,g0,z,p)}}else p0[g0]=await c1(C0);return p0}async function ga(P,z,Z,a0){let c0=Ft(Z,P,a0,null),p0=Promise.all(z.map(async D0=>{if(D0.matches&&D0.match&&D0.request&&D0.controller){let w0=(await Ft(D0.request,D0.matches,a0,D0.key))[D0.match.route.id];return{[D0.key]:w0}}else return Promise.resolve({[D0.key]:{type:"error",error:De(404,{pathname:D0.path})}})})),g0=await c0,C0=(await p0).reduce((D0,F0)=>Object.assign(D0,F0),{});return{loaderResults:g0,fetcherResults:C0}}function qr(){q=!0,Q.forEach((P,z)=>{O.has(z)&&A0.add(z),Ue(z)})}function G2(P,z,Z={}){R.fetchers.set(P,z),H0({fetchers:new Map(R.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function i2(P,z,Z,a0={}){let c0=Sn(R.matches,z);E2(P),H0({errors:{[c0.route.id]:Z},fetchers:new Map(R.fetchers)},{flushSync:(a0&&a0.flushSync)===!0})}function Re(P){return J.set(P,(J.get(P)||0)+1),n0.has(P)&&n0.delete(P),R.fetchers.get(P)||Q6}function E2(P){let z=R.fetchers.get(P);O.has(P)&&!(z&&z.state==="loading"&&K.has(P))&&Ue(P),Q.delete(P),K.delete(P),k.delete(P),n0.delete(P),A0.delete(P),R.fetchers.delete(P)}function Vi(P){let z=(J.get(P)||0)-1;z<=0?(J.delete(P),n0.add(P)):J.set(P,z),H0({fetchers:new Map(R.fetchers)})}function Ue(P){let z=O.get(P);z&&(z.abort(),O.delete(P))}function ya(P){for(let z of P){let Z=Re(z),a0=Kt(Z.data);R.fetchers.set(z,a0)}}function on(){let P=[],z=!1;for(let Z of k){let a0=R.fetchers.get(Z);O0(a0,`Expected fetcher: ${Z}`),a0.state==="loading"&&(k.delete(Z),P.push(Z),z=!0)}return ya(P),z}function an(P){let z=[];for(let[Z,a0]of K)if(a0<P){let c0=R.fetchers.get(Z);O0(c0,`Expected fetcher: ${Z}`),c0.state==="loading"&&(Ue(Z),K.delete(Z),z.push(Z))}return ya(z),z.length>0}function nt(P,z){let Z=R.blockers.get(P)||Wo;return f0.get(P)!==z&&f0.set(P,z),Z}function ln(P){R.blockers.delete(P),f0.delete(P)}function Ie(P,z){let Z=R.blockers.get(P)||Wo;O0(Z.state==="unblocked"&&z.state==="blocked"||Z.state==="blocked"&&z.state==="blocked"||Z.state==="blocked"&&z.state==="proceeding"||Z.state==="blocked"&&z.state==="unblocked"||Z.state==="proceeding"&&z.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${z.state}`);let a0=new Map(R.blockers);a0.set(P,z),H0({blockers:a0})}function va({currentLocation:P,nextLocation:z,historyAction:Z}){if(f0.size===0)return;f0.size>1&&p2(!1,"A router only supports one blocker at a time");let a0=Array.from(f0.entries()),[c0,p0]=a0[a0.length-1],g0=R.blockers.get(c0);if(!(g0&&g0.state==="proceeding")&&p0({currentLocation:P,nextLocation:z,historyAction:Z}))return c0}function zn(P){let z=De(404,{pathname:P}),Z=f||A,{matches:a0,route:c0}=Cp(Z);return{notFoundMatches:a0,route:c0,error:z}}function Da(P,z,Z){if(D=P,w=z,x=Z||null,!B&&R.navigation===tu){B=!0;let a0=wa(R.location,R.matches);a0!=null&&H0({restoreScrollPosition:a0})}return()=>{D=null,w=null,x=null}}function Hn(P,z){return x&&x(P,z.map(a0=>Im(a0,R.loaderData)))||P.key}function sn(P,z){if(D&&w){let Z=Hn(P,z);D[Z]=w()}}function wa(P,z){if(D){let Z=Hn(P,z),a0=D[Z];if(typeof a0=="number")return a0}return null}function cn(P,z,Z){if(t.patchRoutesOnNavigation)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Kl(z,Z,p,!0)}}else return{active:!0,matches:Kl(z,Z,p,!0)||[]};return{active:!1,matches:null}}async function un(P,z,Z,a0){if(!t.patchRoutesOnNavigation)return{type:"success",matches:P};let c0=P;for(;;){let p0=f==null,g0=f||A,C0=c;try{await t.patchRoutesOnNavigation({signal:Z,path:z,matches:c0,fetcherKey:a0,patch:(w0,y0)=>{Z.aborted||sp(w0,y0,g0,C0,s,!1)}})}catch(w0){return{type:"error",error:w0,partialMatches:c0}}finally{p0&&!Z.aborted&&(A=[...A])}if(Z.aborted)return{type:"aborted"};let D0=vt(g0,z,p);if(D0)return{type:"success",matches:D0};let F0=Kl(g0,z,p,!0);if(!F0||c0.length===F0.length&&c0.every((w0,y0)=>w0.route.id===F0[y0].route.id))return{type:"success",matches:null};c0=F0}}function $r(P){c={},f=ea(P,s,void 0,c)}function Yr(P,z,Z=!1){let a0=f==null;sp(P,z,f||A,c,s,Z),a0&&(A=[...A],H0({}))}return T={get basename(){return p},get future(){return g},get state(){return R},get routes(){return A},get window(){return r},initialize:$0,subscribe:T0,enableScrollRestoration:Da,navigate:M2,fetch:et,revalidate:Ee,createHref:P=>t.history.createHref(P),encodeLocation:P=>t.history.encodeLocation(P),getFetcher:Re,deleteFetcher:Vi,dispose:b0,getBlocker:nt,deleteBlocker:ln,patchRoutes:Yr,_internalFetchControllers:O,_internalSetRoutes:$r,_internalSetStateDoNotUseOrYouWillBreakYourApp(P){H0(P)}},T}function n1(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ku(t,r,a,l,s,c){let A,f;if(s){A=[];for(let h of r)if(A.push(h),h.route.id===s){f=h;break}}else A=r,f=r[r.length-1];let p=fA(l||".",AA(A),ce(t.pathname,a)||t.pathname,c==="path");if(l==null&&(p.search=t.search,p.hash=t.hash),(l==null||l===""||l===".")&&f){let h=hA(p.search);if(f.route.index&&!h)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&h){let g=new URLSearchParams(p.search),m=g.getAll("index");g.delete("index"),m.filter(D=>D).forEach(D=>g.append("index",D));let v=g.toString();p.search=v?`?${v}`:""}}return a!=="/"&&(p.pathname=z6({basename:a,pathname:p.pathname})),Xt(p)}function lp(t,r,a){if(!a||!n1(a))return{path:r};if(a.formMethod&&!h1(a.formMethod))return{path:r,error:De(405,{method:a.formMethod})};let l=()=>({path:r,error:De(400,{type:"invalid-body"})}),c=(a.formMethod||"get").toUpperCase(),A=Jm(r);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!Z2(c))return l();let m=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((v,[D,x])=>`${v}${D}=${x}
`,""):String(a.body);return{path:r,submission:{formMethod:c,formAction:A,formEncType:a.formEncType,formData:void 0,json:void 0,text:m}}}else if(a.formEncType==="application/json"){if(!Z2(c))return l();try{let m=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:r,submission:{formMethod:c,formAction:A,formEncType:a.formEncType,formData:void 0,json:m,text:void 0}}}catch{return l()}}}O0(typeof FormData=="function","FormData is not available in this environment");let f,p;if(a.formData)f=Pu(a.formData),p=a.formData;else if(a.body instanceof FormData)f=Pu(a.body),p=a.body;else if(a.body instanceof URLSearchParams)f=a.body,p=dp(f);else if(a.body==null)f=new URLSearchParams,p=new FormData;else try{f=new URLSearchParams(a.body),p=dp(f)}catch{return l()}let h={formMethod:c,formAction:A,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Z2(h.formMethod))return{path:r,submission:h};let g=en(r);return t&&g.search&&hA(g.search)&&f.append("index",""),g.search=`?${f}`,{path:Xt(g),submission:h}}function ip(t,r,a,l,s,c,A,f,p,h,g,m,v,D,x,w,B,b,E,N){var i0;let _=N?le(N[1])?N[1].error:N[1].data:void 0,T=s.createURL(c.location),R=s.createURL(p),L;if(g&&c.errors){let q=Object.keys(c.errors)[0];L=A.findIndex(A0=>A0.route.id===q)}else if(N&&le(N[1])){let q=N[0];L=A.findIndex(A0=>A0.route.id===q)-1}let I=N?N[1].statusCode:void 0,V=I&&I>=400,r0={currentUrl:T,currentParams:((i0=c.matches[0])==null?void 0:i0.params)||{},nextUrl:R,nextParams:A[0].params,...f,actionResult:_,actionStatus:I},u0=A.map((q,A0)=>{let{route:O}=q,G=null;if(L!=null&&A0>L?G=!1:O.lazy?G=!0:O.loader==null?G=!1:g?G=Tu(O,c.loaderData,c.errors):r1(c.loaderData,c.matches[A0],q)&&(G=!0),G!==null)return Mu(a,l,t,q,h,r,G);let X=V?!1:m||T.pathname+T.search===R.pathname+R.search||T.search!==R.search||o1(c.matches[A0],q),K={...r0,defaultShouldRevalidate:X},k=ai(q,K);return Mu(a,l,t,q,h,r,k,K)}),l0=[];return x.forEach((q,A0)=>{if(g||!A.some(n0=>n0.route.id===q.routeId)||D.has(A0))return;let O=c.fetchers.get(A0),G=O&&O.state!=="idle"&&O.data===void 0,X=vt(B,q.path,b);if(!X){if(E&&G)return;l0.push({key:A0,routeId:q.routeId,path:q.path,matches:null,match:null,request:null,controller:null});return}if(w.has(A0))return;let K=Zl(X,q.path),k=new AbortController,Q=Nr(s,q.path,k.signal),J=null;if(v.has(A0))v.delete(A0),J=Er(a,l,Q,X,K,h,r);else if(G)m&&(J=Er(a,l,Q,X,K,h,r));else{let n0={...r0,defaultShouldRevalidate:V?!1:m};ai(K,n0)&&(J=Er(a,l,Q,X,K,h,r,n0))}J&&l0.push({key:A0,routeId:q.routeId,path:q.path,matches:J,match:K,request:Q,controller:k})}),{dsMatches:u0,revalidatingFetchers:l0}}function Tu(t,r,a){if(t.lazy)return!0;if(!t.loader)return!1;let l=r!=null&&t.id in r,s=a!=null&&a[t.id]!==void 0;return!l&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!l&&!s}function r1(t,r,a){let l=!r||a.route.id!==r.route.id,s=!t.hasOwnProperty(a.route.id);return l||s}function o1(t,r){let a=t.route.path;return t.pathname!==r.pathname||a!=null&&a.endsWith("*")&&t.params["*"]!==r.params["*"]}function ai(t,r){if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate(r);if(typeof a=="boolean")return a}return r.defaultShouldRevalidate}function sp(t,r,a,l,s,c){let A;if(t){let h=l[t];O0(h,`No route found to patch children into: routeId = ${t}`),h.children||(h.children=[]),A=h.children}else A=a;let f=[],p=[];if(r.forEach(h=>{let g=A.find(m=>Ym(h,m));g?p.push({existingRoute:g,newRoute:h}):f.push(h)}),f.length>0){let h=ea(f,s,[t||"_","patch",String((A==null?void 0:A.length)||"0")],l);A.push(...h)}if(c&&p.length>0)for(let h=0;h<p.length;h++){let{existingRoute:g,newRoute:m}=p[h],v=g,[D]=ea([m],s,[],{},!0);Object.assign(v,{element:D.element?D.element:v.element,errorElement:D.errorElement?D.errorElement:v.errorElement,hydrateFallbackElement:D.hydrateFallbackElement?D.hydrateFallbackElement:v.hydrateFallbackElement})}}function Ym(t,r){return"id"in t&&"id"in r&&t.id===r.id?!0:t.index===r.index&&t.path===r.path&&t.caseSensitive===r.caseSensitive?(!t.children||t.children.length===0)&&(!r.children||r.children.length===0)?!0:t.children.every((a,l)=>{var s;return(s=r.children)==null?void 0:s.some(c=>Ym(a,c))}):!1}var cp=new WeakMap,Km=({key:t,route:r,manifest:a,mapRouteProperties:l})=>{let s=a[r.id];if(O0(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let c=s.lazy[t];if(!c)return;let A=cp.get(s);A||(A={},cp.set(s,A));let f=A[t];if(f)return f;let p=(async()=>{let h=b6(t),m=s[t]!==void 0&&t!=="hasErrorBoundary";if(h)p2(!h,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),A[t]=Promise.resolve();else if(m)p2(!1,`Route "${s.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let v=await c();v!=null&&(Object.assign(s,{[t]:v}),Object.assign(s,l(s)))}typeof s.lazy=="object"&&(s.lazy[t]=void 0,Object.values(s.lazy).every(v=>v===void 0)&&(s.lazy=void 0))})();return A[t]=p,p},up=new WeakMap;function a1(t,r,a,l,s){let c=a[t.id];if(O0(c,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let g=up.get(c);if(g)return{lazyRoutePromise:g,lazyHandlerPromise:g};let m=(async()=>{O0(typeof t.lazy=="function","No lazy route function found");let v=await t.lazy(),D={};for(let x in v){let w=v[x];if(w===void 0)continue;let B=S6(x),E=c[x]!==void 0&&x!=="hasErrorBoundary";B?p2(!B,"Route property "+x+" is not a supported property to be returned from a lazy route function. This property will be ignored."):E?p2(!E,`Route "${c.id}" has a static property "${x}" defined but its lazy function is also returning a value for this property. The lazy route property "${x}" will be ignored.`):D[x]=w}Object.assign(c,D),Object.assign(c,{...l(c),lazy:void 0})})();return up.set(c,m),m.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:m}}let A=Object.keys(t.lazy),f=[],p;for(let g of A){if(s&&s.includes(g))continue;let m=Km({key:g,route:t,manifest:a,mapRouteProperties:l});m&&(f.push(m),g===r&&(p=m))}let h=f.length>0?Promise.all(f).then(()=>{}):void 0;return h==null||h.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:p}}async function Ap(t){let r=t.matches.filter(s=>s.shouldLoad),a={};return(await Promise.all(r.map(s=>s.resolve()))).forEach((s,c)=>{a[r[c].route.id]=s}),a}async function l1(t){return t.matches.some(r=>r.route.unstable_middleware)?Zm(t,!1,()=>Ap(t),(r,a)=>({[a]:{type:"error",result:r}})):Ap(t)}async function Zm(t,r,a,l){let{matches:s,request:c,params:A,context:f}=t,p={handlerResult:void 0};try{let h=s.flatMap(m=>m.route.unstable_middleware?m.route.unstable_middleware.map(v=>[m.route.id,v]):[]),g=await Xm({request:c,params:A,context:f},h,r,p,a);return r?g:p.handlerResult}catch(h){if(!p.middlewareError)throw h;let g=await l(p.middlewareError.error,p.middlewareError.routeId);return p.handlerResult?Object.assign(p.handlerResult,g):g}}async function Xm(t,r,a,l,s,c=0){let{request:A}=t;if(A.signal.aborted)throw A.signal.reason?A.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${A.method} ${A.url}`);let f=r[c];if(!f)return l.handlerResult=await s(),l.handlerResult;let[p,h]=f,g=!1,m,v=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");g=!0,await Xm(t,r,a,l,s,c+1)};try{let D=await h({request:t.request,params:t.params,context:t.context},v);return g?D===void 0?m:D:v()}catch(D){throw l.middlewareError?l.middlewareError.error!==D&&(l.middlewareError={routeId:p,error:D}):l.middlewareError={routeId:p,error:D},D}}function Qm(t,r,a,l,s){let c=Km({key:"unstable_middleware",route:l.route,manifest:r,mapRouteProperties:t}),A=a1(l.route,Z2(a.method)?"action":"loader",r,t,s);return{middleware:c,route:A.lazyRoutePromise,handler:A.lazyHandlerPromise}}function Mu(t,r,a,l,s,c,A,f=null){let p=!1,h=Qm(t,r,a,l,s);return{...l,_lazyPromises:h,shouldLoad:A,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler(g){return p=!0,f?typeof g=="boolean"?ai(l,{...f,defaultShouldRevalidate:g}):ai(l,f):A},resolve(g){return p||A||g&&!Z2(a.method)&&(l.route.lazy||l.route.loader)?s1({request:a,match:l,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:g,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Er(t,r,a,l,s,c,A,f=null){return l.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler:()=>!1,_lazyPromises:Qm(t,r,a,p,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Mu(t,r,a,p,c,A,!0,f))}async function i1(t,r,a,l,s,c){a.some(h=>{var g;return(g=h._lazyPromises)==null?void 0:g.middleware})&&await Promise.all(a.map(h=>{var g;return(g=h._lazyPromises)==null?void 0:g.middleware}));let A={request:r,params:a[0].params,context:s,matches:a},p=await t({...A,fetcherKey:l,unstable_runClientMiddleware:h=>{let g=A;return Zm(g,!1,()=>h({...g,fetcherKey:l,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(m,v)=>({[v]:{type:"error",result:m}}))}});try{await Promise.all(a.flatMap(h=>{var g,m;return[(g=h._lazyPromises)==null?void 0:g.handler,(m=h._lazyPromises)==null?void 0:m.route]}))}catch{}return p}async function s1({request:t,match:r,lazyHandlerPromise:a,lazyRoutePromise:l,handlerOverride:s,scopedContext:c}){let A,f,p=Z2(t.method),h=p?"action":"loader",g=m=>{let v,D=new Promise((B,b)=>v=b);f=()=>v(),t.signal.addEventListener("abort",f);let x=B=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${r.route.id}]`)):m({request:t,params:r.params,context:c},...B!==void 0?[B]:[]),w=(async()=>{try{return{type:"data",result:await(s?s(b=>x(b)):x())}}catch(B){return{type:"error",result:B}}})();return Promise.race([w,D])};try{let m=p?r.route.action:r.route.loader;if(a||l)if(m){let v,[D]=await Promise.all([g(m).catch(x=>{v=x}),a,l]);if(v!==void 0)throw v;A=D}else{await a;let v=p?r.route.action:r.route.loader;if(v)[A]=await Promise.all([g(v),l]);else if(h==="action"){let D=new URL(t.url),x=D.pathname+D.search;throw De(405,{method:t.method,pathname:x,routeId:r.route.id})}else return{type:"data",result:void 0}}else if(m)A=await g(m);else{let v=new URL(t.url),D=v.pathname+v.search;throw De(404,{pathname:D})}}catch(m){return{type:"error",result:m}}finally{f&&t.signal.removeEventListener("abort",f)}return A}async function c1(t){var l,s,c,A,f,p;let{result:r,type:a}=t;if(eC(r)){let h;try{let g=r.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?r.body==null?h=null:h=await r.json():h=await r.text()}catch(g){return{type:"error",error:g}}return a==="error"?{type:"error",error:new oi(r.status,r.statusText,h),statusCode:r.status,headers:r.headers}:{type:"data",data:h,statusCode:r.status,headers:r.headers}}return a==="error"?gp(r)?r.data instanceof Error?{type:"error",error:r.data,statusCode:(l=r.init)==null?void 0:l.status,headers:(s=r.init)!=null&&s.headers?new Headers(r.init.headers):void 0}:{type:"error",error:new oi(((c=r.init)==null?void 0:c.status)||500,void 0,r.data),statusCode:ta(r)?r.status:void 0,headers:(A=r.init)!=null&&A.headers?new Headers(r.init.headers):void 0}:{type:"error",error:r,statusCode:ta(r)?r.status:void 0}:gp(r)?{type:"data",data:r.data,statusCode:(f=r.init)==null?void 0:f.status,headers:(p=r.init)!=null&&p.headers?new Headers(r.init.headers):void 0}:{type:"data",data:r}}function u1(t,r,a,l,s){let c=t.headers.get("Location");if(O0(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!dA(c)){let A=l.slice(0,l.findIndex(f=>f.route.id===a)+1);c=ku(new URL(r.url),A,s,c),t.headers.set("Location",c)}return t}function fp(t,r,a){if(dA(t)){let l=t,s=l.startsWith("//")?new URL(r.protocol+l):new URL(l),c=ce(s.pathname,a)!=null;if(s.origin===r.origin&&c)return s.pathname+s.search+s.hash}return t}function Nr(t,r,a,l){let s=t.createURL(Jm(r)).toString(),c={signal:a};if(l&&Z2(l.formMethod)){let{formMethod:A,formEncType:f}=l;c.method=A.toUpperCase(),f==="application/json"?(c.headers=new Headers({"Content-Type":f}),c.body=JSON.stringify(l.json)):f==="text/plain"?c.body=l.text:f==="application/x-www-form-urlencoded"&&l.formData?c.body=Pu(l.formData):c.body=l.formData}return new Request(s,c)}function Pu(t){let r=new URLSearchParams;for(let[a,l]of t.entries())r.append(a,typeof l=="string"?l:l.name);return r}function dp(t){let r=new FormData;for(let[a,l]of t.entries())r.append(a,l);return r}function A1(t,r,a,l=!1,s=!1){let c={},A=null,f,p=!1,h={},g=a&&le(a[1])?a[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in r))return;let v=m.route.id,D=r[v];if(O0(!En(D),"Cannot handle redirect results in processLoaderData"),le(D)){let x=D.error;if(g!==void 0&&(x=g,g=void 0),A=A||{},s)A[v]=x;else{let w=Sn(t,v);A[w.route.id]==null&&(A[w.route.id]=x)}l||(c[v]=$m),p||(p=!0,f=ta(D.error)?D.error.status:500),D.headers&&(h[v]=D.headers)}else c[v]=D.data,D.statusCode&&D.statusCode!==200&&!p&&(f=D.statusCode),D.headers&&(h[v]=D.headers)}),g!==void 0&&a&&(A={[a[0]]:g},a[2]&&(c[a[2]]=void 0)),{loaderData:c,errors:A,statusCode:f||200,loaderHeaders:h}}function hp(t,r,a,l,s,c){let{loaderData:A,errors:f}=A1(r,a,l);return s.filter(p=>!p.matches||p.matches.some(h=>h.shouldLoad)).forEach(p=>{let{key:h,match:g,controller:m}=p,v=c[h];if(O0(v,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(le(v)){let D=Sn(t.matches,g==null?void 0:g.route.id);f&&f[D.route.id]||(f={...f,[D.route.id]:v.error}),t.fetchers.delete(h)}else if(En(v))O0(!1,"Unhandled fetcher revalidation redirect");else{let D=Kt(v.data);t.fetchers.set(h,D)}}),{loaderData:A,errors:f}}function pp(t,r,a,l){let s=Object.entries(r).filter(([,c])=>c!==$m).reduce((c,[A,f])=>(c[A]=f,c),{});for(let c of a){let A=c.route.id;if(!r.hasOwnProperty(A)&&t.hasOwnProperty(A)&&c.route.loader&&(s[A]=t[A]),l&&l.hasOwnProperty(A))break}return s}function mp(t){return t?le(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Sn(t,r){return(r?t.slice(0,t.findIndex(l=>l.route.id===r)+1):[...t]).reverse().find(l=>l.route.hasErrorBoundary===!0)||t[0]}function Cp(t){let r=t.length===1?t[0]:t.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r}}function De(t,{pathname:r,routeId:a,method:l,type:s,message:c}={}){let A="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(A="Bad Request",l&&r&&a?f=`You made a ${l} request to "${r}" but did not provide a \`loader\` for route "${a}", so there is no way to handle the request.`:s==="invalid-body"&&(f="Unable to encode submission body")):t===403?(A="Forbidden",f=`Route "${a}" does not match URL "${r}"`):t===404?(A="Not Found",f=`No route matches URL "${r}"`):t===405&&(A="Method Not Allowed",l&&r&&a?f=`You made a ${l.toUpperCase()} request to "${r}" but did not provide an \`action\` for route "${a}", so there is no way to handle the request.`:l&&(f=`Invalid request method "${l.toUpperCase()}"`)),new oi(t||500,A,new Error(f),!0)}function Tl(t){let r=Object.entries(t);for(let a=r.length-1;a>=0;a--){let[l,s]=r[a];if(En(s))return{key:l,result:s}}}function Jm(t){let r=typeof t=="string"?en(t):t;return Xt({...r,hash:""})}function f1(t,r){return t.pathname!==r.pathname||t.search!==r.search?!1:t.hash===""?r.hash!=="":t.hash===r.hash?!0:r.hash!==""}function d1(t){return eC(t.result)&&Z6.has(t.result.status)}function le(t){return t.type==="error"}function En(t){return(t&&t.type)==="redirect"}function gp(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function eC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function h1(t){return K6.has(t.toUpperCase())}function Z2(t){return $6.has(t.toUpperCase())}function hA(t){return new URLSearchParams(t).getAll("index").some(r=>r==="")}function Zl(t,r){let a=typeof r=="string"?en(r).search:r.search;if(t[t.length-1].route.index&&hA(a||""))return t[t.length-1];let l=Wm(t);return l[l.length-1]}function yp(t){let{formMethod:r,formAction:a,formEncType:l,text:s,formData:c,json:A}=t;if(!(!r||!a||!l)){if(s!=null)return{formMethod:r,formAction:a,formEncType:l,formData:void 0,json:void 0,text:s};if(c!=null)return{formMethod:r,formAction:a,formEncType:l,formData:c,json:void 0,text:void 0};if(A!==void 0)return{formMethod:r,formAction:a,formEncType:l,formData:void 0,json:A,text:void 0}}}function nu(t,r){return r?{state:"loading",location:t,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function p1(t,r){return{state:"submitting",location:t,formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text}}function Go(t,r){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:r}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function m1(t,r){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:r?r.data:void 0}}function Kt(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function C1(t,r){try{let a=t.sessionStorage.getItem(qm);if(a){let l=JSON.parse(a);for(let[s,c]of Object.entries(l||{}))c&&Array.isArray(c)&&r.set(s,new Set(c||[]))}}catch{}}function g1(t,r){if(r.size>0){let a={};for(let[l,s]of r)a[l]=[...s];try{t.sessionStorage.setItem(qm,JSON.stringify(a))}catch(l){p2(!1,`Failed to save applied view transitions in sessionStorage (${l}).`)}}}function y1(){let t,r,a=new Promise((l,s)=>{t=async c=>{l(c);try{await a}catch{}},r=async c=>{s(c);try{await a}catch{}}});return{promise:a,resolve:t,reject:r}}var Pn=y.createContext(null);Pn.displayName="DataRouter";var Or=y.createContext(null);Or.displayName="DataRouterState";y.createContext(!1);var pA=y.createContext({isTransitioning:!1});pA.displayName="ViewTransition";var tC=y.createContext(new Map);tC.displayName="Fetchers";var v1=y.createContext(null);v1.displayName="Await";var Ne=y.createContext(null);Ne.displayName="Navigation";var vi=y.createContext(null);vi.displayName="Location";var xt=y.createContext({outlet:null,matches:[],isDataRoute:!1});xt.displayName="Route";var mA=y.createContext(null);mA.displayName="RouteError";function D1(t,{relative:r}={}){O0(jr(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:l}=y.useContext(Ne),{hash:s,pathname:c,search:A}=la(t,{relative:r}),f=c;return a!=="/"&&(f=c==="/"?a:Ke([a,c])),l.createHref({pathname:f,search:A,hash:s})}function jr(){return y.useContext(vi)!=null}function a2(){return O0(jr(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(vi).location}function w1(t){O0(jr(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:r}=a2();return y.useMemo(()=>Rn(t,Vm(r)),[r,t])}var nC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rC(t){y.useContext(Ne).static||y.useLayoutEffect(t)}function CA(){let{isDataRoute:t}=y.useContext(xt);return t?P1():x1()}function x1(){O0(jr(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(Pn),{basename:r,navigator:a}=y.useContext(Ne),{matches:l}=y.useContext(xt),{pathname:s}=a2(),c=JSON.stringify(AA(l)),A=y.useRef(!1);return rC(()=>{A.current=!0}),y.useCallback((p,h={})=>{if(p2(A.current,nC),!A.current)return;if(typeof p=="number"){a.go(p);return}let g=fA(p,JSON.parse(c),s,h.relative==="path");t==null&&r!=="/"&&(g.pathname=g.pathname==="/"?r:Ke([r,g.pathname])),(h.replace?a.replace:a.push)(g,h.state,h)},[r,a,c,s,t])}y.createContext(null);function la(t,{relative:r}={}){let{matches:a}=y.useContext(xt),{pathname:l}=a2(),s=JSON.stringify(AA(a));return y.useMemo(()=>fA(t,JSON.parse(s),l,r==="path"),[t,s,l,r])}function F1(t,r,a,l){O0(jr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=y.useContext(Ne),{matches:c}=y.useContext(xt),A=c[c.length-1],f=A?A.params:{},p=A?A.pathname:"/",h=A?A.pathnameBase:"/",g=A&&A.route;{let b=g&&g.path||"";aC(p,!g||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=a2(),v;v=m;let D=v.pathname||"/",x=D;if(h!=="/"){let b=h.replace(/^\//,"").split("/");x="/"+D.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=vt(t,{pathname:x});return p2(g||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),p2(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),E1(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},f,b.params),pathname:Ke([h,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Ke([h,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),c,a,l)}function B1(){let t=M1(),r=ta(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,l="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:l},c={padding:"2px 4px",backgroundColor:l},A=null;return console.error("Error handled by React Router default ErrorBoundary:",t),A=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:c},"ErrorBoundary")," or"," ",y.createElement("code",{style:c},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),a?y.createElement("pre",{style:s},a):null,A)}var b1=y.createElement(B1,null),N1=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?y.createElement(xt.Provider,{value:this.props.routeContext},y.createElement(mA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S1({routeContext:t,match:r,children:a}){let l=y.useContext(Pn);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(xt.Provider,{value:t},a)}function E1(t,r=[],a=null,l=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(r.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,c=a==null?void 0:a.errors;if(c!=null){let p=s.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);O0(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let A=!1,f=-1;if(a)for(let p=0;p<s.length;p++){let h=s[p];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=p),h.route.id){let{loaderData:g,errors:m}=a,v=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){A=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,h,g)=>{let m,v=!1,D=null,x=null;a&&(m=c&&h.route.id?c[h.route.id]:void 0,D=h.route.errorElement||b1,A&&(f<0&&g===0?(aC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):f===g&&(v=!0,x=h.route.hydrateFallbackElement||null)));let w=r.concat(s.slice(0,g+1)),B=()=>{let b;return m?b=D:v?b=x:h.route.Component?b=y.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=p,y.createElement(S1,{match:h,routeContext:{outlet:p,matches:w,isDataRoute:a!=null},children:b})};return a&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?y.createElement(N1,{location:a.location,revalidation:a.revalidation,component:D,error:m,children:B(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):B()},null)}function gA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R1(t){let r=y.useContext(Pn);return O0(r,gA(t)),r}function yA(t){let r=y.useContext(Or);return O0(r,gA(t)),r}function _1(t){let r=y.useContext(xt);return O0(r,gA(t)),r}function vA(t){let r=_1(t),a=r.matches[r.matches.length-1];return O0(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function k1(){return vA("useRouteId")}function T1(){return yA("useNavigation").navigation}function oC(){let{matches:t,loaderData:r}=yA("useMatches");return y.useMemo(()=>t.map(a=>Im(a,r)),[t,r])}function M1(){var l;let t=y.useContext(mA),r=yA("useRouteError"),a=vA("useRouteError");return t!==void 0?t:(l=r.errors)==null?void 0:l[a]}function P1(){let{router:t}=R1("useNavigate"),r=vA("useNavigate"),a=y.useRef(!1);return rC(()=>{a.current=!0}),y.useCallback(async(s,c={})=>{p2(a.current,nC),a.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:r,...c}))},[t,r])}var vp={};function aC(t,r,a){!r&&!vp[t]&&(vp[t]=!0,p2(!1,a))}var Dp={};function wp(t,r){!t&&!Dp[r]&&(Dp[r]=!0,console.warn(r))}function L1(t){let r={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&p2(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(r,{element:y.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&p2(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(r,{hydrateFallbackElement:y.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&p2(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(r,{errorElement:y.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),r}var O1=["HydrateFallback","hydrateFallbackElement"],j1=class{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",t(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",r(a))}})}};function U1({router:t,flushSync:r}){let[a,l]=y.useState(t.state),[s,c]=y.useState(),[A,f]=y.useState({isTransitioning:!1}),[p,h]=y.useState(),[g,m]=y.useState(),[v,D]=y.useState(),x=y.useRef(new Map),w=y.useCallback((N,{deletedFetchers:_,flushSync:T,viewTransitionOpts:R})=>{N.fetchers.forEach((I,V)=>{I.data!==void 0&&x.current.set(V,I.data)}),_.forEach(I=>x.current.delete(I)),wp(T===!1||r!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let L=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(wp(R==null||L,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!R||!L){r&&T?r(()=>l(N)):y.startTransition(()=>l(N));return}if(r&&T){r(()=>{g&&(p&&p.resolve(),g.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:R.currentLocation,nextLocation:R.nextLocation})});let I=t.window.document.startViewTransition(()=>{r(()=>l(N))});I.finished.finally(()=>{r(()=>{h(void 0),m(void 0),c(void 0),f({isTransitioning:!1})})}),r(()=>m(I));return}g?(p&&p.resolve(),g.skipTransition(),D({state:N,currentLocation:R.currentLocation,nextLocation:R.nextLocation})):(c(N),f({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}))},[t.window,r,g,p]);y.useLayoutEffect(()=>t.subscribe(w),[t,w]),y.useEffect(()=>{A.isTransitioning&&!A.flushSync&&h(new j1)},[A]),y.useEffect(()=>{if(p&&s&&t.window){let N=s,_=p.promise,T=t.window.document.startViewTransition(async()=>{y.startTransition(()=>l(N)),await _});T.finished.finally(()=>{h(void 0),m(void 0),c(void 0),f({isTransitioning:!1})}),m(T)}},[s,p,t.window]),y.useEffect(()=>{p&&s&&a.location.key===s.location.key&&p.resolve()},[p,g,a.location,s]),y.useEffect(()=>{!A.isTransitioning&&v&&(c(v.state),f({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),D(void 0))},[A.isTransitioning,v]);let B=y.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:N=>t.navigate(N),push:(N,_,T)=>t.navigate(N,{state:_,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(N,_,T)=>t.navigate(N,{replace:!0,state:_,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[t]),b=t.basename||"/",E=y.useMemo(()=>({router:t,navigator:B,static:!1,basename:b}),[t,B,b]);return y.createElement(y.Fragment,null,y.createElement(Pn.Provider,{value:E},y.createElement(Or.Provider,{value:a},y.createElement(tC.Provider,{value:x.current},y.createElement(pA.Provider,{value:A},y.createElement(H1,{basename:b,location:a.location,navigationType:a.historyAction,navigator:B},y.createElement(I1,{routes:t.routes,future:t.future,state:a})))))),null)}var I1=y.memo(z1);function z1({routes:t,future:r,state:a}){return F1(t,void 0,a,r)}function H1({basename:t="/",children:r=null,location:a,navigationType:l="POP",navigator:s,static:c=!1}){O0(!jr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=t.replace(/^\/*/,"/"),f=y.useMemo(()=>({basename:A,navigator:s,static:c,future:{}}),[A,s,c]);typeof a=="string"&&(a=en(a));let{pathname:p="/",search:h="",hash:g="",state:m=null,key:v="default"}=a,D=y.useMemo(()=>{let x=ce(p,A);return x==null?null:{location:{pathname:x,search:h,hash:g,state:m,key:v},navigationType:l}},[A,p,h,g,m,v,l]);return p2(D!=null,`<Router basename="${A}"> is not able to match the URL "${p}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:y.createElement(Ne.Provider,{value:f},y.createElement(vi.Provider,{children:r,value:D}))}var Xl="get",Ql="application/x-www-form-urlencoded";function Di(t){return t!=null&&typeof t.tagName=="string"}function V1(t){return Di(t)&&t.tagName.toLowerCase()==="button"}function W1(t){return Di(t)&&t.tagName.toLowerCase()==="form"}function G1(t){return Di(t)&&t.tagName.toLowerCase()==="input"}function q1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $1(t,r){return t.button===0&&(!r||r==="_self")&&!q1(t)}var Ml=null;function Y1(){if(Ml===null)try{new FormData(document.createElement("form"),0),Ml=!1}catch{Ml=!0}return Ml}var K1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ru(t){return t!=null&&!K1.has(t)?(p2(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ql}"`),null):t}function Z1(t,r){let a,l,s,c,A;if(W1(t)){let f=t.getAttribute("action");l=f?ce(f,r):null,a=t.getAttribute("method")||Xl,s=ru(t.getAttribute("enctype"))||Ql,c=new FormData(t)}else if(V1(t)||G1(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(l=p?ce(p,r):null,a=t.getAttribute("formmethod")||f.getAttribute("method")||Xl,s=ru(t.getAttribute("formenctype"))||ru(f.getAttribute("enctype"))||Ql,c=new FormData(f,t),!Y1()){let{name:h,type:g,value:m}=t;if(g==="image"){let v=h?`${h}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else h&&c.append(h,m)}}else{if(Di(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Xl,l=null,s=Ql,A=t}return c&&s==="text/plain"&&(A=c,c=void 0),{action:l,method:a.toLowerCase(),encType:s,formData:c,body:A}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function DA(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function X1(t,r,a){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return l.pathname==="/"?l.pathname=`_root.${a}`:r&&ce(l.pathname,r)==="/"?l.pathname=`${r.replace(/\/$/,"")}/_root.${a}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${a}`,l}async function Q1(t,r){if(t.id in r)return r[t.id];try{let a=await import(t.module);return r[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J1(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function ew(t,r,a){let l=await Promise.all(t.map(async s=>{let c=r.routes[s.route.id];if(c){let A=await Q1(c,a);return A.links?A.links():[]}return[]}));return ow(l.flat(1).filter(J1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function xp(t,r,a,l,s,c){let A=(p,h)=>a[h]?p.route.id!==a[h].route.id:!0,f=(p,h)=>{var g;return a[h].pathname!==p.pathname||((g=a[h].route.path)==null?void 0:g.endsWith("*"))&&a[h].params["*"]!==p.params["*"]};return c==="assets"?r.filter((p,h)=>A(p,h)||f(p,h)):c==="data"?r.filter((p,h)=>{var m;let g=l.routes[p.route.id];if(!g||!g.hasLoader)return!1;if(A(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=a[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function tw(t,r,{includeHydrateFallback:a}={}){return nw(t.map(l=>{let s=r.routes[l.route.id];if(!s)return[];let c=[s.module];return s.clientActionModule&&(c=c.concat(s.clientActionModule)),s.clientLoaderModule&&(c=c.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(c=c.concat(s.hydrateFallbackModule)),s.imports&&(c=c.concat(s.imports)),c}).flat(1))}function nw(t){return[...new Set(t)]}function rw(t){let r={},a=Object.keys(t).sort();for(let l of a)r[l]=t[l];return r}function ow(t,r){let a=new Set;return new Set(r),t.reduce((l,s)=>{let c=JSON.stringify(rw(s));return a.has(c)||(a.add(c),l.push({key:c,link:s})),l},[])}function lC(){let t=y.useContext(Pn);return DA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function aw(){let t=y.useContext(Or);return DA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var wi=y.createContext(void 0);wi.displayName="FrameworkContext";function iC(){let t=y.useContext(wi);return DA(t,"You must render this element inside a <HydratedRouter> element"),t}function lw(t,r){let a=y.useContext(wi),[l,s]=y.useState(!1),[c,A]=y.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:g,onTouchStart:m}=r,v=y.useRef(null);y.useEffect(()=>{if(t==="render"&&A(!0),t==="viewport"){let w=b=>{b.forEach(E=>{A(E.isIntersecting)})},B=new IntersectionObserver(w,{threshold:.5});return v.current&&B.observe(v.current),()=>{B.disconnect()}}},[t]),y.useEffect(()=>{if(l){let w=setTimeout(()=>{A(!0)},100);return()=>{clearTimeout(w)}}},[l]);let D=()=>{s(!0)},x=()=>{s(!1),A(!1)};return a?t!=="intent"?[c,v,{}]:[c,v,{onFocus:qo(f,D),onBlur:qo(p,x),onMouseEnter:qo(h,D),onMouseLeave:qo(g,x),onTouchStart:qo(m,D)}]:[!1,v,{}]}function qo(t,r){return a=>{t&&t(a),a.defaultPrevented||r(a)}}function iw({page:t,...r}){let{router:a}=lC(),l=y.useMemo(()=>vt(a.routes,t,a.basename),[a.routes,t,a.basename]);return l?y.createElement(cw,{page:t,matches:l,...r}):null}function sw(t){let{manifest:r,routeModules:a}=iC(),[l,s]=y.useState([]);return y.useEffect(()=>{let c=!1;return ew(t,r,a).then(A=>{c||s(A)}),()=>{c=!0}},[t,r,a]),l}function cw({page:t,matches:r,...a}){let l=a2(),{manifest:s,routeModules:c}=iC(),{basename:A}=lC(),{loaderData:f,matches:p}=aw(),h=y.useMemo(()=>xp(t,r,p,s,l,"data"),[t,r,p,s,l]),g=y.useMemo(()=>xp(t,r,p,s,l,"assets"),[t,r,p,s,l]),m=y.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let x=new Set,w=!1;if(r.forEach(b=>{var N;let E=s.routes[b.route.id];!E||!E.hasLoader||(!h.some(_=>_.route.id===b.route.id)&&b.route.id in f&&((N=c[b.route.id])!=null&&N.shouldRevalidate)||E.hasClientLoader?w=!0:x.add(b.route.id))}),x.size===0)return[];let B=X1(t,A,"data");return w&&x.size>0&&B.searchParams.set("_routes",r.filter(b=>x.has(b.route.id)).map(b=>b.route.id).join(",")),[B.pathname+B.search]},[A,f,l,s,h,r,t,c]),v=y.useMemo(()=>tw(g,s),[g,s]),D=sw(g);return y.createElement(y.Fragment,null,m.map(x=>y.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...a})),v.map(x=>y.createElement("link",{key:x,rel:"modulepreload",href:x,...a})),D.map(({key:x,link:w})=>y.createElement("link",{key:x,...w})))}function uw(...t){return r=>{t.forEach(a=>{typeof a=="function"?a(r):a!=null&&(a.current=r)})}}var sC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sC&&(window.__reactRouterVersion="7.7.1")}catch{}function Aw(t,r){return t1({basename:r==null?void 0:r.basename,unstable_getContext:r==null?void 0:r.unstable_getContext,future:r==null?void 0:r.future,history:w6({window:r==null?void 0:r.window}),hydrationData:(r==null?void 0:r.hydrationData)||fw(),routes:t,mapRouteProperties:L1,hydrationRouteProperties:O1,dataStrategy:r==null?void 0:r.dataStrategy,patchRoutesOnNavigation:r==null?void 0:r.patchRoutesOnNavigation,window:r==null?void 0:r.window}).initialize()}function fw(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:dw(t.errors)}),t}function dw(t){if(!t)return null;let r=Object.entries(t),a={};for(let[l,s]of r)if(s&&s.__type==="RouteErrorResponse")a[l]=new oi(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let c=window[s.__subType];if(typeof c=="function")try{let A=new c(s.message);A.stack="",a[l]=A}catch{}}if(a[l]==null){let c=new Error(s.message);c.stack="",a[l]=c}}else a[l]=s;return a}var cC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ur=y.forwardRef(function({onClick:r,discover:a="render",prefetch:l="none",relative:s,reloadDocument:c,replace:A,state:f,target:p,to:h,preventScrollReset:g,viewTransition:m,...v},D){let{basename:x}=y.useContext(Ne),w=typeof h=="string"&&cC.test(h),B,b=!1;if(typeof h=="string"&&w&&(B=h,sC))try{let V=new URL(window.location.href),r0=h.startsWith("//")?new URL(V.protocol+h):new URL(h),u0=ce(r0.pathname,x);r0.origin===V.origin&&u0!=null?h=u0+r0.search+r0.hash:b=!0}catch{p2(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=D1(h,{relative:s}),[N,_,T]=lw(l,v),R=Cw(h,{replace:A,state:f,target:p,preventScrollReset:g,relative:s,viewTransition:m});function L(V){r&&r(V),V.defaultPrevented||R(V)}let I=y.createElement("a",{...v,...T,href:B||E,onClick:b||c?r:L,ref:uw(D,_),target:p,"data-discover":!w&&a==="render"?"true":void 0});return N&&!w?y.createElement(y.Fragment,null,I,y.createElement(iw,{page:E})):I});Ur.displayName="Link";var hw=y.forwardRef(function({"aria-current":r="page",caseSensitive:a=!1,className:l="",end:s=!1,style:c,to:A,viewTransition:f,children:p,...h},g){let m=la(A,{relative:h.relative}),v=a2(),D=y.useContext(Or),{navigator:x,basename:w}=y.useContext(Ne),B=D!=null&&Fw(m)&&f===!0,b=x.encodeLocation?x.encodeLocation(m).pathname:m.pathname,E=v.pathname,N=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;a||(E=E.toLowerCase(),N=N?N.toLowerCase():null,b=b.toLowerCase()),N&&w&&(N=ce(N,w)||N);const _=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let T=E===b||!s&&E.startsWith(b)&&E.charAt(_)==="/",R=N!=null&&(N===b||!s&&N.startsWith(b)&&N.charAt(b.length)==="/"),L={isActive:T,isPending:R,isTransitioning:B},I=T?r:void 0,V;typeof l=="function"?V=l(L):V=[l,T?"active":null,R?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let r0=typeof c=="function"?c(L):c;return y.createElement(Ur,{...h,"aria-current":I,className:V,ref:g,style:r0,to:A,viewTransition:f},typeof p=="function"?p(L):p)});hw.displayName="NavLink";var pw=y.forwardRef(({discover:t="render",fetcherKey:r,navigate:a,reloadDocument:l,replace:s,state:c,method:A=Xl,action:f,onSubmit:p,relative:h,preventScrollReset:g,viewTransition:m,...v},D)=>{let x=vw(),w=Dw(f,{relative:h}),B=A.toLowerCase()==="get"?"get":"post",b=typeof f=="string"&&cC.test(f),E=N=>{if(p&&p(N),N.defaultPrevented)return;N.preventDefault();let _=N.nativeEvent.submitter,T=(_==null?void 0:_.getAttribute("formmethod"))||A;x(_||N.currentTarget,{fetcherKey:r,method:T,navigate:a,replace:s,state:c,relative:h,preventScrollReset:g,viewTransition:m})};return y.createElement("form",{ref:D,method:B,action:w,onSubmit:l?p:E,...v,"data-discover":!b&&t==="render"?"true":void 0})});pw.displayName="Form";function uC({getKey:t,storageKey:r,...a}){let l=y.useContext(wi),{basename:s}=y.useContext(Ne),c=a2(),A=oC();ww({getKey:t,storageKey:r});let f=y.useMemo(()=>{if(!l||!t)return null;let h=Ou(c,A,s,t);return h!==c.key?h:null},[]);if(!l||l.isSpaMode)return null;let p=((h,g)=>{if(!window.history.state||!window.history.state.key){let m=Math.random().toString(32).slice(2);window.history.replaceState({key:m},"")}try{let v=JSON.parse(sessionStorage.getItem(h)||"{}")[g||window.history.state.key];typeof v=="number"&&window.scrollTo(0,v)}catch(m){console.error(m),sessionStorage.removeItem(h)}}).toString();return y.createElement("script",{...a,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${p})(${JSON.stringify(r||Lu)}, ${JSON.stringify(f)})`}})}uC.displayName="ScrollRestoration";function AC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wA(t){let r=y.useContext(Pn);return O0(r,AC(t)),r}function mw(t){let r=y.useContext(Or);return O0(r,AC(t)),r}function Cw(t,{target:r,replace:a,state:l,preventScrollReset:s,relative:c,viewTransition:A}={}){let f=CA(),p=a2(),h=la(t,{relative:c});return y.useCallback(g=>{if($1(g,r)){g.preventDefault();let m=a!==void 0?a:Xt(p)===Xt(h);f(t,{replace:m,state:l,preventScrollReset:s,relative:c,viewTransition:A})}},[p,f,h,a,l,r,t,s,c,A])}var gw=0,yw=()=>`__${String(++gw)}__`;function vw(){let{router:t}=wA("useSubmit"),{basename:r}=y.useContext(Ne),a=k1();return y.useCallback(async(l,s={})=>{let{action:c,method:A,encType:f,formData:p,body:h}=Z1(l,r);if(s.navigate===!1){let g=s.fetcherKey||yw();await t.fetch(g,a,s.action||c,{preventScrollReset:s.preventScrollReset,formData:p,body:h,formMethod:s.method||A,formEncType:s.encType||f,flushSync:s.flushSync})}else await t.navigate(s.action||c,{preventScrollReset:s.preventScrollReset,formData:p,body:h,formMethod:s.method||A,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,r,a])}function Dw(t,{relative:r}={}){let{basename:a}=y.useContext(Ne),l=y.useContext(xt);O0(l,"useFormAction must be used inside a RouteContext");let[s]=l.matches.slice(-1),c={...la(t||".",{relative:r})},A=a2();if(t==null){c.search=A.search;let f=new URLSearchParams(c.search),p=f.getAll("index");if(p.some(g=>g==="")){f.delete("index"),p.filter(m=>m).forEach(m=>f.append("index",m));let g=f.toString();c.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(c.pathname=c.pathname==="/"?a:Ke([a,c.pathname])),Xt(c)}var Lu="react-router-scroll-positions",Pl={};function Ou(t,r,a,l){let s=null;return l&&(a!=="/"?s=l({...t,pathname:ce(t.pathname,a)||t.pathname},r):s=l(t,r)),s==null&&(s=t.key),s}function ww({getKey:t,storageKey:r}={}){let{router:a}=wA("useScrollRestoration"),{restoreScrollPosition:l,preventScrollReset:s}=mw("useScrollRestoration"),{basename:c}=y.useContext(Ne),A=a2(),f=oC(),p=T1();y.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),xw(y.useCallback(()=>{if(p.state==="idle"){let h=Ou(A,f,c,t);Pl[h]=window.scrollY}try{sessionStorage.setItem(r||Lu,JSON.stringify(Pl))}catch(h){p2(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${h}).`)}window.history.scrollRestoration="auto"},[p.state,t,c,A,f,r])),typeof document<"u"&&(y.useLayoutEffect(()=>{try{let h=sessionStorage.getItem(r||Lu);h&&(Pl=JSON.parse(h))}catch{}},[r]),y.useLayoutEffect(()=>{let h=a==null?void 0:a.enableScrollRestoration(Pl,()=>window.scrollY,t?(g,m)=>Ou(g,m,c,t):void 0);return()=>h&&h()},[a,c,t]),y.useLayoutEffect(()=>{if(l!==!1){if(typeof l=="number"){window.scrollTo(0,l);return}try{if(A.hash){let h=document.getElementById(decodeURIComponent(A.hash.slice(1)));if(h){h.scrollIntoView();return}}}catch{p2(!1,`"${A.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}s!==!0&&window.scrollTo(0,0)}},[A,l,s]))}function xw(t,r){let{capture:a}={};y.useEffect(()=>{let l=a!=null?{capture:a}:void 0;return window.addEventListener("pagehide",t,l),()=>{window.removeEventListener("pagehide",t,l)}},[t,a])}function Fw(t,{relative:r}={}){let a=y.useContext(pA);O0(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=wA("useViewTransitionState"),s=la(t,{relative:r});if(!a.isTransitioning)return!1;let c=ce(a.currentLocation.pathname,l)||a.currentLocation.pathname,A=ce(a.nextLocation.pathname,l)||a.nextLocation.pathname;return Rn(s.pathname,A)!=null||Rn(s.pathname,c)!=null}var xA=Om();const fC=gi(xA);function ju(t){return Array.isArray(t)?t.map(ju):typeof t=="object"&&t!==null?Object.keys(t).reduce((r,a)=>(r[a]=ju(t[a]),r),{}):typeof t=="string"&&t.includes("_vocs-fn_")?new Function(`return ${t.slice(9)}`)():t}const dC=ju({aiCta:!0,blogDir:"./pages/blog",rootDir:"docs",title:"Flyt",titleTemplate:"%s  Flyt",description:"A minimalist workflow framework for Go with zero dependencies",baseUrl:"https://go-flyt.dev",basePath:"",logoUrl:"/flyt-logo.png",sidebar:[{text:"Introduction",link:"/"},{text:"Getting Started",items:[{text:"Installation",link:"/getting-started/installation"},{text:"Quick Start",link:"/getting-started/quick-start"},{text:"Project Template",link:"/getting-started/template"}]},{text:"Core Concepts",items:[{text:"Nodes",link:"/concepts/nodes"},{text:"Actions",link:"/concepts/actions"},{text:"Flows",link:"/concepts/flows"},{text:"Shared Store",link:"/concepts/shared-store"}]},{text:"Patterns",items:[{text:"Configuration via Closures",link:"/patterns/closures"},{text:"Error Handling & Retries",link:"/patterns/error-handling"},{text:"Fallback on Failure",link:"/patterns/fallback"},{text:"Conditional Branching",link:"/patterns/branching"}]},{text:"Advanced",items:[{text:"Custom Node Types",link:"/advanced/custom-nodes"},{text:"Batch Processing",link:"/advanced/batch-processing"},{text:"Batch Flows",link:"/advanced/batch-flows"},{text:"Nested Flows",link:"/advanced/nested-flows"},{text:"Flow as Node",link:"/advanced/flow-as-node"},{text:"Worker Pool",link:"/advanced/worker-pool"},{text:"Utilities",link:"/advanced/utilities"}]},{text:"Examples",items:[{text:"Agent",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/agent"},{text:"Chat",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/chat"},{text:"LLM Streaming",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/llm-streaming"},{text:"MCP",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/mcp"},{text:"SST Integration",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/sst-integration"},{text:"Summarize",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/summarize"},{text:"Tracing",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/tracing"}]},{text:"Best Practices",link:"/best-practices"}],socials:[{icon:"github",link:"https://github.com/mark3labs/flyt",label:"GitHub",type:"github"}],font:{},markdown:{code:{themes:{dark:"github-dark-dimmed",light:"github-light"}}},topNav:[],theme:{},vite:{}}),Bw="modulepreload",bw=function(t){return"/"+t},Fp={},P0=function(r,a,l){let s=Promise.resolve();if(a&&a.length>0){let A=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));s=A(a.map(h=>{if(h=bw(h),h in Fp)return;Fp[h]=!0;const g=h.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":Bw,g||(v.as="script"),v.crossOrigin="",v.href=h,p&&v.setAttribute("nonce",p),document.head.appendChild(v),g)return new Promise((D,x)=>{v.addEventListener("load",D),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(A){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=A,window.dispatchEvent(f),!f.defaultPrevented)throw A}return s.then(A=>{for(const f of A||[])f.status==="rejected"&&c(f.reason);return r().catch(c)})},hC=y.createContext(dC);function pC(){return dC}function Nw({children:t,config:r}){const[a,l]=y.useState(()=>r||pC());return y.useEffect(()=>{},[]),y.useEffect(()=>{},[a]),C.jsx(hC.Provider,{value:a,children:t})}function m2(){return y.useContext(hC)}const FA=[{lazy:()=>P0(()=>import("./best-practices-mSf434nm.js"),[]),path:"/best-practices",type:"mdx",filePath:"best-practices.mdx",content:"%23%20Best%20Practices%0A%0AFollow%20these%20guidelines%20to%20build%20robust%2C%20maintainable%20Flyt%20workflows.%0A%0A%23%23%20Node%20Design%0A%0A%23%23%23%20Single%20Responsibility%0A%0AEach%20node%20should%20do%20one%20thing%20well%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Node%20doing%20too%20much%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20data%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20fetchFromAPI()%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%0A%20%20%20%20%20%20%20%20if%20!isValid(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20errors.New(%22invalid%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Transform%0A%20%20%20%20%20%20%20%20transformed%20%3A%3D%20transform(data)%0A%20%20%20%20%20%20%20%20%2F%2F%20Save%0A%20%20%20%20%20%20%20%20saveToDatabase(transformed)%0A%20%20%20%20%20%20%20%20return%20transformed%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Separate%20concerns%0AfetchNode%20%3A%3D%20createFetchNode()%0AvalidateNode%20%3A%3D%20createValidateNode()%0AtransformNode%20%3A%3D%20createTransformNode()%0AsaveNode%20%3A%3D%20createSaveNode()%0A%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%23%20Idempotency%0A%0ADesign%20nodes%20to%20be%20safely%20retryable%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9C%85%20Good%3A%20Idempotent%20operation%0Afunc%20(n%20*SaveNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(Record)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20upsert%20instead%20of%20insert%0A%20%20%20%20_%2C%20err%20%3A%3D%20db.Exec(%60%0A%20%20%20%20%20%20%20%20INSERT%20INTO%20records%20(id%2C%20data)%20VALUES%20(%3F%2C%20%3F)%0A%20%20%20%20%20%20%20%20ON%20CONFLICT%20(id)%20DO%20UPDATE%20SET%20data%20%3D%20%3F%0A%20%20%20%20%60%2C%20data.ID%2C%20data.Data%2C%20data.Data)%0A%20%20%20%20%0A%20%20%20%20return%20data.ID%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0AReturn%20clear%2C%20actionable%20errors%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Generic%20error%0Areturn%20nil%2C%20errors.New(%22failed%22)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Descriptive%20error%0Areturn%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20user%20%25d%3A%20%25w%22%2C%20userID%2C%20err)%0A%60%60%60%0A%0A%23%23%20Flow%20Design%0A%0A%23%23%23%20Modular%20Flows%0A%0ACreate%20reusable%20sub-flows%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20validation%20flow%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaValidator()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessValidator()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0AapiFlow.Connect(parseNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0A%60%60%60%0A%0A%23%23%23%20Error%20Boundaries%0A%0ACentralize%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createFlowWithErrorHandling()%20*flyt.Flow%20%7B%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandler()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20all%20error%20paths%20to%20handler%0A%20%20%20%20for%20_%2C%20node%20%3A%3D%20range%20%5B%5Dflyt.Node%7BstartNode%2C%20processNode%2C%20saveNode%7D%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(node%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Context%20Handling%0A%0A%23%23%23%20Respect%20Cancellation%0A%0AAlways%20check%20context%20in%20long-running%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20%5B%5DResult%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20context%20before%20each%20iteration%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(ctx%2C%20item)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Management%0A%0ASet%20appropriate%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20(n%20*APINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20return%20callAPI(ctx%2C%20prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%20Concurrency%20Safety%0A%0A%23%23%23%20Thread-Safe%20Nodes%0A%0AProtect%20shared%20state%20in%20nodes%3A%0A%0A%60%60%60go%0Atype%20CounterNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20sync.Mutex%0A%20%20%20%20count%20int%0A%7D%0A%0Afunc%20(n%20*CounterNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.count%2B%2B%0A%20%20%20%20current%20%3A%3D%20n.count%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20current%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Avoid%20Shared%20Node%20Instances%0A%0ACreate%20new%20instances%20for%20concurrent%20use%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Sharing%20node%20instance%0Anode%20%3A%3D%20createProcessNode()%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20node%2C%20shared)%20%2F%2F%20Race%20condition!%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Create%20new%20instances%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20createProcessNode()%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0A%23%23%23%20Clean%20Up%20Resources%0A%0AUse%20defer%20for%20cleanup%3A%0A%0A%60%60%60go%0Afunc%20(n%20*FileNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(prepResult.(string))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%20%2F%2F%20Always%20cleanup%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20file...%0A%20%20%20%20return%20processFile(file)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Pooling%0A%0AReuse%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseFlow%20struct%20%7B%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseFlow(db%20*sql.DB)%20*DatabaseFlow%20%7B%0A%20%20%20%20return%20%26DatabaseFlow%7Bdb%3A%20db%7D%0A%7D%0A%0Afunc%20(f%20*DatabaseFlow)%20CreateNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20f.db%2C%20%2F%2F%20Reuse%20connection%20pool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%0A%0A%23%23%23%20Unit%20Test%20Nodes%0A%0ATest%20nodes%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestProcessNode(t%20*testing.T)%20%7B%0A%20%20%20%20node%20%3A%3D%20createProcessNode()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20successful%20case%0A%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20%22test%20input%22)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22expected%20output%22%2C%20result)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20error%20case%0A%20%20%20%20result%2C%20err%20%3D%20node.Exec(ctx%2C%20nil)%0A%20%20%20%20assert.Error(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Integration%20Test%20Flows%0A%0ATest%20complete%20workflows%3A%0A%0A%60%60%60go%0Afunc%20TestCompleteFlow(t%20*testing.T)%20%7B%0A%20%20%20%20flow%20%3A%3D%20createMainFlow()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22input%22%2C%20testData)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20result%2C%20ok%20%3A%3D%20shared.Get(%22output%22)%0A%20%20%20%20assert.True(t%2C%20ok)%0A%20%20%20%20assert.Equal(t%2C%20expectedResult%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Documentation%0A%0A%23%23%23%20Document%20Node%20Behavior%0A%0A%60%60%60go%0A%2F%2F%20FetchUserNode%20fetches%20user%20data%20from%20the%20API.%0A%2F%2F%20%0A%2F%2F%20Prep%3A%20Reads%20%22user_id%22%20from%20SharedStore%0A%2F%2F%20Exec%3A%20Fetches%20user%20from%20API%2C%20retries%20on%20network%20errors%0A%2F%2F%20Post%3A%20Stores%20user%20data%20in%20%22user_data%22%20key%0A%2F%2F%20Actions%3A%0A%2F%2F%20%20%20-%20%22success%22%3A%20User%20fetched%20successfully%0A%2F%2F%20%20%20-%20%22not_found%22%3A%20User%20does%20not%20exist%0A%2F%2F%20%20%20-%20%22error%22%3A%20Unrecoverable%20error%20occurred%0Atype%20FetchUserNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20apiClient%20*APIClient%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Document%20Flow%20Structure%0A%0A%60%60%60go%0A%2F%2F%20CreateOrderFlow%20processes%20new%20orders%3A%0A%2F%2F%201.%20Validates%20order%20data%0A%2F%2F%202.%20Checks%20inventory%0A%2F%2F%203.%20Processes%20payment%0A%2F%2F%204.%20Creates%20shipment%0A%2F%2F%205.%20Sends%20confirmation%0A%2F%2F%0A%2F%2F%20Required%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_data%22%3A%20OrderData%20struct%0A%2F%2F%20%20%20-%20%22customer_id%22%3A%20string%0A%2F%2F%0A%2F%2F%20Sets%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_id%22%3A%20string%0A%2F%2F%20%20%20-%20%22tracking_number%22%3A%20string%0Afunc%20CreateOrderFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20...%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%0A%0A%23%23%23%20Batch%20Operations%0A%0AProcess%20items%20in%20batches%20when%20possible%3A%0A%0A%60%60%60go%0A%2F%2F%20Instead%20of%20processing%20one%20at%20a%20time%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20process(item)%0A%7D%0A%0A%2F%2F%20Process%20in%20batches%0AbatchNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%0Ashared.Set(%22items%22%2C%20items)%0A%60%60%60%0A%0A%23%23%23%20Lazy%20Loading%0A%0ALoad%20data%20only%20when%20needed%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Only%20load%20the%20data%20this%20node%20needs%0A%20%20%20%20if%20needsUserData(shared)%20%7B%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20loadUserData()%0A%20%20%20%20%20%20%20%20return%20userData%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%0A%0A%23%23%23%20Add%20Observability%0A%0ALog%20important%20events%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20took%20%25v%22%2C%20time.Since(start))%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20process(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22ProcessNode%20success%3A%20processed%20%25d%20items%22%2C%20len(result))%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20best%20practices%20in%20action%0A-%20%5BAdvanced%20Usage%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20patterns%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Review%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./best-practices-mSf434nm.js"),[]),path:"/best-practices.html",type:"mdx",filePath:"best-practices.mdx",content:"%23%20Best%20Practices%0A%0AFollow%20these%20guidelines%20to%20build%20robust%2C%20maintainable%20Flyt%20workflows.%0A%0A%23%23%20Node%20Design%0A%0A%23%23%23%20Single%20Responsibility%0A%0AEach%20node%20should%20do%20one%20thing%20well%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Node%20doing%20too%20much%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20data%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20fetchFromAPI()%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%0A%20%20%20%20%20%20%20%20if%20!isValid(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20errors.New(%22invalid%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Transform%0A%20%20%20%20%20%20%20%20transformed%20%3A%3D%20transform(data)%0A%20%20%20%20%20%20%20%20%2F%2F%20Save%0A%20%20%20%20%20%20%20%20saveToDatabase(transformed)%0A%20%20%20%20%20%20%20%20return%20transformed%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Separate%20concerns%0AfetchNode%20%3A%3D%20createFetchNode()%0AvalidateNode%20%3A%3D%20createValidateNode()%0AtransformNode%20%3A%3D%20createTransformNode()%0AsaveNode%20%3A%3D%20createSaveNode()%0A%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%23%20Idempotency%0A%0ADesign%20nodes%20to%20be%20safely%20retryable%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9C%85%20Good%3A%20Idempotent%20operation%0Afunc%20(n%20*SaveNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(Record)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20upsert%20instead%20of%20insert%0A%20%20%20%20_%2C%20err%20%3A%3D%20db.Exec(%60%0A%20%20%20%20%20%20%20%20INSERT%20INTO%20records%20(id%2C%20data)%20VALUES%20(%3F%2C%20%3F)%0A%20%20%20%20%20%20%20%20ON%20CONFLICT%20(id)%20DO%20UPDATE%20SET%20data%20%3D%20%3F%0A%20%20%20%20%60%2C%20data.ID%2C%20data.Data%2C%20data.Data)%0A%20%20%20%20%0A%20%20%20%20return%20data.ID%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0AReturn%20clear%2C%20actionable%20errors%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Generic%20error%0Areturn%20nil%2C%20errors.New(%22failed%22)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Descriptive%20error%0Areturn%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20user%20%25d%3A%20%25w%22%2C%20userID%2C%20err)%0A%60%60%60%0A%0A%23%23%20Flow%20Design%0A%0A%23%23%23%20Modular%20Flows%0A%0ACreate%20reusable%20sub-flows%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20validation%20flow%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaValidator()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessValidator()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0AapiFlow.Connect(parseNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0A%60%60%60%0A%0A%23%23%23%20Error%20Boundaries%0A%0ACentralize%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createFlowWithErrorHandling()%20*flyt.Flow%20%7B%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandler()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20all%20error%20paths%20to%20handler%0A%20%20%20%20for%20_%2C%20node%20%3A%3D%20range%20%5B%5Dflyt.Node%7BstartNode%2C%20processNode%2C%20saveNode%7D%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(node%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Context%20Handling%0A%0A%23%23%23%20Respect%20Cancellation%0A%0AAlways%20check%20context%20in%20long-running%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20%5B%5DResult%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20context%20before%20each%20iteration%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(ctx%2C%20item)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Management%0A%0ASet%20appropriate%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20(n%20*APINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20return%20callAPI(ctx%2C%20prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%20Concurrency%20Safety%0A%0A%23%23%23%20Thread-Safe%20Nodes%0A%0AProtect%20shared%20state%20in%20nodes%3A%0A%0A%60%60%60go%0Atype%20CounterNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20sync.Mutex%0A%20%20%20%20count%20int%0A%7D%0A%0Afunc%20(n%20*CounterNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.count%2B%2B%0A%20%20%20%20current%20%3A%3D%20n.count%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20current%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Avoid%20Shared%20Node%20Instances%0A%0ACreate%20new%20instances%20for%20concurrent%20use%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Sharing%20node%20instance%0Anode%20%3A%3D%20createProcessNode()%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20node%2C%20shared)%20%2F%2F%20Race%20condition!%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Create%20new%20instances%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20createProcessNode()%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0A%23%23%23%20Clean%20Up%20Resources%0A%0AUse%20defer%20for%20cleanup%3A%0A%0A%60%60%60go%0Afunc%20(n%20*FileNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(prepResult.(string))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%20%2F%2F%20Always%20cleanup%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20file...%0A%20%20%20%20return%20processFile(file)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Pooling%0A%0AReuse%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseFlow%20struct%20%7B%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseFlow(db%20*sql.DB)%20*DatabaseFlow%20%7B%0A%20%20%20%20return%20%26DatabaseFlow%7Bdb%3A%20db%7D%0A%7D%0A%0Afunc%20(f%20*DatabaseFlow)%20CreateNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20f.db%2C%20%2F%2F%20Reuse%20connection%20pool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%0A%0A%23%23%23%20Unit%20Test%20Nodes%0A%0ATest%20nodes%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestProcessNode(t%20*testing.T)%20%7B%0A%20%20%20%20node%20%3A%3D%20createProcessNode()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20successful%20case%0A%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20%22test%20input%22)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22expected%20output%22%2C%20result)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20error%20case%0A%20%20%20%20result%2C%20err%20%3D%20node.Exec(ctx%2C%20nil)%0A%20%20%20%20assert.Error(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Integration%20Test%20Flows%0A%0ATest%20complete%20workflows%3A%0A%0A%60%60%60go%0Afunc%20TestCompleteFlow(t%20*testing.T)%20%7B%0A%20%20%20%20flow%20%3A%3D%20createMainFlow()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22input%22%2C%20testData)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20result%2C%20ok%20%3A%3D%20shared.Get(%22output%22)%0A%20%20%20%20assert.True(t%2C%20ok)%0A%20%20%20%20assert.Equal(t%2C%20expectedResult%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Documentation%0A%0A%23%23%23%20Document%20Node%20Behavior%0A%0A%60%60%60go%0A%2F%2F%20FetchUserNode%20fetches%20user%20data%20from%20the%20API.%0A%2F%2F%20%0A%2F%2F%20Prep%3A%20Reads%20%22user_id%22%20from%20SharedStore%0A%2F%2F%20Exec%3A%20Fetches%20user%20from%20API%2C%20retries%20on%20network%20errors%0A%2F%2F%20Post%3A%20Stores%20user%20data%20in%20%22user_data%22%20key%0A%2F%2F%20Actions%3A%0A%2F%2F%20%20%20-%20%22success%22%3A%20User%20fetched%20successfully%0A%2F%2F%20%20%20-%20%22not_found%22%3A%20User%20does%20not%20exist%0A%2F%2F%20%20%20-%20%22error%22%3A%20Unrecoverable%20error%20occurred%0Atype%20FetchUserNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20apiClient%20*APIClient%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Document%20Flow%20Structure%0A%0A%60%60%60go%0A%2F%2F%20CreateOrderFlow%20processes%20new%20orders%3A%0A%2F%2F%201.%20Validates%20order%20data%0A%2F%2F%202.%20Checks%20inventory%0A%2F%2F%203.%20Processes%20payment%0A%2F%2F%204.%20Creates%20shipment%0A%2F%2F%205.%20Sends%20confirmation%0A%2F%2F%0A%2F%2F%20Required%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_data%22%3A%20OrderData%20struct%0A%2F%2F%20%20%20-%20%22customer_id%22%3A%20string%0A%2F%2F%0A%2F%2F%20Sets%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_id%22%3A%20string%0A%2F%2F%20%20%20-%20%22tracking_number%22%3A%20string%0Afunc%20CreateOrderFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20...%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%0A%0A%23%23%23%20Batch%20Operations%0A%0AProcess%20items%20in%20batches%20when%20possible%3A%0A%0A%60%60%60go%0A%2F%2F%20Instead%20of%20processing%20one%20at%20a%20time%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20process(item)%0A%7D%0A%0A%2F%2F%20Process%20in%20batches%0AbatchNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%0Ashared.Set(%22items%22%2C%20items)%0A%60%60%60%0A%0A%23%23%23%20Lazy%20Loading%0A%0ALoad%20data%20only%20when%20needed%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Only%20load%20the%20data%20this%20node%20needs%0A%20%20%20%20if%20needsUserData(shared)%20%7B%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20loadUserData()%0A%20%20%20%20%20%20%20%20return%20userData%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%0A%0A%23%23%23%20Add%20Observability%0A%0ALog%20important%20events%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20took%20%25v%22%2C%20time.Since(start))%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20process(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22ProcessNode%20success%3A%20processed%20%25d%20items%22%2C%20len(result))%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20best%20practices%20in%20action%0A-%20%5BAdvanced%20Usage%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20patterns%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Review%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./index-9B5QGPWq.js"),[]),path:"/",type:"mdx",filePath:"index.mdx",content:"---%0Alayout%3A%20landing%0A---%0A%0Aimport%20%7B%20HomePage%20%7D%20from%20'vocs%2Fcomponents'%0A%0A%3CHomePage.Root%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20display%3A%20'flex'%2C%20flexDirection%3A%20'column'%2C%20alignItems%3A%20'center'%2C%20marginBottom%3A%20'1rem'%20%7D%7D%3E%0A%20%20%20%20%3Cimg%20src%3D%22%2Fflyt-logo.png%22%20alt%3D%22Flyt%20Logo%22%20style%3D%7B%7B%20width%3A%20'280px'%2C%20height%3A%20'auto'%20%7D%7D%20%2F%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20fontStyle%3A%20'italic'%2C%20color%3A%20'var(--vocs-color_text2)'%2C%20marginTop%3A%20'0.5rem'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Norwegian%20for%20%22flow%22%20%E2%80%A2%20Pronounced%20%22fleet%22%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3CHomePage.Tagline%3EA%20minimalist%20workflow%20framework%20for%20Go%3C%2FHomePage.Tagline%3E%0A%20%20%0A%20%20%60%60%60bash%0A%20%20go%20get%20github.com%2Fmark3labs%2Fflyt%0A%20%20%60%60%60%0A%20%20%0A%20%20%3CHomePage.Description%3E%0A%20%20%20%20Build%20powerful%2C%20composable%20workflows%20with%20zero%20dependencies.%20Flyt%20provides%20a%20simple%20yet%20flexible%20%0A%20%20%20%20graph-based%20abstraction%20for%20orchestrating%20tasks%20in%20Go.%0A%20%20%3C%2FHomePage.Description%3E%0A%20%20%0A%20%20%3CHomePage.Buttons%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22%2Fgetting-started%2Fquick-start%22%20variant%3D%22accent%22%3EGet%20Started%3C%2FHomePage.Button%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%22%3EGitHub%3C%2FHomePage.Button%3E%0A%20%20%3C%2FHomePage.Buttons%3E%0A%3C%2FHomePage.Root%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'4rem'%20%7D%7D%3E%0A%0A%23%23%20Features%0A%0A%3Cdiv%20style%3D%7B%7B%20%0A%20%20display%3A%20'grid'%2C%20%0A%20%20gridTemplateColumns%3A%20'repeat(auto-fit%2C%20minmax(300px%2C%201fr))'%2C%0A%20%20gap%3A%20'1.5rem'%2C%0A%20%20marginTop%3A%20'2rem'%0A%7D%7D%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%9A%80%20Zero%20Dependencies%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EPure%20Go%20standard%20library%20-%20no%20external%20dependencies%20required%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%94%84%20Composable%20Workflows%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EBuild%20complex%20flows%20from%20simple%2C%20reusable%20nodes%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%8E%AF%20Action-Based%20Routing%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EDynamic%20flow%20control%20based%20on%20runtime%20results%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%94%81%20Built-in%20Retry%20Logic%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EHandle%20transient%20failures%20with%20configurable%20retries%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%94%92%20Thread-Safe%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EConcurrent%20batch%20processing%20with%20safe%20shared%20state%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%93%A6%20Batch%20Processing%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EProcess%20collections%20efficiently%20with%20built-in%20patterns%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%3C%2Fdiv%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'3rem'%20%7D%7D%3E%0A%0A%23%23%20Quick%20Example%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'1.5rem'%20%7D%7D%3E%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20that%20share%20data%20via%20SharedStore%0A%20%20%20%20fetchNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20_%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Fetching%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dint%7B%22value%22%3A%2042%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20_%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22data%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20_%20%3A%3D%20shared.Get(%22data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20data%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20val%20%3A%3D%20data.(map%5Bstring%5Dint)%5B%22value%22%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Processing%3A%20%25d%5Cn%22%2C%20val)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20val%20*%202%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20_%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22result%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20saveNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20_%20%3A%3D%20shared.Get(%22result%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20result%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Saving%20result%3A%20%25d%5Cn%22%2C%20result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20and%20run%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20flow.Run(context.Background()%2C%20flyt.NewSharedStore())%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'3rem'%20%7D%7D%3E%0A%0A%23%23%20Why%20Flyt%3F%0A%0A%3Cp%20style%3D%7B%7B%20fontSize%3A%20'1.05rem'%2C%20lineHeight%3A%20'1.7'%2C%20color%3A%20'var(--vocs-color_text2)'%2C%20marginTop%3A%20'1rem'%20%7D%7D%3E%0AFlyt%20was%20inspired%20by%20%3Ca%20href%3D%22https%3A%2F%2Fgithub.com%2FThe-Pocket%2FPocketFlow%22%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_link)'%20%7D%7D%3EPocket%20Flow%3C%2Fa%3E%20and%20%0Adesigned%20to%20provide%20a%20simple%2C%20dependency-free%20solution%20for%20workflow%20orchestration%20in%20Go.%20Whether%20you're%20building%20%0Adata%20pipelines%2C%20API%20orchestration%2C%20or%20complex%20business%20logic%2C%20Flyt%20gives%20you%20the%20tools%20to%20create%20maintainable%2C%20%0Atestable%20workflows.%0A%3C%2Fp%3E%0A%0A%3Ch3%20style%3D%7B%7B%20marginTop%3A%20'2rem'%2C%20marginBottom%3A%20'1.5rem'%20%7D%7D%3EPerfect%20for%3C%2Fh3%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20%0A%20%20display%3A%20'grid'%2C%20%0A%20%20gridTemplateColumns%3A%20'repeat(auto-fit%2C%20minmax(280px%2C%201fr))'%2C%0A%20%20gap%3A%20'1rem'%0A%7D%7D%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EData%20Processing%20Pipelines%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20ETL%20workflows%20with%20built-in%20error%20handling%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EAPI%20Orchestration%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Chain%20multiple%20API%20calls%20with%20automatic%20retries%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EBusiness%20Logic%20Flows%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Complex%20decision%20trees%20and%20state%20machines%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EBatch%20Operations%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Process%20large%20datasets%20concurrently%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EAI%2FLLM%20Workflows%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Build%20agent%20systems%20and%20conversation%20flows%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%3C%2Fdiv%3E",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./batch-flows-DcKUpb_C.js"),[]),path:"/advanced/batch-flows",type:"mdx",filePath:"advanced/batch-flows.mdx",content:"%23%20Batch%20Flows%0A%0ARun%20the%20same%20flow%20multiple%20times%20with%20different%20parameters%2C%20perfect%20for%20processing%20multiple%20entities%20or%20parallel%20workflows.%0A%0A%23%23%20Basic%20Batch%20Flow%0A%0ARun%20a%20flow%20for%20each%20set%20of%20inputs%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20flow%20factory%20-%20returns%20a%20new%20flow%20instance%20for%20each%20iteration%0AflowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20validateNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Each%20flow%20has%20its%20own%20SharedStore%20with%20merged%20FlowInputs%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%2C%20_%20%3A%3D%20shared.Get(%22user_id%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20email%2C%20_%20%3A%3D%20shared.Get(%22email%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%22user_id%22%3A%20userID%2C%20%22email%22%3A%20email%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20user%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processUser(data)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(validateNode)%0A%7D%0A%0A%2F%2F%20Define%20input%20parameters%20for%20each%20flow%20iteration%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Could%20fetch%20from%20database%2C%20API%2C%20etc.%0A%20%20%20%20return%20%5B%5Dflyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%7B%22user_id%22%3A%201%2C%20%22email%22%3A%20%22user1%40example.com%22%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22user_id%22%3A%202%2C%20%22email%22%3A%20%22user2%40example.com%22%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22user_id%22%3A%203%2C%20%22email%22%3A%20%22user3%40example.com%22%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0A%2F%2F%20Create%20and%20run%20batch%20flow%0AbatchFlow%20%3A%3D%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%20%2F%2F%20true%20for%20concurrent%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Aerr%20%3A%3D%20batchFlow.Run(ctx%2C%20shared)%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%20Execution%0A%0AControl%20how%20flows%20are%20executed%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20-%20one%20flow%20at%20a%20time%0AsequentialBatch%20%3A%3D%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20false)%0A%0A%2F%2F%20Concurrent%20-%20multiple%20flows%20in%20parallel%0AconcurrentBatch%20%3A%3D%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%20Dynamic%20Input%20Generation%0A%0AGenerate%20inputs%20based%20on%20runtime%20data%3A%0A%0A%60%60%60go%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20configuration%20from%20parent%20shared%20store%0A%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22batch_config%22)%0A%20%20%20%20batchSize%20%3A%3D%20config.(map%5Bstring%5Dany)%5B%22size%22%5D.(int)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fetch%20data%20from%20database%0A%20%20%20%20users%2C%20err%20%3A%3D%20fetchUsers(batchSize)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20to%20FlowInputs%0A%20%20%20%20inputs%20%3A%3D%20make(%5B%5Dflyt.FlowInputs%2C%20len(users))%0A%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20inputs%5Bi%5D%20%3D%20flyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22user_id%22%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22user_name%22%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22user_data%22%3A%20user%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20inputs%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Complex%20Flow%20Factory%0A%0ACreate%20sophisticated%20flows%20for%20each%20batch%3A%0A%0A%60%60%60go%0AflowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20fetchNode%20%3A%3D%20createFetchNode()%0A%20%20%20%20validateNode%20%3A%3D%20createValidateNode()%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20saveNode%20%3A%3D%20createSaveNode()%0A%20%20%20%20errorNode%20%3A%3D%20createErrorNode()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%20with%20error%20handling%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0A%20%20%20%20flow.Connect(validateNode%2C%20%22valid%22%2C%20processNode)%0A%20%20%20%20flow.Connect(validateNode%2C%20%22invalid%22%2C%20errorNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%20%20%20%20flow.Connect(processNode%2C%20%22error%22%2C%20errorNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Flow%20with%20Configuration%0A%0APass%20configuration%20to%20batch%20flows%3A%0A%0A%60%60%60go%0Afunc%20createConfiguredBatchFlow(config%20Config)%20*flyt.Flow%20%7B%0A%20%20%20%20flowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Each%20flow%20gets%20the%20same%20configuration%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20config%20in%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithConfig(prepResult%2C%20config)%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20flyt.NewFlow(node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20batchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%2C%20_%20%3A%3D%20shared.Get(%22items%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20inputs%20%3A%3D%20make(%5B%5Dflyt.FlowInputs%2C%200)%0A%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items.(%5B%5Dany)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inputs%20%3D%20append(inputs%2C%20flyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22item%22%3A%20item%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22config%22%3A%20config%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20inputs%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Aggregation%0A%0ACollect%20results%20from%20all%20flows%3A%0A%0A%60%60%60go%0Atype%20ResultCollector%20struct%20%7B%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20results%20%5B%5Dany%0A%20%20%20%20errors%20%20%5B%5Derror%0A%7D%0A%0Afunc%20createAggregatingBatchFlow(collector%20*ResultCollector)%20*flyt.Flow%20%7B%0A%20%20%20%20flowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20process(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.errors%20%3D%20append(collector.errors%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.results%20%3D%20append(collector.results%2C%20result)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20flyt.NewFlow(node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20...%20rest%20of%20batch%20flow%20setup%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Flow%20with%20Progress%0A%0ATrack%20progress%20across%20batch%20execution%3A%0A%0A%60%60%60go%0Atype%20ProgressTracker%20struct%20%7B%0A%20%20%20%20total%20%20%20%20%20int%0A%20%20%20%20completed%20int32%0A%20%20%20%20failed%20%20%20%20int32%0A%7D%0A%0Afunc%20createProgressBatchFlow(tracker%20*ProgressTracker)%20*flyt.Flow%20%7B%0A%20%20%20%20flowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt32(%26tracker.completed%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt32(%26tracker.failed%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20progress%20%3A%3D%20atomic.LoadInt32(%26tracker.completed)%20%2B%20atomic.LoadInt32(%26tracker.failed)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20percentage%20%3A%3D%20float64(progress)%20%2F%20float64(tracker.total)%20*%20100%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Batch%20progress%3A%20%25.1f%25%25%20(%25d%2F%25d)%22%2C%20percentage%2C%20progress%2C%20tracker.total)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20flyt.NewFlow(node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20batchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20inputs%20%3A%3D%20generateInputs()%0A%20%20%20%20%20%20%20%20tracker.total%20%3D%20len(inputs)%0A%20%20%20%20%20%20%20%20return%20inputs%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Batch%20Processing%0A%0AProcess%20batches%20based%20on%20conditions%3A%0A%0A%60%60%60go%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20mode%2C%20_%20%3A%3D%20shared.Get(%22processing_mode%22)%0A%20%20%20%20%0A%20%20%20%20var%20inputs%20%5B%5Dflyt.FlowInputs%0A%20%20%20%20%0A%20%20%20%20switch%20mode.(string)%20%7B%0A%20%20%20%20case%20%22all%22%3A%0A%20%20%20%20%20%20%20%20inputs%20%3D%20getAllInputs()%0A%20%20%20%20case%20%22pending%22%3A%0A%20%20%20%20%20%20%20%20inputs%20%3D%20getPendingInputs()%0A%20%20%20%20case%20%22failed%22%3A%0A%20%20%20%20%20%20%20%20inputs%20%3D%20getFailedInputs()%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20mode%3A%20%25s%22%2C%20mode)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Filter%20based%20on%20additional%20criteria%0A%20%20%20%20filtered%20%3A%3D%20make(%5B%5Dflyt.FlowInputs%2C%200)%0A%20%20%20%20for%20_%2C%20input%20%3A%3D%20range%20inputs%20%7B%0A%20%20%20%20%20%20%20%20if%20shouldProcess(input)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20input)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Nested%20Batch%20Flows%0A%0ABatch%20flows%20within%20batch%20flows%3A%0A%0A%60%60%60go%0AouterFlowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Inner%20batch%20flow%20for%20processing%20items%0A%20%20%20%20innerBatchFlow%20%3A%3D%20flyt.NewBatchFlow(%0A%20%20%20%20%20%20%20%20innerFlowFactory%2C%0A%20%20%20%20%20%20%20%20innerBatchFunc%2C%0A%20%20%20%20%20%20%20%20true%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Outer%20flow%20that%20includes%20the%20batch%0A%20%20%20%20fetchNode%20%3A%3D%20createFetchNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20innerBatchFlow)%0A%20%20%20%20flow.Connect(innerBatchFlow%2C%20flyt.DefaultAction%2C%20aggregateNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Create%20outer%20batch%20flow%0AouterBatchFlow%20%3A%3D%20flyt.NewBatchFlow(outerFlowFactory%2C%20outerBatchFunc%2C%20false)%0A%60%60%60%0A%0A%23%23%20Error%20Recovery%0A%0AHandle%20failures%20in%20batch%20flows%3A%0A%0A%60%60%60go%0AflowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20riskyOperation(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20error%20for%20later%20analysis%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errorData%20%3A%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20prepResult%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22time%22%3A%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20storeError(errorData)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Return%20partial%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%20%20%2F%2F%20Don't%20fail%20the%20entire%20batch%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Isolate%20Flows**%3A%20Each%20flow%20instance%20should%20be%20independent%0A2.%20**Manage%20Resources**%3A%20Be%20mindful%20of%20resource%20usage%20with%20concurrent%20flows%0A3.%20**Handle%20Failures**%3A%20Decide%20whether%20one%20failure%20should%20stop%20the%20batch%0A4.%20**Track%20Progress**%3A%20Implement%20progress%20tracking%20for%20long-running%20batches%0A5.%20**Limit%20Concurrency**%3A%20Set%20reasonable%20concurrency%20limits%0A6.%20**Test%20Thoroughly**%3A%20Test%20with%20various%20batch%20sizes%20and%20failure%20scenarios%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20Process%20items%20within%20a%20single%20node%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Compose%20complex%20workflows%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Fine-grained%20concurrency%20control",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./batch-flows-DcKUpb_C.js"),[]),path:"/advanced/batch-flows.html",type:"mdx",filePath:"advanced/batch-flows.mdx",content:"%23%20Batch%20Flows%0A%0ARun%20the%20same%20flow%20multiple%20times%20with%20different%20parameters%2C%20perfect%20for%20processing%20multiple%20entities%20or%20parallel%20workflows.%0A%0A%23%23%20Basic%20Batch%20Flow%0A%0ARun%20a%20flow%20for%20each%20set%20of%20inputs%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20flow%20factory%20-%20returns%20a%20new%20flow%20instance%20for%20each%20iteration%0AflowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20validateNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Each%20flow%20has%20its%20own%20SharedStore%20with%20merged%20FlowInputs%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%2C%20_%20%3A%3D%20shared.Get(%22user_id%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20email%2C%20_%20%3A%3D%20shared.Get(%22email%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%22user_id%22%3A%20userID%2C%20%22email%22%3A%20email%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20user%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processUser(data)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(validateNode)%0A%7D%0A%0A%2F%2F%20Define%20input%20parameters%20for%20each%20flow%20iteration%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Could%20fetch%20from%20database%2C%20API%2C%20etc.%0A%20%20%20%20return%20%5B%5Dflyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%7B%22user_id%22%3A%201%2C%20%22email%22%3A%20%22user1%40example.com%22%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22user_id%22%3A%202%2C%20%22email%22%3A%20%22user2%40example.com%22%7D%2C%0A%20%20%20%20%20%20%20%20%7B%22user_id%22%3A%203%2C%20%22email%22%3A%20%22user3%40example.com%22%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0A%2F%2F%20Create%20and%20run%20batch%20flow%0AbatchFlow%20%3A%3D%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%20%2F%2F%20true%20for%20concurrent%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Aerr%20%3A%3D%20batchFlow.Run(ctx%2C%20shared)%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%20Execution%0A%0AControl%20how%20flows%20are%20executed%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20-%20one%20flow%20at%20a%20time%0AsequentialBatch%20%3A%3D%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20false)%0A%0A%2F%2F%20Concurrent%20-%20multiple%20flows%20in%20parallel%0AconcurrentBatch%20%3A%3D%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%20Dynamic%20Input%20Generation%0A%0AGenerate%20inputs%20based%20on%20runtime%20data%3A%0A%0A%60%60%60go%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Get%20configuration%20from%20parent%20shared%20store%0A%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22batch_config%22)%0A%20%20%20%20batchSize%20%3A%3D%20config.(map%5Bstring%5Dany)%5B%22size%22%5D.(int)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fetch%20data%20from%20database%0A%20%20%20%20users%2C%20err%20%3A%3D%20fetchUsers(batchSize)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Convert%20to%20FlowInputs%0A%20%20%20%20inputs%20%3A%3D%20make(%5B%5Dflyt.FlowInputs%2C%20len(users))%0A%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20inputs%5Bi%5D%20%3D%20flyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22user_id%22%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22user_name%22%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22user_data%22%3A%20user%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20inputs%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Complex%20Flow%20Factory%0A%0ACreate%20sophisticated%20flows%20for%20each%20batch%3A%0A%0A%60%60%60go%0AflowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20fetchNode%20%3A%3D%20createFetchNode()%0A%20%20%20%20validateNode%20%3A%3D%20createValidateNode()%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20saveNode%20%3A%3D%20createSaveNode()%0A%20%20%20%20errorNode%20%3A%3D%20createErrorNode()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%20with%20error%20handling%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0A%20%20%20%20flow.Connect(validateNode%2C%20%22valid%22%2C%20processNode)%0A%20%20%20%20flow.Connect(validateNode%2C%20%22invalid%22%2C%20errorNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%20%20%20%20flow.Connect(processNode%2C%20%22error%22%2C%20errorNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Flow%20with%20Configuration%0A%0APass%20configuration%20to%20batch%20flows%3A%0A%0A%60%60%60go%0Afunc%20createConfiguredBatchFlow(config%20Config)%20*flyt.Flow%20%7B%0A%20%20%20%20flowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Each%20flow%20gets%20the%20same%20configuration%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20config%20in%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithConfig(prepResult%2C%20config)%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20flyt.NewFlow(node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20batchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%2C%20_%20%3A%3D%20shared.Get(%22items%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20inputs%20%3A%3D%20make(%5B%5Dflyt.FlowInputs%2C%200)%0A%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items.(%5B%5Dany)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20inputs%20%3D%20append(inputs%2C%20flyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22item%22%3A%20item%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22config%22%3A%20config%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20inputs%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Aggregation%0A%0ACollect%20results%20from%20all%20flows%3A%0A%0A%60%60%60go%0Atype%20ResultCollector%20struct%20%7B%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20results%20%5B%5Dany%0A%20%20%20%20errors%20%20%5B%5Derror%0A%7D%0A%0Afunc%20createAggregatingBatchFlow(collector%20*ResultCollector)%20*flyt.Flow%20%7B%0A%20%20%20%20flowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20process(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.errors%20%3D%20append(collector.errors%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.results%20%3D%20append(collector.results%2C%20result)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20flyt.NewFlow(node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20...%20rest%20of%20batch%20flow%20setup%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Flow%20with%20Progress%0A%0ATrack%20progress%20across%20batch%20execution%3A%0A%0A%60%60%60go%0Atype%20ProgressTracker%20struct%20%7B%0A%20%20%20%20total%20%20%20%20%20int%0A%20%20%20%20completed%20int32%0A%20%20%20%20failed%20%20%20%20int32%0A%7D%0A%0Afunc%20createProgressBatchFlow(tracker%20*ProgressTracker)%20*flyt.Flow%20%7B%0A%20%20%20%20flowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt32(%26tracker.completed%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt32(%26tracker.failed%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20progress%20%3A%3D%20atomic.LoadInt32(%26tracker.completed)%20%2B%20atomic.LoadInt32(%26tracker.failed)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20percentage%20%3A%3D%20float64(progress)%20%2F%20float64(tracker.total)%20*%20100%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Batch%20progress%3A%20%25.1f%25%25%20(%25d%2F%25d)%22%2C%20percentage%2C%20progress%2C%20tracker.total)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20return%20flyt.NewFlow(node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20batchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20inputs%20%3A%3D%20generateInputs()%0A%20%20%20%20%20%20%20%20tracker.total%20%3D%20len(inputs)%0A%20%20%20%20%20%20%20%20return%20inputs%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchFlow(flowFactory%2C%20batchFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Batch%20Processing%0A%0AProcess%20batches%20based%20on%20conditions%3A%0A%0A%60%60%60go%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20mode%2C%20_%20%3A%3D%20shared.Get(%22processing_mode%22)%0A%20%20%20%20%0A%20%20%20%20var%20inputs%20%5B%5Dflyt.FlowInputs%0A%20%20%20%20%0A%20%20%20%20switch%20mode.(string)%20%7B%0A%20%20%20%20case%20%22all%22%3A%0A%20%20%20%20%20%20%20%20inputs%20%3D%20getAllInputs()%0A%20%20%20%20case%20%22pending%22%3A%0A%20%20%20%20%20%20%20%20inputs%20%3D%20getPendingInputs()%0A%20%20%20%20case%20%22failed%22%3A%0A%20%20%20%20%20%20%20%20inputs%20%3D%20getFailedInputs()%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20mode%3A%20%25s%22%2C%20mode)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Filter%20based%20on%20additional%20criteria%0A%20%20%20%20filtered%20%3A%3D%20make(%5B%5Dflyt.FlowInputs%2C%200)%0A%20%20%20%20for%20_%2C%20input%20%3A%3D%20range%20inputs%20%7B%0A%20%20%20%20%20%20%20%20if%20shouldProcess(input)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20input)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20filtered%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Nested%20Batch%20Flows%0A%0ABatch%20flows%20within%20batch%20flows%3A%0A%0A%60%60%60go%0AouterFlowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Inner%20batch%20flow%20for%20processing%20items%0A%20%20%20%20innerBatchFlow%20%3A%3D%20flyt.NewBatchFlow(%0A%20%20%20%20%20%20%20%20innerFlowFactory%2C%0A%20%20%20%20%20%20%20%20innerBatchFunc%2C%0A%20%20%20%20%20%20%20%20true%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Outer%20flow%20that%20includes%20the%20batch%0A%20%20%20%20fetchNode%20%3A%3D%20createFetchNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20innerBatchFlow)%0A%20%20%20%20flow.Connect(innerBatchFlow%2C%20flyt.DefaultAction%2C%20aggregateNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Create%20outer%20batch%20flow%0AouterBatchFlow%20%3A%3D%20flyt.NewBatchFlow(outerFlowFactory%2C%20outerBatchFunc%2C%20false)%0A%60%60%60%0A%0A%23%23%20Error%20Recovery%0A%0AHandle%20failures%20in%20batch%20flows%3A%0A%0A%60%60%60go%0AflowFactory%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20riskyOperation(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20error%20for%20later%20analysis%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errorData%20%3A%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20prepResult%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22time%22%3A%20%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20storeError(errorData)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Return%20partial%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%20%20%2F%2F%20Don't%20fail%20the%20entire%20batch%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Isolate%20Flows**%3A%20Each%20flow%20instance%20should%20be%20independent%0A2.%20**Manage%20Resources**%3A%20Be%20mindful%20of%20resource%20usage%20with%20concurrent%20flows%0A3.%20**Handle%20Failures**%3A%20Decide%20whether%20one%20failure%20should%20stop%20the%20batch%0A4.%20**Track%20Progress**%3A%20Implement%20progress%20tracking%20for%20long-running%20batches%0A5.%20**Limit%20Concurrency**%3A%20Set%20reasonable%20concurrency%20limits%0A6.%20**Test%20Thoroughly**%3A%20Test%20with%20various%20batch%20sizes%20and%20failure%20scenarios%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20Process%20items%20within%20a%20single%20node%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Compose%20complex%20workflows%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Fine-grained%20concurrency%20control",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./batch-processing-CaDJ8g7C.js"),[]),path:"/advanced/batch-processing",type:"mdx",filePath:"advanced/batch-processing.mdx",content:"%23%20Batch%20Processing%0A%0AProcess%20collections%20of%20items%20efficiently%20with%20concurrent%20or%20sequential%20execution.%0A%0A%23%23%20Basic%20Batch%20Processing%0A%0AProcess%20items%20with%20a%20simple%20function%3A%0A%0A%60%60%60go%0A%2F%2F%20Define%20processing%20function%0AprocessFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Process%20each%20item%0A%20%20%20%20return%20fmt.Sprintf(%22processed%3A%20%25v%22%2C%20item)%2C%20nil%0A%7D%0A%0A%2F%2F%20Create%20batch%20node%0AbatchNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%20%2F%2F%20true%20for%20concurrent%0A%0A%2F%2F%20Set%20items%20in%20shared%20store%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0A%2F%2F%20Run%20batch%20processing%0Actx%20%3A%3D%20context.Background()%0Aaction%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20batchNode%2C%20shared)%0A%0A%2F%2F%20Get%20results%0Aresults%2C%20_%20%3A%3D%20shared.Get(%22results%22)%0Afmt.Println(results)%20%2F%2F%20%5B%22processed%3A%20item1%22%2C%20%22processed%3A%20item2%22%2C%20%22processed%3A%20item3%22%5D%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%0A%0AChoose%20the%20right%20execution%20mode%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20processing%20-%20maintains%20order%0AsequentialNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20false)%0A%0A%2F%2F%20Concurrent%20processing%20-%20faster%20but%20unordered%0AconcurrentNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%20Custom%20Keys%0A%0AUse%20custom%20keys%20for%20input%20and%20output%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNodeWithKeys(%0A%20%20%20%20processFunc%2C%0A%20%20%20%20true%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20concurrent%0A%20%20%20%20%22input_data%22%2C%20%20%20%2F%2F%20custom%20input%20key%0A%20%20%20%20%22output_data%22%2C%20%20%2F%2F%20custom%20output%20key%0A)%0A%0Ashared.Set(%22input_data%22%2C%20items)%0A%2F%2F%20Results%20will%20be%20in%20%22output_data%22%0A%60%60%60%0A%0A%23%23%20Advanced%20Configuration%0A%0AFine-tune%20batch%20processing%20with%20BatchConfig%3A%0A%0A%60%60%60go%0Aconfig%20%3A%3D%20%26flyt.BatchConfig%7B%0A%20%20%20%20BatchSize%3A%20%20%2010%2C%20%20%20%20%20%20%20%20%2F%2F%20Process%2010%20items%20at%20a%20time%0A%20%20%20%20Concurrency%3A%205%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Use%205%20concurrent%20workers%0A%20%20%20%20ItemsKey%3A%20%20%20%20%22data%22%2C%20%20%20%20%2F%2F%20Key%20for%20input%20items%0A%20%20%20%20ResultsKey%3A%20%20%22output%22%2C%20%20%2F%2F%20Key%20for%20results%0A%20%20%20%20CountKey%3A%20%20%20%20%22total%22%2C%20%20%20%2F%2F%20Key%20for%20processed%20count%0A%7D%0A%0AprocessFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Heavy%20processing%0A%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20return%20processItem(item)%0A%7D%0A%0AbatchNode%20%3A%3D%20flyt.NewBatchNodeWithConfig(processFunc%2C%20true%2C%20config)%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AHandle%20errors%20in%20batch%20operations%3A%0A%0A%60%60%60go%0AprocessFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20if%20item.(int)%20%3C%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22negative%20value%3A%20%25v%22%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20return%20item.(int)%20*%202%2C%20nil%0A%7D%0A%0AbatchNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%0Ashared.Set(%22items%22%2C%20%5B%5Dint%7B1%2C%20-2%2C%203%2C%20-4%2C%205%7D)%0A%0Aaction%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20batchNode%2C%20shared)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20if%20batchErr%2C%20ok%20%3A%3D%20err.(*flyt.BatchError)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Batch%20processing%20failed%3A%20%25s%5Cn%22%2C%20batchErr.Message)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Access%20individual%20errors%0A%20%20%20%20%20%20%20%20for%20i%2C%20e%20%3A%3D%20range%20batchErr.Errors%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20e%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Item%20%25d%20failed%3A%20%25v%5Cn%22%2C%20i%2C%20e)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20Patterns%0A%0A%23%23%23%20Map%20Pattern%0A%0ATransform%20each%20item%3A%0A%0A%60%60%60go%0AmapFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20user%20%3A%3D%20item.(User)%0A%20%20%20%20return%20UserDTO%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20user.Age%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0AmapNode%20%3A%3D%20flyt.NewBatchNode(mapFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Pattern%0A%0AProcess%20only%20matching%20items%3A%0A%0A%60%60%60go%0AfilterFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20value%20%3A%3D%20item.(int)%0A%20%20%20%20if%20value%20%3E%2010%20%7B%0A%20%20%20%20%20%20%20%20return%20value%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%2C%20nil%20%20%2F%2F%20Skip%20this%20item%0A%7D%0A%0AfilterNode%20%3A%3D%20flyt.NewBatchNode(filterFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%23%20Reduce%20Pattern%0A%0AAggregate%20results%3A%0A%0A%60%60%60go%0Atype%20SumNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20total%20int%0A%20%20%20%20mu%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20(n%20*SumNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5Dint)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20n.mu.Lock()%0A%20%20%20%20%20%20%20%20n.total%20%2B%3D%20item%0A%20%20%20%20%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.total%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Chunked%20Processing%0A%0AProcess%20large%20datasets%20in%20chunks%3A%0A%0A%60%60%60go%0Afunc%20createChunkedProcessor(chunkSize%20int)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%2C%20_%20%3A%3D%20shared.Get(%22items%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20items%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dany%2C%200%2C%20len(items))%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20in%20chunks%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(items)%3B%20i%20%2B%3D%20chunkSize%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3A%3D%20i%20%2B%20chunkSize%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20end%20%3E%20len(items)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20len(items)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chunk%20%3A%3D%20items%5Bi%3Aend%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chunkResults%20%3A%3D%20processChunk(chunk)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20chunkResults...)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Progress%20Tracking%0A%0AMonitor%20batch%20processing%20progress%3A%0A%0A%60%60%60go%0Atype%20ProgressBatchNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20processed%20int32%0A%20%20%20%20total%20%20%20%20%20int32%0A%7D%0A%0Afunc%20(n%20*ProgressBatchNode)%20processWithProgress(ctx%20context.Context%2C%20items%20%5B%5Dany)%20(%5B%5Dany%2C%20error)%20%7B%0A%20%20%20%20n.total%20%3D%20int32(len(items))%0A%20%20%20%20results%20%3A%3D%20make(%5B%5Dany%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(idx%20int%2C%20data%20any)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20_%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bidx%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20progress%0A%20%20%20%20%20%20%20%20%20%20%20%20current%20%3A%3D%20atomic.AddInt32(%26n.processed%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20progress%20%3A%3D%20float64(current)%20%2F%20float64(n.total)%20*%20100%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20current%2510%20%3D%3D%200%20%7C%7C%20current%20%3D%3D%20n.total%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Progress%3A%20%25.1f%25%25%20(%25d%2F%25d)%22%2C%20progress%2C%20current%2C%20n.total)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D(i%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Batch%20Processing%0A%0AControl%20processing%20rate%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedBatchNode(rps%20int)%20flyt.Node%20%7B%0A%20%20%20%20limiter%20%3A%3D%20rate.NewLimiter(rate.Limit(rps)%2C%201)%0A%20%20%20%20%0A%20%20%20%20processFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Wait%20for%20rate%20limiter%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20item%0A%20%20%20%20%20%20%20%20return%20callAPI(item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchNode(processFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20with%20Timeout%0A%0ASet%20timeouts%20for%20batch%20operations%3A%0A%0A%60%60%60go%0Afunc%20createTimeoutBatchNode(timeout%20time.Duration)%20flyt.Node%20%7B%0A%20%20%20%20processFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20timeout%20context%20for%20this%20item%0A%20%20%20%20%20%20%20%20itemCtx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20timeout)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20resultChan%20%3A%3D%20make(chan%20any)%0A%20%20%20%20%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20case%20%3C-itemCtx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22processing%20timeout%20for%20item%3A%20%25v%22%2C%20item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchNode(processFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Choose%20Concurrency%20Wisely**%3A%20Use%20concurrent%20for%20I%2FO-bound%2C%20sequential%20for%20order-dependent%0A2.%20**Handle%20Errors%20Gracefully**%3A%20Decide%20whether%20to%20fail%20fast%20or%20collect%20all%20errors%0A3.%20**Monitor%20Progress**%3A%20Add%20logging%20for%20long-running%20batches%0A4.%20**Set%20Reasonable%20Limits**%3A%20Configure%20batch%20size%20and%20concurrency%20based%20on%20resources%0A5.%20**Test%20with%20Real%20Data**%3A%20Test%20with%20production-like%20data%20volumes%0A6.%20**Consider%20Memory%20Usage**%3A%20Be%20mindful%20of%20memory%20when%20processing%20large%20batches%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Run%20flows%20with%20multiple%20inputs%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Custom%20concurrent%20processing%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Handle%20batch%20errors",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./batch-processing-CaDJ8g7C.js"),[]),path:"/advanced/batch-processing.html",type:"mdx",filePath:"advanced/batch-processing.mdx",content:"%23%20Batch%20Processing%0A%0AProcess%20collections%20of%20items%20efficiently%20with%20concurrent%20or%20sequential%20execution.%0A%0A%23%23%20Basic%20Batch%20Processing%0A%0AProcess%20items%20with%20a%20simple%20function%3A%0A%0A%60%60%60go%0A%2F%2F%20Define%20processing%20function%0AprocessFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Process%20each%20item%0A%20%20%20%20return%20fmt.Sprintf(%22processed%3A%20%25v%22%2C%20item)%2C%20nil%0A%7D%0A%0A%2F%2F%20Create%20batch%20node%0AbatchNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%20%2F%2F%20true%20for%20concurrent%0A%0A%2F%2F%20Set%20items%20in%20shared%20store%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0A%2F%2F%20Run%20batch%20processing%0Actx%20%3A%3D%20context.Background()%0Aaction%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20batchNode%2C%20shared)%0A%0A%2F%2F%20Get%20results%0Aresults%2C%20_%20%3A%3D%20shared.Get(%22results%22)%0Afmt.Println(results)%20%2F%2F%20%5B%22processed%3A%20item1%22%2C%20%22processed%3A%20item2%22%2C%20%22processed%3A%20item3%22%5D%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%0A%0AChoose%20the%20right%20execution%20mode%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20processing%20-%20maintains%20order%0AsequentialNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20false)%0A%0A%2F%2F%20Concurrent%20processing%20-%20faster%20but%20unordered%0AconcurrentNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%20Custom%20Keys%0A%0AUse%20custom%20keys%20for%20input%20and%20output%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNodeWithKeys(%0A%20%20%20%20processFunc%2C%0A%20%20%20%20true%2C%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20concurrent%0A%20%20%20%20%22input_data%22%2C%20%20%20%2F%2F%20custom%20input%20key%0A%20%20%20%20%22output_data%22%2C%20%20%2F%2F%20custom%20output%20key%0A)%0A%0Ashared.Set(%22input_data%22%2C%20items)%0A%2F%2F%20Results%20will%20be%20in%20%22output_data%22%0A%60%60%60%0A%0A%23%23%20Advanced%20Configuration%0A%0AFine-tune%20batch%20processing%20with%20BatchConfig%3A%0A%0A%60%60%60go%0Aconfig%20%3A%3D%20%26flyt.BatchConfig%7B%0A%20%20%20%20BatchSize%3A%20%20%2010%2C%20%20%20%20%20%20%20%20%2F%2F%20Process%2010%20items%20at%20a%20time%0A%20%20%20%20Concurrency%3A%205%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Use%205%20concurrent%20workers%0A%20%20%20%20ItemsKey%3A%20%20%20%20%22data%22%2C%20%20%20%20%2F%2F%20Key%20for%20input%20items%0A%20%20%20%20ResultsKey%3A%20%20%22output%22%2C%20%20%2F%2F%20Key%20for%20results%0A%20%20%20%20CountKey%3A%20%20%20%20%22total%22%2C%20%20%20%2F%2F%20Key%20for%20processed%20count%0A%7D%0A%0AprocessFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Heavy%20processing%0A%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%0A%20%20%20%20return%20processItem(item)%0A%7D%0A%0AbatchNode%20%3A%3D%20flyt.NewBatchNodeWithConfig(processFunc%2C%20true%2C%20config)%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AHandle%20errors%20in%20batch%20operations%3A%0A%0A%60%60%60go%0AprocessFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20if%20item.(int)%20%3C%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22negative%20value%3A%20%25v%22%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20return%20item.(int)%20*%202%2C%20nil%0A%7D%0A%0AbatchNode%20%3A%3D%20flyt.NewBatchNode(processFunc%2C%20true)%0Ashared.Set(%22items%22%2C%20%5B%5Dint%7B1%2C%20-2%2C%203%2C%20-4%2C%205%7D)%0A%0Aaction%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20batchNode%2C%20shared)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20if%20batchErr%2C%20ok%20%3A%3D%20err.(*flyt.BatchError)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Batch%20processing%20failed%3A%20%25s%5Cn%22%2C%20batchErr.Message)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Access%20individual%20errors%0A%20%20%20%20%20%20%20%20for%20i%2C%20e%20%3A%3D%20range%20batchErr.Errors%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20e%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Item%20%25d%20failed%3A%20%25v%5Cn%22%2C%20i%2C%20e)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20Patterns%0A%0A%23%23%23%20Map%20Pattern%0A%0ATransform%20each%20item%3A%0A%0A%60%60%60go%0AmapFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20user%20%3A%3D%20item.(User)%0A%20%20%20%20return%20UserDTO%7B%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20Name%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20Age%3A%20%20user.Age%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0AmapNode%20%3A%3D%20flyt.NewBatchNode(mapFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Pattern%0A%0AProcess%20only%20matching%20items%3A%0A%0A%60%60%60go%0AfilterFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20value%20%3A%3D%20item.(int)%0A%20%20%20%20if%20value%20%3E%2010%20%7B%0A%20%20%20%20%20%20%20%20return%20value%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%2C%20nil%20%20%2F%2F%20Skip%20this%20item%0A%7D%0A%0AfilterNode%20%3A%3D%20flyt.NewBatchNode(filterFunc%2C%20true)%0A%60%60%60%0A%0A%23%23%23%20Reduce%20Pattern%0A%0AAggregate%20results%3A%0A%0A%60%60%60go%0Atype%20SumNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20total%20int%0A%20%20%20%20mu%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20(n%20*SumNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5Dint)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20n.mu.Lock()%0A%20%20%20%20%20%20%20%20n.total%20%2B%3D%20item%0A%20%20%20%20%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.total%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Chunked%20Processing%0A%0AProcess%20large%20datasets%20in%20chunks%3A%0A%0A%60%60%60go%0Afunc%20createChunkedProcessor(chunkSize%20int)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%2C%20_%20%3A%3D%20shared.Get(%22items%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20items%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dany%2C%200%2C%20len(items))%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20in%20chunks%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(items)%3B%20i%20%2B%3D%20chunkSize%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3A%3D%20i%20%2B%20chunkSize%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20end%20%3E%20len(items)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20len(items)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chunk%20%3A%3D%20items%5Bi%3Aend%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chunkResults%20%3A%3D%20processChunk(chunk)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20chunkResults...)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Progress%20Tracking%0A%0AMonitor%20batch%20processing%20progress%3A%0A%0A%60%60%60go%0Atype%20ProgressBatchNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20processed%20int32%0A%20%20%20%20total%20%20%20%20%20int32%0A%7D%0A%0Afunc%20(n%20*ProgressBatchNode)%20processWithProgress(ctx%20context.Context%2C%20items%20%5B%5Dany)%20(%5B%5Dany%2C%20error)%20%7B%0A%20%20%20%20n.total%20%3D%20int32(len(items))%0A%20%20%20%20results%20%3A%3D%20make(%5B%5Dany%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(idx%20int%2C%20data%20any)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20_%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bidx%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20progress%0A%20%20%20%20%20%20%20%20%20%20%20%20current%20%3A%3D%20atomic.AddInt32(%26n.processed%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20progress%20%3A%3D%20float64(current)%20%2F%20float64(n.total)%20*%20100%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20current%2510%20%3D%3D%200%20%7C%7C%20current%20%3D%3D%20n.total%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Progress%3A%20%25.1f%25%25%20(%25d%2F%25d)%22%2C%20progress%2C%20current%2C%20n.total)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D(i%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Batch%20Processing%0A%0AControl%20processing%20rate%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedBatchNode(rps%20int)%20flyt.Node%20%7B%0A%20%20%20%20limiter%20%3A%3D%20rate.NewLimiter(rate.Limit(rps)%2C%201)%0A%20%20%20%20%0A%20%20%20%20processFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Wait%20for%20rate%20limiter%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20item%0A%20%20%20%20%20%20%20%20return%20callAPI(item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchNode(processFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20with%20Timeout%0A%0ASet%20timeouts%20for%20batch%20operations%3A%0A%0A%60%60%60go%0Afunc%20createTimeoutBatchNode(timeout%20time.Duration)%20flyt.Node%20%7B%0A%20%20%20%20processFunc%20%3A%3D%20func(ctx%20context.Context%2C%20item%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20timeout%20context%20for%20this%20item%0A%20%20%20%20%20%20%20%20itemCtx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20timeout)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20resultChan%20%3A%3D%20make(chan%20any)%0A%20%20%20%20%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20case%20%3C-itemCtx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22processing%20timeout%20for%20item%3A%20%25v%22%2C%20item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewBatchNode(processFunc%2C%20true)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Choose%20Concurrency%20Wisely**%3A%20Use%20concurrent%20for%20I%2FO-bound%2C%20sequential%20for%20order-dependent%0A2.%20**Handle%20Errors%20Gracefully**%3A%20Decide%20whether%20to%20fail%20fast%20or%20collect%20all%20errors%0A3.%20**Monitor%20Progress**%3A%20Add%20logging%20for%20long-running%20batches%0A4.%20**Set%20Reasonable%20Limits**%3A%20Configure%20batch%20size%20and%20concurrency%20based%20on%20resources%0A5.%20**Test%20with%20Real%20Data**%3A%20Test%20with%20production-like%20data%20volumes%0A6.%20**Consider%20Memory%20Usage**%3A%20Be%20mindful%20of%20memory%20when%20processing%20large%20batches%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Run%20flows%20with%20multiple%20inputs%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Custom%20concurrent%20processing%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Handle%20batch%20errors",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./custom-nodes-Cduz5j6U.js"),[]),path:"/advanced/custom-nodes",type:"mdx",filePath:"advanced/custom-nodes.mdx",content:"%23%20Custom%20Node%20Types%0A%0ACreate%20sophisticated%20nodes%20with%20custom%20behavior%2C%20state%20management%2C%20and%20advanced%20features.%0A%0A%23%23%20Basic%20Custom%20Node%0A%0AExtend%20BaseNode%20for%20custom%20functionality%3A%0A%0A%60%60%60go%0Atype%20CustomNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20config%20Config%0A%20%20%20%20state%20%20State%0A%7D%0A%0Afunc%20NewCustomNode(config%20Config)%20*CustomNode%20%7B%0A%20%20%20%20return%20%26CustomNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20config%3A%20%20%20config%2C%0A%20%20%20%20%20%20%20%20state%3A%20%20%20%20NewState()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20preparation%20logic%0A%20%20%20%20input%2C%20_%20%3A%3D%20shared.Get(%22input%22)%0A%20%20%20%20n.state.Prepare(input)%0A%20%20%20%20return%20input%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20execution%20logic%0A%20%20%20%20result%20%3A%3D%20n.processWithConfig(prepResult%2C%20n.config)%0A%20%20%20%20n.state.Update(result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20post-processing%0A%20%20%20%20shared.Set(%22state%22%2C%20n.state)%0A%20%20%20%20%0A%20%20%20%20if%20n.state.IsComplete()%20%7B%0A%20%20%20%20%20%20%20%20return%20%22complete%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Atype%20AccumulatorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20values%20%20%20%5B%5Dany%0A%20%20%20%20maxSize%20%20int%0A%7D%0A%0Afunc%20NewAccumulatorNode(maxSize%20int)%20*AccumulatorNode%20%7B%0A%20%20%20%20return%20%26AccumulatorNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20values%3A%20%20%20make(%5B%5Dany%2C%200%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20%20maxSize%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20to%20accumulator%0A%20%20%20%20n.values%20%3D%20append(n.values%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20buffer%20is%20full%0A%20%20%20%20if%20len(n.values)%20%3E%3D%20n.maxSize%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20batch%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20n.processBatch(n.values)%0A%20%20%20%20%20%20%20%20n.values%20%3D%20n.values%5B%3A0%5D%20%2F%2F%20Clear%20buffer%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20processBatch(values%20%5B%5Dany)%20any%20%7B%0A%20%20%20%20%2F%2F%20Process%20accumulated%20values%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22count%22%3A%20len(values)%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%20values%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource-Managing%20Nodes%0A%0AHandle%20external%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20%20%20%20%20*sql.DB%0A%20%20%20%20prepared%20map%5Bstring%5D*sql.Stmt%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDatabaseNode(dsn%20string)%20(*DatabaseNode%2C%20error)%20%7B%0A%20%20%20%20db%2C%20err%20%3A%3D%20sql.Open(%22postgres%22%2C%20dsn)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20db.SetMaxOpenConns(25)%0A%20%20%20%20db.SetMaxIdleConns(5)%0A%20%20%20%20%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20db%2C%0A%20%20%20%20%20%20%20%20prepared%3A%20make(map%5Bstring%5D*sql.Stmt)%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(QueryRequest)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20prepared%20statement%20if%20available%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.getOrPrepare(query.SQL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20stmt.QueryContext(ctx%2C%20query.Args...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20return%20n.scanResults(rows)%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20getOrPrepare(sql%20string)%20(*sql.Stmt%2C%20error)%20%7B%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.pool.Prepare(sql)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.prepared%5Bsql%5D%20%3D%20stmt%0A%20%20%20%20return%20stmt%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Close()%20error%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20stmt%20%3A%3D%20range%20n.prepared%20%7B%0A%20%20%20%20%20%20%20%20stmt.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20RetryableNode%20Implementation%0A%0ACustom%20retry%20logic%3A%0A%0A%60%60%60go%0Atype%20SmartRetryNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempts%20%20%20%20%20%20int%0A%20%20%20%20lastError%20%20%20%20%20error%0A%20%20%20%20backoffFactor%20float64%0A%7D%0A%0Afunc%20NewSmartRetryNode()%20*SmartRetryNode%20%7B%0A%20%20%20%20return%20%26SmartRetryNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20%20%20%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20backoffFactor%3A%201.5%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Dynamic%20retry%20count%20based%20on%20error%20type%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20isNetworkError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%205%20%20%2F%2F%20More%20retries%20for%20network%20issues%0A%20%20%20%20%20%20%20%20case%20isRateLimitError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%203%20%20%2F%2F%20Fewer%20retries%20for%20rate%20limits%0A%20%20%20%20%20%20%20%20case%20isAuthError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%20%20%2F%2F%20No%20retries%20for%20auth%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%202%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20isRateLimitError(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20retry-after%20from%20error%20if%20available%0A%20%20%20%20%20%20%20%20if%20retryAfter%20%3A%3D%20extractRetryAfter(n.lastError)%3B%20retryAfter%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20retryAfter%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Exponential%20backoff%20with%20jitter%0A%20%20%20%20base%20%3A%3D%20math.Pow(n.backoffFactor%2C%20float64(n.attempts))%0A%20%20%20%20jitter%20%3A%3D%20rand.Float64()%20*%200.3%20*%20base%20%20%2F%2F%2030%25%20jitter%0A%20%20%20%20return%20time.Duration((base%20%2B%20jitter)%20*%20float64(time.Second))%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempts%2B%2B%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.performOperation(ctx%2C%20prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.lastError%20%3D%20err%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20n.attempts%20%3D%200%0A%20%20%20%20n.lastError%20%3D%20nil%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Composite%20Nodes%0A%0ACombine%20multiple%20operations%3A%0A%0A%60%60%60go%0Atype%20PipelineNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20stages%20%5B%5Dfunc(context.Context%2C%20any)%20(any%2C%20error)%0A%7D%0A%0Afunc%20NewPipelineNode(stages%20...func(context.Context%2C%20any)%20(any%2C%20error))%20*PipelineNode%20%7B%0A%20%20%20%20return%20%26PipelineNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20stages%3A%20%20%20stages%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*PipelineNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20prepResult%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20stage%20%3A%3D%20range%20n.stages%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20stage(ctx%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stage%20%25d%20failed%3A%20%25w%22%2C%20i%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%20Nodes%0A%0AAdd%20observability%3A%0A%0A%60%60%60go%0Atype%20MonitoredNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20name%20%20%20%20string%0A%20%20%20%20metrics%20*Metrics%0A%7D%0A%0Atype%20Metrics%20struct%20%7B%0A%20%20%20%20executions%20%20%20int64%0A%20%20%20%20successes%20%20%20%20int64%0A%20%20%20%20failures%20%20%20%20%20int64%0A%20%20%20%20totalLatency%20int64%0A%7D%0A%0Afunc%20NewMonitoredNode(name%20string%2C%20baseNode%20flyt.Node)%20*MonitoredNode%20%7B%0A%20%20%20%20return%20%26MonitoredNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20baseNode.(*flyt.BaseNode)%2C%0A%20%20%20%20%20%20%20%20name%3A%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20metrics%3A%20%20%26Metrics%7B%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.executions%2C%201)%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.BaseNode.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20latency%20%3A%3D%20time.Since(start).Milliseconds()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.totalLatency%2C%20latency)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.failures%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20failed%3A%20%25v%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20err%2C%20latency)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.successes%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20succeeded%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20latency)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20GetMetrics()%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22executions%22%3A%20%20%20%20atomic.LoadInt64(%26n.metrics.executions)%2C%0A%20%20%20%20%20%20%20%20%22successes%22%3A%20%20%20%20%20atomic.LoadInt64(%26n.metrics.successes)%2C%0A%20%20%20%20%20%20%20%20%22failures%22%3A%20%20%20%20%20%20atomic.LoadInt64(%26n.metrics.failures)%2C%0A%20%20%20%20%20%20%20%20%22avg_latency%22%3A%20%20%20n.getAverageLatency()%2C%0A%20%20%20%20%20%20%20%20%22success_rate%22%3A%20%20n.getSuccessRate()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Async%20Nodes%0A%0AHandle%20asynchronous%20operations%3A%0A%0A%60%60%60go%0Atype%20AsyncNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20chan%20Task%0A%20%20%20%20wg%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewAsyncNode(workers%20int)%20*AsyncNode%20%7B%0A%20%20%20%20n%20%3A%3D%20%26AsyncNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20workers%3A%20%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20%20make(chan%20Task%2C%20workers*2)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20workers%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20workers%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20go%20n.worker()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20worker()%20%7B%0A%20%20%20%20for%20task%20%3A%3D%20range%20n.queue%20%7B%0A%20%20%20%20%20%20%20%20n.processTask(task)%0A%20%20%20%20%20%20%20%20n.wg.Done()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20tasks%20%3A%3D%20prepResult.(%5B%5DTask)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(tasks))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Submit%20all%20tasks%0A%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Add(1)%0A%20%20%20%20%20%20%20%20task.Index%20%3D%20i%0A%20%20%20%20%20%20%20%20task.Results%20%3D%20%26results%0A%20%20%20%20%20%20%20%20n.queue%20%3C-%20task%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20completion%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Close()%20%7B%0A%20%20%20%20close(n.queue)%0A%7D%0A%60%60%60%0A%0A%23%23%20Validation%20Nodes%0A%0AEnsure%20data%20integrity%3A%0A%0A%60%60%60go%0Atype%20ValidationNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20rules%20%5B%5DValidationRule%0A%7D%0A%0Atype%20ValidationRule%20interface%20%7B%0A%20%20%20%20Validate(any)%20error%0A%20%20%20%20Name()%20string%0A%7D%0A%0Afunc%20NewValidationNode(rules%20...ValidationRule)%20*ValidationNode%20%7B%0A%20%20%20%20return%20%26ValidationNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20rules%3A%20%20%20%20rules%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20errors%20%5B%5Dstring%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20rule%20%3A%3D%20range%20n.rules%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rule.Validate(prepResult)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20fmt.Sprintf(%22%25s%3A%20%25v%22%2C%20rule.Name()%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22validation%20failed%3A%20%25s%22%2C%20strings.Join(errors%2C%20%22%3B%20%22))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20prepResult%2C%20nil%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22valid%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Interfaces**%3A%20Define%20clear%20interfaces%20for%20custom%20nodes%0A2.%20**Thread%20Safety**%3A%20Ensure%20nodes%20are%20thread-safe%20for%20concurrent%20use%0A3.%20**Resource%20Management**%3A%20Properly%20manage%20external%20resources%0A4.%20**Error%20Handling**%3A%20Provide%20detailed%20error%20information%0A5.%20**Testing**%3A%20Write%20comprehensive%20tests%20for%20custom%20logic%0A6.%20**Documentation**%3A%20Document%20node%20behavior%20and%20requirements%0A7.%20**Monitoring**%3A%20Add%20metrics%20and%20logging%20for%20observability%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BRetryableNode%20Interface%5D(%2Fconcepts%2Fnodes%23retryablenode-interface)%20-%20Custom%20retry%20logic%0A-%20%5BFallbackNode%20Interface%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Concurrent%20task%20management",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./custom-nodes-Cduz5j6U.js"),[]),path:"/advanced/custom-nodes.html",type:"mdx",filePath:"advanced/custom-nodes.mdx",content:"%23%20Custom%20Node%20Types%0A%0ACreate%20sophisticated%20nodes%20with%20custom%20behavior%2C%20state%20management%2C%20and%20advanced%20features.%0A%0A%23%23%20Basic%20Custom%20Node%0A%0AExtend%20BaseNode%20for%20custom%20functionality%3A%0A%0A%60%60%60go%0Atype%20CustomNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20config%20Config%0A%20%20%20%20state%20%20State%0A%7D%0A%0Afunc%20NewCustomNode(config%20Config)%20*CustomNode%20%7B%0A%20%20%20%20return%20%26CustomNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20config%3A%20%20%20config%2C%0A%20%20%20%20%20%20%20%20state%3A%20%20%20%20NewState()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20preparation%20logic%0A%20%20%20%20input%2C%20_%20%3A%3D%20shared.Get(%22input%22)%0A%20%20%20%20n.state.Prepare(input)%0A%20%20%20%20return%20input%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20execution%20logic%0A%20%20%20%20result%20%3A%3D%20n.processWithConfig(prepResult%2C%20n.config)%0A%20%20%20%20n.state.Update(result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20post-processing%0A%20%20%20%20shared.Set(%22state%22%2C%20n.state)%0A%20%20%20%20%0A%20%20%20%20if%20n.state.IsComplete()%20%7B%0A%20%20%20%20%20%20%20%20return%20%22complete%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Atype%20AccumulatorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20values%20%20%20%5B%5Dany%0A%20%20%20%20maxSize%20%20int%0A%7D%0A%0Afunc%20NewAccumulatorNode(maxSize%20int)%20*AccumulatorNode%20%7B%0A%20%20%20%20return%20%26AccumulatorNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20values%3A%20%20%20make(%5B%5Dany%2C%200%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20%20maxSize%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20to%20accumulator%0A%20%20%20%20n.values%20%3D%20append(n.values%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20buffer%20is%20full%0A%20%20%20%20if%20len(n.values)%20%3E%3D%20n.maxSize%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20batch%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20n.processBatch(n.values)%0A%20%20%20%20%20%20%20%20n.values%20%3D%20n.values%5B%3A0%5D%20%2F%2F%20Clear%20buffer%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20processBatch(values%20%5B%5Dany)%20any%20%7B%0A%20%20%20%20%2F%2F%20Process%20accumulated%20values%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22count%22%3A%20len(values)%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%20values%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource-Managing%20Nodes%0A%0AHandle%20external%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20%20%20%20%20*sql.DB%0A%20%20%20%20prepared%20map%5Bstring%5D*sql.Stmt%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDatabaseNode(dsn%20string)%20(*DatabaseNode%2C%20error)%20%7B%0A%20%20%20%20db%2C%20err%20%3A%3D%20sql.Open(%22postgres%22%2C%20dsn)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20db.SetMaxOpenConns(25)%0A%20%20%20%20db.SetMaxIdleConns(5)%0A%20%20%20%20%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20db%2C%0A%20%20%20%20%20%20%20%20prepared%3A%20make(map%5Bstring%5D*sql.Stmt)%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(QueryRequest)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20prepared%20statement%20if%20available%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.getOrPrepare(query.SQL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20stmt.QueryContext(ctx%2C%20query.Args...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20return%20n.scanResults(rows)%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20getOrPrepare(sql%20string)%20(*sql.Stmt%2C%20error)%20%7B%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.pool.Prepare(sql)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.prepared%5Bsql%5D%20%3D%20stmt%0A%20%20%20%20return%20stmt%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Close()%20error%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20stmt%20%3A%3D%20range%20n.prepared%20%7B%0A%20%20%20%20%20%20%20%20stmt.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20RetryableNode%20Implementation%0A%0ACustom%20retry%20logic%3A%0A%0A%60%60%60go%0Atype%20SmartRetryNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempts%20%20%20%20%20%20int%0A%20%20%20%20lastError%20%20%20%20%20error%0A%20%20%20%20backoffFactor%20float64%0A%7D%0A%0Afunc%20NewSmartRetryNode()%20*SmartRetryNode%20%7B%0A%20%20%20%20return%20%26SmartRetryNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20%20%20%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20backoffFactor%3A%201.5%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Dynamic%20retry%20count%20based%20on%20error%20type%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20isNetworkError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%205%20%20%2F%2F%20More%20retries%20for%20network%20issues%0A%20%20%20%20%20%20%20%20case%20isRateLimitError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%203%20%20%2F%2F%20Fewer%20retries%20for%20rate%20limits%0A%20%20%20%20%20%20%20%20case%20isAuthError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%20%20%2F%2F%20No%20retries%20for%20auth%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%202%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20isRateLimitError(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20retry-after%20from%20error%20if%20available%0A%20%20%20%20%20%20%20%20if%20retryAfter%20%3A%3D%20extractRetryAfter(n.lastError)%3B%20retryAfter%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20retryAfter%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Exponential%20backoff%20with%20jitter%0A%20%20%20%20base%20%3A%3D%20math.Pow(n.backoffFactor%2C%20float64(n.attempts))%0A%20%20%20%20jitter%20%3A%3D%20rand.Float64()%20*%200.3%20*%20base%20%20%2F%2F%2030%25%20jitter%0A%20%20%20%20return%20time.Duration((base%20%2B%20jitter)%20*%20float64(time.Second))%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempts%2B%2B%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.performOperation(ctx%2C%20prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.lastError%20%3D%20err%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20n.attempts%20%3D%200%0A%20%20%20%20n.lastError%20%3D%20nil%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Composite%20Nodes%0A%0ACombine%20multiple%20operations%3A%0A%0A%60%60%60go%0Atype%20PipelineNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20stages%20%5B%5Dfunc(context.Context%2C%20any)%20(any%2C%20error)%0A%7D%0A%0Afunc%20NewPipelineNode(stages%20...func(context.Context%2C%20any)%20(any%2C%20error))%20*PipelineNode%20%7B%0A%20%20%20%20return%20%26PipelineNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20stages%3A%20%20%20stages%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*PipelineNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20prepResult%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20stage%20%3A%3D%20range%20n.stages%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20stage(ctx%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stage%20%25d%20failed%3A%20%25w%22%2C%20i%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%20Nodes%0A%0AAdd%20observability%3A%0A%0A%60%60%60go%0Atype%20MonitoredNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20name%20%20%20%20string%0A%20%20%20%20metrics%20*Metrics%0A%7D%0A%0Atype%20Metrics%20struct%20%7B%0A%20%20%20%20executions%20%20%20int64%0A%20%20%20%20successes%20%20%20%20int64%0A%20%20%20%20failures%20%20%20%20%20int64%0A%20%20%20%20totalLatency%20int64%0A%7D%0A%0Afunc%20NewMonitoredNode(name%20string%2C%20baseNode%20flyt.Node)%20*MonitoredNode%20%7B%0A%20%20%20%20return%20%26MonitoredNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20baseNode.(*flyt.BaseNode)%2C%0A%20%20%20%20%20%20%20%20name%3A%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20metrics%3A%20%20%26Metrics%7B%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.executions%2C%201)%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.BaseNode.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20latency%20%3A%3D%20time.Since(start).Milliseconds()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.totalLatency%2C%20latency)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.failures%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20failed%3A%20%25v%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20err%2C%20latency)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.successes%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20succeeded%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20latency)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20GetMetrics()%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22executions%22%3A%20%20%20%20atomic.LoadInt64(%26n.metrics.executions)%2C%0A%20%20%20%20%20%20%20%20%22successes%22%3A%20%20%20%20%20atomic.LoadInt64(%26n.metrics.successes)%2C%0A%20%20%20%20%20%20%20%20%22failures%22%3A%20%20%20%20%20%20atomic.LoadInt64(%26n.metrics.failures)%2C%0A%20%20%20%20%20%20%20%20%22avg_latency%22%3A%20%20%20n.getAverageLatency()%2C%0A%20%20%20%20%20%20%20%20%22success_rate%22%3A%20%20n.getSuccessRate()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Async%20Nodes%0A%0AHandle%20asynchronous%20operations%3A%0A%0A%60%60%60go%0Atype%20AsyncNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20chan%20Task%0A%20%20%20%20wg%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewAsyncNode(workers%20int)%20*AsyncNode%20%7B%0A%20%20%20%20n%20%3A%3D%20%26AsyncNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20workers%3A%20%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20%20make(chan%20Task%2C%20workers*2)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20workers%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20workers%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20go%20n.worker()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20worker()%20%7B%0A%20%20%20%20for%20task%20%3A%3D%20range%20n.queue%20%7B%0A%20%20%20%20%20%20%20%20n.processTask(task)%0A%20%20%20%20%20%20%20%20n.wg.Done()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20tasks%20%3A%3D%20prepResult.(%5B%5DTask)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(tasks))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Submit%20all%20tasks%0A%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Add(1)%0A%20%20%20%20%20%20%20%20task.Index%20%3D%20i%0A%20%20%20%20%20%20%20%20task.Results%20%3D%20%26results%0A%20%20%20%20%20%20%20%20n.queue%20%3C-%20task%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20completion%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Close()%20%7B%0A%20%20%20%20close(n.queue)%0A%7D%0A%60%60%60%0A%0A%23%23%20Validation%20Nodes%0A%0AEnsure%20data%20integrity%3A%0A%0A%60%60%60go%0Atype%20ValidationNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20rules%20%5B%5DValidationRule%0A%7D%0A%0Atype%20ValidationRule%20interface%20%7B%0A%20%20%20%20Validate(any)%20error%0A%20%20%20%20Name()%20string%0A%7D%0A%0Afunc%20NewValidationNode(rules%20...ValidationRule)%20*ValidationNode%20%7B%0A%20%20%20%20return%20%26ValidationNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20rules%3A%20%20%20%20rules%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20errors%20%5B%5Dstring%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20rule%20%3A%3D%20range%20n.rules%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rule.Validate(prepResult)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20fmt.Sprintf(%22%25s%3A%20%25v%22%2C%20rule.Name()%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22validation%20failed%3A%20%25s%22%2C%20strings.Join(errors%2C%20%22%3B%20%22))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20prepResult%2C%20nil%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22valid%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Interfaces**%3A%20Define%20clear%20interfaces%20for%20custom%20nodes%0A2.%20**Thread%20Safety**%3A%20Ensure%20nodes%20are%20thread-safe%20for%20concurrent%20use%0A3.%20**Resource%20Management**%3A%20Properly%20manage%20external%20resources%0A4.%20**Error%20Handling**%3A%20Provide%20detailed%20error%20information%0A5.%20**Testing**%3A%20Write%20comprehensive%20tests%20for%20custom%20logic%0A6.%20**Documentation**%3A%20Document%20node%20behavior%20and%20requirements%0A7.%20**Monitoring**%3A%20Add%20metrics%20and%20logging%20for%20observability%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BRetryableNode%20Interface%5D(%2Fconcepts%2Fnodes%23retryablenode-interface)%20-%20Custom%20retry%20logic%0A-%20%5BFallbackNode%20Interface%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Concurrent%20task%20management",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./flow-as-node-C7htjRi3.js"),[]),path:"/advanced/flow-as-node",type:"mdx",filePath:"advanced/flow-as-node.mdx",content:"%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%2C%20allowing%20them%20to%20be%20used%20anywhere%20a%20node%20is%20expected.%20This%20enables%20powerful%20composition%20patterns.%0A%0A%23%23%20The%20Node%20Interface%0A%0AFlows%20implement%20all%20Node%20methods%3A%0A%0A%60%60%60go%0Atype%20Node%20interface%20%7B%0A%20%20%20%20Prep(ctx%20context.Context%2C%20shared%20*SharedStore)%20(any%2C%20error)%0A%20%20%20%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%0A%20%20%20%20Post(ctx%20context.Context%2C%20shared%20*SharedStore%2C%20prepResult%2C%20execResult%20any)%20(Action%2C%20error)%0A%7D%0A%0A%2F%2F%20Flow%20implements%20Node%0Avar%20_%20Node%20%3D%20(*Flow)(nil)%0A%60%60%60%0A%0A%23%23%20Basic%20Usage%0A%0AUse%20a%20flow%20wherever%20a%20node%20is%20expected%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20reusable%20flow%0AprocessingFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AprocessingFlow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0AprocessingFlow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0A%0A%2F%2F%20Use%20the%20flow%20as%20a%20node%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processingFlow)%20%2F%2F%20Flow%20used%20as%20node%0AmainFlow.Connect(processingFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Lifecycle%20as%20Node%0A%0AUnderstanding%20how%20flows%20behave%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20When%20a%20flow%20is%20used%20as%20a%20node%3A%0A%2F%2F%201.%20Prep%3A%20Prepares%20the%20flow's%20start%20node%0A%2F%2F%202.%20Exec%3A%20Runs%20the%20entire%20flow%0A%2F%2F%203.%20Post%3A%20Returns%20the%20final%20action%20from%20the%20flow%0A%0Afunc%20demonstrateFlowLifecycle()%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20subFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20When%20mainFlow%20executes%20subFlow%3A%0A%20%20%20%20%2F%2F%20-%20subFlow.Prep()%20calls%20startNode.Prep()%0A%20%20%20%20%2F%2F%20-%20subFlow.Exec()%20runs%20the%20entire%20sub-flow%0A%20%20%20%20%2F%2F%20-%20subFlow.Post()%20returns%20the%20final%20action%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(initNode)%0A%20%20%20%20mainFlow.Connect(initNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%7D%0A%60%60%60%0A%0A%23%23%20Composable%20Workflows%0A%0ABuild%20complex%20workflows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%201%3A%20Basic%20operations%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaNode%20%3A%3D%20createSchemaValidationNode()%0A%20%20%20%20businessNode%20%3A%3D%20createBusinessValidationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaNode)%0A%20%20%20%20flow.Connect(schemaNode%2C%20%22valid%22%2C%20businessNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createEnrichmentFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetchNode%20%3A%3D%20createDataFetchNode()%0A%20%20%20%20mergeNode%20%3A%3D%20createDataMergeNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Combine%20basic%20flows%0Afunc%20createProcessingPipeline()%20*flyt.Flow%20%7B%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20enrichment%20%3A%3D%20createEnrichmentFlow()%0A%20%20%20%20%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(validation)%0A%20%20%20%20pipeline.Connect(validation%2C%20flyt.DefaultAction%2C%20enrichment)%0A%20%20%20%20return%20pipeline%0A%7D%0A%0A%2F%2F%20Level%203%3A%20Use%20in%20application%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20pipeline%20%3A%3D%20createProcessingPipeline()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20app%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20app.Connect(auth%2C%20flyt.DefaultAction%2C%20pipeline)%0A%20%20%20%20app.Connect(pipeline%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20return%20app%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Selection%0A%0AChoose%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Atype%20FlowSelector%20struct%20%7B%0A%20%20%20%20flows%20map%5Bstring%5D*flyt.Flow%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20CreateSelectorNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flowType%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flowType%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20BuildDynamicFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20selector%20%3A%3D%20fs.CreateSelectorNode()%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(selector)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20different%20flows%20based%20on%20selection%0A%20%20%20%20for%20name%2C%20flow%20%3A%3D%20range%20fs.flows%20%7B%0A%20%20%20%20%20%20%20%20mainFlow.Connect(selector%2C%20flyt.Action(name)%2C%20flow)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%0A%2F%2F%20Usage%0Aselector%20%3A%3D%20%26FlowSelector%7B%0A%20%20%20%20flows%3A%20map%5Bstring%5D*flyt.Flow%7B%0A%20%20%20%20%20%20%20%20%22simple%22%3A%20%20createSimpleFlow()%2C%0A%20%20%20%20%20%20%20%20%22complex%22%3A%20createComplexFlow()%2C%0A%20%20%20%20%20%20%20%20%22custom%22%3A%20%20createCustomFlow()%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0AdynamicFlow%20%3A%3D%20selector.BuildDynamicFlow()%0A%60%60%60%0A%0A%23%23%20Flow%20Factories%0A%0ACreate%20flows%20on%20demand%3A%0A%0A%60%60%60go%0Atype%20FlowFactory%20interface%20%7B%0A%20%20%20%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%0A%7D%0A%0Atype%20ProcessingFlowFactory%20struct%7B%7D%0A%0Afunc%20(f%20*ProcessingFlowFactory)%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20based%20on%20configuration%0A%20%20%20%20var%20nodes%20%5B%5Dflyt.Node%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20nodeConfig%20%3A%3D%20range%20config.Nodes%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20createNodeFromConfig(nodeConfig)%0A%20%20%20%20%20%20%20%20nodes%20%3D%20append(nodes%2C%20node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(nodes%5B0%5D)%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(nodes)-1%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(nodes%5Bi%5D%2C%20flyt.DefaultAction%2C%20nodes%5Bi%2B1%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20factory-created%20flows%20as%20nodes%0Afunc%20createDynamicPipeline(factory%20FlowFactory%2C%20configs%20%5B%5DFlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20previous%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20config%20%3A%3D%20range%20configs%20%7B%0A%20%20%20%20%20%20%20%20flow%20%3A%3D%20factory.CreateFlow(config)%0A%20%20%20%20%20%20%20%20pipeline.Connect(previous%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20%20%20%20%20previous%20%3D%20flow%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20pipeline%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flow%20Patterns%0A%0AFlows%20containing%20themselves%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveProcessingFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20var%20flow%20*flyt.Flow%0A%20%20%20%20%0A%20%20%20%20depthCheck%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%2C%20_%20%3A%3D%20shared.Get(%22recursion_depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth.(int)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22terminate%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22recurse%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22recurse%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22recursion_depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3D%20flyt.NewFlow(depthCheck)%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22recurse%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20reference%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22terminate%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Flow%20Middleware%0A%0AWrap%20flows%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20flow%20*flyt.Flow)%20*flyt.Flow%20%7B%0A%20%20%20%20logStart%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20starting%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20logEnd%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20completed%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20wrapped%20%3A%3D%20flyt.NewFlow(logStart)%0A%20%20%20%20wrapped.Connect(logStart%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20wrapped.Connect(flow%2C%20flyt.DefaultAction%2C%20logEnd)%0A%20%20%20%20%0A%20%20%20%20return%20wrapped%0A%7D%0A%0A%2F%2F%20Usage%0AprocessFlow%20%3A%3D%20createProcessingFlow()%0AloggedFlow%20%3A%3D%20withLogging(%22ProcessingPipeline%22%2C%20processFlow)%0A%60%60%60%0A%0A%23%23%20Testing%20Flows%20as%20Nodes%0A%0ATest%20flow%20behavior%20when%20used%20as%20nodes%3A%0A%0A%60%60%60go%0Afunc%20TestFlowAsNode(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20simple%20flow%0A%20%20%20%20innerFlow%20%3A%3D%20flyt.NewFlow(%0A%20%20%20%20%20%20%20%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22inner_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20the%20flow%20directly%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20flow%20methods%20as%20if%20it%20were%20a%20node%0A%20%20%20%20prepResult%2C%20err%20%3A%3D%20innerFlow.Prep(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20execResult%2C%20err%20%3A%3D%20innerFlow.Exec(ctx%2C%20prepResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20action%2C%20err%20%3A%3D%20innerFlow.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20flyt.DefaultAction%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0AUsing%20flows%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Lightweight%20flow%20-%20good%20as%20node%0Afunc%20createLightweightFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simple%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20transform(prepResult)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%0A%2F%2F%20Heavy%20flow%20-%20consider%20alternatives%0Afunc%20createHeavyFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Many%20nodes%2C%20complex%20logic%0A%20%20%20%20%2F%2F%20Consider%20breaking%20into%20smaller%20flows%0A%20%20%20%20%2F%2F%20or%20using%20batch%20processing%0A%7D%0A%0A%2F%2F%20Alternative%3A%20Use%20node%20with%20embedded%20logic%0Afunc%20createOptimizedNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20the%20flow%20logic%20for%20performance%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20step1(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step2(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step3(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Flows%20used%20as%20nodes%20should%20have%20clear%2C%20single%20purposes%0A2.%20**Document%20Behavior**%3A%20Clearly%20document%20what%20the%20flow%20expects%20and%20returns%0A3.%20**Test%20Thoroughly**%3A%20Test%20flows%20both%20standalone%20and%20as%20nodes%0A4.%20**Consider%20Performance**%3A%20Be%20mindful%20of%20overhead%20when%20nesting%20many%20flows%0A5.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20to%20indicate%20they're%20used%20as%20nodes%0A6.%20**Handle%20Errors**%3A%20Ensure%20proper%20error%20propagation%20through%20nested%20flows%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Complex%20flow%20composition%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Node%20interface%20details%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./flow-as-node-C7htjRi3.js"),[]),path:"/advanced/flow-as-node.html",type:"mdx",filePath:"advanced/flow-as-node.mdx",content:"%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%2C%20allowing%20them%20to%20be%20used%20anywhere%20a%20node%20is%20expected.%20This%20enables%20powerful%20composition%20patterns.%0A%0A%23%23%20The%20Node%20Interface%0A%0AFlows%20implement%20all%20Node%20methods%3A%0A%0A%60%60%60go%0Atype%20Node%20interface%20%7B%0A%20%20%20%20Prep(ctx%20context.Context%2C%20shared%20*SharedStore)%20(any%2C%20error)%0A%20%20%20%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%0A%20%20%20%20Post(ctx%20context.Context%2C%20shared%20*SharedStore%2C%20prepResult%2C%20execResult%20any)%20(Action%2C%20error)%0A%7D%0A%0A%2F%2F%20Flow%20implements%20Node%0Avar%20_%20Node%20%3D%20(*Flow)(nil)%0A%60%60%60%0A%0A%23%23%20Basic%20Usage%0A%0AUse%20a%20flow%20wherever%20a%20node%20is%20expected%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20reusable%20flow%0AprocessingFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AprocessingFlow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0AprocessingFlow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0A%0A%2F%2F%20Use%20the%20flow%20as%20a%20node%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processingFlow)%20%2F%2F%20Flow%20used%20as%20node%0AmainFlow.Connect(processingFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Lifecycle%20as%20Node%0A%0AUnderstanding%20how%20flows%20behave%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20When%20a%20flow%20is%20used%20as%20a%20node%3A%0A%2F%2F%201.%20Prep%3A%20Prepares%20the%20flow's%20start%20node%0A%2F%2F%202.%20Exec%3A%20Runs%20the%20entire%20flow%0A%2F%2F%203.%20Post%3A%20Returns%20the%20final%20action%20from%20the%20flow%0A%0Afunc%20demonstrateFlowLifecycle()%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20subFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20When%20mainFlow%20executes%20subFlow%3A%0A%20%20%20%20%2F%2F%20-%20subFlow.Prep()%20calls%20startNode.Prep()%0A%20%20%20%20%2F%2F%20-%20subFlow.Exec()%20runs%20the%20entire%20sub-flow%0A%20%20%20%20%2F%2F%20-%20subFlow.Post()%20returns%20the%20final%20action%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(initNode)%0A%20%20%20%20mainFlow.Connect(initNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%7D%0A%60%60%60%0A%0A%23%23%20Composable%20Workflows%0A%0ABuild%20complex%20workflows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%201%3A%20Basic%20operations%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaNode%20%3A%3D%20createSchemaValidationNode()%0A%20%20%20%20businessNode%20%3A%3D%20createBusinessValidationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaNode)%0A%20%20%20%20flow.Connect(schemaNode%2C%20%22valid%22%2C%20businessNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createEnrichmentFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetchNode%20%3A%3D%20createDataFetchNode()%0A%20%20%20%20mergeNode%20%3A%3D%20createDataMergeNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Combine%20basic%20flows%0Afunc%20createProcessingPipeline()%20*flyt.Flow%20%7B%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20enrichment%20%3A%3D%20createEnrichmentFlow()%0A%20%20%20%20%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(validation)%0A%20%20%20%20pipeline.Connect(validation%2C%20flyt.DefaultAction%2C%20enrichment)%0A%20%20%20%20return%20pipeline%0A%7D%0A%0A%2F%2F%20Level%203%3A%20Use%20in%20application%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20pipeline%20%3A%3D%20createProcessingPipeline()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20app%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20app.Connect(auth%2C%20flyt.DefaultAction%2C%20pipeline)%0A%20%20%20%20app.Connect(pipeline%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20return%20app%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Selection%0A%0AChoose%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Atype%20FlowSelector%20struct%20%7B%0A%20%20%20%20flows%20map%5Bstring%5D*flyt.Flow%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20CreateSelectorNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flowType%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flowType%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20BuildDynamicFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20selector%20%3A%3D%20fs.CreateSelectorNode()%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(selector)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20different%20flows%20based%20on%20selection%0A%20%20%20%20for%20name%2C%20flow%20%3A%3D%20range%20fs.flows%20%7B%0A%20%20%20%20%20%20%20%20mainFlow.Connect(selector%2C%20flyt.Action(name)%2C%20flow)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%0A%2F%2F%20Usage%0Aselector%20%3A%3D%20%26FlowSelector%7B%0A%20%20%20%20flows%3A%20map%5Bstring%5D*flyt.Flow%7B%0A%20%20%20%20%20%20%20%20%22simple%22%3A%20%20createSimpleFlow()%2C%0A%20%20%20%20%20%20%20%20%22complex%22%3A%20createComplexFlow()%2C%0A%20%20%20%20%20%20%20%20%22custom%22%3A%20%20createCustomFlow()%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0AdynamicFlow%20%3A%3D%20selector.BuildDynamicFlow()%0A%60%60%60%0A%0A%23%23%20Flow%20Factories%0A%0ACreate%20flows%20on%20demand%3A%0A%0A%60%60%60go%0Atype%20FlowFactory%20interface%20%7B%0A%20%20%20%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%0A%7D%0A%0Atype%20ProcessingFlowFactory%20struct%7B%7D%0A%0Afunc%20(f%20*ProcessingFlowFactory)%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20based%20on%20configuration%0A%20%20%20%20var%20nodes%20%5B%5Dflyt.Node%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20nodeConfig%20%3A%3D%20range%20config.Nodes%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20createNodeFromConfig(nodeConfig)%0A%20%20%20%20%20%20%20%20nodes%20%3D%20append(nodes%2C%20node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(nodes%5B0%5D)%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(nodes)-1%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(nodes%5Bi%5D%2C%20flyt.DefaultAction%2C%20nodes%5Bi%2B1%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20factory-created%20flows%20as%20nodes%0Afunc%20createDynamicPipeline(factory%20FlowFactory%2C%20configs%20%5B%5DFlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20previous%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20config%20%3A%3D%20range%20configs%20%7B%0A%20%20%20%20%20%20%20%20flow%20%3A%3D%20factory.CreateFlow(config)%0A%20%20%20%20%20%20%20%20pipeline.Connect(previous%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20%20%20%20%20previous%20%3D%20flow%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20pipeline%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flow%20Patterns%0A%0AFlows%20containing%20themselves%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveProcessingFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20var%20flow%20*flyt.Flow%0A%20%20%20%20%0A%20%20%20%20depthCheck%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%2C%20_%20%3A%3D%20shared.Get(%22recursion_depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth.(int)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22terminate%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22recurse%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22recurse%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22recursion_depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3D%20flyt.NewFlow(depthCheck)%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22recurse%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20reference%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22terminate%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Flow%20Middleware%0A%0AWrap%20flows%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20flow%20*flyt.Flow)%20*flyt.Flow%20%7B%0A%20%20%20%20logStart%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20starting%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20logEnd%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20completed%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20wrapped%20%3A%3D%20flyt.NewFlow(logStart)%0A%20%20%20%20wrapped.Connect(logStart%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20wrapped.Connect(flow%2C%20flyt.DefaultAction%2C%20logEnd)%0A%20%20%20%20%0A%20%20%20%20return%20wrapped%0A%7D%0A%0A%2F%2F%20Usage%0AprocessFlow%20%3A%3D%20createProcessingFlow()%0AloggedFlow%20%3A%3D%20withLogging(%22ProcessingPipeline%22%2C%20processFlow)%0A%60%60%60%0A%0A%23%23%20Testing%20Flows%20as%20Nodes%0A%0ATest%20flow%20behavior%20when%20used%20as%20nodes%3A%0A%0A%60%60%60go%0Afunc%20TestFlowAsNode(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20simple%20flow%0A%20%20%20%20innerFlow%20%3A%3D%20flyt.NewFlow(%0A%20%20%20%20%20%20%20%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22inner_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20the%20flow%20directly%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20flow%20methods%20as%20if%20it%20were%20a%20node%0A%20%20%20%20prepResult%2C%20err%20%3A%3D%20innerFlow.Prep(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20execResult%2C%20err%20%3A%3D%20innerFlow.Exec(ctx%2C%20prepResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20action%2C%20err%20%3A%3D%20innerFlow.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20flyt.DefaultAction%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0AUsing%20flows%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Lightweight%20flow%20-%20good%20as%20node%0Afunc%20createLightweightFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simple%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20transform(prepResult)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%0A%2F%2F%20Heavy%20flow%20-%20consider%20alternatives%0Afunc%20createHeavyFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Many%20nodes%2C%20complex%20logic%0A%20%20%20%20%2F%2F%20Consider%20breaking%20into%20smaller%20flows%0A%20%20%20%20%2F%2F%20or%20using%20batch%20processing%0A%7D%0A%0A%2F%2F%20Alternative%3A%20Use%20node%20with%20embedded%20logic%0Afunc%20createOptimizedNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20the%20flow%20logic%20for%20performance%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20step1(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step2(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step3(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Flows%20used%20as%20nodes%20should%20have%20clear%2C%20single%20purposes%0A2.%20**Document%20Behavior**%3A%20Clearly%20document%20what%20the%20flow%20expects%20and%20returns%0A3.%20**Test%20Thoroughly**%3A%20Test%20flows%20both%20standalone%20and%20as%20nodes%0A4.%20**Consider%20Performance**%3A%20Be%20mindful%20of%20overhead%20when%20nesting%20many%20flows%0A5.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20to%20indicate%20they're%20used%20as%20nodes%0A6.%20**Handle%20Errors**%3A%20Ensure%20proper%20error%20propagation%20through%20nested%20flows%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Complex%20flow%20composition%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Node%20interface%20details%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./nested-flows-qo5Rwq0r.js"),[]),path:"/advanced/nested-flows",type:"mdx",filePath:"advanced/nested-flows.mdx",content:"%23%20Nested%20Flows%0A%0ACompose%20complex%20workflows%20by%20nesting%20flows%20within%20flows%2C%20creating%20modular%20and%20reusable%20workflow%20components.%0A%0A%23%23%20Basic%20Nested%20Flow%0A%0AUse%20a%20flow%20as%20a%20node%20in%20another%20flow%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%20for%20validation%0AvalidationFlow%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaCheckNode()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessRulesNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22invalid%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D()%0A%0A%2F%2F%20Use%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validationFlow)%0AmainFlow.Connect(validationFlow%2C%20flyt.DefaultAction%2C%20processNode)%0A%60%60%60%0A%0A%23%23%20Reusable%20Flow%20Components%0A%0ACreate%20modular%20flow%20components%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20authentication%20flow%0Afunc%20createAuthFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20validateToken(token)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20refreshToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20refreshAuthToken()%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22expired%22%2C%20refreshToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22valid%22%2C%20nil)%0A%20%20%20%20flow.Connect(refreshToken%2C%20flyt.DefaultAction%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AapiFlow%20%3A%3D%20flyt.NewFlow(startNode)%0AapiFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%0AadminFlow%20%3A%3D%20flyt.NewFlow(adminNode)%0AadminFlow.Connect(adminNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%60%60%60%0A%0A%23%23%20Hierarchical%20Workflows%0A%0ABuild%20multi-level%20workflow%20hierarchies%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%203%3A%20Atomic%20operations%0Afunc%20createDatabaseOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20connect%20%3A%3D%20createConnectNode()%0A%20%20%20%20query%20%3A%3D%20createQueryNode()%0A%20%20%20%20disconnect%20%3A%3D%20createDisconnectNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(connect)%0A%20%20%20%20flow.Connect(connect%2C%20flyt.DefaultAction%2C%20query)%0A%20%20%20%20flow.Connect(query%2C%20flyt.DefaultAction%2C%20disconnect)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Business%20operations%0Afunc%20createUserOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20validate%20%3A%3D%20createValidateUserNode()%0A%20%20%20%20dbOp%20%3A%3D%20createDatabaseOperation()%0A%20%20%20%20notify%20%3A%3D%20createNotificationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(validate)%0A%20%20%20%20flow.Connect(validate%2C%20%22valid%22%2C%20dbOp)%0A%20%20%20%20flow.Connect(dbOp%2C%20flyt.DefaultAction%2C%20notify)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%201%3A%20Application%20flow%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20userOp%20%3A%3D%20createUserOperation()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20flow.Connect(auth%2C%20flyt.DefaultAction%2C%20userOp)%0A%20%20%20%20flow.Connect(userOp%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Nesting%0A%0ADynamically%20choose%20nested%20flows%3A%0A%0A%60%60%60go%0ArouterNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20request%20%3A%3D%20prepResult.(Request)%0A%20%20%20%20%20%20%20%20return%20request.Type%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0AmainFlow%20%3A%3D%20flyt.NewFlow(routerNode)%0AmainFlow.Connect(routerNode%2C%20%22user%22%2C%20createUserFlow())%0AmainFlow.Connect(routerNode%2C%20%22admin%22%2C%20createAdminFlow())%0AmainFlow.Connect(routerNode%2C%20%22api%22%2C%20createAPIFlow())%0A%60%60%60%0A%0A%23%23%20Shared%20Context%20in%20Nested%20Flows%0A%0APass%20context%20through%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createNestedFlowWithContext(parentContext%20map%5Bstring%5Dany)%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Access%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20parentContext%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(k%2C%20v)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20data%20from%20parent%20flow%0A%20%20%20%20%20%20%20%20%20%20%20%20parentData%2C%20_%20%3A%3D%20shared.Get(%22parent_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20parentData%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20with%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithContext(prepResult%2C%20parentContext)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Propagation%0A%0AHandle%20errors%20across%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createErrorHandlingFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandlerNode()%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20successNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Error%20handler%20can%20retry%20or%20recover%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22retry%22%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22abort%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flows%0A%0ACreate%20recursive%20workflow%20patterns%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20checkDepth%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%2C%20_%20%3A%3D%20shared.Get(%22depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth.(int)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_depth%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22continue%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkDepth)%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22continue%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20connection%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22max_depth%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Parallel%20Nested%20Flows%0A%0AExecute%20nested%20flows%20in%20parallel%3A%0A%0A%60%60%60go%0Afunc%20createParallelNestedFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20splitNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Split%20data%20for%20parallel%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(Data)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part1%22%2C%20data.Part1)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part2%22%2C%20data.Part2)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20parallel%20sub-flows%0A%20%20%20%20flow1%20%3A%3D%20createProcessingFlow1()%0A%20%20%20%20flow2%20%3A%3D%20createProcessingFlow2()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Merge%20results%0A%20%20%20%20mergeNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result1%2C%20_%20%3A%3D%20shared.Get(%22result1%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20result2%2C%20_%20%3A%3D%20shared.Get(%22result2%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result1%22%3A%20result1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result2%22%3A%20result2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20with%20parallel%20execution%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20flows%20execute%20after%20split%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow1%22%2C%20flow1)%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow2%22%2C%20flow2)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20must%20complete%20before%20merge%0A%20%20%20%20mainFlow.Connect(flow1%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20mainFlow.Connect(flow2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Composition%0A%0ABuild%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createDynamicFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20startNode%20%3A%3D%20createStartNode()%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20%0A%20%20%20%20previousNode%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20step%20%3A%3D%20range%20config.Steps%20%7B%0A%20%20%20%20%20%20%20%20var%20stepFlow%20*flyt.Flow%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20step.Type%20%7B%0A%20%20%20%20%20%20%20%20case%20%22validate%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createValidationFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22process%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createProcessingFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22save%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createSaveFlow(step.Config)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20stepFlow%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flow.Connect(previousNode%2C%20flyt.DefaultAction%2C%20stepFlow)%0A%20%20%20%20%20%20%20%20%20%20%20%20previousNode%20%3D%20stepFlow%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%20Nested%20Flows%0A%0ATest%20nested%20flows%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestNestedFlow(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Test%20sub-flow%20independently%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20subShared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20subShared.Set(%22test_input%22%2C%20%22data%22)%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20subFlow.Run(context.Background()%2C%20subShared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20main%20flow%20with%20mocked%20sub-flow%0A%20%20%20%20mockSubFlow%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22mocked_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20mockSubFlow)%0A%20%20%20%20%0A%20%20%20%20err%20%3D%20mainFlow.Run(context.Background()%2C%20flyt.NewSharedStore())%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Each%20flow%20should%20have%20a%20single%2C%20clear%20purpose%0A2.%20**Minimize%20Coupling**%3A%20Flows%20should%20communicate%20through%20well-defined%20interfaces%0A3.%20**Document%20Dependencies**%3A%20Clearly%20document%20what%20each%20nested%20flow%20expects%0A4.%20**Test%20in%20Isolation**%3A%20Test%20nested%20flows%20independently%0A5.%20**Avoid%20Deep%20Nesting**%3A%20Too%20many%20levels%20make%20debugging%20difficult%0A6.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20based%20on%20their%20business%20function%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlow%20as%20Node%5D(%2Fadvanced%2Fflow-as-node)%20-%20Flows%20implementing%20Node%20interface%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Running%20flows%20in%20batches%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./nested-flows-qo5Rwq0r.js"),[]),path:"/advanced/nested-flows.html",type:"mdx",filePath:"advanced/nested-flows.mdx",content:"%23%20Nested%20Flows%0A%0ACompose%20complex%20workflows%20by%20nesting%20flows%20within%20flows%2C%20creating%20modular%20and%20reusable%20workflow%20components.%0A%0A%23%23%20Basic%20Nested%20Flow%0A%0AUse%20a%20flow%20as%20a%20node%20in%20another%20flow%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%20for%20validation%0AvalidationFlow%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaCheckNode()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessRulesNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22invalid%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D()%0A%0A%2F%2F%20Use%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validationFlow)%0AmainFlow.Connect(validationFlow%2C%20flyt.DefaultAction%2C%20processNode)%0A%60%60%60%0A%0A%23%23%20Reusable%20Flow%20Components%0A%0ACreate%20modular%20flow%20components%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20authentication%20flow%0Afunc%20createAuthFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20validateToken(token)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20refreshToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20refreshAuthToken()%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22expired%22%2C%20refreshToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22valid%22%2C%20nil)%0A%20%20%20%20flow.Connect(refreshToken%2C%20flyt.DefaultAction%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AapiFlow%20%3A%3D%20flyt.NewFlow(startNode)%0AapiFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%0AadminFlow%20%3A%3D%20flyt.NewFlow(adminNode)%0AadminFlow.Connect(adminNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%60%60%60%0A%0A%23%23%20Hierarchical%20Workflows%0A%0ABuild%20multi-level%20workflow%20hierarchies%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%203%3A%20Atomic%20operations%0Afunc%20createDatabaseOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20connect%20%3A%3D%20createConnectNode()%0A%20%20%20%20query%20%3A%3D%20createQueryNode()%0A%20%20%20%20disconnect%20%3A%3D%20createDisconnectNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(connect)%0A%20%20%20%20flow.Connect(connect%2C%20flyt.DefaultAction%2C%20query)%0A%20%20%20%20flow.Connect(query%2C%20flyt.DefaultAction%2C%20disconnect)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Business%20operations%0Afunc%20createUserOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20validate%20%3A%3D%20createValidateUserNode()%0A%20%20%20%20dbOp%20%3A%3D%20createDatabaseOperation()%0A%20%20%20%20notify%20%3A%3D%20createNotificationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(validate)%0A%20%20%20%20flow.Connect(validate%2C%20%22valid%22%2C%20dbOp)%0A%20%20%20%20flow.Connect(dbOp%2C%20flyt.DefaultAction%2C%20notify)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%201%3A%20Application%20flow%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20userOp%20%3A%3D%20createUserOperation()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20flow.Connect(auth%2C%20flyt.DefaultAction%2C%20userOp)%0A%20%20%20%20flow.Connect(userOp%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Nesting%0A%0ADynamically%20choose%20nested%20flows%3A%0A%0A%60%60%60go%0ArouterNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20request%20%3A%3D%20prepResult.(Request)%0A%20%20%20%20%20%20%20%20return%20request.Type%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0AmainFlow%20%3A%3D%20flyt.NewFlow(routerNode)%0AmainFlow.Connect(routerNode%2C%20%22user%22%2C%20createUserFlow())%0AmainFlow.Connect(routerNode%2C%20%22admin%22%2C%20createAdminFlow())%0AmainFlow.Connect(routerNode%2C%20%22api%22%2C%20createAPIFlow())%0A%60%60%60%0A%0A%23%23%20Shared%20Context%20in%20Nested%20Flows%0A%0APass%20context%20through%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createNestedFlowWithContext(parentContext%20map%5Bstring%5Dany)%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Access%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20parentContext%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(k%2C%20v)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20data%20from%20parent%20flow%0A%20%20%20%20%20%20%20%20%20%20%20%20parentData%2C%20_%20%3A%3D%20shared.Get(%22parent_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20parentData%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20with%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithContext(prepResult%2C%20parentContext)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Propagation%0A%0AHandle%20errors%20across%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createErrorHandlingFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandlerNode()%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20successNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Error%20handler%20can%20retry%20or%20recover%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22retry%22%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22abort%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flows%0A%0ACreate%20recursive%20workflow%20patterns%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20checkDepth%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%2C%20_%20%3A%3D%20shared.Get(%22depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth.(int)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_depth%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22continue%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkDepth)%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22continue%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20connection%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22max_depth%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Parallel%20Nested%20Flows%0A%0AExecute%20nested%20flows%20in%20parallel%3A%0A%0A%60%60%60go%0Afunc%20createParallelNestedFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20splitNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Split%20data%20for%20parallel%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(Data)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part1%22%2C%20data.Part1)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part2%22%2C%20data.Part2)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20parallel%20sub-flows%0A%20%20%20%20flow1%20%3A%3D%20createProcessingFlow1()%0A%20%20%20%20flow2%20%3A%3D%20createProcessingFlow2()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Merge%20results%0A%20%20%20%20mergeNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result1%2C%20_%20%3A%3D%20shared.Get(%22result1%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20result2%2C%20_%20%3A%3D%20shared.Get(%22result2%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result1%22%3A%20result1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result2%22%3A%20result2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20with%20parallel%20execution%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20flows%20execute%20after%20split%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow1%22%2C%20flow1)%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow2%22%2C%20flow2)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20must%20complete%20before%20merge%0A%20%20%20%20mainFlow.Connect(flow1%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20mainFlow.Connect(flow2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Composition%0A%0ABuild%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createDynamicFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20startNode%20%3A%3D%20createStartNode()%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20%0A%20%20%20%20previousNode%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20step%20%3A%3D%20range%20config.Steps%20%7B%0A%20%20%20%20%20%20%20%20var%20stepFlow%20*flyt.Flow%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20step.Type%20%7B%0A%20%20%20%20%20%20%20%20case%20%22validate%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createValidationFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22process%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createProcessingFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22save%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createSaveFlow(step.Config)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20stepFlow%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flow.Connect(previousNode%2C%20flyt.DefaultAction%2C%20stepFlow)%0A%20%20%20%20%20%20%20%20%20%20%20%20previousNode%20%3D%20stepFlow%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%20Nested%20Flows%0A%0ATest%20nested%20flows%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestNestedFlow(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Test%20sub-flow%20independently%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20subShared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20subShared.Set(%22test_input%22%2C%20%22data%22)%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20subFlow.Run(context.Background()%2C%20subShared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20main%20flow%20with%20mocked%20sub-flow%0A%20%20%20%20mockSubFlow%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22mocked_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20mockSubFlow)%0A%20%20%20%20%0A%20%20%20%20err%20%3D%20mainFlow.Run(context.Background()%2C%20flyt.NewSharedStore())%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Each%20flow%20should%20have%20a%20single%2C%20clear%20purpose%0A2.%20**Minimize%20Coupling**%3A%20Flows%20should%20communicate%20through%20well-defined%20interfaces%0A3.%20**Document%20Dependencies**%3A%20Clearly%20document%20what%20each%20nested%20flow%20expects%0A4.%20**Test%20in%20Isolation**%3A%20Test%20nested%20flows%20independently%0A5.%20**Avoid%20Deep%20Nesting**%3A%20Too%20many%20levels%20make%20debugging%20difficult%0A6.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20based%20on%20their%20business%20function%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlow%20as%20Node%5D(%2Fadvanced%2Fflow-as-node)%20-%20Flows%20implementing%20Node%20interface%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Running%20flows%20in%20batches%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./utilities-nhmwdeK0.js"),[]),path:"/advanced/utilities",type:"mdx",filePath:"advanced/utilities.mdx",content:"%23%20Utilities%0A%0AHelper%20functions%20and%20utilities%20to%20simplify%20common%20tasks%20in%20Flyt%20workflows.%0A%0A%23%23%20ToSlice%0A%0AConvert%20various%20types%20to%20slices%20for%20batch%20processing%3A%0A%0A%60%60%60go%0A%2F%2F%20Convert%20different%20types%20to%20%5B%5Dany%0AstringSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dstring%7B%22a%22%2C%20%22b%22%2C%20%22c%22%7D)%0AintSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dint%7B1%2C%202%2C%203%7D)%0AsingleItem%20%3A%3D%20flyt.ToSlice(%22single%20item%22)%20%2F%2F%20Returns%20%5B%5Dany%7B%22single%20item%22%7D%0AnilValue%20%3A%3D%20flyt.ToSlice(nil)%20%2F%2F%20Returns%20empty%20%5B%5Dany%7B%7D%0A%0A%2F%2F%20Useful%20for%20batch%20processing%0Ashared.Set(%22items%22%2C%20flyt.ToSlice(data))%0A%60%60%60%0A%0A%23%23%23%20Implementation%20Details%0A%0A%60%60%60go%0Afunc%20ToSlice(v%20any)%20%5B%5Dany%20%7B%0A%20%20%20%20if%20v%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rv%20%3A%3D%20reflect.ValueOf(v)%0A%20%20%20%20if%20rv.Kind()%20%3D%3D%20reflect.Slice%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dany%2C%20rv.Len())%0A%20%20%20%20%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20rv.Len()%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20rv.Index(i).Interface()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Single%20item%0A%20%20%20%20return%20%5B%5Dany%7Bv%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Custom%20Utility%20Functions%0A%0ACreate%20your%20own%20utilities%3A%0A%0A%23%23%23%20Retry%20Helper%0A%0A%60%60%60go%0Afunc%20RetryOperation(operation%20func()%20error%2C%20maxRetries%20int%2C%20backoff%20time.Duration)%20error%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxRetries%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20operation()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20i%20%3C%20maxRetries-1%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(backoff%20*%20time.Duration(i%2B1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22operation%20failed%20after%20%25d%20retries%3A%20%25w%22%2C%20maxRetries%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20in%20node%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20result%20any%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20RetryOperation(func()%20error%20%7B%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20callAPI(prepResult)%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%2C%203%2C%20time.Second)%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Parallel%20Map%0A%0A%60%60%60go%0Afunc%20ParallelMap%5BT%20any%2C%20R%20any%5D(items%20%5B%5DT%2C%20fn%20func(T)%20R%2C%20workers%20int)%20%5B%5DR%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DR%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20semaphore%20%3A%3D%20make(chan%20struct%7B%7D%2C%20workers)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20data%20T)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20semaphore%20%3C-%20struct%7B%7D%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20func()%20%7B%20%3C-semaphore%20%7D()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20fn(data)%0A%20%20%20%20%20%20%20%20%7D(i%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0A%2F%2F%20Usage%0Aresults%20%3A%3D%20ParallelMap(items%2C%20processItem%2C%2010)%0A%60%60%60%0A%0A%23%23%23%20Safe%20Type%20Assertion%0A%0A%60%60%60go%0Afunc%20SafeGet%5BT%20any%5D(shared%20*flyt.SharedStore%2C%20key%20string)%20(T%2C%20bool)%20%7B%0A%20%20%20%20var%20zero%20T%0A%20%20%20%20%0A%20%20%20%20value%2C%20exists%20%3A%3D%20shared.Get(key)%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20zero%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20typed%2C%20ok%20%3A%3D%20value.(T)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20zero%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20typed%2C%20true%0A%7D%0A%0A%2F%2F%20Usage%0Aif%20userID%2C%20ok%20%3A%3D%20SafeGet%5Bint%5D(shared%2C%20%22user_id%22)%3B%20ok%20%7B%0A%20%20%20%20%2F%2F%20Use%20userID%20safely%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Chunk%20Slice%0A%0A%60%60%60go%0Afunc%20ChunkSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20chunkSize%20int)%20%5B%5D%5B%5DT%20%7B%0A%20%20%20%20var%20chunks%20%5B%5D%5B%5DT%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(slice)%3B%20i%20%2B%3D%20chunkSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20i%20%2B%20chunkSize%0A%20%20%20%20%20%20%20%20if%20end%20%3E%20len(slice)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20len(slice)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20chunks%20%3D%20append(chunks%2C%20slice%5Bi%3Aend%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20chunks%0A%7D%0A%0A%2F%2F%20Usage%20in%20batch%20processing%0Achunks%20%3A%3D%20ChunkSlice(items%2C%20100)%0Afor%20_%2C%20chunk%20%3A%3D%20range%20chunks%20%7B%0A%20%20%20%20processChunk(chunk)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%20Maps%0A%0A%60%60%60go%0Afunc%20MergeMaps(maps%20...map%5Bstring%5Dany)%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20result%20%3A%3D%20make(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20m%20%3A%3D%20range%20maps%20%7B%0A%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20m%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Aconfig%20%3A%3D%20MergeMaps(defaultConfig%2C%20userConfig%2C%20overrides)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Slice%0A%0A%60%60%60go%0Afunc%20FilterSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20predicate%20func(T)%20bool)%20%5B%5DT%20%7B%0A%20%20%20%20result%20%3A%3D%20make(%5B%5DT%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20if%20predicate(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20append(result%2C%20item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0AvalidItems%20%3A%3D%20FilterSlice(items%2C%20func(item%20Item)%20bool%20%7B%0A%20%20%20%20return%20item.IsValid()%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Wrapper%0A%0A%60%60%60go%0Afunc%20WithTimeout%5BT%20any%5D(ctx%20context.Context%2C%20timeout%20time.Duration%2C%20fn%20func(context.Context)%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20timeout)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20type%20result%20struct%20%7B%0A%20%20%20%20%20%20%20%20value%20T%0A%20%20%20%20%20%20%20%20err%20%20%20error%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20done%20%3A%3D%20make(chan%20result%2C%201)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20value%2C%20err%20%3A%3D%20fn(ctx)%0A%20%20%20%20%20%20%20%20done%20%3C-%20result%7Bvalue%2C%20err%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20res%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20res.value%2C%20res.err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20var%20zero%20T%0A%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aresult%2C%20err%20%3A%3D%20WithTimeout(ctx%2C%205*time.Second%2C%20func(ctx%20context.Context)%20(string%2C%20error)%20%7B%0A%20%20%20%20return%20fetchData(ctx)%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Builder%0A%0A%60%60%60go%0Atype%20Pipeline%5BT%20any%5D%20struct%20%7B%0A%20%20%20%20stages%20%5B%5Dfunc(T)%20T%0A%7D%0A%0Afunc%20NewPipeline%5BT%20any%5D()%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20return%20%26Pipeline%5BT%5D%7B%0A%20%20%20%20%20%20%20%20stages%3A%20make(%5B%5Dfunc(T)%20T%2C%200)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Add(stage%20func(T)%20T)%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20p.stages%20%3D%20append(p.stages%2C%20stage)%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Execute(input%20T)%20T%20%7B%0A%20%20%20%20result%20%3A%3D%20input%0A%20%20%20%20for%20_%2C%20stage%20%3A%3D%20range%20p.stages%20%7B%0A%20%20%20%20%20%20%20%20result%20%3D%20stage(result)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Apipeline%20%3A%3D%20NewPipeline%5Bstring%5D().%0A%20%20%20%20Add(strings.TrimSpace).%0A%20%20%20%20Add(strings.ToLower).%0A%20%20%20%20Add(func(s%20string)%20string%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.ReplaceAll(s%2C%20%22%20%22%2C%20%22_%22)%0A%20%20%20%20%7D)%0A%0Aresult%20%3A%3D%20pipeline.Execute(%22%20%20Hello%20World%20%20%22)%0A%2F%2F%20Result%3A%20%22hello_world%22%0A%60%60%60%0A%0A%23%23%23%20Error%20Aggregator%0A%0A%60%60%60go%0Atype%20ErrorAggregator%20struct%20%7B%0A%20%20%20%20errors%20%5B%5Derror%0A%20%20%20%20mu%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Add(err%20error)%20%7B%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20e.errors%20%3D%20append(e.errors%2C%20err)%0A%20%20%20%20e.mu.Unlock()%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Error()%20error%20%7B%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20defer%20e.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%201%20%7B%0A%20%20%20%20%20%20%20%20return%20e.errors%5B0%5D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22multiple%20errors%20(%25d)%3A%20%25v%22%2C%20len(e.errors)%2C%20e.errors)%0A%7D%0A%0A%2F%2F%20Usage%0Aaggregator%20%3A%3D%20%26ErrorAggregator%7B%7D%0A%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20processItem(item)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20aggregator.Add(err)%0A%20%20%20%20%7D%0A%7D%0A%0Aif%20err%20%3A%3D%20aggregator.Error()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20Values%20Helper%0A%0A%60%60%60go%0Atype%20ContextKey%20string%0A%0Aconst%20(%0A%20%20%20%20RequestIDKey%20ContextKey%20%3D%20%22request_id%22%0A%20%20%20%20UserIDKey%20%20%20%20ContextKey%20%3D%20%22user_id%22%0A)%0A%0Afunc%20WithRequestID(ctx%20context.Context%2C%20requestID%20string)%20context.Context%20%7B%0A%20%20%20%20return%20context.WithValue(ctx%2C%20RequestIDKey%2C%20requestID)%0A%7D%0A%0Afunc%20GetRequestID(ctx%20context.Context)%20(string%2C%20bool)%20%7B%0A%20%20%20%20id%2C%20ok%20%3A%3D%20ctx.Value(RequestIDKey).(string)%0A%20%20%20%20return%20id%2C%20ok%0A%7D%0A%0A%2F%2F%20Usage%20in%20nodes%0Afunc%20(n%20*LoggingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20requestID%2C%20_%20%3A%3D%20GetRequestID(ctx)%0A%20%20%20%20log.Printf(%22%5B%25s%5D%20Processing%3A%20%25v%22%2C%20requestID%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20return%20process(prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Debounce%20Function%0A%0A%60%60%60go%0Afunc%20Debounce(fn%20func()%2C%20delay%20time.Duration)%20func()%20%7B%0A%20%20%20%20var%20timer%20*time.Timer%0A%20%20%20%20var%20mu%20sync.Mutex%0A%20%20%20%20%0A%20%20%20%20return%20func()%20%7B%0A%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20defer%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20timer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20timer.Stop()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20timer%20%3D%20time.AfterFunc(delay%2C%20fn)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0AsaveDebounced%20%3A%3D%20Debounce(func()%20%7B%0A%20%20%20%20saveToDatabase()%0A%7D%2C%205*time.Second)%0A%0A%2F%2F%20Call%20multiple%20times%2C%20only%20last%20one%20executes%0AsaveDebounced()%0AsaveDebounced()%0AsaveDebounced()%0A%60%60%60%0A%0A%23%23%20Testing%20Utilities%0A%0A%23%23%23%20Mock%20SharedStore%0A%0A%60%60%60go%0Atype%20MockSharedStore%20struct%20%7B%0A%20%20%20%20data%20map%5Bstring%5Dany%0A%20%20%20%20mu%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMockSharedStore(initial%20map%5Bstring%5Dany)%20*MockSharedStore%20%7B%0A%20%20%20%20return%20%26MockSharedStore%7B%0A%20%20%20%20%20%20%20%20data%3A%20initial%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Get(key%20string)%20(any%2C%20bool)%20%7B%0A%20%20%20%20m.mu.RLock()%0A%20%20%20%20defer%20m.mu.RUnlock()%0A%20%20%20%20val%2C%20ok%20%3A%3D%20m.data%5Bkey%5D%0A%20%20%20%20return%20val%2C%20ok%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Set(key%20string%2C%20value%20any)%20%7B%0A%20%20%20%20m.mu.Lock()%0A%20%20%20%20defer%20m.mu.Unlock()%0A%20%20%20%20m.data%5Bkey%5D%20%3D%20value%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Test%20Node%20Builder%0A%0A%60%60%60go%0Afunc%20TestNode(execFn%20func(context.Context%2C%20any)%20(any%2C%20error))%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(execFn)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Anode%20%3A%3D%20TestNode(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20return%20%22test_result%22%2C%20nil%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Utilities%20Generic**%3A%20Make%20them%20reusable%20across%20projects%0A2.%20**Document%20Usage**%3A%20Provide%20clear%20examples%0A3.%20**Test%20Thoroughly**%3A%20Utilities%20should%20be%20well-tested%0A4.%20**Handle%20Edge%20Cases**%3A%20Consider%20nil%20values%20and%20empty%20inputs%0A5.%20**Use%20Type%20Parameters**%3A%20Leverage%20Go%20generics%20where%20appropriate%0A6.%20**Thread%20Safety**%3A%20Ensure%20utilities%20are%20safe%20for%20concurrent%20use%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20sophisticated%20nodes%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20utilities%20in%20action",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./utilities-nhmwdeK0.js"),[]),path:"/advanced/utilities.html",type:"mdx",filePath:"advanced/utilities.mdx",content:"%23%20Utilities%0A%0AHelper%20functions%20and%20utilities%20to%20simplify%20common%20tasks%20in%20Flyt%20workflows.%0A%0A%23%23%20ToSlice%0A%0AConvert%20various%20types%20to%20slices%20for%20batch%20processing%3A%0A%0A%60%60%60go%0A%2F%2F%20Convert%20different%20types%20to%20%5B%5Dany%0AstringSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dstring%7B%22a%22%2C%20%22b%22%2C%20%22c%22%7D)%0AintSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dint%7B1%2C%202%2C%203%7D)%0AsingleItem%20%3A%3D%20flyt.ToSlice(%22single%20item%22)%20%2F%2F%20Returns%20%5B%5Dany%7B%22single%20item%22%7D%0AnilValue%20%3A%3D%20flyt.ToSlice(nil)%20%2F%2F%20Returns%20empty%20%5B%5Dany%7B%7D%0A%0A%2F%2F%20Useful%20for%20batch%20processing%0Ashared.Set(%22items%22%2C%20flyt.ToSlice(data))%0A%60%60%60%0A%0A%23%23%23%20Implementation%20Details%0A%0A%60%60%60go%0Afunc%20ToSlice(v%20any)%20%5B%5Dany%20%7B%0A%20%20%20%20if%20v%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rv%20%3A%3D%20reflect.ValueOf(v)%0A%20%20%20%20if%20rv.Kind()%20%3D%3D%20reflect.Slice%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dany%2C%20rv.Len())%0A%20%20%20%20%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20rv.Len()%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20rv.Index(i).Interface()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Single%20item%0A%20%20%20%20return%20%5B%5Dany%7Bv%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Custom%20Utility%20Functions%0A%0ACreate%20your%20own%20utilities%3A%0A%0A%23%23%23%20Retry%20Helper%0A%0A%60%60%60go%0Afunc%20RetryOperation(operation%20func()%20error%2C%20maxRetries%20int%2C%20backoff%20time.Duration)%20error%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxRetries%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20operation()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20i%20%3C%20maxRetries-1%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(backoff%20*%20time.Duration(i%2B1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22operation%20failed%20after%20%25d%20retries%3A%20%25w%22%2C%20maxRetries%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20in%20node%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20result%20any%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20RetryOperation(func()%20error%20%7B%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20callAPI(prepResult)%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%2C%203%2C%20time.Second)%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Parallel%20Map%0A%0A%60%60%60go%0Afunc%20ParallelMap%5BT%20any%2C%20R%20any%5D(items%20%5B%5DT%2C%20fn%20func(T)%20R%2C%20workers%20int)%20%5B%5DR%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DR%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20semaphore%20%3A%3D%20make(chan%20struct%7B%7D%2C%20workers)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20data%20T)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20semaphore%20%3C-%20struct%7B%7D%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20func()%20%7B%20%3C-semaphore%20%7D()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20fn(data)%0A%20%20%20%20%20%20%20%20%7D(i%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0A%2F%2F%20Usage%0Aresults%20%3A%3D%20ParallelMap(items%2C%20processItem%2C%2010)%0A%60%60%60%0A%0A%23%23%23%20Safe%20Type%20Assertion%0A%0A%60%60%60go%0Afunc%20SafeGet%5BT%20any%5D(shared%20*flyt.SharedStore%2C%20key%20string)%20(T%2C%20bool)%20%7B%0A%20%20%20%20var%20zero%20T%0A%20%20%20%20%0A%20%20%20%20value%2C%20exists%20%3A%3D%20shared.Get(key)%0A%20%20%20%20if%20!exists%20%7B%0A%20%20%20%20%20%20%20%20return%20zero%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20typed%2C%20ok%20%3A%3D%20value.(T)%0A%20%20%20%20if%20!ok%20%7B%0A%20%20%20%20%20%20%20%20return%20zero%2C%20false%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20typed%2C%20true%0A%7D%0A%0A%2F%2F%20Usage%0Aif%20userID%2C%20ok%20%3A%3D%20SafeGet%5Bint%5D(shared%2C%20%22user_id%22)%3B%20ok%20%7B%0A%20%20%20%20%2F%2F%20Use%20userID%20safely%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Chunk%20Slice%0A%0A%60%60%60go%0Afunc%20ChunkSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20chunkSize%20int)%20%5B%5D%5B%5DT%20%7B%0A%20%20%20%20var%20chunks%20%5B%5D%5B%5DT%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(slice)%3B%20i%20%2B%3D%20chunkSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20i%20%2B%20chunkSize%0A%20%20%20%20%20%20%20%20if%20end%20%3E%20len(slice)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20len(slice)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20chunks%20%3D%20append(chunks%2C%20slice%5Bi%3Aend%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20chunks%0A%7D%0A%0A%2F%2F%20Usage%20in%20batch%20processing%0Achunks%20%3A%3D%20ChunkSlice(items%2C%20100)%0Afor%20_%2C%20chunk%20%3A%3D%20range%20chunks%20%7B%0A%20%20%20%20processChunk(chunk)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%20Maps%0A%0A%60%60%60go%0Afunc%20MergeMaps(maps%20...map%5Bstring%5Dany)%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20result%20%3A%3D%20make(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20m%20%3A%3D%20range%20maps%20%7B%0A%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20m%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Aconfig%20%3A%3D%20MergeMaps(defaultConfig%2C%20userConfig%2C%20overrides)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Slice%0A%0A%60%60%60go%0Afunc%20FilterSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20predicate%20func(T)%20bool)%20%5B%5DT%20%7B%0A%20%20%20%20result%20%3A%3D%20make(%5B%5DT%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20if%20predicate(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20append(result%2C%20item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0AvalidItems%20%3A%3D%20FilterSlice(items%2C%20func(item%20Item)%20bool%20%7B%0A%20%20%20%20return%20item.IsValid()%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Wrapper%0A%0A%60%60%60go%0Afunc%20WithTimeout%5BT%20any%5D(ctx%20context.Context%2C%20timeout%20time.Duration%2C%20fn%20func(context.Context)%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20timeout)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20type%20result%20struct%20%7B%0A%20%20%20%20%20%20%20%20value%20T%0A%20%20%20%20%20%20%20%20err%20%20%20error%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20done%20%3A%3D%20make(chan%20result%2C%201)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20value%2C%20err%20%3A%3D%20fn(ctx)%0A%20%20%20%20%20%20%20%20done%20%3C-%20result%7Bvalue%2C%20err%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20res%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20res.value%2C%20res.err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20var%20zero%20T%0A%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aresult%2C%20err%20%3A%3D%20WithTimeout(ctx%2C%205*time.Second%2C%20func(ctx%20context.Context)%20(string%2C%20error)%20%7B%0A%20%20%20%20return%20fetchData(ctx)%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Builder%0A%0A%60%60%60go%0Atype%20Pipeline%5BT%20any%5D%20struct%20%7B%0A%20%20%20%20stages%20%5B%5Dfunc(T)%20T%0A%7D%0A%0Afunc%20NewPipeline%5BT%20any%5D()%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20return%20%26Pipeline%5BT%5D%7B%0A%20%20%20%20%20%20%20%20stages%3A%20make(%5B%5Dfunc(T)%20T%2C%200)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Add(stage%20func(T)%20T)%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20p.stages%20%3D%20append(p.stages%2C%20stage)%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Execute(input%20T)%20T%20%7B%0A%20%20%20%20result%20%3A%3D%20input%0A%20%20%20%20for%20_%2C%20stage%20%3A%3D%20range%20p.stages%20%7B%0A%20%20%20%20%20%20%20%20result%20%3D%20stage(result)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Apipeline%20%3A%3D%20NewPipeline%5Bstring%5D().%0A%20%20%20%20Add(strings.TrimSpace).%0A%20%20%20%20Add(strings.ToLower).%0A%20%20%20%20Add(func(s%20string)%20string%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.ReplaceAll(s%2C%20%22%20%22%2C%20%22_%22)%0A%20%20%20%20%7D)%0A%0Aresult%20%3A%3D%20pipeline.Execute(%22%20%20Hello%20World%20%20%22)%0A%2F%2F%20Result%3A%20%22hello_world%22%0A%60%60%60%0A%0A%23%23%23%20Error%20Aggregator%0A%0A%60%60%60go%0Atype%20ErrorAggregator%20struct%20%7B%0A%20%20%20%20errors%20%5B%5Derror%0A%20%20%20%20mu%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Add(err%20error)%20%7B%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20e.errors%20%3D%20append(e.errors%2C%20err)%0A%20%20%20%20e.mu.Unlock()%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Error()%20error%20%7B%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20defer%20e.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%201%20%7B%0A%20%20%20%20%20%20%20%20return%20e.errors%5B0%5D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22multiple%20errors%20(%25d)%3A%20%25v%22%2C%20len(e.errors)%2C%20e.errors)%0A%7D%0A%0A%2F%2F%20Usage%0Aaggregator%20%3A%3D%20%26ErrorAggregator%7B%7D%0A%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20processItem(item)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20aggregator.Add(err)%0A%20%20%20%20%7D%0A%7D%0A%0Aif%20err%20%3A%3D%20aggregator.Error()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20Values%20Helper%0A%0A%60%60%60go%0Atype%20ContextKey%20string%0A%0Aconst%20(%0A%20%20%20%20RequestIDKey%20ContextKey%20%3D%20%22request_id%22%0A%20%20%20%20UserIDKey%20%20%20%20ContextKey%20%3D%20%22user_id%22%0A)%0A%0Afunc%20WithRequestID(ctx%20context.Context%2C%20requestID%20string)%20context.Context%20%7B%0A%20%20%20%20return%20context.WithValue(ctx%2C%20RequestIDKey%2C%20requestID)%0A%7D%0A%0Afunc%20GetRequestID(ctx%20context.Context)%20(string%2C%20bool)%20%7B%0A%20%20%20%20id%2C%20ok%20%3A%3D%20ctx.Value(RequestIDKey).(string)%0A%20%20%20%20return%20id%2C%20ok%0A%7D%0A%0A%2F%2F%20Usage%20in%20nodes%0Afunc%20(n%20*LoggingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20requestID%2C%20_%20%3A%3D%20GetRequestID(ctx)%0A%20%20%20%20log.Printf(%22%5B%25s%5D%20Processing%3A%20%25v%22%2C%20requestID%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20return%20process(prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Debounce%20Function%0A%0A%60%60%60go%0Afunc%20Debounce(fn%20func()%2C%20delay%20time.Duration)%20func()%20%7B%0A%20%20%20%20var%20timer%20*time.Timer%0A%20%20%20%20var%20mu%20sync.Mutex%0A%20%20%20%20%0A%20%20%20%20return%20func()%20%7B%0A%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20defer%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20timer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20timer.Stop()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20timer%20%3D%20time.AfterFunc(delay%2C%20fn)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0AsaveDebounced%20%3A%3D%20Debounce(func()%20%7B%0A%20%20%20%20saveToDatabase()%0A%7D%2C%205*time.Second)%0A%0A%2F%2F%20Call%20multiple%20times%2C%20only%20last%20one%20executes%0AsaveDebounced()%0AsaveDebounced()%0AsaveDebounced()%0A%60%60%60%0A%0A%23%23%20Testing%20Utilities%0A%0A%23%23%23%20Mock%20SharedStore%0A%0A%60%60%60go%0Atype%20MockSharedStore%20struct%20%7B%0A%20%20%20%20data%20map%5Bstring%5Dany%0A%20%20%20%20mu%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMockSharedStore(initial%20map%5Bstring%5Dany)%20*MockSharedStore%20%7B%0A%20%20%20%20return%20%26MockSharedStore%7B%0A%20%20%20%20%20%20%20%20data%3A%20initial%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Get(key%20string)%20(any%2C%20bool)%20%7B%0A%20%20%20%20m.mu.RLock()%0A%20%20%20%20defer%20m.mu.RUnlock()%0A%20%20%20%20val%2C%20ok%20%3A%3D%20m.data%5Bkey%5D%0A%20%20%20%20return%20val%2C%20ok%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Set(key%20string%2C%20value%20any)%20%7B%0A%20%20%20%20m.mu.Lock()%0A%20%20%20%20defer%20m.mu.Unlock()%0A%20%20%20%20m.data%5Bkey%5D%20%3D%20value%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Test%20Node%20Builder%0A%0A%60%60%60go%0Afunc%20TestNode(execFn%20func(context.Context%2C%20any)%20(any%2C%20error))%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(execFn)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Anode%20%3A%3D%20TestNode(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20return%20%22test_result%22%2C%20nil%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Utilities%20Generic**%3A%20Make%20them%20reusable%20across%20projects%0A2.%20**Document%20Usage**%3A%20Provide%20clear%20examples%0A3.%20**Test%20Thoroughly**%3A%20Utilities%20should%20be%20well-tested%0A4.%20**Handle%20Edge%20Cases**%3A%20Consider%20nil%20values%20and%20empty%20inputs%0A5.%20**Use%20Type%20Parameters**%3A%20Leverage%20Go%20generics%20where%20appropriate%0A6.%20**Thread%20Safety**%3A%20Ensure%20utilities%20are%20safe%20for%20concurrent%20use%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20sophisticated%20nodes%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20utilities%20in%20action",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./worker-pool-kymOp7c2.js"),[]),path:"/advanced/worker-pool",type:"mdx",filePath:"advanced/worker-pool.mdx",content:"%23%20Worker%20Pool%0A%0AManage%20concurrent%20task%20execution%20with%20fine-grained%20control%20using%20the%20WorkerPool%20utility.%0A%0A%23%23%20Basic%20Worker%20Pool%0A%0ACreate%20and%20use%20a%20worker%20pool%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20pool%20with%2010%20workers%0Apool%20%3A%3D%20flyt.NewWorkerPool(10)%0A%0A%2F%2F%20Submit%20tasks%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20taskID%20%3A%3D%20i%0A%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20task%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processTask(taskID)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Task%20%25d%20completed%3A%20%25v%5Cn%22%2C%20taskID%2C%20result)%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Wait%20for%20all%20tasks%20to%20complete%0Apool.Wait()%0A%0A%2F%2F%20Clean%20up%0Apool.Close()%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Results%0A%0ACollect%20results%20from%20worker%20pool%3A%0A%0A%60%60%60go%0Atype%20ResultCollector%20struct%20%7B%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20results%20%5B%5DResult%0A%7D%0A%0Afunc%20processWithWorkerPool(items%20%5B%5DItem)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(5)%0A%20%20%20%20collector%20%3A%3D%20%26ResultCollector%7B%0A%20%20%20%20%20%20%20%20results%3A%20make(%5B%5DResult%2C%20len(items))%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Unlock()%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20collector.results%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Worker%20Scaling%0A%0AAdjust%20worker%20count%20based%20on%20load%3A%0A%0A%60%60%60go%0Atype%20DynamicWorkerPool%20struct%20%7B%0A%20%20%20%20minWorkers%20int%0A%20%20%20%20maxWorkers%20int%0A%20%20%20%20pool%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20load%20%20%20%20%20%20%20int32%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDynamicWorkerPool(min%2C%20max%20int)%20*DynamicWorkerPool%20%7B%0A%20%20%20%20return%20%26DynamicWorkerPool%7B%0A%20%20%20%20%20%20%20%20minWorkers%3A%20min%2C%0A%20%20%20%20%20%20%20%20maxWorkers%3A%20max%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20%20%20flyt.NewWorkerPool(min)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20Submit(task%20func())%20%7B%0A%20%20%20%20currentLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%201)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Scale%20up%20if%20needed%0A%20%20%20%20if%20currentLoad%20%3E%20int32(p.getCurrentWorkers()*2)%20%7B%0A%20%20%20%20%20%20%20%20p.scaleUp()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%20-1)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Scale%20down%20if%20idle%0A%20%20%20%20%20%20%20%20if%20newLoad%20%3C%20int32(p.getCurrentWorkers()%2F2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.scaleDown()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20scaleUp()%20%7B%0A%20%20%20%20p.mu.Lock()%0A%20%20%20%20defer%20p.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20current%20%3A%3D%20p.getCurrentWorkers()%0A%20%20%20%20if%20current%20%3C%20p.maxWorkers%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20new%20pool%20with%20more%20workers%0A%20%20%20%20%20%20%20%20newPool%20%3A%3D%20flyt.NewWorkerPool(min(current*2%2C%20p.maxWorkers))%0A%20%20%20%20%20%20%20%20p.pool.Close()%0A%20%20%20%20%20%20%20%20p.pool%20%3D%20newPool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Worker%20Pool%0A%0AControl%20processing%20rate%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedPool(workers%20int%2C%20rps%20int)%20*RateLimitedPool%20%7B%0A%20%20%20%20limiter%20%3A%3D%20rate.NewLimiter(rate.Limit(rps)%2C%201)%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20%0A%20%20%20%20return%20%26RateLimitedPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20pool%2C%0A%20%20%20%20%20%20%20%20limiter%3A%20limiter%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20RateLimitedPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20limiter%20*rate.Limiter%0A%7D%0A%0Afunc%20(p%20*RateLimitedPool)%20Submit(ctx%20context.Context%2C%20task%20func())%20error%20%7B%0A%20%20%20%20%2F%2F%20Wait%20for%20rate%20limit%0A%20%20%20%20if%20err%20%3A%3D%20p.limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(task)%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Priority%20Queue%20Worker%20Pool%0A%0AProcess%20tasks%20by%20priority%3A%0A%0A%60%60%60go%0Atype%20PriorityTask%20struct%20%7B%0A%20%20%20%20Priority%20int%0A%20%20%20%20Task%20%20%20%20%20func()%0A%20%20%20%20ID%20%20%20%20%20%20%20string%0A%7D%0A%0Atype%20PriorityWorkerPool%20struct%20%7B%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20*PriorityQueue%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20running%20bool%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewPriorityWorkerPool(workers%20int)%20*PriorityWorkerPool%20%7B%0A%20%20%20%20p%20%3A%3D%20%26PriorityWorkerPool%7B%0A%20%20%20%20%20%20%20%20workers%3A%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20NewPriorityQueue()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20running%3A%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20dispatcher%0A%20%20%20%20go%20p.dispatch()%0A%20%20%20%20%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20Submit(priority%20int%2C%20task%20func())%20%7B%0A%20%20%20%20p.queue.Push(PriorityTask%7B%0A%20%20%20%20%20%20%20%20Priority%3A%20priority%2C%0A%20%20%20%20%20%20%20%20Task%3A%20%20%20%20%20task%2C%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20dispatch()%20%7B%0A%20%20%20%20for%20p.running%20%7B%0A%20%20%20%20%20%20%20%20task%20%3A%3D%20p.queue.Pop()%20%2F%2F%20Blocks%20until%20task%20available%0A%20%20%20%20%20%20%20%20if%20task%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.pool.Submit(task.Task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Timeout%0A%0AHandle%20task%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20createTimeoutPool(workers%20int%2C%20timeout%20time.Duration)%20*TimeoutPool%20%7B%0A%20%20%20%20return%20%26TimeoutPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20timeout%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20TimeoutPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20timeout%20time.Duration%0A%7D%0A%0Afunc%20(p%20*TimeoutPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20done%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20done%20%3C-%20task()%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(p.timeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22task%20timeout%20after%20%25v%22%2C%20p.timeout)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20%3C-errChan%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20in%20Nodes%0A%0AUse%20worker%20pools%20within%20nodes%3A%0A%0A%60%60%60go%0Atype%20ParallelProcessingNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20*flyt.WorkerPool%0A%7D%0A%0Afunc%20NewParallelProcessingNode(workers%20int)%20*ParallelProcessingNode%20%7B%0A%20%20%20%20return%20%26ParallelProcessingNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20errors%20%3A%3D%20make(%5B%5Derror%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20n.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%5Bindex%5D%20%3D%20err%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20with%20context%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20errors%0A%20%20%20%20%20%20%20%20for%20_%2C%20err%20%3A%3D%20range%20errors%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20fmt.Errorf(%22processing%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Close()%20%7B%0A%20%20%20%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20with%20Worker%20Pool%0A%0AProcess%20batches%20efficiently%3A%0A%0A%60%60%60go%0Afunc%20processBatchesWithPool(items%20%5B%5DItem%2C%20batchSize%20int%2C%20workers%20int)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20in%20batches%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(items)%3B%20i%20%2B%3D%20batchSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20min(i%2BbatchSize%2C%20len(items))%0A%20%20%20%20%20%20%20%20batch%20%3A%3D%20items%5Bi%3Aend%5D%0A%20%20%20%20%20%20%20%20batchStart%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20batchResults%20%3A%3D%20processBatch(batch)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20j%2C%20result%20%3A%3D%20range%20batchResults%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5BbatchStart%2Bj%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20results%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%20Worker%20Pool%0A%0ATrack%20pool%20performance%3A%0A%0A%60%60%60go%0Atype%20MonitoredPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20submitted%20int64%0A%20%20%20%20completed%20int64%0A%20%20%20%20failed%20%20%20%20int64%0A%20%20%20%20totalTime%20int64%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20Submit(task%20func()%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26p.submitted%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.totalTime%2C%20int64(duration))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.failed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.completed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20GetStats()%20map%5Bstring%5Dint64%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dint64%7B%0A%20%20%20%20%20%20%20%20%22submitted%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.submitted)%2C%0A%20%20%20%20%20%20%20%20%22completed%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.completed)%2C%0A%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20%20%20%20atomic.LoadInt64(%26p.failed)%2C%0A%20%20%20%20%20%20%20%20%22avg_time_ms%22%3A%20%20%20p.getAverageTime()%2C%0A%20%20%20%20%20%20%20%20%22pending%22%3A%20%20%20%20%20%20%20p.getPendingCount()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pool%0A%0APrevent%20overload%20with%20circuit%20breaker%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20failures%20%20%20%20int32%0A%20%20%20%20threshold%20%20%20int32%0A%20%20%20%20resetTime%20%20%20time.Duration%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20if%20p.isOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20failures%20%3A%3D%20atomic.AddInt32(%26p.failures%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20failures%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20isOpen()%20bool%20%7B%0A%20%20%20%20p.mu.RLock()%0A%20%20%20%20defer%20p.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20atomic.LoadInt32(%26p.failures)%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(p.lastFailure)%20%3C%20p.resetTime%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Size%20Appropriately**%3A%20Set%20worker%20count%20based%20on%20workload%20and%20resources%0A2.%20**Handle%20Panics**%3A%20Recover%20from%20panics%20in%20worker%20goroutines%0A3.%20**Clean%20Up**%3A%20Always%20close%20pools%20when%20done%0A4.%20**Monitor%20Performance**%3A%20Track%20metrics%20for%20optimization%0A5.%20**Avoid%20Blocking**%3A%20Don't%20block%20workers%20with%20long%20waits%0A6.%20**Test%20Concurrency**%3A%20Test%20with%20various%20worker%20counts%20and%20loads%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20High-level%20batch%20operations%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20nodes%20with%20worker%20pools%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./worker-pool-kymOp7c2.js"),[]),path:"/advanced/worker-pool.html",type:"mdx",filePath:"advanced/worker-pool.mdx",content:"%23%20Worker%20Pool%0A%0AManage%20concurrent%20task%20execution%20with%20fine-grained%20control%20using%20the%20WorkerPool%20utility.%0A%0A%23%23%20Basic%20Worker%20Pool%0A%0ACreate%20and%20use%20a%20worker%20pool%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20pool%20with%2010%20workers%0Apool%20%3A%3D%20flyt.NewWorkerPool(10)%0A%0A%2F%2F%20Submit%20tasks%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20taskID%20%3A%3D%20i%0A%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20task%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processTask(taskID)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Task%20%25d%20completed%3A%20%25v%5Cn%22%2C%20taskID%2C%20result)%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Wait%20for%20all%20tasks%20to%20complete%0Apool.Wait()%0A%0A%2F%2F%20Clean%20up%0Apool.Close()%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Results%0A%0ACollect%20results%20from%20worker%20pool%3A%0A%0A%60%60%60go%0Atype%20ResultCollector%20struct%20%7B%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20results%20%5B%5DResult%0A%7D%0A%0Afunc%20processWithWorkerPool(items%20%5B%5DItem)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(5)%0A%20%20%20%20collector%20%3A%3D%20%26ResultCollector%7B%0A%20%20%20%20%20%20%20%20results%3A%20make(%5B%5DResult%2C%20len(items))%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Unlock()%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20collector.results%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Worker%20Scaling%0A%0AAdjust%20worker%20count%20based%20on%20load%3A%0A%0A%60%60%60go%0Atype%20DynamicWorkerPool%20struct%20%7B%0A%20%20%20%20minWorkers%20int%0A%20%20%20%20maxWorkers%20int%0A%20%20%20%20pool%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20load%20%20%20%20%20%20%20int32%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDynamicWorkerPool(min%2C%20max%20int)%20*DynamicWorkerPool%20%7B%0A%20%20%20%20return%20%26DynamicWorkerPool%7B%0A%20%20%20%20%20%20%20%20minWorkers%3A%20min%2C%0A%20%20%20%20%20%20%20%20maxWorkers%3A%20max%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20%20%20flyt.NewWorkerPool(min)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20Submit(task%20func())%20%7B%0A%20%20%20%20currentLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%201)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Scale%20up%20if%20needed%0A%20%20%20%20if%20currentLoad%20%3E%20int32(p.getCurrentWorkers()*2)%20%7B%0A%20%20%20%20%20%20%20%20p.scaleUp()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%20-1)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Scale%20down%20if%20idle%0A%20%20%20%20%20%20%20%20if%20newLoad%20%3C%20int32(p.getCurrentWorkers()%2F2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.scaleDown()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20scaleUp()%20%7B%0A%20%20%20%20p.mu.Lock()%0A%20%20%20%20defer%20p.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20current%20%3A%3D%20p.getCurrentWorkers()%0A%20%20%20%20if%20current%20%3C%20p.maxWorkers%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20new%20pool%20with%20more%20workers%0A%20%20%20%20%20%20%20%20newPool%20%3A%3D%20flyt.NewWorkerPool(min(current*2%2C%20p.maxWorkers))%0A%20%20%20%20%20%20%20%20p.pool.Close()%0A%20%20%20%20%20%20%20%20p.pool%20%3D%20newPool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Worker%20Pool%0A%0AControl%20processing%20rate%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedPool(workers%20int%2C%20rps%20int)%20*RateLimitedPool%20%7B%0A%20%20%20%20limiter%20%3A%3D%20rate.NewLimiter(rate.Limit(rps)%2C%201)%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20%0A%20%20%20%20return%20%26RateLimitedPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20pool%2C%0A%20%20%20%20%20%20%20%20limiter%3A%20limiter%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20RateLimitedPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20limiter%20*rate.Limiter%0A%7D%0A%0Afunc%20(p%20*RateLimitedPool)%20Submit(ctx%20context.Context%2C%20task%20func())%20error%20%7B%0A%20%20%20%20%2F%2F%20Wait%20for%20rate%20limit%0A%20%20%20%20if%20err%20%3A%3D%20p.limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(task)%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Priority%20Queue%20Worker%20Pool%0A%0AProcess%20tasks%20by%20priority%3A%0A%0A%60%60%60go%0Atype%20PriorityTask%20struct%20%7B%0A%20%20%20%20Priority%20int%0A%20%20%20%20Task%20%20%20%20%20func()%0A%20%20%20%20ID%20%20%20%20%20%20%20string%0A%7D%0A%0Atype%20PriorityWorkerPool%20struct%20%7B%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20*PriorityQueue%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20running%20bool%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewPriorityWorkerPool(workers%20int)%20*PriorityWorkerPool%20%7B%0A%20%20%20%20p%20%3A%3D%20%26PriorityWorkerPool%7B%0A%20%20%20%20%20%20%20%20workers%3A%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20NewPriorityQueue()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20running%3A%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20dispatcher%0A%20%20%20%20go%20p.dispatch()%0A%20%20%20%20%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20Submit(priority%20int%2C%20task%20func())%20%7B%0A%20%20%20%20p.queue.Push(PriorityTask%7B%0A%20%20%20%20%20%20%20%20Priority%3A%20priority%2C%0A%20%20%20%20%20%20%20%20Task%3A%20%20%20%20%20task%2C%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20dispatch()%20%7B%0A%20%20%20%20for%20p.running%20%7B%0A%20%20%20%20%20%20%20%20task%20%3A%3D%20p.queue.Pop()%20%2F%2F%20Blocks%20until%20task%20available%0A%20%20%20%20%20%20%20%20if%20task%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.pool.Submit(task.Task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Timeout%0A%0AHandle%20task%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20createTimeoutPool(workers%20int%2C%20timeout%20time.Duration)%20*TimeoutPool%20%7B%0A%20%20%20%20return%20%26TimeoutPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20timeout%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20TimeoutPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20timeout%20time.Duration%0A%7D%0A%0Afunc%20(p%20*TimeoutPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20done%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20done%20%3C-%20task()%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(p.timeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22task%20timeout%20after%20%25v%22%2C%20p.timeout)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20%3C-errChan%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20in%20Nodes%0A%0AUse%20worker%20pools%20within%20nodes%3A%0A%0A%60%60%60go%0Atype%20ParallelProcessingNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20*flyt.WorkerPool%0A%7D%0A%0Afunc%20NewParallelProcessingNode(workers%20int)%20*ParallelProcessingNode%20%7B%0A%20%20%20%20return%20%26ParallelProcessingNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20errors%20%3A%3D%20make(%5B%5Derror%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20n.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%5Bindex%5D%20%3D%20err%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20with%20context%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20errors%0A%20%20%20%20%20%20%20%20for%20_%2C%20err%20%3A%3D%20range%20errors%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20fmt.Errorf(%22processing%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Close()%20%7B%0A%20%20%20%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20with%20Worker%20Pool%0A%0AProcess%20batches%20efficiently%3A%0A%0A%60%60%60go%0Afunc%20processBatchesWithPool(items%20%5B%5DItem%2C%20batchSize%20int%2C%20workers%20int)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20in%20batches%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(items)%3B%20i%20%2B%3D%20batchSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20min(i%2BbatchSize%2C%20len(items))%0A%20%20%20%20%20%20%20%20batch%20%3A%3D%20items%5Bi%3Aend%5D%0A%20%20%20%20%20%20%20%20batchStart%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20batchResults%20%3A%3D%20processBatch(batch)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20j%2C%20result%20%3A%3D%20range%20batchResults%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5BbatchStart%2Bj%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20results%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%20Worker%20Pool%0A%0ATrack%20pool%20performance%3A%0A%0A%60%60%60go%0Atype%20MonitoredPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20submitted%20int64%0A%20%20%20%20completed%20int64%0A%20%20%20%20failed%20%20%20%20int64%0A%20%20%20%20totalTime%20int64%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20Submit(task%20func()%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26p.submitted%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.totalTime%2C%20int64(duration))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.failed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.completed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20GetStats()%20map%5Bstring%5Dint64%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dint64%7B%0A%20%20%20%20%20%20%20%20%22submitted%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.submitted)%2C%0A%20%20%20%20%20%20%20%20%22completed%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.completed)%2C%0A%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20%20%20%20atomic.LoadInt64(%26p.failed)%2C%0A%20%20%20%20%20%20%20%20%22avg_time_ms%22%3A%20%20%20p.getAverageTime()%2C%0A%20%20%20%20%20%20%20%20%22pending%22%3A%20%20%20%20%20%20%20p.getPendingCount()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pool%0A%0APrevent%20overload%20with%20circuit%20breaker%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20failures%20%20%20%20int32%0A%20%20%20%20threshold%20%20%20int32%0A%20%20%20%20resetTime%20%20%20time.Duration%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20if%20p.isOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20failures%20%3A%3D%20atomic.AddInt32(%26p.failures%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20failures%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20isOpen()%20bool%20%7B%0A%20%20%20%20p.mu.RLock()%0A%20%20%20%20defer%20p.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20atomic.LoadInt32(%26p.failures)%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(p.lastFailure)%20%3C%20p.resetTime%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Size%20Appropriately**%3A%20Set%20worker%20count%20based%20on%20workload%20and%20resources%0A2.%20**Handle%20Panics**%3A%20Recover%20from%20panics%20in%20worker%20goroutines%0A3.%20**Clean%20Up**%3A%20Always%20close%20pools%20when%20done%0A4.%20**Monitor%20Performance**%3A%20Track%20metrics%20for%20optimization%0A5.%20**Avoid%20Blocking**%3A%20Don't%20block%20workers%20with%20long%20waits%0A6.%20**Test%20Concurrency**%3A%20Test%20with%20various%20worker%20counts%20and%20loads%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20High-level%20batch%20operations%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20nodes%20with%20worker%20pools%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./actions-Z_ymnbKA.js"),[]),path:"/concepts/actions",type:"mdx",filePath:"concepts/actions.mdx",content:"%23%20Actions%0A%0AActions%20are%20strings%20returned%20by%20a%20node's%20Post%20phase%20that%20determine%20the%20next%20step%20in%20a%20workflow.%20They%20provide%20dynamic%2C%20runtime%20control%20over%20flow%20execution.%0A%0A%23%23%20How%20Actions%20Work%0A%0AWhen%20a%20node%20completes%2C%20its%20Post%20phase%20returns%20an%20action%3A%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20success%20%7B%0A%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22retry%22%2C%20nil%0A%7D%0A%60%60%60%0A%0AThe%20flow%20then%20routes%20to%20the%20node%20connected%20with%20that%20action%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22continue%22%2C%20processNode)%0Aflow.Connect(startNode%2C%20%22retry%22%2C%20retryNode)%0A%60%60%60%0A%0A%23%23%20Default%20Action%0A%0AThe%20most%20common%20action%20is%20%60flyt.DefaultAction%60%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20the%20constant%0Areturn%20flyt.DefaultAction%2C%20nil%20%20%2F%2F%20Returns%20%22default%22%0A%0A%2F%2F%20In%20flow%20connections%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Action-Based%20Routing%0A%0A%23%23%23%20Simple%20Branching%0A%0A%60%60%60go%0AvalidationNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20return%20len(data)%20%3E%200%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%23%20Multi-Way%20Branching%0A%0A%60%60%60go%0AcategoryNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%2010%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20value%20%3C%20100%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0A%60%60%60%0A%0A%23%23%20Flow%20Termination%0A%0AIf%20no%20connection%20exists%20for%20an%20action%2C%20the%20flow%20terminates%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20%22continue%22%2C%20node2)%0A%2F%2F%20If%20node1%20returns%20%22stop%22%2C%20flow%20ends%20(no%20connection%20for%20%22stop%22)%0A%60%60%60%0A%0AExplicitly%20terminate%20by%20connecting%20to%20nil%3A%0A%0A%60%60%60go%0Aflow.Connect(finalNode%2C%20%22done%22%2C%20nil)%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Success%2FFailure%20Pattern%0A%0A%60%60%60go%0Afunc%20makeDecisionPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22failure%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22success%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Pattern%0A%0A%60%60%60go%0Afunc%20retryablePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20attempts%2C%20_%20%3A%3D%20shared.Get(%22attempts%22)%0A%20%20%20%20count%20%3A%3D%20attempts.(int)%0A%20%20%20%20%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%26%26%20count%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20count%20%2B%201)%0A%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Machine%20Pattern%0A%0A%60%60%60go%0Afunc%20statePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20currentState%2C%20_%20%3A%3D%20shared.Get(%22state%22)%0A%20%20%20%20%0A%20%20%20%20switch%20currentState.(string)%20%7B%0A%20%20%20%20case%20%22init%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22processing%22)%0A%20%20%20%20%20%20%20%20return%20%22process%22%2C%20nil%0A%20%20%20%20case%20%22processing%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22complete%22)%0A%20%20%20%20%20%20%20%20return%20%22finalize%22%2C%20nil%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22done%22%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Actions%0A%0AActions%20can%20be%20computed%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20dynamicPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20nextAction%20%3A%3D%20result%5B%22next_action%22%5D.(string)%0A%20%20%20%20return%20flyt.Action(nextAction)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Use%20Descriptive%20Names**%3A%20Actions%20should%20clearly%20indicate%20their%20purpose%0A2.%20**Document%20Actions**%3A%20List%20all%20possible%20actions%20a%20node%20can%20return%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%20or%20intentionally%20terminate%0A4.%20**Consistent%20Naming**%3A%20Use%20a%20consistent%20naming%20scheme%20across%20your%20application%0A5.%20**Avoid%20Magic%20Strings**%3A%20Define%20action%20constants%20for%20reusability%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20ActionValidate%20%3D%20flyt.Action(%22validate%22)%0A%20%20%20%20ActionProcess%20%20%3D%20flyt.Action(%22process%22)%0A%20%20%20%20ActionComplete%20%3D%20flyt.Action(%22complete%22)%0A%20%20%20%20ActionError%20%20%20%20%3D%20flyt.Action(%22error%22)%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20with%20actions%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Advanced%20routing%20patterns%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Compose%20complex%20workflows",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./actions-Z_ymnbKA.js"),[]),path:"/concepts/actions.html",type:"mdx",filePath:"concepts/actions.mdx",content:"%23%20Actions%0A%0AActions%20are%20strings%20returned%20by%20a%20node's%20Post%20phase%20that%20determine%20the%20next%20step%20in%20a%20workflow.%20They%20provide%20dynamic%2C%20runtime%20control%20over%20flow%20execution.%0A%0A%23%23%20How%20Actions%20Work%0A%0AWhen%20a%20node%20completes%2C%20its%20Post%20phase%20returns%20an%20action%3A%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20success%20%7B%0A%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22retry%22%2C%20nil%0A%7D%0A%60%60%60%0A%0AThe%20flow%20then%20routes%20to%20the%20node%20connected%20with%20that%20action%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22continue%22%2C%20processNode)%0Aflow.Connect(startNode%2C%20%22retry%22%2C%20retryNode)%0A%60%60%60%0A%0A%23%23%20Default%20Action%0A%0AThe%20most%20common%20action%20is%20%60flyt.DefaultAction%60%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20the%20constant%0Areturn%20flyt.DefaultAction%2C%20nil%20%20%2F%2F%20Returns%20%22default%22%0A%0A%2F%2F%20In%20flow%20connections%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Action-Based%20Routing%0A%0A%23%23%23%20Simple%20Branching%0A%0A%60%60%60go%0AvalidationNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20return%20len(data)%20%3E%200%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%23%20Multi-Way%20Branching%0A%0A%60%60%60go%0AcategoryNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%2010%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20value%20%3C%20100%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0A%60%60%60%0A%0A%23%23%20Flow%20Termination%0A%0AIf%20no%20connection%20exists%20for%20an%20action%2C%20the%20flow%20terminates%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20%22continue%22%2C%20node2)%0A%2F%2F%20If%20node1%20returns%20%22stop%22%2C%20flow%20ends%20(no%20connection%20for%20%22stop%22)%0A%60%60%60%0A%0AExplicitly%20terminate%20by%20connecting%20to%20nil%3A%0A%0A%60%60%60go%0Aflow.Connect(finalNode%2C%20%22done%22%2C%20nil)%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Success%2FFailure%20Pattern%0A%0A%60%60%60go%0Afunc%20makeDecisionPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22failure%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22success%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Pattern%0A%0A%60%60%60go%0Afunc%20retryablePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20attempts%2C%20_%20%3A%3D%20shared.Get(%22attempts%22)%0A%20%20%20%20count%20%3A%3D%20attempts.(int)%0A%20%20%20%20%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%26%26%20count%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20count%20%2B%201)%0A%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Machine%20Pattern%0A%0A%60%60%60go%0Afunc%20statePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20currentState%2C%20_%20%3A%3D%20shared.Get(%22state%22)%0A%20%20%20%20%0A%20%20%20%20switch%20currentState.(string)%20%7B%0A%20%20%20%20case%20%22init%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22processing%22)%0A%20%20%20%20%20%20%20%20return%20%22process%22%2C%20nil%0A%20%20%20%20case%20%22processing%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22complete%22)%0A%20%20%20%20%20%20%20%20return%20%22finalize%22%2C%20nil%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22done%22%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Actions%0A%0AActions%20can%20be%20computed%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20dynamicPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20nextAction%20%3A%3D%20result%5B%22next_action%22%5D.(string)%0A%20%20%20%20return%20flyt.Action(nextAction)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Use%20Descriptive%20Names**%3A%20Actions%20should%20clearly%20indicate%20their%20purpose%0A2.%20**Document%20Actions**%3A%20List%20all%20possible%20actions%20a%20node%20can%20return%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%20or%20intentionally%20terminate%0A4.%20**Consistent%20Naming**%3A%20Use%20a%20consistent%20naming%20scheme%20across%20your%20application%0A5.%20**Avoid%20Magic%20Strings**%3A%20Define%20action%20constants%20for%20reusability%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20ActionValidate%20%3D%20flyt.Action(%22validate%22)%0A%20%20%20%20ActionProcess%20%20%3D%20flyt.Action(%22process%22)%0A%20%20%20%20ActionComplete%20%3D%20flyt.Action(%22complete%22)%0A%20%20%20%20ActionError%20%20%20%20%3D%20flyt.Action(%22error%22)%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20with%20actions%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Advanced%20routing%20patterns%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Compose%20complex%20workflows",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./flows-wCL_DUeE.js"),[]),path:"/concepts/flows",type:"mdx",filePath:"concepts/flows.mdx",content:"%23%20Flows%0A%0AFlows%20connect%20nodes%20together%20to%20create%20workflows.%20They%20define%20the%20execution%20path%20based%20on%20actions%20returned%20by%20nodes.%0A%0A%23%23%20Creating%20Flows%0A%0AStart%20with%20a%20single%20node%20and%20build%20connections%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20nodes%0AstartNode%20%3A%3D%20createStartNode()%0AprocessNode%20%3A%3D%20createProcessNode()%0AendNode%20%3A%3D%20createEndNode()%0A%0A%2F%2F%20Build%20flow%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Running%20Flows%0A%0AExecute%20a%20flow%20with%20a%20context%20and%20SharedStore%3A%0A%0A%60%60%60go%0Actx%20%3A%3D%20context.Background()%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%0A%2F%2F%20Add%20initial%20data%0Ashared.Set(%22input%22%2C%20%22data%20to%20process%22)%0A%0A%2F%2F%20Run%20the%20flow%0Aerr%20%3A%3D%20flow.Run(ctx%2C%20shared)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20Get%20results%0Aresult%2C%20_%20%3A%3D%20shared.Get(%22output%22)%0A%60%60%60%0A%0A%23%23%20Flow%20Connections%0A%0A%23%23%23%20Linear%20Flow%0A%0ASimple%20sequential%20execution%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0Aflow.Connect(node2%2C%20flyt.DefaultAction%2C%20node3)%0Aflow.Connect(node3%2C%20flyt.DefaultAction%2C%20nil)%20%2F%2F%20Terminate%0A%60%60%60%0A%0A%23%23%23%20Branching%20Flow%0A%0AMultiple%20paths%20based%20on%20actions%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(decisionNode)%0Aflow.Connect(decisionNode%2C%20%22path_a%22%2C%20nodeA)%0Aflow.Connect(decisionNode%2C%20%22path_b%22%2C%20nodeB)%0Aflow.Connect(nodeA%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(nodeB%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Loop%20Flow%0A%0ACreate%20cycles%20for%20retry%20or%20iteration%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22retry%22%2C%20startNode)%20%20%20%20%2F%2F%20Loop%20back%0Aflow.Connect(processNode%2C%20%22success%22%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%20and%20can%20be%20used%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%0AsubFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AsubFlow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20transformNode)%0A%0A%2F%2F%20Use%20sub-flow%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20subFlow)%0AmainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Complex%20Flow%20Patterns%0A%0A%23%23%23%20Diamond%20Pattern%0A%0ASplit%20and%20merge%20execution%20paths%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0Aflow.Connect(splitNode%2C%20%22path1%22%2C%20process1)%0Aflow.Connect(splitNode%2C%20%22path2%22%2C%20process2)%0Aflow.Connect(process1%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(process2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%20Flow%0A%0ACentralized%20error%20handling%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0Aflow.Connect(saveNode%2C%20%22error%22%2C%20errorHandler)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Pattern%0A%0AData%20transformation%20pipeline%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20rejectNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Composition%0A%0ABuild%20complex%20flows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkFormat%20%3A%3D%20createFormatChecker()%0A%20%20%20%20checkBusiness%20%3A%3D%20createBusinessRules()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkFormat)%0A%20%20%20%20flow.Connect(checkFormat%2C%20%22valid%22%2C%20checkBusiness)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createMainFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetch%20%3A%3D%20createFetchNode()%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20process%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetch)%0A%20%20%20%20flow.Connect(fetch%2C%20flyt.DefaultAction%2C%20validation)%0A%20%20%20%20flow.Connect(validation%2C%20flyt.DefaultAction%2C%20process)%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Debugging%20Flows%0A%0AAdd%20logging%20nodes%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20createLoggingNode(name%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Prep%3A%20SharedStore%20keys%3A%20%25v%22%2C%20name%2C%20shared.GetAll())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Post%3A%20Result%3A%20%25v%22%2C%20name%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Insert%20between%20nodes%20for%20debugging%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20createLoggingNode(%22debug%22))%0Aflow.Connect(createLoggingNode(%22debug%22)%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Start%20Simple**%3A%20Build%20flows%20incrementally%2C%20testing%20as%20you%20go%0A2.%20**Name%20Nodes**%3A%20Give%20nodes%20descriptive%20names%20for%20easier%20debugging%0A3.%20**Document%20Flows**%3A%20Create%20diagrams%20or%20comments%20explaining%20flow%20logic%0A4.%20**Reuse%20Flows**%3A%20Extract%20common%20patterns%20into%20reusable%20sub-flows%0A5.%20**Test%20Flows**%3A%20Write%20tests%20for%20different%20execution%20paths%0A%0A%23%23%20Visualizing%20Flows%0A%0ADocument%20your%20flows%20with%20clear%20structure%3A%0A%0A%60%60%60go%0A%2F%2F%20Flow%20structure%3A%0A%2F%2F%20Start%20-%3E%20Validate%20-%3E%20Process%20-%3E%20Save%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%94%94%E2%94%80%3E%20Error%20(on%20invalid)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20errorNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BShared%20Store%5D(%2Fconcepts%2Fshared-store)%20-%20Share%20data%20between%20nodes%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Advanced%20composition%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Process%20multiple%20inputs",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./flows-wCL_DUeE.js"),[]),path:"/concepts/flows.html",type:"mdx",filePath:"concepts/flows.mdx",content:"%23%20Flows%0A%0AFlows%20connect%20nodes%20together%20to%20create%20workflows.%20They%20define%20the%20execution%20path%20based%20on%20actions%20returned%20by%20nodes.%0A%0A%23%23%20Creating%20Flows%0A%0AStart%20with%20a%20single%20node%20and%20build%20connections%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20nodes%0AstartNode%20%3A%3D%20createStartNode()%0AprocessNode%20%3A%3D%20createProcessNode()%0AendNode%20%3A%3D%20createEndNode()%0A%0A%2F%2F%20Build%20flow%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Running%20Flows%0A%0AExecute%20a%20flow%20with%20a%20context%20and%20SharedStore%3A%0A%0A%60%60%60go%0Actx%20%3A%3D%20context.Background()%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%0A%2F%2F%20Add%20initial%20data%0Ashared.Set(%22input%22%2C%20%22data%20to%20process%22)%0A%0A%2F%2F%20Run%20the%20flow%0Aerr%20%3A%3D%20flow.Run(ctx%2C%20shared)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20Get%20results%0Aresult%2C%20_%20%3A%3D%20shared.Get(%22output%22)%0A%60%60%60%0A%0A%23%23%20Flow%20Connections%0A%0A%23%23%23%20Linear%20Flow%0A%0ASimple%20sequential%20execution%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0Aflow.Connect(node2%2C%20flyt.DefaultAction%2C%20node3)%0Aflow.Connect(node3%2C%20flyt.DefaultAction%2C%20nil)%20%2F%2F%20Terminate%0A%60%60%60%0A%0A%23%23%23%20Branching%20Flow%0A%0AMultiple%20paths%20based%20on%20actions%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(decisionNode)%0Aflow.Connect(decisionNode%2C%20%22path_a%22%2C%20nodeA)%0Aflow.Connect(decisionNode%2C%20%22path_b%22%2C%20nodeB)%0Aflow.Connect(nodeA%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(nodeB%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Loop%20Flow%0A%0ACreate%20cycles%20for%20retry%20or%20iteration%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22retry%22%2C%20startNode)%20%20%20%20%2F%2F%20Loop%20back%0Aflow.Connect(processNode%2C%20%22success%22%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%20and%20can%20be%20used%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%0AsubFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AsubFlow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20transformNode)%0A%0A%2F%2F%20Use%20sub-flow%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20subFlow)%0AmainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Complex%20Flow%20Patterns%0A%0A%23%23%23%20Diamond%20Pattern%0A%0ASplit%20and%20merge%20execution%20paths%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0Aflow.Connect(splitNode%2C%20%22path1%22%2C%20process1)%0Aflow.Connect(splitNode%2C%20%22path2%22%2C%20process2)%0Aflow.Connect(process1%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(process2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%20Flow%0A%0ACentralized%20error%20handling%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0Aflow.Connect(saveNode%2C%20%22error%22%2C%20errorHandler)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Pattern%0A%0AData%20transformation%20pipeline%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20rejectNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Composition%0A%0ABuild%20complex%20flows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkFormat%20%3A%3D%20createFormatChecker()%0A%20%20%20%20checkBusiness%20%3A%3D%20createBusinessRules()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkFormat)%0A%20%20%20%20flow.Connect(checkFormat%2C%20%22valid%22%2C%20checkBusiness)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createMainFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetch%20%3A%3D%20createFetchNode()%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20process%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetch)%0A%20%20%20%20flow.Connect(fetch%2C%20flyt.DefaultAction%2C%20validation)%0A%20%20%20%20flow.Connect(validation%2C%20flyt.DefaultAction%2C%20process)%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Debugging%20Flows%0A%0AAdd%20logging%20nodes%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20createLoggingNode(name%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Prep%3A%20SharedStore%20keys%3A%20%25v%22%2C%20name%2C%20shared.GetAll())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Post%3A%20Result%3A%20%25v%22%2C%20name%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Insert%20between%20nodes%20for%20debugging%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20createLoggingNode(%22debug%22))%0Aflow.Connect(createLoggingNode(%22debug%22)%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Start%20Simple**%3A%20Build%20flows%20incrementally%2C%20testing%20as%20you%20go%0A2.%20**Name%20Nodes**%3A%20Give%20nodes%20descriptive%20names%20for%20easier%20debugging%0A3.%20**Document%20Flows**%3A%20Create%20diagrams%20or%20comments%20explaining%20flow%20logic%0A4.%20**Reuse%20Flows**%3A%20Extract%20common%20patterns%20into%20reusable%20sub-flows%0A5.%20**Test%20Flows**%3A%20Write%20tests%20for%20different%20execution%20paths%0A%0A%23%23%20Visualizing%20Flows%0A%0ADocument%20your%20flows%20with%20clear%20structure%3A%0A%0A%60%60%60go%0A%2F%2F%20Flow%20structure%3A%0A%2F%2F%20Start%20-%3E%20Validate%20-%3E%20Process%20-%3E%20Save%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%94%94%E2%94%80%3E%20Error%20(on%20invalid)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20errorNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BShared%20Store%5D(%2Fconcepts%2Fshared-store)%20-%20Share%20data%20between%20nodes%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Advanced%20composition%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Process%20multiple%20inputs",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./nodes-DLqRp1yq.js"),[]),path:"/concepts/nodes",type:"mdx",filePath:"concepts/nodes.mdx",content:"%23%20Nodes%0A%0ANodes%20are%20the%20fundamental%20building%20blocks%20of%20Flyt%20workflows.%20Each%20node%20represents%20a%20single%20unit%20of%20work%20with%20a%20well-defined%20lifecycle.%0A%0A%23%23%20Node%20Lifecycle%0A%0AEvery%20node%20has%20three%20phases%20that%20execute%20in%20order%3A%0A%0A%23%23%23%201.%20Prep%20Phase%0A%0AThe%20preparation%20phase%20reads%20from%20the%20SharedStore%20and%20prepares%20data%20for%20execution.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Read%20configuration%20or%20input%20data%0A%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22config%22)%0A%20%20%20%20input%2C%20_%20%3A%3D%20shared.Get(%22input_data%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prepare%20and%20return%20data%20for%20Exec%20phase%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22config%22%3A%20config%2C%0A%20%20%20%20%20%20%20%20%22input%22%3A%20input%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Exec%20Phase%0A%0AThe%20execution%20phase%20performs%20the%20main%20work.%20This%20phase%20can%20be%20retried%20on%20failure.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20the%20main%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20processData(data%5B%22input%22%5D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20retry%20if%20configured%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%203.%20Post%20Phase%0A%0AThe%20post-processing%20phase%20handles%20results%20and%20determines%20the%20next%20action.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20shared.Set(%22output%22%2C%20execResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20next%20action%20based%20on%20results%0A%20%20%20%20if%20isValid(execResult)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22failure%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Creating%20Nodes%0A%0A%23%23%23%20Using%20Helper%20Functions%0A%0AThe%20simplest%20way%20to%20create%20a%20node%3A%0A%0A%60%60%60go%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Prep%20logic%0A%20%20%20%20%20%20%20%20return%20prepData%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Exec%20logic%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Post%20logic%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Custom%20Node%20Types%0A%0AFor%20complex%20nodes%20with%20state%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseNode(db%20*sql.DB)%20*DatabaseNode%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20db%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20rows%2C%20err%20%3A%3D%20n.db.QueryContext(ctx%2C%20query)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Node%20Options%0A%0AConfigure%20node%20behavior%20with%20options%3A%0A%0A%60%60%60go%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(execFunc)%2C%0A%20%20%20%20flyt.WithMaxRetries(3)%2C%20%20%20%20%20%20%20%20%2F%2F%20Retry%20up%20to%203%20times%0A%20%20%20%20flyt.WithWait(time.Second%20*%202)%2C%20%2F%2F%20Wait%202%20seconds%20between%20retries%0A)%0A%60%60%60%0A%0A%23%23%20BaseNode%0A%0AThe%20%60BaseNode%60%20provides%20default%20implementations%3A%0A%0A%60%60%60go%0Atype%20MyNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20%2F%2F%20Add%20custom%20fields%0A%7D%0A%0Afunc%20NewMyNode()%20*MyNode%20%7B%0A%20%20%20%20return%20%26MyNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithMaxRetries(5)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithWait(time.Second)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Override%20only%20the%20methods%20you%20need%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20exec%20logic%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ANodes%20should%20be%20thread-safe%20if%20used%20in%20concurrent%20batch%20operations%3A%0A%0A%60%60%60go%0Atype%20SafeNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20counter%20int%0A%7D%0A%0Afunc%20(n%20*SafeNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20count%20%3A%3D%20n.counter%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20count)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Single%20Responsibility**%3A%20Each%20node%20should%20do%20one%20thing%20well%0A2.%20**Idempotency**%3A%20Design%20nodes%20to%20be%20safely%20retryable%0A3.%20**Context%20Handling**%3A%20Always%20respect%20context%20cancellation%0A4.%20**Error%20Handling**%3A%20Return%20clear%2C%20actionable%20errors%0A5.%20**Resource%20Management**%3A%20Clean%20up%20resources%20in%20defer%20blocks%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20into%20workflows%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./nodes-DLqRp1yq.js"),[]),path:"/concepts/nodes.html",type:"mdx",filePath:"concepts/nodes.mdx",content:"%23%20Nodes%0A%0ANodes%20are%20the%20fundamental%20building%20blocks%20of%20Flyt%20workflows.%20Each%20node%20represents%20a%20single%20unit%20of%20work%20with%20a%20well-defined%20lifecycle.%0A%0A%23%23%20Node%20Lifecycle%0A%0AEvery%20node%20has%20three%20phases%20that%20execute%20in%20order%3A%0A%0A%23%23%23%201.%20Prep%20Phase%0A%0AThe%20preparation%20phase%20reads%20from%20the%20SharedStore%20and%20prepares%20data%20for%20execution.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Read%20configuration%20or%20input%20data%0A%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22config%22)%0A%20%20%20%20input%2C%20_%20%3A%3D%20shared.Get(%22input_data%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prepare%20and%20return%20data%20for%20Exec%20phase%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22config%22%3A%20config%2C%0A%20%20%20%20%20%20%20%20%22input%22%3A%20input%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Exec%20Phase%0A%0AThe%20execution%20phase%20performs%20the%20main%20work.%20This%20phase%20can%20be%20retried%20on%20failure.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20the%20main%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20processData(data%5B%22input%22%5D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20retry%20if%20configured%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%203.%20Post%20Phase%0A%0AThe%20post-processing%20phase%20handles%20results%20and%20determines%20the%20next%20action.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20shared.Set(%22output%22%2C%20execResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20next%20action%20based%20on%20results%0A%20%20%20%20if%20isValid(execResult)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22failure%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Creating%20Nodes%0A%0A%23%23%23%20Using%20Helper%20Functions%0A%0AThe%20simplest%20way%20to%20create%20a%20node%3A%0A%0A%60%60%60go%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Prep%20logic%0A%20%20%20%20%20%20%20%20return%20prepData%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Exec%20logic%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Post%20logic%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%23%20Custom%20Node%20Types%0A%0AFor%20complex%20nodes%20with%20state%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseNode(db%20*sql.DB)%20*DatabaseNode%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20db%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20rows%2C%20err%20%3A%3D%20n.db.QueryContext(ctx%2C%20query)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Node%20Options%0A%0AConfigure%20node%20behavior%20with%20options%3A%0A%0A%60%60%60go%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(execFunc)%2C%0A%20%20%20%20flyt.WithMaxRetries(3)%2C%20%20%20%20%20%20%20%20%2F%2F%20Retry%20up%20to%203%20times%0A%20%20%20%20flyt.WithWait(time.Second%20*%202)%2C%20%2F%2F%20Wait%202%20seconds%20between%20retries%0A)%0A%60%60%60%0A%0A%23%23%20BaseNode%0A%0AThe%20%60BaseNode%60%20provides%20default%20implementations%3A%0A%0A%60%60%60go%0Atype%20MyNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20%2F%2F%20Add%20custom%20fields%0A%7D%0A%0Afunc%20NewMyNode()%20*MyNode%20%7B%0A%20%20%20%20return%20%26MyNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithMaxRetries(5)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithWait(time.Second)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Override%20only%20the%20methods%20you%20need%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20exec%20logic%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ANodes%20should%20be%20thread-safe%20if%20used%20in%20concurrent%20batch%20operations%3A%0A%0A%60%60%60go%0Atype%20SafeNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20counter%20int%0A%7D%0A%0Afunc%20(n%20*SafeNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20count%20%3A%3D%20n.counter%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20count)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Single%20Responsibility**%3A%20Each%20node%20should%20do%20one%20thing%20well%0A2.%20**Idempotency**%3A%20Design%20nodes%20to%20be%20safely%20retryable%0A3.%20**Context%20Handling**%3A%20Always%20respect%20context%20cancellation%0A4.%20**Error%20Handling**%3A%20Return%20clear%2C%20actionable%20errors%0A5.%20**Resource%20Management**%3A%20Clean%20up%20resources%20in%20defer%20blocks%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20into%20workflows%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./shared-store-hJChM-o1.js"),[]),path:"/concepts/shared-store",type:"mdx",filePath:"concepts/shared-store.mdx",content:"%23%20Shared%20Store%0A%0AThe%20SharedStore%20provides%20thread-safe%20data%20sharing%20between%20nodes%20in%20a%20flow.%20It%20acts%20as%20a%20key-value%20store%20that%20persists%20throughout%20flow%20execution.%0A%0A%23%23%20Creating%20a%20SharedStore%0A%0A%60%60%60go%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%60%60%60%0A%0A%23%23%20Basic%20Operations%0A%0A%23%23%23%20Set%20and%20Get%0A%0AStore%20and%20retrieve%20individual%20values%3A%0A%0A%60%60%60go%0A%2F%2F%20Set%20a%20value%0Ashared.Set(%22user_id%22%2C%20123)%0Ashared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%22timeout%22%3A%2030%7D)%0A%0A%2F%2F%20Get%20a%20value%0Aif%20value%2C%20ok%20%3A%3D%20shared.Get(%22user_id%22)%3B%20ok%20%7B%0A%20%20%20%20userID%20%3A%3D%20value.(int)%0A%20%20%20%20fmt.Printf(%22User%20ID%3A%20%25d%5Cn%22%2C%20userID)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20GetAll%0A%0AGet%20a%20copy%20of%20all%20stored%20data%3A%0A%0A%60%60%60go%0AallData%20%3A%3D%20shared.GetAll()%0Afor%20key%2C%20value%20%3A%3D%20range%20allData%20%7B%0A%20%20%20%20fmt.Printf(%22%25s%3A%20%25v%5Cn%22%2C%20key%2C%20value)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%0A%0AMerge%20multiple%20values%20at%20once%3A%0A%0A%60%60%60go%0Ashared.Merge(map%5Bstring%5Dany%7B%0A%20%20%20%20%22status%22%3A%20%22active%22%2C%0A%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%22metadata%22%3A%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0%22%2C%0A%20%20%20%20%20%20%20%20%22env%22%3A%20%22production%22%2C%0A%20%20%20%20%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ASharedStore%20is%20safe%20for%20concurrent%20access%3A%0A%0A%60%60%60go%0Avar%20wg%20sync.WaitGroup%0A%0A%2F%2F%20Multiple%20goroutines%20can%20safely%20access%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20wg.Add(1)%0A%20%20%20%20go%20func(id%20int)%20%7B%0A%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20shared.Set(fmt.Sprintf(%22worker_%25d%22%2C%20id)%2C%20%22done%22)%0A%20%20%20%20%7D(i)%0A%7D%0A%0Awg.Wait()%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Configuration%20Storage%0A%0AStore%20configuration%20that%20multiple%20nodes%20need%3A%0A%0A%60%60%60go%0A%2F%2F%20In%20main%20or%20initial%20node%0Ashared.Set(%22api_config%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22base_url%22%3A%20%22https%3A%2F%2Fapi.example.com%22%2C%0A%20%20%20%20%22api_key%22%3A%20os.Getenv(%22API_KEY%22)%2C%0A%20%20%20%20%22timeout%22%3A%20%2230s%22%2C%0A%7D)%0A%0A%2F%2F%20In%20any%20node%0Afunc%20(n%20*APINode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22api_config%22)%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Accumulating%20Results%0A%0ACollect%20results%20from%20multiple%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Node%201%0Afunc%20(n%20*Node1)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20results%2C%20_%20%3A%3D%20shared.Get(%22results%22)%0A%20%20%20%20if%20results%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20results%20%3D%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultList%20%3A%3D%20results.(%5B%5Dany)%0A%20%20%20%20resultList%20%3D%20append(resultList%2C%20execResult)%0A%20%20%20%20shared.Set(%22results%22%2C%20resultList)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Management%0A%0ATrack%20workflow%20state%3A%0A%0A%60%60%60go%0A%2F%2F%20Initialize%20state%0Ashared.Set(%22workflow_state%22%2C%20%22initialized%22)%0Ashared.Set(%22retry_count%22%2C%200)%0Ashared.Set(%22start_time%22%2C%20time.Now())%0A%0A%2F%2F%20Update%20state%20in%20nodes%0Afunc%20updateState(shared%20*flyt.SharedStore%2C%20newState%20string)%20%7B%0A%20%20%20%20shared.Set(%22workflow_state%22%2C%20newState)%0A%20%20%20%20shared.Set(%22last_update%22%2C%20time.Now())%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Context%0A%0AStore%20error%20information%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ErrorHandler)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22node%22%3A%20%22ProcessNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20prepResult%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%0A%0ASharedStore%20in%20batch%20operations%3A%0A%0A%60%60%60go%0A%2F%2F%20Store%20items%20to%20process%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0A%2F%2F%20Store%20batch%20configuration%0Ashared.Set(%22batch_config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%22batch_size%22%3A%2010%2C%0A%20%20%20%20%22concurrent%22%3A%20true%2C%0A%20%20%20%20%22timeout%22%3A%2060%2C%0A%7D)%0A%0A%2F%2F%20After%20batch%20processing%0Aresults%2C%20_%20%3A%3D%20shared.Get(%22results%22)%0Aerrors%2C%20_%20%3A%3D%20shared.Get(%22errors%22)%0A%60%60%60%0A%0A%23%23%20Isolation%20in%20Batch%20Flows%0A%0AEach%20flow%20in%20a%20batch%20has%20its%20own%20SharedStore%3A%0A%0A%60%60%60go%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20This%20shared%20is%20from%20the%20parent%0A%20%20%20%20baseConfig%2C%20_%20%3A%3D%20shared.Get(%22base_config%22)%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dflyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%7B%22id%22%3A%201%2C%20%22config%22%3A%20baseConfig%7D%2C%20%2F%2F%20Each%20gets%20own%20SharedStore%0A%20%20%20%20%20%20%20%20%7B%22id%22%3A%202%2C%20%22config%22%3A%20baseConfig%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A%23%23%23%201.%20Type%20Safety%0A%0AUse%20type%20assertions%20carefully%3A%0A%0A%60%60%60go%0A%2F%2F%20Safe%20type%20assertion%0Aif%20value%2C%20ok%20%3A%3D%20shared.Get(%22count%22)%3B%20ok%20%7B%0A%20%20%20%20if%20count%2C%20ok%20%3A%3D%20value.(int)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20count%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20type%20mismatch%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Key%20Naming%0A%0AUse%20consistent%2C%20descriptive%20keys%3A%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20KeyUserID%20%20%20%20%20%3D%20%22user_id%22%0A%20%20%20%20KeyAuthToken%20%20%3D%20%22auth_token%22%0A%20%20%20%20KeyResults%20%20%20%20%3D%20%22processing_results%22%0A%20%20%20%20KeyErrorCount%20%3D%20%22error_count%22%0A)%0A%60%60%60%0A%0A%23%23%23%203.%20Data%20Structure%0A%0AStore%20structured%20data%20for%20clarity%3A%0A%0A%60%60%60go%0Atype%20WorkflowContext%20struct%20%7B%0A%20%20%20%20RequestID%20string%0A%20%20%20%20UserID%20%20%20%20int%0A%20%20%20%20StartTime%20time.Time%0A%20%20%20%20Metadata%20%20map%5Bstring%5Dstring%0A%7D%0A%0Ashared.Set(%22context%22%2C%20WorkflowContext%7B%0A%20%20%20%20RequestID%3A%20%22req-123%22%2C%0A%20%20%20%20UserID%3A%20%20%20%20456%2C%0A%20%20%20%20StartTime%3A%20time.Now()%2C%0A%20%20%20%20Metadata%3A%20%20map%5Bstring%5Dstring%7B%22source%22%3A%20%22api%22%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%23%204.%20Cleanup%0A%0AClear%20sensitive%20data%20when%20done%3A%0A%0A%60%60%60go%0Adefer%20func()%20%7B%0A%20%20%20%20%2F%2F%20Clear%20sensitive%20data%0A%20%20%20%20shared.Set(%22auth_token%22%2C%20nil)%0A%20%20%20%20shared.Set(%22api_key%22%2C%20nil)%0A%7D()%0A%60%60%60%0A%0A%23%23%23%205.%20Documentation%0A%0ADocument%20expected%20keys%3A%0A%0A%60%60%60go%0A%2F%2F%20SharedStore%20keys%20used%20by%20this%20flow%3A%0A%2F%2F%20-%20%22input_file%22%3A%20string%20-%20Path%20to%20input%20file%0A%2F%2F%20-%20%22output_dir%22%3A%20string%20-%20Output%20directory%20path%0A%2F%2F%20-%20%22processed_count%22%3A%20int%20-%20Number%20of%20processed%20items%0A%2F%2F%20-%20%22errors%22%3A%20%5B%5Derror%20-%20Collection%20of%20errors%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0AUse%20GetAll%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20debugSharedStore(shared%20*flyt.SharedStore)%20%7B%0A%20%20%20%20data%20%3A%3D%20shared.GetAll()%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%20SharedStore%20Contents%20%3D%3D%3D%22)%0A%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%25s%3A%20%25T%20%3D%20%25v%5Cn%22%2C%20k%2C%20v%2C%20v)%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Use%20SharedStore%20in%20node%20lifecycle%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20SharedStore%20in%20batch%20operations%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20Flyt%20best%20practices",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./shared-store-hJChM-o1.js"),[]),path:"/concepts/shared-store.html",type:"mdx",filePath:"concepts/shared-store.mdx",content:"%23%20Shared%20Store%0A%0AThe%20SharedStore%20provides%20thread-safe%20data%20sharing%20between%20nodes%20in%20a%20flow.%20It%20acts%20as%20a%20key-value%20store%20that%20persists%20throughout%20flow%20execution.%0A%0A%23%23%20Creating%20a%20SharedStore%0A%0A%60%60%60go%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%60%60%60%0A%0A%23%23%20Basic%20Operations%0A%0A%23%23%23%20Set%20and%20Get%0A%0AStore%20and%20retrieve%20individual%20values%3A%0A%0A%60%60%60go%0A%2F%2F%20Set%20a%20value%0Ashared.Set(%22user_id%22%2C%20123)%0Ashared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%22timeout%22%3A%2030%7D)%0A%0A%2F%2F%20Get%20a%20value%0Aif%20value%2C%20ok%20%3A%3D%20shared.Get(%22user_id%22)%3B%20ok%20%7B%0A%20%20%20%20userID%20%3A%3D%20value.(int)%0A%20%20%20%20fmt.Printf(%22User%20ID%3A%20%25d%5Cn%22%2C%20userID)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20GetAll%0A%0AGet%20a%20copy%20of%20all%20stored%20data%3A%0A%0A%60%60%60go%0AallData%20%3A%3D%20shared.GetAll()%0Afor%20key%2C%20value%20%3A%3D%20range%20allData%20%7B%0A%20%20%20%20fmt.Printf(%22%25s%3A%20%25v%5Cn%22%2C%20key%2C%20value)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%0A%0AMerge%20multiple%20values%20at%20once%3A%0A%0A%60%60%60go%0Ashared.Merge(map%5Bstring%5Dany%7B%0A%20%20%20%20%22status%22%3A%20%22active%22%2C%0A%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%22metadata%22%3A%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0%22%2C%0A%20%20%20%20%20%20%20%20%22env%22%3A%20%22production%22%2C%0A%20%20%20%20%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ASharedStore%20is%20safe%20for%20concurrent%20access%3A%0A%0A%60%60%60go%0Avar%20wg%20sync.WaitGroup%0A%0A%2F%2F%20Multiple%20goroutines%20can%20safely%20access%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20wg.Add(1)%0A%20%20%20%20go%20func(id%20int)%20%7B%0A%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20shared.Set(fmt.Sprintf(%22worker_%25d%22%2C%20id)%2C%20%22done%22)%0A%20%20%20%20%7D(i)%0A%7D%0A%0Awg.Wait()%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Configuration%20Storage%0A%0AStore%20configuration%20that%20multiple%20nodes%20need%3A%0A%0A%60%60%60go%0A%2F%2F%20In%20main%20or%20initial%20node%0Ashared.Set(%22api_config%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22base_url%22%3A%20%22https%3A%2F%2Fapi.example.com%22%2C%0A%20%20%20%20%22api_key%22%3A%20os.Getenv(%22API_KEY%22)%2C%0A%20%20%20%20%22timeout%22%3A%20%2230s%22%2C%0A%7D)%0A%0A%2F%2F%20In%20any%20node%0Afunc%20(n%20*APINode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22api_config%22)%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Accumulating%20Results%0A%0ACollect%20results%20from%20multiple%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Node%201%0Afunc%20(n%20*Node1)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20results%2C%20_%20%3A%3D%20shared.Get(%22results%22)%0A%20%20%20%20if%20results%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20results%20%3D%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20resultList%20%3A%3D%20results.(%5B%5Dany)%0A%20%20%20%20resultList%20%3D%20append(resultList%2C%20execResult)%0A%20%20%20%20shared.Set(%22results%22%2C%20resultList)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Management%0A%0ATrack%20workflow%20state%3A%0A%0A%60%60%60go%0A%2F%2F%20Initialize%20state%0Ashared.Set(%22workflow_state%22%2C%20%22initialized%22)%0Ashared.Set(%22retry_count%22%2C%200)%0Ashared.Set(%22start_time%22%2C%20time.Now())%0A%0A%2F%2F%20Update%20state%20in%20nodes%0Afunc%20updateState(shared%20*flyt.SharedStore%2C%20newState%20string)%20%7B%0A%20%20%20%20shared.Set(%22workflow_state%22%2C%20newState)%0A%20%20%20%20shared.Set(%22last_update%22%2C%20time.Now())%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Context%0A%0AStore%20error%20information%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ErrorHandler)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22node%22%3A%20%22ProcessNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20prepResult%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%0A%0ASharedStore%20in%20batch%20operations%3A%0A%0A%60%60%60go%0A%2F%2F%20Store%20items%20to%20process%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0A%2F%2F%20Store%20batch%20configuration%0Ashared.Set(%22batch_config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%22batch_size%22%3A%2010%2C%0A%20%20%20%20%22concurrent%22%3A%20true%2C%0A%20%20%20%20%22timeout%22%3A%2060%2C%0A%7D)%0A%0A%2F%2F%20After%20batch%20processing%0Aresults%2C%20_%20%3A%3D%20shared.Get(%22results%22)%0Aerrors%2C%20_%20%3A%3D%20shared.Get(%22errors%22)%0A%60%60%60%0A%0A%23%23%20Isolation%20in%20Batch%20Flows%0A%0AEach%20flow%20in%20a%20batch%20has%20its%20own%20SharedStore%3A%0A%0A%60%60%60go%0AbatchFunc%20%3A%3D%20func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.FlowInputs%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20This%20shared%20is%20from%20the%20parent%0A%20%20%20%20baseConfig%2C%20_%20%3A%3D%20shared.Get(%22base_config%22)%0A%20%20%20%20%0A%20%20%20%20return%20%5B%5Dflyt.FlowInputs%7B%0A%20%20%20%20%20%20%20%20%7B%22id%22%3A%201%2C%20%22config%22%3A%20baseConfig%7D%2C%20%2F%2F%20Each%20gets%20own%20SharedStore%0A%20%20%20%20%20%20%20%20%7B%22id%22%3A%202%2C%20%22config%22%3A%20baseConfig%7D%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A%23%23%23%201.%20Type%20Safety%0A%0AUse%20type%20assertions%20carefully%3A%0A%0A%60%60%60go%0A%2F%2F%20Safe%20type%20assertion%0Aif%20value%2C%20ok%20%3A%3D%20shared.Get(%22count%22)%3B%20ok%20%7B%0A%20%20%20%20if%20count%2C%20ok%20%3A%3D%20value.(int)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20count%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Handle%20type%20mismatch%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Key%20Naming%0A%0AUse%20consistent%2C%20descriptive%20keys%3A%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20KeyUserID%20%20%20%20%20%3D%20%22user_id%22%0A%20%20%20%20KeyAuthToken%20%20%3D%20%22auth_token%22%0A%20%20%20%20KeyResults%20%20%20%20%3D%20%22processing_results%22%0A%20%20%20%20KeyErrorCount%20%3D%20%22error_count%22%0A)%0A%60%60%60%0A%0A%23%23%23%203.%20Data%20Structure%0A%0AStore%20structured%20data%20for%20clarity%3A%0A%0A%60%60%60go%0Atype%20WorkflowContext%20struct%20%7B%0A%20%20%20%20RequestID%20string%0A%20%20%20%20UserID%20%20%20%20int%0A%20%20%20%20StartTime%20time.Time%0A%20%20%20%20Metadata%20%20map%5Bstring%5Dstring%0A%7D%0A%0Ashared.Set(%22context%22%2C%20WorkflowContext%7B%0A%20%20%20%20RequestID%3A%20%22req-123%22%2C%0A%20%20%20%20UserID%3A%20%20%20%20456%2C%0A%20%20%20%20StartTime%3A%20time.Now()%2C%0A%20%20%20%20Metadata%3A%20%20map%5Bstring%5Dstring%7B%22source%22%3A%20%22api%22%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%23%204.%20Cleanup%0A%0AClear%20sensitive%20data%20when%20done%3A%0A%0A%60%60%60go%0Adefer%20func()%20%7B%0A%20%20%20%20%2F%2F%20Clear%20sensitive%20data%0A%20%20%20%20shared.Set(%22auth_token%22%2C%20nil)%0A%20%20%20%20shared.Set(%22api_key%22%2C%20nil)%0A%7D()%0A%60%60%60%0A%0A%23%23%23%205.%20Documentation%0A%0ADocument%20expected%20keys%3A%0A%0A%60%60%60go%0A%2F%2F%20SharedStore%20keys%20used%20by%20this%20flow%3A%0A%2F%2F%20-%20%22input_file%22%3A%20string%20-%20Path%20to%20input%20file%0A%2F%2F%20-%20%22output_dir%22%3A%20string%20-%20Output%20directory%20path%0A%2F%2F%20-%20%22processed_count%22%3A%20int%20-%20Number%20of%20processed%20items%0A%2F%2F%20-%20%22errors%22%3A%20%5B%5Derror%20-%20Collection%20of%20errors%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0AUse%20GetAll%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20debugSharedStore(shared%20*flyt.SharedStore)%20%7B%0A%20%20%20%20data%20%3A%3D%20shared.GetAll()%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%20SharedStore%20Contents%20%3D%3D%3D%22)%0A%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%25s%3A%20%25T%20%3D%20%25v%5Cn%22%2C%20k%2C%20v%2C%20v)%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Use%20SharedStore%20in%20node%20lifecycle%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20SharedStore%20in%20batch%20operations%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20Flyt%20best%20practices",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./installation-C904chFI.js"),[]),path:"/getting-started/installation",type:"mdx",filePath:"getting-started/installation.mdx",content:"%23%20Installation%0A%0AFlyt%20requires%20Go%201.21%20or%20later.%0A%0A%23%23%20Install%20with%20go%20get%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fflyt%0A%60%60%60%0A%0A%23%23%20Import%20in%20your%20code%0A%0A%60%60%60go%0Aimport%20%22github.com%2Fmark3labs%2Fflyt%22%0A%60%60%60%0A%0A%23%23%20Verify%20installation%0A%0ACreate%20a%20simple%20test%20file%20to%20verify%20the%20installation%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22test%22%2C%20%22success%22)%0A%20%20%20%20%0A%20%20%20%20if%20val%2C%20ok%20%3A%3D%20shared.Get(%22test%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Flyt%20installed%20successfully!%20Value%3A%20%25v%5Cn%22%2C%20val)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0ARun%20it%3A%0A%0A%60%60%60bash%0Ago%20run%20main.go%0A%60%60%60%0A%0AYou%20should%20see%3A%0A%60%60%60%0AFlyt%20installed%20successfully!%20Value%3A%20success%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BQuick%20Start%20Guide%5D(%2Fgetting-started%2Fquick-start)%20-%20Build%20your%20first%20workflow%0A-%20%5BProject%20Template%5D(%2Fgetting-started%2Ftemplate)%20-%20Start%20with%20a%20pre-configured%20project%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20the%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./installation-C904chFI.js"),[]),path:"/getting-started/installation.html",type:"mdx",filePath:"getting-started/installation.mdx",content:"%23%20Installation%0A%0AFlyt%20requires%20Go%201.21%20or%20later.%0A%0A%23%23%20Install%20with%20go%20get%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fflyt%0A%60%60%60%0A%0A%23%23%20Import%20in%20your%20code%0A%0A%60%60%60go%0Aimport%20%22github.com%2Fmark3labs%2Fflyt%22%0A%60%60%60%0A%0A%23%23%20Verify%20installation%0A%0ACreate%20a%20simple%20test%20file%20to%20verify%20the%20installation%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22test%22%2C%20%22success%22)%0A%20%20%20%20%0A%20%20%20%20if%20val%2C%20ok%20%3A%3D%20shared.Get(%22test%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Flyt%20installed%20successfully!%20Value%3A%20%25v%5Cn%22%2C%20val)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0ARun%20it%3A%0A%0A%60%60%60bash%0Ago%20run%20main.go%0A%60%60%60%0A%0AYou%20should%20see%3A%0A%60%60%60%0AFlyt%20installed%20successfully!%20Value%3A%20success%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BQuick%20Start%20Guide%5D(%2Fgetting-started%2Fquick-start)%20-%20Build%20your%20first%20workflow%0A-%20%5BProject%20Template%5D(%2Fgetting-started%2Ftemplate)%20-%20Start%20with%20a%20pre-configured%20project%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20the%20fundamentals",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./quick-start-B5CFRLf2.js"),[]),path:"/getting-started/quick-start",type:"mdx",filePath:"getting-started/quick-start.mdx",content:"%23%20Quick%20Start%0A%0AThis%20guide%20will%20help%20you%20build%20your%20first%20Flyt%20workflow%20in%205%20minutes.%0A%0A%23%23%20Your%20First%20Node%0A%0ALet's%20start%20with%20a%20simple%20node%20that%20processes%20data%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20node%20with%20just%20an%20Exec%20function%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Hello%2C%20Flyt!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20and%20context%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Run%20the%20node%0A%20%20%20%20action%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Completed%20with%20action%3A%20%25s%5Cn%22%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Building%20a%20Flow%0A%0ANow%20let's%20create%20a%20simple%20workflow%20with%20multiple%20nodes%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20fetchNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Fetching%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dstring%7B%22data%22%3A%20%22important%20info%22%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22fetched_data%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20processNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20_%20%3A%3D%20shared.Get(%22fetched_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dstring)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Processing%3A%20%25v%5Cn%22%2C%20data%5B%22data%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22processed%3A%20%22%20%2B%20data%5B%22data%22%5D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%0A%20%20%20%20%2F%2F%20Run%20the%20flow%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Println(%22Flow%20completed%20successfully!%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Adding%20Error%20Handling%0A%0ALet's%20add%20retry%20logic%20and%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createRobustNode()%20flyt.Node%20%7B%0A%20%20%20%20attempts%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attempts%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Attempt%20%25d...%5Cn%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20flaky%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3C%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22temporary%20failure%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Success!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithMaxRetries(3)%2C%0A%20%20%20%20%20%20%20%20flyt.WithWait(time.Second)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Shared%20Store%0A%0AThe%20SharedStore%20allows%20nodes%20to%20communicate%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20initial%20data%0A%20%20%20%20shared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%2030%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%203%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22config%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Using%20config%3A%20%25v%5Cn%22%2C%20config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22configured%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you've%20built%20your%20first%20workflow%2C%20explore%3A%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Deep%20dive%20into%20node%20lifecycle%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20workflows%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20Real-world%20use%20cases",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./quick-start-B5CFRLf2.js"),[]),path:"/getting-started/quick-start.html",type:"mdx",filePath:"getting-started/quick-start.mdx",content:"%23%20Quick%20Start%0A%0AThis%20guide%20will%20help%20you%20build%20your%20first%20Flyt%20workflow%20in%205%20minutes.%0A%0A%23%23%20Your%20First%20Node%0A%0ALet's%20start%20with%20a%20simple%20node%20that%20processes%20data%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20node%20with%20just%20an%20Exec%20function%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Hello%2C%20Flyt!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20and%20context%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Run%20the%20node%0A%20%20%20%20action%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Completed%20with%20action%3A%20%25s%5Cn%22%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Building%20a%20Flow%0A%0ANow%20let's%20create%20a%20simple%20workflow%20with%20multiple%20nodes%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20fetchNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Fetching%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dstring%7B%22data%22%3A%20%22important%20info%22%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22fetched_data%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20processNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20_%20%3A%3D%20shared.Get(%22fetched_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dstring)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Processing%3A%20%25v%5Cn%22%2C%20data%5B%22data%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22processed%3A%20%22%20%2B%20data%5B%22data%22%5D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%0A%20%20%20%20%2F%2F%20Run%20the%20flow%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Println(%22Flow%20completed%20successfully!%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Adding%20Error%20Handling%0A%0ALet's%20add%20retry%20logic%20and%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createRobustNode()%20flyt.Node%20%7B%0A%20%20%20%20attempts%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attempts%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Attempt%20%25d...%5Cn%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20flaky%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3C%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22temporary%20failure%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Success!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithMaxRetries(3)%2C%0A%20%20%20%20%20%20%20%20flyt.WithWait(time.Second)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Shared%20Store%0A%0AThe%20SharedStore%20allows%20nodes%20to%20communicate%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20initial%20data%0A%20%20%20%20shared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%2030%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%203%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%2C%20_%20%3A%3D%20shared.Get(%22config%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Using%20config%3A%20%25v%5Cn%22%2C%20config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22configured%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you've%20built%20your%20first%20workflow%2C%20explore%3A%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Deep%20dive%20into%20node%20lifecycle%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20workflows%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20Real-world%20use%20cases",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./template-Bo114j8R.js"),[]),path:"/getting-started/template",type:"mdx",filePath:"getting-started/template.mdx",content:"%23%20Project%20Template%0A%0AThe%20fastest%20way%20to%20start%20a%20new%20Flyt%20project%20is%20using%20the%20official%20template.%0A%0A%23%23%20Quick%20Setup%0A%0A%60%60%60bash%0A%23%20Clone%20the%20template%0Agit%20clone%20https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt-project-template%20my-flyt-project%0Acd%20my-flyt-project%0A%0A%23%20Remove%20template%20git%20history%0Arm%20-rf%20.git%0Agit%20init%0A%0A%23%20Install%20dependencies%0Ago%20mod%20tidy%0A%0A%23%20Run%20the%20example%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20What's%20Included%0A%0AThe%20template%20provides%3A%0A%0A%23%23%23%20Project%20Structure%0A%0A%60%60%60%0Amy-flyt-project%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20main.go%20%20%20%20%20%20%20%20%20%20%20%23%20Entry%20point%20with%20example%20workflow%0A%E2%94%9C%E2%94%80%E2%94%80%20nodes%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Custom%20node%20implementations%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20fetch.go%20%20%20%20%20%20%23%20Example%20fetch%20node%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20process.go%20%20%20%20%23%20Example%20processing%20node%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20validate.go%20%20%20%23%20Example%20validation%20node%0A%E2%94%9C%E2%94%80%E2%94%80%20flows%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reusable%20flow%20definitions%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20example.go%20%20%20%20%23%20Example%20flow%20composition%0A%E2%94%9C%E2%94%80%E2%94%80%20go.mod%20%20%20%20%20%20%20%20%20%20%20%20%23%20Go%20module%20file%0A%E2%94%94%E2%94%80%E2%94%80%20README.md%20%20%20%20%20%20%20%20%20%23%20Project%20documentation%0A%60%60%60%0A%0A%23%23%23%20Example%20Code%0A%0AThe%20template%20includes%20a%20working%20example%20that%20demonstrates%3A%0A%0A-%20Creating%20custom%20nodes%0A-%20Building%20flows%0A-%20Using%20the%20SharedStore%0A-%20Error%20handling%20with%20retries%0A-%20Action-based%20routing%0A%0A%23%23%23%20main.go%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fflows%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20with%20initial%20data%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22api_key%22%2C%20%22your-api-key%22)%0A%20%20%20%20shared.Set(%22base_url%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20and%20run%20the%20example%20flow%0A%20%20%20%20flow%20%3A%3D%20flows.CreateExampleFlow()%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Get%20results%0A%20%20%20%20if%20result%2C%20ok%20%3A%3D%20shared.Get(%22final_result%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Success!%20Result%3A%20%25v%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Customizing%20the%20Template%0A%0A%23%23%23%20Adding%20New%20Nodes%0A%0ACreate%20a%20new%20file%20in%20the%20%60nodes%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20nodes%2Fcustom.go%0Apackage%20nodes%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20CreateCustomNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Your%20custom%20logic%20here%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22custom%20result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Creating%20New%20Flows%0A%0AAdd%20flows%20to%20the%20%60flows%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20flows%2Fcustom.go%0Apackage%20flows%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fnodes%22%0A)%0A%0Afunc%20CreateCustomFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20startNode%20%3A%3D%20nodes.CreateCustomNode()%0A%20%20%20%20processNode%20%3A%3D%20nodes.CreateProcessNode()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20flow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0AWhen%20using%20the%20template%3A%0A%0A1.%20**Organize%20by%20Feature**%3A%20Group%20related%20nodes%20and%20flows%20together%0A2.%20**Use%20Configuration**%3A%20Store%20config%20in%20SharedStore%20or%20environment%20variables%0A3.%20**Add%20Tests**%3A%20Create%20%60*_test.go%60%20files%20for%20your%20nodes%20and%20flows%0A4.%20**Document%20Your%20Nodes**%3A%20Add%20comments%20explaining%20what%20each%20node%20does%0A5.%20**Version%20Control**%3A%20Initialize%20git%20and%20commit%20regularly%0A%0A%23%23%20Deployment%0A%0AThe%20template%20is%20ready%20for%20deployment%3A%0A%0A%60%60%60bash%0A%23%20Build%20the%20binary%0Ago%20build%20-o%20myapp%0A%0A%23%20Run%20in%20production%0A.%2Fmyapp%0A%0A%23%20Or%20use%20Docker%0Adocker%20build%20-t%20myapp%20.%0Adocker%20run%20myapp%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20Flyt%20fundamentals%0A-%20%5BPatterns%5D(%2Fpatterns%2Fclosures)%20-%20Learn%20common%20patterns%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20real-world%20implementations",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./template-Bo114j8R.js"),[]),path:"/getting-started/template.html",type:"mdx",filePath:"getting-started/template.mdx",content:"%23%20Project%20Template%0A%0AThe%20fastest%20way%20to%20start%20a%20new%20Flyt%20project%20is%20using%20the%20official%20template.%0A%0A%23%23%20Quick%20Setup%0A%0A%60%60%60bash%0A%23%20Clone%20the%20template%0Agit%20clone%20https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt-project-template%20my-flyt-project%0Acd%20my-flyt-project%0A%0A%23%20Remove%20template%20git%20history%0Arm%20-rf%20.git%0Agit%20init%0A%0A%23%20Install%20dependencies%0Ago%20mod%20tidy%0A%0A%23%20Run%20the%20example%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20What's%20Included%0A%0AThe%20template%20provides%3A%0A%0A%23%23%23%20Project%20Structure%0A%0A%60%60%60%0Amy-flyt-project%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20main.go%20%20%20%20%20%20%20%20%20%20%20%23%20Entry%20point%20with%20example%20workflow%0A%E2%94%9C%E2%94%80%E2%94%80%20nodes%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Custom%20node%20implementations%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20fetch.go%20%20%20%20%20%20%23%20Example%20fetch%20node%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20process.go%20%20%20%20%23%20Example%20processing%20node%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20validate.go%20%20%20%23%20Example%20validation%20node%0A%E2%94%9C%E2%94%80%E2%94%80%20flows%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reusable%20flow%20definitions%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20example.go%20%20%20%20%23%20Example%20flow%20composition%0A%E2%94%9C%E2%94%80%E2%94%80%20go.mod%20%20%20%20%20%20%20%20%20%20%20%20%23%20Go%20module%20file%0A%E2%94%94%E2%94%80%E2%94%80%20README.md%20%20%20%20%20%20%20%20%20%23%20Project%20documentation%0A%60%60%60%0A%0A%23%23%23%20Example%20Code%0A%0AThe%20template%20includes%20a%20working%20example%20that%20demonstrates%3A%0A%0A-%20Creating%20custom%20nodes%0A-%20Building%20flows%0A-%20Using%20the%20SharedStore%0A-%20Error%20handling%20with%20retries%0A-%20Action-based%20routing%0A%0A%23%23%23%20main.go%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fflows%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20with%20initial%20data%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22api_key%22%2C%20%22your-api-key%22)%0A%20%20%20%20shared.Set(%22base_url%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20and%20run%20the%20example%20flow%0A%20%20%20%20flow%20%3A%3D%20flows.CreateExampleFlow()%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Get%20results%0A%20%20%20%20if%20result%2C%20ok%20%3A%3D%20shared.Get(%22final_result%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Success!%20Result%3A%20%25v%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Customizing%20the%20Template%0A%0A%23%23%23%20Adding%20New%20Nodes%0A%0ACreate%20a%20new%20file%20in%20the%20%60nodes%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20nodes%2Fcustom.go%0Apackage%20nodes%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20CreateCustomNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Your%20custom%20logic%20here%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22custom%20result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Creating%20New%20Flows%0A%0AAdd%20flows%20to%20the%20%60flows%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20flows%2Fcustom.go%0Apackage%20flows%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fnodes%22%0A)%0A%0Afunc%20CreateCustomFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20startNode%20%3A%3D%20nodes.CreateCustomNode()%0A%20%20%20%20processNode%20%3A%3D%20nodes.CreateProcessNode()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20flow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0AWhen%20using%20the%20template%3A%0A%0A1.%20**Organize%20by%20Feature**%3A%20Group%20related%20nodes%20and%20flows%20together%0A2.%20**Use%20Configuration**%3A%20Store%20config%20in%20SharedStore%20or%20environment%20variables%0A3.%20**Add%20Tests**%3A%20Create%20%60*_test.go%60%20files%20for%20your%20nodes%20and%20flows%0A4.%20**Document%20Your%20Nodes**%3A%20Add%20comments%20explaining%20what%20each%20node%20does%0A5.%20**Version%20Control**%3A%20Initialize%20git%20and%20commit%20regularly%0A%0A%23%23%20Deployment%0A%0AThe%20template%20is%20ready%20for%20deployment%3A%0A%0A%60%60%60bash%0A%23%20Build%20the%20binary%0Ago%20build%20-o%20myapp%0A%0A%23%20Run%20in%20production%0A.%2Fmyapp%0A%0A%23%20Or%20use%20Docker%0Adocker%20build%20-t%20myapp%20.%0Adocker%20run%20myapp%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20Flyt%20fundamentals%0A-%20%5BPatterns%5D(%2Fpatterns%2Fclosures)%20-%20Learn%20common%20patterns%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20real-world%20implementations",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./branching-DFD_bqEJ.js"),[]),path:"/patterns/branching",type:"mdx",filePath:"patterns/branching.mdx",content:"%23%20Conditional%20Branching%0A%0AControl%20flow%20execution%20dynamically%20based%20on%20runtime%20conditions%20using%20action-based%20routing.%0A%0A%23%23%20Simple%20Binary%20Branching%0A%0AMake%20yes%2Fno%20decisions%3A%0A%0A%60%60%60go%0AvalidationNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20isValid%20%3A%3D%20len(data)%20%3E%200%20%26%26%20len(data)%20%3C%20100%0A%20%20%20%20%20%20%20%20return%20isValid%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%20Multi-Way%20Branching%0A%0ARoute%20to%20multiple%20paths%3A%0A%0A%60%60%60go%0AcategoryNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(float64)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20value%20%3C%2010%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%20100%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%201000%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22xlarge%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0Aflow.Connect(categoryNode%2C%20%22xlarge%22%2C%20xlargeHandler)%0A%60%60%60%0A%0A%23%23%20State%20Machine%20Pattern%0A%0AImplement%20state%20transitions%3A%0A%0A%60%60%60go%0Atype%20StateMachine%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20currentState%2C%20_%20%3A%3D%20shared.Get(%22state%22)%0A%20%20%20%20if%20currentState%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20currentState%20%3D%20%22init%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20state%20%3A%3D%20currentState.(string)%0A%20%20%20%20event%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20State%20transition%20logic%0A%20%20%20%20nextState%20%3A%3D%20n.transition(state%2C%20event)%0A%20%20%20%20shared.Set(%22state%22%2C%20nextState)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20action%20based%20on%20new%20state%0A%20%20%20%20return%20flyt.Action(nextState)%2C%20nil%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20transition(state%2C%20event%20string)%20string%20%7B%0A%20%20%20%20transitions%20%3A%3D%20map%5Bstring%5Dmap%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22init%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22start%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22processing%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22complete%22%3A%20%22done%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22pause%22%3A%20%22paused%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22paused%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22resume%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20stateTransitions%2C%20ok%20%3A%3D%20transitions%5Bstate%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20if%20nextState%2C%20ok%20%3A%3D%20stateTransitions%5Bevent%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nextState%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20state%20%2F%2F%20No%20transition%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Routing%0A%0ARoute%20based%20on%20external%20configuration%3A%0A%0A%60%60%60go%0Atype%20DynamicRouter%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20routes%20map%5Bstring%5Dstring%0A%7D%0A%0Afunc%20NewDynamicRouter(configPath%20string)%20*DynamicRouter%20%7B%0A%20%20%20%20%2F%2F%20Load%20routing%20configuration%0A%20%20%20%20data%2C%20_%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20var%20routes%20map%5Bstring%5Dstring%0A%20%20%20%20json.Unmarshal(data%2C%20%26routes)%0A%20%20%20%20%0A%20%20%20%20return%20%26DynamicRouter%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20routes%3A%20%20%20routes%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DynamicRouter)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Look%20up%20route%20in%20configuration%0A%20%20%20%20if%20action%2C%20ok%20%3A%3D%20n.routes%5Bresult%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Default%20route%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Weighted%20Routing%0A%0ADistribute%20load%20across%20paths%3A%0A%0A%60%60%60go%0Atype%20LoadBalancer%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20weights%20%20map%5Bstring%5Dint%0A%20%20%20%20counter%20%20int%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewLoadBalancer(weights%20map%5Bstring%5Dint)%20*LoadBalancer%20%7B%0A%20%20%20%20return%20%26LoadBalancer%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20weights%3A%20%20weights%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*LoadBalancer)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Calculate%20total%20weight%0A%20%20%20%20totalWeight%20%3A%3D%200%0A%20%20%20%20for%20_%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20totalWeight%20%2B%3D%20weight%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20which%20path%20based%20on%20counter%0A%20%20%20%20position%20%3A%3D%20n.counter%20%25%20totalWeight%0A%20%20%20%20currentWeight%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20for%20action%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20currentWeight%20%2B%3D%20weight%0A%20%20%20%20%20%20%20%20if%20position%20%3C%20currentWeight%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0Abalancer%20%3A%3D%20NewLoadBalancer(map%5Bstring%5Dint%7B%0A%20%20%20%20%22server1%22%3A%203%2C%20%20%2F%2F%2030%25%20of%20traffic%0A%20%20%20%20%22server2%22%3A%205%2C%20%20%2F%2F%2050%25%20of%20traffic%0A%20%20%20%20%22server3%22%3A%202%2C%20%20%2F%2F%2020%25%20of%20traffic%0A%7D)%0A%60%60%60%0A%0A%23%23%20Conditional%20Loops%0A%0ACreate%20loops%20with%20exit%20conditions%3A%0A%0A%60%60%60go%0AretryNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%2C%20_%20%3A%3D%20shared.Get(%22attempts%22)%0A%20%20%20%20%20%20%20%20if%20attempts%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attempts%20%3D%200%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20attempts.(int)%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20operation%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20performOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22attempts%22%3A%20attempts%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20result%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20result%5B%22success%22%5D.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20result%5B%22attempts%22%5D.(int)%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20attempts%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%20%20%2F%2F%20Loop%20back%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%22failed%22%2C%20nil%20%20%2F%2F%20Exit%20loop%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(retryNode)%0Aflow.Connect(retryNode%2C%20%22retry%22%2C%20retryNode)%20%20%2F%2F%20Loop%20back%20to%20self%0Aflow.Connect(retryNode%2C%20%22success%22%2C%20successNode)%0Aflow.Connect(retryNode%2C%20%22failed%22%2C%20failureNode)%0A%60%60%60%0A%0A%23%23%20Pipeline%20Branching%0A%0ABranch%20and%20merge%20pipelines%3A%0A%0A%60%60%60go%0A%2F%2F%20Split%20node%20decides%20which%20pipeline(s)%20to%20execute%0AsplitNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20needsValidation%20%3A%3D%20data%5B%22validate%22%5D.(bool)%0A%20%20%20%20%20%20%20%20needsEnrichment%20%3A%3D%20data%5B%22enrich%22%5D.(bool)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20needsValidation%20%26%26%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22both%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsValidation%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22validate_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22enrich_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22skip%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0A%2F%2F%20Build%20flow%20with%20different%20pipelines%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%0A%2F%2F%20Both%20pipelines%0Aflow.Connect(splitNode%2C%20%22both%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%0A%2F%2F%20Validation%20only%0Aflow.Connect(splitNode%2C%20%22validate_only%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22skip_enrich%22%2C%20mergeNode)%0A%0A%2F%2F%20Enrichment%20only%0Aflow.Connect(splitNode%2C%20%22enrich_only%22%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20%22skip_validate%22%2C%20mergeNode)%0A%0A%2F%2F%20Skip%20both%0Aflow.Connect(splitNode%2C%20%22skip%22%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%20Feature%20Flags%0A%0AControl%20flow%20with%20feature%20toggles%3A%0A%0A%60%60%60go%0Atype%20FeatureFlagNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20flags%20map%5Bstring%5Dbool%0A%7D%0A%0Afunc%20(n%20*FeatureFlagNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20feature%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20feature%20is%20enabled%0A%20%20%20%20if%20enabled%2C%20ok%20%3A%3D%20n.flags%5Bfeature%5D%3B%20ok%20%26%26%20enabled%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_enabled%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_disabled%22)%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0AflagNode%20%3A%3D%20%26FeatureFlagNode%7B%0A%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20flags%3A%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22new_algorithm%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22beta_feature%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%22experimental%22%3A%20true%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Aflow%20%3A%3D%20flyt.NewFlow(flagNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_enabled%22%2C%20newAlgorithmNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_disabled%22%2C%20oldAlgorithmNode)%0A%60%60%60%0A%0A%23%23%20A%2FB%20Testing%0A%0ARoute%20based%20on%20experiment%20groups%3A%0A%0A%60%60%60go%0Afunc%20createABTestNode(testName%20string%2C%20distribution%20map%5Bstring%5Dint)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%2C%20_%20%3A%3D%20shared.Get(%22user_id%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20userID%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Hash%20user%20ID%20for%20consistent%20assignment%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20%3A%3D%20fnv.New32a()%0A%20%20%20%20%20%20%20%20%20%20%20%20h.Write(%5B%5Dbyte(userID%20%2B%20testName))%0A%20%20%20%20%20%20%20%20%20%20%20%20hash%20%3A%3D%20h.Sum32()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Determine%20variant%20based%20on%20distribution%0A%20%20%20%20%20%20%20%20%20%20%20%20bucket%20%3A%3D%20int(hash%20%25%20100)%0A%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20variant%2C%20percentage%20%3A%3D%20range%20distribution%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%2B%3D%20percentage%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20bucket%20%3C%20cumulative%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20variant%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22control%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20variant%20%3A%3D%20execResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22ab_variant%22%2C%20variant)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(variant)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AabNode%20%3A%3D%20createABTestNode(%22checkout_flow%22%2C%20map%5Bstring%5Dint%7B%0A%20%20%20%20%22variant_a%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22variant_b%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22control%22%3A%20%20%2034%2C%20%20%2F%2F%2034%25%20of%20users%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Action%20Names**%3A%20Use%20descriptive%20action%20names%20that%20indicate%20the%20path%0A2.%20**Document%20Branches**%3A%20Comment%20all%20possible%20branches%20and%20their%20conditions%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%0A4.%20**Avoid%20Deep%20Nesting**%3A%20Keep%20branching%20logic%20simple%20and%20readable%0A5.%20**Test%20All%20Paths**%3A%20Write%20tests%20for%20each%20branch%20condition%0A6.%20**Monitor%20Branch%20Usage**%3A%20Track%20which%20paths%20are%20taken%20most%20frequently%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Deep%20dive%20into%20action%20system%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Building%20complex%20workflows%0A-%20%5BState%20Machines%5D(%2Fpatterns%2Fbranching%23state-machine-pattern)%20-%20Advanced%20state%20management",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./branching-DFD_bqEJ.js"),[]),path:"/patterns/branching.html",type:"mdx",filePath:"patterns/branching.mdx",content:"%23%20Conditional%20Branching%0A%0AControl%20flow%20execution%20dynamically%20based%20on%20runtime%20conditions%20using%20action-based%20routing.%0A%0A%23%23%20Simple%20Binary%20Branching%0A%0AMake%20yes%2Fno%20decisions%3A%0A%0A%60%60%60go%0AvalidationNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20isValid%20%3A%3D%20len(data)%20%3E%200%20%26%26%20len(data)%20%3C%20100%0A%20%20%20%20%20%20%20%20return%20isValid%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%20Multi-Way%20Branching%0A%0ARoute%20to%20multiple%20paths%3A%0A%0A%60%60%60go%0AcategoryNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(float64)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20value%20%3C%2010%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%20100%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%201000%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22xlarge%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0Aflow.Connect(categoryNode%2C%20%22xlarge%22%2C%20xlargeHandler)%0A%60%60%60%0A%0A%23%23%20State%20Machine%20Pattern%0A%0AImplement%20state%20transitions%3A%0A%0A%60%60%60go%0Atype%20StateMachine%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20currentState%2C%20_%20%3A%3D%20shared.Get(%22state%22)%0A%20%20%20%20if%20currentState%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20currentState%20%3D%20%22init%22%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20state%20%3A%3D%20currentState.(string)%0A%20%20%20%20event%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20State%20transition%20logic%0A%20%20%20%20nextState%20%3A%3D%20n.transition(state%2C%20event)%0A%20%20%20%20shared.Set(%22state%22%2C%20nextState)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20action%20based%20on%20new%20state%0A%20%20%20%20return%20flyt.Action(nextState)%2C%20nil%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20transition(state%2C%20event%20string)%20string%20%7B%0A%20%20%20%20transitions%20%3A%3D%20map%5Bstring%5Dmap%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22init%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22start%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22processing%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22complete%22%3A%20%22done%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22pause%22%3A%20%22paused%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22paused%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22resume%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20stateTransitions%2C%20ok%20%3A%3D%20transitions%5Bstate%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20if%20nextState%2C%20ok%20%3A%3D%20stateTransitions%5Bevent%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nextState%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20state%20%2F%2F%20No%20transition%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Routing%0A%0ARoute%20based%20on%20external%20configuration%3A%0A%0A%60%60%60go%0Atype%20DynamicRouter%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20routes%20map%5Bstring%5Dstring%0A%7D%0A%0Afunc%20NewDynamicRouter(configPath%20string)%20*DynamicRouter%20%7B%0A%20%20%20%20%2F%2F%20Load%20routing%20configuration%0A%20%20%20%20data%2C%20_%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20var%20routes%20map%5Bstring%5Dstring%0A%20%20%20%20json.Unmarshal(data%2C%20%26routes)%0A%20%20%20%20%0A%20%20%20%20return%20%26DynamicRouter%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20routes%3A%20%20%20routes%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DynamicRouter)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Look%20up%20route%20in%20configuration%0A%20%20%20%20if%20action%2C%20ok%20%3A%3D%20n.routes%5Bresult%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Default%20route%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Weighted%20Routing%0A%0ADistribute%20load%20across%20paths%3A%0A%0A%60%60%60go%0Atype%20LoadBalancer%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20weights%20%20map%5Bstring%5Dint%0A%20%20%20%20counter%20%20int%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewLoadBalancer(weights%20map%5Bstring%5Dint)%20*LoadBalancer%20%7B%0A%20%20%20%20return%20%26LoadBalancer%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20weights%3A%20%20weights%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*LoadBalancer)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Calculate%20total%20weight%0A%20%20%20%20totalWeight%20%3A%3D%200%0A%20%20%20%20for%20_%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20totalWeight%20%2B%3D%20weight%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20which%20path%20based%20on%20counter%0A%20%20%20%20position%20%3A%3D%20n.counter%20%25%20totalWeight%0A%20%20%20%20currentWeight%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20for%20action%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20currentWeight%20%2B%3D%20weight%0A%20%20%20%20%20%20%20%20if%20position%20%3C%20currentWeight%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0Abalancer%20%3A%3D%20NewLoadBalancer(map%5Bstring%5Dint%7B%0A%20%20%20%20%22server1%22%3A%203%2C%20%20%2F%2F%2030%25%20of%20traffic%0A%20%20%20%20%22server2%22%3A%205%2C%20%20%2F%2F%2050%25%20of%20traffic%0A%20%20%20%20%22server3%22%3A%202%2C%20%20%2F%2F%2020%25%20of%20traffic%0A%7D)%0A%60%60%60%0A%0A%23%23%20Conditional%20Loops%0A%0ACreate%20loops%20with%20exit%20conditions%3A%0A%0A%60%60%60go%0AretryNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%2C%20_%20%3A%3D%20shared.Get(%22attempts%22)%0A%20%20%20%20%20%20%20%20if%20attempts%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attempts%20%3D%200%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20attempts.(int)%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20operation%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20performOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22attempts%22%3A%20attempts%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20result%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20result%5B%22success%22%5D.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20result%5B%22attempts%22%5D.(int)%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20attempts%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%20%20%2F%2F%20Loop%20back%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%22failed%22%2C%20nil%20%20%2F%2F%20Exit%20loop%0A%20%20%20%20%7D)%2C%0A)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(retryNode)%0Aflow.Connect(retryNode%2C%20%22retry%22%2C%20retryNode)%20%20%2F%2F%20Loop%20back%20to%20self%0Aflow.Connect(retryNode%2C%20%22success%22%2C%20successNode)%0Aflow.Connect(retryNode%2C%20%22failed%22%2C%20failureNode)%0A%60%60%60%0A%0A%23%23%20Pipeline%20Branching%0A%0ABranch%20and%20merge%20pipelines%3A%0A%0A%60%60%60go%0A%2F%2F%20Split%20node%20decides%20which%20pipeline(s)%20to%20execute%0AsplitNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20needsValidation%20%3A%3D%20data%5B%22validate%22%5D.(bool)%0A%20%20%20%20%20%20%20%20needsEnrichment%20%3A%3D%20data%5B%22enrich%22%5D.(bool)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20needsValidation%20%26%26%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22both%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsValidation%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22validate_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22enrich_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22skip%22%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0A%2F%2F%20Build%20flow%20with%20different%20pipelines%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%0A%2F%2F%20Both%20pipelines%0Aflow.Connect(splitNode%2C%20%22both%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%0A%2F%2F%20Validation%20only%0Aflow.Connect(splitNode%2C%20%22validate_only%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22skip_enrich%22%2C%20mergeNode)%0A%0A%2F%2F%20Enrichment%20only%0Aflow.Connect(splitNode%2C%20%22enrich_only%22%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20%22skip_validate%22%2C%20mergeNode)%0A%0A%2F%2F%20Skip%20both%0Aflow.Connect(splitNode%2C%20%22skip%22%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%20Feature%20Flags%0A%0AControl%20flow%20with%20feature%20toggles%3A%0A%0A%60%60%60go%0Atype%20FeatureFlagNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20flags%20map%5Bstring%5Dbool%0A%7D%0A%0Afunc%20(n%20*FeatureFlagNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20feature%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20feature%20is%20enabled%0A%20%20%20%20if%20enabled%2C%20ok%20%3A%3D%20n.flags%5Bfeature%5D%3B%20ok%20%26%26%20enabled%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_enabled%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_disabled%22)%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0AflagNode%20%3A%3D%20%26FeatureFlagNode%7B%0A%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20flags%3A%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22new_algorithm%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22beta_feature%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%22experimental%22%3A%20true%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Aflow%20%3A%3D%20flyt.NewFlow(flagNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_enabled%22%2C%20newAlgorithmNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_disabled%22%2C%20oldAlgorithmNode)%0A%60%60%60%0A%0A%23%23%20A%2FB%20Testing%0A%0ARoute%20based%20on%20experiment%20groups%3A%0A%0A%60%60%60go%0Afunc%20createABTestNode(testName%20string%2C%20distribution%20map%5Bstring%5Dint)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%2C%20_%20%3A%3D%20shared.Get(%22user_id%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20userID%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Hash%20user%20ID%20for%20consistent%20assignment%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20%3A%3D%20fnv.New32a()%0A%20%20%20%20%20%20%20%20%20%20%20%20h.Write(%5B%5Dbyte(userID%20%2B%20testName))%0A%20%20%20%20%20%20%20%20%20%20%20%20hash%20%3A%3D%20h.Sum32()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Determine%20variant%20based%20on%20distribution%0A%20%20%20%20%20%20%20%20%20%20%20%20bucket%20%3A%3D%20int(hash%20%25%20100)%0A%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20variant%2C%20percentage%20%3A%3D%20range%20distribution%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%2B%3D%20percentage%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20bucket%20%3C%20cumulative%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20variant%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22control%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20variant%20%3A%3D%20execResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22ab_variant%22%2C%20variant)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(variant)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AabNode%20%3A%3D%20createABTestNode(%22checkout_flow%22%2C%20map%5Bstring%5Dint%7B%0A%20%20%20%20%22variant_a%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22variant_b%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22control%22%3A%20%20%2034%2C%20%20%2F%2F%2034%25%20of%20users%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Action%20Names**%3A%20Use%20descriptive%20action%20names%20that%20indicate%20the%20path%0A2.%20**Document%20Branches**%3A%20Comment%20all%20possible%20branches%20and%20their%20conditions%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%0A4.%20**Avoid%20Deep%20Nesting**%3A%20Keep%20branching%20logic%20simple%20and%20readable%0A5.%20**Test%20All%20Paths**%3A%20Write%20tests%20for%20each%20branch%20condition%0A6.%20**Monitor%20Branch%20Usage**%3A%20Track%20which%20paths%20are%20taken%20most%20frequently%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Deep%20dive%20into%20action%20system%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Building%20complex%20workflows%0A-%20%5BState%20Machines%5D(%2Fpatterns%2Fbranching%23state-machine-pattern)%20-%20Advanced%20state%20management",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./closures-xeKYHXG0.js"),[]),path:"/patterns/closures",type:"mdx",filePath:"patterns/closures.mdx",content:"%23%20Configuration%20via%20Closures%0A%0AUse%20closures%20to%20create%20configurable%2C%20reusable%20nodes%20with%20encapsulated%20state%20and%20configuration.%0A%0A%23%23%20Basic%20Closure%20Pattern%0A%0APass%20configuration%20to%20nodes%20using%20closures%3A%0A%0A%60%60%60go%0Afunc%20createAPINode(apiKey%20string%2C%20baseURL%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apiKey%20and%20baseURL%20are%20captured%20in%20the%20closure%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20fmt.Sprintf(%22%25s%2Fdata%22%2C%20baseURL)%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(%22GET%22%2C%20url%2C%20nil)%0A%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(%22Authorization%22%2C%20fmt.Sprintf(%22Bearer%20%25s%22%2C%20apiKey))%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26data)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AapiNode%20%3A%3D%20createAPINode(%22secret-key-123%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Afunc%20createCounterNode()%20flyt.Node%20%7B%0A%20%20%20%20count%20%3A%3D%200%0A%20%20%20%20mu%20%3A%3D%20%26sync.Mutex%7B%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20current%20%3A%3D%20count%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20current)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%20Objects%0A%0AUse%20structs%20for%20complex%20configuration%3A%0A%0A%60%60%60go%0Atype%20DatabaseConfig%20struct%20%7B%0A%20%20%20%20Host%20%20%20%20%20string%0A%20%20%20%20Port%20%20%20%20%20int%0A%20%20%20%20User%20%20%20%20%20string%0A%20%20%20%20Password%20string%0A%20%20%20%20Database%20string%0A%20%20%20%20MaxConns%20int%0A%7D%0A%0Afunc%20createDatabaseNode(config%20DatabaseConfig)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Create%20connection%20pool%20once%0A%20%20%20%20dsn%20%3A%3D%20fmt.Sprintf(%22%25s%3A%25s%40tcp(%25s%3A%25d)%2F%25s%22%2C%0A%20%20%20%20%20%20%20%20config.User%2C%20config.Password%2C%20config.Host%2C%20config.Port%2C%20config.Database)%0A%20%20%20%20%0A%20%20%20%20db%2C%20_%20%3A%3D%20sql.Open(%22mysql%22%2C%20dsn)%0A%20%20%20%20db.SetMaxOpenConns(config.MaxConns)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AdbNode%20%3A%3D%20createDatabaseNode(DatabaseConfig%7B%0A%20%20%20%20Host%3A%20%20%20%20%20%22localhost%22%2C%0A%20%20%20%20Port%3A%20%20%20%20%203306%2C%0A%20%20%20%20User%3A%20%20%20%20%20%22app%22%2C%0A%20%20%20%20Password%3A%20%22secret%22%2C%0A%20%20%20%20Database%3A%20%22myapp%22%2C%0A%20%20%20%20MaxConns%3A%2010%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Factory%20Functions%0A%0ACreate%20specialized%20node%20variants%3A%0A%0A%60%60%60go%0Afunc%20createHTTPNode(method%20string%2C%20headers%20map%5Bstring%5Dstring)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20url%2C%20_%20%3A%3D%20shared.Get(%22url%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20body%2C%20_%20%3A%3D%20shared.Get(%22body%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%22url%22%3A%20url%2C%20%22body%22%3A%20body%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20data%5B%22url%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20bodyReader%20io.Reader%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20body%2C%20ok%20%3A%3D%20data%5B%22body%22%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyBytes%2C%20_%20%3A%3D%20json.Marshal(body)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyReader%20%3D%20bytes.NewReader(bodyBytes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(method%2C%20url%2C%20bodyReader)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20configured%20headers%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(key%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Create%20specialized%20nodes%0AgetNode%20%3A%3D%20createHTTPNode(%22GET%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%0ApostNode%20%3A%3D%20createHTTPNode(%22POST%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Content-Type%22%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0AManage%20shared%20resources%3A%0A%0A%60%60%60go%0Afunc%20createFileProcessorNode(bufferSize%20int)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Pre-allocate%20buffer%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20bufferSize)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filePath%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(filePath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20file.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reuse%20buffer%0A%20%20%20%20%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20err%20!%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20buffer%5B%3An%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processData(buffer%5B%3An%5D)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%20Pattern%0A%0AWrap%20nodes%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20node%20flyt.Node)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Starting%20prep%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20node.Prep(ctx%2C%20shared)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%20took%20%25v%22%2C%20name%2C%20time.Since(start))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20action%2C%20err%20%3A%3D%20node.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Returning%20action%3A%20%25s%22%2C%20name%2C%20action)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20action%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AprocessNode%20%3A%3D%20withLogging(%22processor%22%2C%20createProcessNode())%0A%60%60%60%0A%0A%23%23%20Dynamic%20Configuration%0A%0ALoad%20configuration%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createConfigurableNode(configPath%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Load%20config%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20config%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.Unmarshal(data%2C%20%26config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20configuration%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithConfig(config)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Dependency%20Injection%0A%0AInject%20dependencies%20through%20closures%3A%0A%0A%60%60%60go%0Atype%20Dependencies%20struct%20%7B%0A%20%20%20%20DB%20%20%20%20%20%20%20*sql.DB%0A%20%20%20%20Cache%20%20%20%20*redis.Client%0A%20%20%20%20Logger%20%20%20*log.Logger%0A%20%20%20%20Metrics%20%20*prometheus.Registry%0A%7D%0A%0Afunc%20createServiceNode(deps%20Dependencies)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20injected%20dependencies%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Println(%22Processing%20request%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%2C%20err%20%3A%3D%20deps.Cache.Get(ctx%2C%20%22key%22).Result()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Metrics.Inc(%22cache_hits%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20queryDB(deps.DB%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Printf(%22DB%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Cache.Set(ctx%2C%20%22key%22%2C%20result%2C%20time.Hour)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Immutable%20Configuration**%3A%20Don't%20modify%20captured%20variables%20after%20node%20creation%0A2.%20**Thread%20Safety**%3A%20Use%20mutexes%20for%20shared%20state%20in%20concurrent%20scenarios%0A3.%20**Resource%20Cleanup**%3A%20Ensure%20resources%20are%20properly%20closed%0A4.%20**Error%20Handling**%3A%20Handle%20configuration%20errors%20gracefully%0A5.%20**Documentation**%3A%20Document%20required%20configuration%20clearly%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20nodes%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./closures-xeKYHXG0.js"),[]),path:"/patterns/closures.html",type:"mdx",filePath:"patterns/closures.mdx",content:"%23%20Configuration%20via%20Closures%0A%0AUse%20closures%20to%20create%20configurable%2C%20reusable%20nodes%20with%20encapsulated%20state%20and%20configuration.%0A%0A%23%23%20Basic%20Closure%20Pattern%0A%0APass%20configuration%20to%20nodes%20using%20closures%3A%0A%0A%60%60%60go%0Afunc%20createAPINode(apiKey%20string%2C%20baseURL%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apiKey%20and%20baseURL%20are%20captured%20in%20the%20closure%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20fmt.Sprintf(%22%25s%2Fdata%22%2C%20baseURL)%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(%22GET%22%2C%20url%2C%20nil)%0A%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(%22Authorization%22%2C%20fmt.Sprintf(%22Bearer%20%25s%22%2C%20apiKey))%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26data)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AapiNode%20%3A%3D%20createAPINode(%22secret-key-123%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Afunc%20createCounterNode()%20flyt.Node%20%7B%0A%20%20%20%20count%20%3A%3D%200%0A%20%20%20%20mu%20%3A%3D%20%26sync.Mutex%7B%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20current%20%3A%3D%20count%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20current)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%20Objects%0A%0AUse%20structs%20for%20complex%20configuration%3A%0A%0A%60%60%60go%0Atype%20DatabaseConfig%20struct%20%7B%0A%20%20%20%20Host%20%20%20%20%20string%0A%20%20%20%20Port%20%20%20%20%20int%0A%20%20%20%20User%20%20%20%20%20string%0A%20%20%20%20Password%20string%0A%20%20%20%20Database%20string%0A%20%20%20%20MaxConns%20int%0A%7D%0A%0Afunc%20createDatabaseNode(config%20DatabaseConfig)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Create%20connection%20pool%20once%0A%20%20%20%20dsn%20%3A%3D%20fmt.Sprintf(%22%25s%3A%25s%40tcp(%25s%3A%25d)%2F%25s%22%2C%0A%20%20%20%20%20%20%20%20config.User%2C%20config.Password%2C%20config.Host%2C%20config.Port%2C%20config.Database)%0A%20%20%20%20%0A%20%20%20%20db%2C%20_%20%3A%3D%20sql.Open(%22mysql%22%2C%20dsn)%0A%20%20%20%20db.SetMaxOpenConns(config.MaxConns)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AdbNode%20%3A%3D%20createDatabaseNode(DatabaseConfig%7B%0A%20%20%20%20Host%3A%20%20%20%20%20%22localhost%22%2C%0A%20%20%20%20Port%3A%20%20%20%20%203306%2C%0A%20%20%20%20User%3A%20%20%20%20%20%22app%22%2C%0A%20%20%20%20Password%3A%20%22secret%22%2C%0A%20%20%20%20Database%3A%20%22myapp%22%2C%0A%20%20%20%20MaxConns%3A%2010%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Factory%20Functions%0A%0ACreate%20specialized%20node%20variants%3A%0A%0A%60%60%60go%0Afunc%20createHTTPNode(method%20string%2C%20headers%20map%5Bstring%5Dstring)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20url%2C%20_%20%3A%3D%20shared.Get(%22url%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20body%2C%20_%20%3A%3D%20shared.Get(%22body%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%22url%22%3A%20url%2C%20%22body%22%3A%20body%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20data%5B%22url%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20bodyReader%20io.Reader%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20body%2C%20ok%20%3A%3D%20data%5B%22body%22%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyBytes%2C%20_%20%3A%3D%20json.Marshal(body)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyReader%20%3D%20bytes.NewReader(bodyBytes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(method%2C%20url%2C%20bodyReader)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20configured%20headers%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(key%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Create%20specialized%20nodes%0AgetNode%20%3A%3D%20createHTTPNode(%22GET%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%0ApostNode%20%3A%3D%20createHTTPNode(%22POST%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Content-Type%22%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0AManage%20shared%20resources%3A%0A%0A%60%60%60go%0Afunc%20createFileProcessorNode(bufferSize%20int)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Pre-allocate%20buffer%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20bufferSize)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filePath%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(filePath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20file.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reuse%20buffer%0A%20%20%20%20%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20err%20!%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20buffer%5B%3An%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processData(buffer%5B%3An%5D)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%20Pattern%0A%0AWrap%20nodes%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20node%20flyt.Node)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Starting%20prep%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20node.Prep(ctx%2C%20shared)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%20took%20%25v%22%2C%20name%2C%20time.Since(start))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20action%2C%20err%20%3A%3D%20node.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Returning%20action%3A%20%25s%22%2C%20name%2C%20action)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20action%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AprocessNode%20%3A%3D%20withLogging(%22processor%22%2C%20createProcessNode())%0A%60%60%60%0A%0A%23%23%20Dynamic%20Configuration%0A%0ALoad%20configuration%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createConfigurableNode(configPath%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Load%20config%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20config%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.Unmarshal(data%2C%20%26config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20configuration%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithConfig(config)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Dependency%20Injection%0A%0AInject%20dependencies%20through%20closures%3A%0A%0A%60%60%60go%0Atype%20Dependencies%20struct%20%7B%0A%20%20%20%20DB%20%20%20%20%20%20%20*sql.DB%0A%20%20%20%20Cache%20%20%20%20*redis.Client%0A%20%20%20%20Logger%20%20%20*log.Logger%0A%20%20%20%20Metrics%20%20*prometheus.Registry%0A%7D%0A%0Afunc%20createServiceNode(deps%20Dependencies)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20injected%20dependencies%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Println(%22Processing%20request%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%2C%20err%20%3A%3D%20deps.Cache.Get(ctx%2C%20%22key%22).Result()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Metrics.Inc(%22cache_hits%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20queryDB(deps.DB%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Printf(%22DB%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Cache.Set(ctx%2C%20%22key%22%2C%20result%2C%20time.Hour)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Immutable%20Configuration**%3A%20Don't%20modify%20captured%20variables%20after%20node%20creation%0A2.%20**Thread%20Safety**%3A%20Use%20mutexes%20for%20shared%20state%20in%20concurrent%20scenarios%0A3.%20**Resource%20Cleanup**%3A%20Ensure%20resources%20are%20properly%20closed%0A4.%20**Error%20Handling**%3A%20Handle%20configuration%20errors%20gracefully%0A5.%20**Documentation**%3A%20Document%20required%20configuration%20clearly%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20nodes%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./error-handling-mDl0KByd.js"),[]),path:"/patterns/error-handling",type:"mdx",filePath:"patterns/error-handling.mdx",content:"%23%20Error%20Handling%20%26%20Retries%0A%0ABuild%20resilient%20workflows%20with%20proper%20error%20handling%20and%20retry%20strategies.%0A%0A%23%23%20Basic%20Retry%20Configuration%0A%0AConfigure%20retries%20at%20the%20node%20level%3A%0A%0A%60%60%60go%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20will%20be%20retried%20up%20to%203%20times%0A%20%20%20%20%20%20%20%20return%20callFlakeyAPI()%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithMaxRetries(3)%2C%0A%20%20%20%20flyt.WithWait(time.Second)%2C%20%2F%2F%20Wait%201%20second%20between%20retries%0A%20%20%20%20flyt.WithExecFallbackFunc(func(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Called%20after%20all%20retries%20fail%0A%20%20%20%20%20%20%20%20log.Printf(%22API%20failed%20after%20retries%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20nil%20%2F%2F%20Return%20nil%20to%20handle%20in%20Post%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Exponential%20Backoff%0A%0AImplement%20exponential%20backoff%20with%20RetryableNode%3A%0A%0A%60%60%60go%0Atype%20BackoffNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempt%20int%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20return%205%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20%2F%2F%20Exponential%20backoff%3A%201s%2C%202s%2C%204s%2C%208s%2C%2016s%0A%20%20%20%20return%20time.Duration(math.Pow(2%2C%20float64(n.attempt)))%20*%20time.Second%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempt%2B%2B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%3A%20%25v%22%2C%20n.attempt%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20n.attempt%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pattern%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%7D%0A%0Afunc%20NewCircuitBreakerNode()%20*CircuitBreakerNode%20%7B%0A%20%20%20%20return%20%26CircuitBreakerNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20threshold%3A%205%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.failures%20%3E%3D%20n.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(n.lastFailure)%20%3C%20n.timeout%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20n.failures%20%3D%200%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.failures%2B%2B%0A%20%20%20%20%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.failures%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20on%20Failure%0A%0AImplement%20the%20FallbackNode%20interface%20for%20graceful%20degradation%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20sync.Map%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20result%0A%20%20%20%20%20%20%20%20n.cache.Store(key%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20cached%20data%20on%20failure%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(key)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20for%20%25s%20due%20to%20error%3A%20%25v%22%2C%20key%2C%20err)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20default%20if%20no%20cache%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22cached%22%3A%20false%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Aggregation%0A%0ACollect%20errors%20from%20batch%20operations%3A%0A%0A%60%60%60go%0Afunc%20processBatch(ctx%20context.Context%2C%20items%20%5B%5DItem)%20error%20%7B%0A%20%20%20%20var%20errs%20%5B%5Derror%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20processItem(item)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errs%20%3D%20append(errs%2C%20fmt.Errorf(%22item%20%25d%3A%20%25w%22%2C%20i%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(errs)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20%26flyt.BatchError%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Errors%3A%20errs%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Message%3A%20fmt.Sprintf(%22%25d%2F%25d%20items%20failed%22%2C%20len(errs)%2C%20len(items))%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Retry%20with%20Jitter%0A%0AAdd%20randomization%20to%20prevent%20thundering%20herd%3A%0A%0A%60%60%60go%0Afunc%20(n%20*JitterNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20base%20%3A%3D%20time.Second%20*%20time.Duration(n.attempt)%0A%20%20%20%20jitter%20%3A%3D%20time.Duration(rand.Intn(1000))%20*%20time.Millisecond%0A%20%20%20%20return%20base%20%2B%20jitter%0A%7D%0A%60%60%60%0A%0A%23%23%20Selective%20Retry%0A%0AOnly%20retry%20specific%20errors%3A%0A%0A%60%60%60go%0Afunc%20(n%20*SelectiveRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Only%20retry%20on%20network%20errors%0A%20%20%20%20%20%20%20%20if%20isNetworkError(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20be%20retried%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20business%20logic%20errors%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22permanent%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*SelectiveRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Check%20error%20type%20from%20last%20execution%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20!isRetryable(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20return%200%20%2F%2F%20Don't%20retry%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Context%0A%0AProvide%20context%20for%20debugging%3A%0A%0A%60%60%60go%0Atype%20ErrorContext%20struct%20%7B%0A%20%20%20%20Node%20%20%20%20%20%20string%0A%20%20%20%20Action%20%20%20%20string%0A%20%20%20%20Input%20%20%20%20%20any%0A%20%20%20%20Error%20%20%20%20%20error%0A%20%20%20%20Timestamp%20time.Time%0A%20%20%20%20Attempts%20%20int%0A%7D%0A%0Afunc%20(n%20*DetailedErrorNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%2C%20ok%20%3A%3D%20execResult.(error)%3B%20ok%20%26%26%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20errorCtx%20%3A%3D%20ErrorContext%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Node%3A%20%20%20%20%20%20%22DetailedErrorNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Action%3A%20%20%20%20%22process%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Input%3A%20%20%20%20%20prepResult%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20%20%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Attempts%3A%20%20n.attempts%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20errorCtx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20n.attempts%20%3C%20n.maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Timeout%20Handling%0A%0APrevent%20hanging%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*TimeoutNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20resultChan%20%3A%3D%20make(chan%20any)%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20longRunningOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%3A%20%25w%22%2C%20ctx.Err())%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Identify%20Transient%20vs%20Permanent%20Errors**%3A%20Only%20retry%20transient%20failures%0A2.%20**Set%20Reasonable%20Limits**%3A%20Don't%20retry%20indefinitely%0A3.%20**Use%20Backoff**%3A%20Avoid%20overwhelming%20failing%20services%0A4.%20**Log%20Failures**%3A%20Track%20retry%20attempts%20for%20debugging%0A5.%20**Provide%20Fallbacks**%3A%20Gracefully%20degrade%20when%20possible%0A6.%20**Monitor%20Retry%20Rates**%3A%20High%20retry%20rates%20indicate%20problems%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFallback%20on%20Failure%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BBatch%20Error%20Handling%5D(%2Fadvanced%2Fbatch-processing%23batch-error-handling)%20-%20Handle%20batch%20failures%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./error-handling-mDl0KByd.js"),[]),path:"/patterns/error-handling.html",type:"mdx",filePath:"patterns/error-handling.mdx",content:"%23%20Error%20Handling%20%26%20Retries%0A%0ABuild%20resilient%20workflows%20with%20proper%20error%20handling%20and%20retry%20strategies.%0A%0A%23%23%20Basic%20Retry%20Configuration%0A%0AConfigure%20retries%20at%20the%20node%20level%3A%0A%0A%60%60%60go%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20will%20be%20retried%20up%20to%203%20times%0A%20%20%20%20%20%20%20%20return%20callFlakeyAPI()%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithMaxRetries(3)%2C%0A%20%20%20%20flyt.WithWait(time.Second)%2C%20%2F%2F%20Wait%201%20second%20between%20retries%0A%20%20%20%20flyt.WithExecFallbackFunc(func(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Called%20after%20all%20retries%20fail%0A%20%20%20%20%20%20%20%20log.Printf(%22API%20failed%20after%20retries%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20nil%20%2F%2F%20Return%20nil%20to%20handle%20in%20Post%0A%20%20%20%20%7D)%2C%0A)%0A%60%60%60%0A%0A%23%23%20Exponential%20Backoff%0A%0AImplement%20exponential%20backoff%20with%20RetryableNode%3A%0A%0A%60%60%60go%0Atype%20BackoffNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempt%20int%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20return%205%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20%2F%2F%20Exponential%20backoff%3A%201s%2C%202s%2C%204s%2C%208s%2C%2016s%0A%20%20%20%20return%20time.Duration(math.Pow(2%2C%20float64(n.attempt)))%20*%20time.Second%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempt%2B%2B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%3A%20%25v%22%2C%20n.attempt%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20n.attempt%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pattern%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%7D%0A%0Afunc%20NewCircuitBreakerNode()%20*CircuitBreakerNode%20%7B%0A%20%20%20%20return%20%26CircuitBreakerNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20threshold%3A%205%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.failures%20%3E%3D%20n.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(n.lastFailure)%20%3C%20n.timeout%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20n.failures%20%3D%200%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.failures%2B%2B%0A%20%20%20%20%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.failures%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20on%20Failure%0A%0AImplement%20the%20FallbackNode%20interface%20for%20graceful%20degradation%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20sync.Map%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20result%0A%20%20%20%20%20%20%20%20n.cache.Store(key%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20cached%20data%20on%20failure%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(key)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20for%20%25s%20due%20to%20error%3A%20%25v%22%2C%20key%2C%20err)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20default%20if%20no%20cache%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22cached%22%3A%20false%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Aggregation%0A%0ACollect%20errors%20from%20batch%20operations%3A%0A%0A%60%60%60go%0Afunc%20processBatch(ctx%20context.Context%2C%20items%20%5B%5DItem)%20error%20%7B%0A%20%20%20%20var%20errs%20%5B%5Derror%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20processItem(item)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errs%20%3D%20append(errs%2C%20fmt.Errorf(%22item%20%25d%3A%20%25w%22%2C%20i%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(errs)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20%26flyt.BatchError%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Errors%3A%20errs%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Message%3A%20fmt.Sprintf(%22%25d%2F%25d%20items%20failed%22%2C%20len(errs)%2C%20len(items))%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Retry%20with%20Jitter%0A%0AAdd%20randomization%20to%20prevent%20thundering%20herd%3A%0A%0A%60%60%60go%0Afunc%20(n%20*JitterNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20base%20%3A%3D%20time.Second%20*%20time.Duration(n.attempt)%0A%20%20%20%20jitter%20%3A%3D%20time.Duration(rand.Intn(1000))%20*%20time.Millisecond%0A%20%20%20%20return%20base%20%2B%20jitter%0A%7D%0A%60%60%60%0A%0A%23%23%20Selective%20Retry%0A%0AOnly%20retry%20specific%20errors%3A%0A%0A%60%60%60go%0Afunc%20(n%20*SelectiveRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Only%20retry%20on%20network%20errors%0A%20%20%20%20%20%20%20%20if%20isNetworkError(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20be%20retried%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20business%20logic%20errors%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22permanent%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*SelectiveRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Check%20error%20type%20from%20last%20execution%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20!isRetryable(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20return%200%20%2F%2F%20Don't%20retry%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Context%0A%0AProvide%20context%20for%20debugging%3A%0A%0A%60%60%60go%0Atype%20ErrorContext%20struct%20%7B%0A%20%20%20%20Node%20%20%20%20%20%20string%0A%20%20%20%20Action%20%20%20%20string%0A%20%20%20%20Input%20%20%20%20%20any%0A%20%20%20%20Error%20%20%20%20%20error%0A%20%20%20%20Timestamp%20time.Time%0A%20%20%20%20Attempts%20%20int%0A%7D%0A%0Afunc%20(n%20*DetailedErrorNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%2C%20ok%20%3A%3D%20execResult.(error)%3B%20ok%20%26%26%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20errorCtx%20%3A%3D%20ErrorContext%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Node%3A%20%20%20%20%20%20%22DetailedErrorNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Action%3A%20%20%20%20%22process%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Input%3A%20%20%20%20%20prepResult%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20%20%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Attempts%3A%20%20n.attempts%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20errorCtx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20n.attempts%20%3C%20n.maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Timeout%20Handling%0A%0APrevent%20hanging%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*TimeoutNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20resultChan%20%3A%3D%20make(chan%20any)%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20longRunningOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%3A%20%25w%22%2C%20ctx.Err())%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Identify%20Transient%20vs%20Permanent%20Errors**%3A%20Only%20retry%20transient%20failures%0A2.%20**Set%20Reasonable%20Limits**%3A%20Don't%20retry%20indefinitely%0A3.%20**Use%20Backoff**%3A%20Avoid%20overwhelming%20failing%20services%0A4.%20**Log%20Failures**%3A%20Track%20retry%20attempts%20for%20debugging%0A5.%20**Provide%20Fallbacks**%3A%20Gracefully%20degrade%20when%20possible%0A6.%20**Monitor%20Retry%20Rates**%3A%20High%20retry%20rates%20indicate%20problems%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFallback%20on%20Failure%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BBatch%20Error%20Handling%5D(%2Fadvanced%2Fbatch-processing%23batch-error-handling)%20-%20Handle%20batch%20failures%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./fallback-C7nwHBfn.js"),[]),path:"/patterns/fallback",type:"mdx",filePath:"patterns/fallback.mdx",content:"%23%20Fallback%20on%20Failure%0A%0AImplement%20graceful%20degradation%20when%20operations%20fail%2C%20ensuring%20your%20workflows%20remain%20resilient%20and%20provide%20the%20best%20possible%20user%20experience%20even%20during%20failures.%0A%0A%23%23%20FallbackNode%20Interface%0A%0AThe%20%60FallbackNode%60%20interface%20allows%20custom%20fallback%20behavior%3A%0A%0A%60%60%60go%0Atype%20FallbackNode%20interface%20%7B%0A%20%20%20%20Node%0A%20%20%20%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%0A%7D%0A%60%60%60%0A%0A%23%23%20Basic%20Fallback%0A%0AReturn%20default%20values%20on%20failure%3A%0A%0A%60%60%60go%0Atype%20DefaultValueNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20fetchFromPrimarySource()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20fallback%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20log.Printf(%22Primary%20source%20failed%3A%20%25v%2C%20returning%20default%22%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20safe%20default%20value%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%22default_value%22%2C%0A%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Cached%20Fallback%0A%0AUse%20cached%20data%20when%20fresh%20data%20is%20unavailable%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20map%5Bstring%5DCacheEntry%0A%20%20%20%20mu%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20CacheEntry%20struct%20%7B%0A%20%20%20%20Data%20%20%20%20%20%20any%0A%20%20%20%20Timestamp%20time.Time%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%20on%20success%0A%20%20%20%20%20%20%20%20n.mu.Lock()%0A%20%20%20%20%20%20%20%20n.cache%5Bkey%5D%20%3D%20CacheEntry%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20n.cache%5Bkey%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20age%20%3A%3D%20time.Since(entry.Timestamp)%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20(age%3A%20%25v)%20due%20to%20error%3A%20%25v%22%2C%20age%2C%20err)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20metadata%20about%20cache%20usage%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20%20%20%20%20%20%20entry.Data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cached%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cache_age%22%3A%20%20age.Seconds()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%20%20%20%20%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20No%20cache%20available%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20fallback%20available%3A%20%25w%22%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Multi-Level%20Fallback%0A%0ATry%20multiple%20fallback%20strategies%3A%0A%0A%60%60%60go%0Atype%20MultiLevelFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryURL%20%20%20string%0A%20%20%20%20secondaryURL%20string%0A%20%20%20%20cache%20%20%20%20%20%20%20%20sync.Map%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.primaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.cache.Store(%22last_good%22%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20ExecFallback(prepResult%20any%2C%20primaryErr%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Level%201%3A%20Try%20secondary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.secondaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20secondary%20source%20due%20to%20primary%20error%3A%20%25v%22%2C%20primaryErr)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%202%3A%20Try%20cache%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(%22last_good%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20cached%20data%20due%20to%20all%20sources%20failing%22)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%203%3A%20Return%20minimal%20default%0A%20%20%20%20log.Printf(%22All%20fallbacks%20exhausted%2C%20returning%20minimal%20response%22)%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Partial%20Fallback%0A%0AReturn%20partial%20results%20when%20complete%20processing%20fails%3A%0A%0A%60%60%60go%0Atype%20BatchProcessorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20results%20%5B%5DResult%0A%20%20%20%20errors%20%20%5B%5Derror%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20n.results%20%3D%20make(%5B%5DResult%2C%200%2C%20len(items))%0A%20%20%20%20n.errors%20%3D%20make(%5B%5Derror%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20n.errors%20%3D%20append(n.errors%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.results%20%3D%20append(n.results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(n.errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22processing%20failed%3A%20%25d%20errors%22%2C%20len(n.errors))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.results%2C%20nil%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Return%20partial%20results%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22partial_results%22%3A%20n.results%2C%0A%20%20%20%20%20%20%20%20%22success_count%22%3A%20%20%20len(n.results)%2C%0A%20%20%20%20%20%20%20%20%22error_count%22%3A%20%20%20%20%20len(n.errors)%2C%0A%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%20%20%20%20%20%20%20n.errors%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%20%20%20%20%20%20%22partial_success%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Fallback%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%20%20%20%20fallbackMsg%20string%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.recordFailure()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.reset()%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20cached%20or%20default%20response%20immediately%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22circuit_open%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20n.fallbackMsg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%20n.timeout%20-%20time.Since(n.lastFailure)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Circuit%20not%20open%2C%20but%20request%20failed%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20isCircuitOpen()%20bool%20%7B%0A%20%20%20%20return%20n.failures%20%3E%3D%20n.threshold%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20time.Since(n.lastFailure)%20%3C%20n.timeout%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20recordFailure()%20%7B%0A%20%20%20%20n.failures%2B%2B%0A%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20reset()%20%7B%0A%20%20%20%20n.failures%20%3D%200%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20with%20Metrics%0A%0ATrack%20fallback%20usage%3A%0A%0A%60%60%60go%0Atype%20MetricsFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryCalls%20%20%20int64%0A%20%20%20%20fallbackCalls%20%20int64%0A%20%20%20%20lastFallback%20%20%20time.Time%0A%7D%0A%0Afunc%20(n%20*MetricsFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26n.fallbackCalls%2C%201)%0A%20%20%20%20n.lastFallback%20%3D%20time.Now()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20metrics%0A%20%20%20%20total%20%3A%3D%20atomic.LoadInt64(%26n.primaryCalls)%20%2B%20atomic.LoadInt64(%26n.fallbackCalls)%0A%20%20%20%20fallbackRate%20%3A%3D%20float64(n.fallbackCalls)%20%2F%20float64(total)%20*%20100%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Fallback%20metrics%20-%20Rate%3A%20%25.2f%25%25%2C%20Total%20fallbacks%3A%20%25d%22%2C%20%0A%20%20%20%20%20%20%20%20fallbackRate%2C%20n.fallbackCalls)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20fallback%20data%0A%20%20%20%20return%20getDefaultResponse()%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Fallback%0A%0ADifferent%20fallbacks%20based%20on%20error%20type%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ConditionalFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20errors.Is(err%2C%20ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20timeouts%2C%20return%20cached%20data%0A%20%20%20%20%20%20%20%20return%20n.getCachedResponse()%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrRateLimit)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20rate%20limits%2C%20return%20throttled%20message%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22rate_limited%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%2060%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrNotFound)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20not%20found%2C%20return%20empty%20result%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22found%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20nil%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generic%20fallback%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22error%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20unavailable%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Log%20Fallback%20Usage**%3A%20Track%20when%20and%20why%20fallbacks%20are%20triggered%0A2.%20**Monitor%20Fallback%20Rates**%3A%20High%20rates%20indicate%20system%20issues%0A3.%20**Set%20Appropriate%20Timeouts**%3A%20Don't%20wait%20too%20long%20before%20falling%20back%0A4.%20**Provide%20Meaningful%20Defaults**%3A%20Fallback%20data%20should%20be%20useful%0A5.%20**Document%20Fallback%20Behavior**%3A%20Make%20it%20clear%20what%20happens%20during%20failures%0A6.%20**Test%20Fallback%20Paths**%3A%20Ensure%20fallbacks%20work%20correctly%0A7.%20**Consider%20User%20Experience**%3A%20Degraded%20service%20is%20better%20than%20no%20service%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Comprehensive%20error%20strategies%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Dynamic%20flow%20control%0A-%20%5BCircuit%20Breaker%20Pattern%5D(%2Fpatterns%2Ferror-handling%23circuit-breaker-pattern)%20-%20Prevent%20cascading%20failures",lastUpdatedAt:1754495398e3},{lazy:()=>P0(()=>import("./fallback-C7nwHBfn.js"),[]),path:"/patterns/fallback.html",type:"mdx",filePath:"patterns/fallback.mdx",content:"%23%20Fallback%20on%20Failure%0A%0AImplement%20graceful%20degradation%20when%20operations%20fail%2C%20ensuring%20your%20workflows%20remain%20resilient%20and%20provide%20the%20best%20possible%20user%20experience%20even%20during%20failures.%0A%0A%23%23%20FallbackNode%20Interface%0A%0AThe%20%60FallbackNode%60%20interface%20allows%20custom%20fallback%20behavior%3A%0A%0A%60%60%60go%0Atype%20FallbackNode%20interface%20%7B%0A%20%20%20%20Node%0A%20%20%20%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%0A%7D%0A%60%60%60%0A%0A%23%23%20Basic%20Fallback%0A%0AReturn%20default%20values%20on%20failure%3A%0A%0A%60%60%60go%0Atype%20DefaultValueNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20fetchFromPrimarySource()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20fallback%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20log.Printf(%22Primary%20source%20failed%3A%20%25v%2C%20returning%20default%22%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20safe%20default%20value%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%22default_value%22%2C%0A%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Cached%20Fallback%0A%0AUse%20cached%20data%20when%20fresh%20data%20is%20unavailable%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20map%5Bstring%5DCacheEntry%0A%20%20%20%20mu%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20CacheEntry%20struct%20%7B%0A%20%20%20%20Data%20%20%20%20%20%20any%0A%20%20%20%20Timestamp%20time.Time%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%20on%20success%0A%20%20%20%20%20%20%20%20n.mu.Lock()%0A%20%20%20%20%20%20%20%20n.cache%5Bkey%5D%20%3D%20CacheEntry%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20n.cache%5Bkey%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20age%20%3A%3D%20time.Since(entry.Timestamp)%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20(age%3A%20%25v)%20due%20to%20error%3A%20%25v%22%2C%20age%2C%20err)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20metadata%20about%20cache%20usage%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20%20%20%20%20%20%20entry.Data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cached%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cache_age%22%3A%20%20age.Seconds()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%20%20%20%20%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20No%20cache%20available%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20fallback%20available%3A%20%25w%22%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Multi-Level%20Fallback%0A%0ATry%20multiple%20fallback%20strategies%3A%0A%0A%60%60%60go%0Atype%20MultiLevelFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryURL%20%20%20string%0A%20%20%20%20secondaryURL%20string%0A%20%20%20%20cache%20%20%20%20%20%20%20%20sync.Map%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.primaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.cache.Store(%22last_good%22%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20ExecFallback(prepResult%20any%2C%20primaryErr%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Level%201%3A%20Try%20secondary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.secondaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20secondary%20source%20due%20to%20primary%20error%3A%20%25v%22%2C%20primaryErr)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%202%3A%20Try%20cache%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(%22last_good%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20cached%20data%20due%20to%20all%20sources%20failing%22)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%203%3A%20Return%20minimal%20default%0A%20%20%20%20log.Printf(%22All%20fallbacks%20exhausted%2C%20returning%20minimal%20response%22)%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Partial%20Fallback%0A%0AReturn%20partial%20results%20when%20complete%20processing%20fails%3A%0A%0A%60%60%60go%0Atype%20BatchProcessorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20results%20%5B%5DResult%0A%20%20%20%20errors%20%20%5B%5Derror%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20n.results%20%3D%20make(%5B%5DResult%2C%200%2C%20len(items))%0A%20%20%20%20n.errors%20%3D%20make(%5B%5Derror%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20n.errors%20%3D%20append(n.errors%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.results%20%3D%20append(n.results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(n.errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22processing%20failed%3A%20%25d%20errors%22%2C%20len(n.errors))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.results%2C%20nil%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Return%20partial%20results%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22partial_results%22%3A%20n.results%2C%0A%20%20%20%20%20%20%20%20%22success_count%22%3A%20%20%20len(n.results)%2C%0A%20%20%20%20%20%20%20%20%22error_count%22%3A%20%20%20%20%20len(n.errors)%2C%0A%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%20%20%20%20%20%20%20n.errors%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%20%20%20%20%20%20%22partial_success%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Fallback%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%20%20%20%20fallbackMsg%20string%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.recordFailure()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.reset()%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20cached%20or%20default%20response%20immediately%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22circuit_open%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20n.fallbackMsg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%20n.timeout%20-%20time.Since(n.lastFailure)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Circuit%20not%20open%2C%20but%20request%20failed%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20isCircuitOpen()%20bool%20%7B%0A%20%20%20%20return%20n.failures%20%3E%3D%20n.threshold%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20time.Since(n.lastFailure)%20%3C%20n.timeout%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20recordFailure()%20%7B%0A%20%20%20%20n.failures%2B%2B%0A%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20reset()%20%7B%0A%20%20%20%20n.failures%20%3D%200%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20with%20Metrics%0A%0ATrack%20fallback%20usage%3A%0A%0A%60%60%60go%0Atype%20MetricsFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryCalls%20%20%20int64%0A%20%20%20%20fallbackCalls%20%20int64%0A%20%20%20%20lastFallback%20%20%20time.Time%0A%7D%0A%0Afunc%20(n%20*MetricsFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26n.fallbackCalls%2C%201)%0A%20%20%20%20n.lastFallback%20%3D%20time.Now()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20metrics%0A%20%20%20%20total%20%3A%3D%20atomic.LoadInt64(%26n.primaryCalls)%20%2B%20atomic.LoadInt64(%26n.fallbackCalls)%0A%20%20%20%20fallbackRate%20%3A%3D%20float64(n.fallbackCalls)%20%2F%20float64(total)%20*%20100%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Fallback%20metrics%20-%20Rate%3A%20%25.2f%25%25%2C%20Total%20fallbacks%3A%20%25d%22%2C%20%0A%20%20%20%20%20%20%20%20fallbackRate%2C%20n.fallbackCalls)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20fallback%20data%0A%20%20%20%20return%20getDefaultResponse()%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Fallback%0A%0ADifferent%20fallbacks%20based%20on%20error%20type%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ConditionalFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20errors.Is(err%2C%20ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20timeouts%2C%20return%20cached%20data%0A%20%20%20%20%20%20%20%20return%20n.getCachedResponse()%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrRateLimit)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20rate%20limits%2C%20return%20throttled%20message%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22rate_limited%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%2060%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrNotFound)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20not%20found%2C%20return%20empty%20result%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22found%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20nil%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generic%20fallback%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22error%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20unavailable%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Log%20Fallback%20Usage**%3A%20Track%20when%20and%20why%20fallbacks%20are%20triggered%0A2.%20**Monitor%20Fallback%20Rates**%3A%20High%20rates%20indicate%20system%20issues%0A3.%20**Set%20Appropriate%20Timeouts**%3A%20Don't%20wait%20too%20long%20before%20falling%20back%0A4.%20**Provide%20Meaningful%20Defaults**%3A%20Fallback%20data%20should%20be%20useful%0A5.%20**Document%20Fallback%20Behavior**%3A%20Make%20it%20clear%20what%20happens%20during%20failures%0A6.%20**Test%20Fallback%20Paths**%3A%20Ensure%20fallbacks%20work%20correctly%0A7.%20**Consider%20User%20Experience**%3A%20Degraded%20service%20is%20better%20than%20no%20service%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Comprehensive%20error%20strategies%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Dynamic%20flow%20control%0A-%20%5BCircuit%20Breaker%20Pattern%5D(%2Fpatterns%2Ferror-handling%23circuit-breaker-pattern)%20-%20Prevent%20cascading%20failures",lastUpdatedAt:1754495398e3}];var Uu={background5:"var(--vocs-color_background5)",border:"var(--vocs-color_border)",border2:"var(--vocs-color_border2)"},Bp={default:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",mono:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},bp={default:"var(--vocs-fontFamily_default)",mono:"var(--vocs-fontFamily_mono)"},Qo={4:"var(--vocs-space_4)",8:"var(--vocs-space_8)",24:"var(--vocs-space_24)"},ou={horizontalPadding:"var(--vocs-content_horizontalPadding)",verticalPadding:"var(--vocs-content_verticalPadding)",width:"var(--vocs-content_width)"};function mC(t){var r,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(a=mC(t[r]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}function s0(){for(var t,r,a=0,l="",s=arguments.length;a<s;a++)(t=arguments[a])&&(r=mC(t))&&(l&&(l+=" "),l+=r);return l}function Sw(t){var r=t.match(/^var\((.*)\)$/);return r?r[1]:t}function Pe(t,r){var a={};{var l=t;for(var s in l){var c=l[s];c!=null&&(a[Sw(s)]=c)}}return Object.defineProperty(a,"toString",{value:function(){return Object.keys(this).map(f=>"".concat(f,":").concat(this[f])).join(";")},writable:!1}),a}var Ew="var(--vocs_ExternalLink_iconUrl)",Rw="vocs_ExternalLink";const _w=y.forwardRef(({className:t,children:r,hideExternalIcon:a,href:l,...s},c)=>{const{basePath:A}=m2(),f=A;return C.jsx("a",{ref:c,className:s0(t,a||typeof r!="string"?void 0:Rw),href:l,target:"_blank",rel:"noopener noreferrer",style:Pe({[Ew]:`url(${f}/.vocs/icons/arrow-diagonal.svg)`}),...s,children:r})});var Np="vocs_Link",Sp="vocs_Link_accent",Ep="vocs_Link_styleless",Iu=new Map,Ll=new WeakMap,Rp=0,kw=void 0;function Tw(t){return t?(Ll.has(t)||(Rp+=1,Ll.set(t,Rp.toString())),Ll.get(t)):"0"}function Mw(t){return Object.keys(t).sort().filter(r=>t[r]!==void 0).map(r=>`${r}_${r==="root"?Tw(t.root):t[r]}`).toString()}function Pw(t){const r=Mw(t);let a=Iu.get(r);if(!a){const l=new Map;let s;const c=new IntersectionObserver(A=>{A.forEach(f=>{var p;const h=f.isIntersecting&&s.some(g=>f.intersectionRatio>=g);t.trackVisibility&&typeof f.isVisible>"u"&&(f.isVisible=h),(p=l.get(f.target))==null||p.forEach(g=>{g(h,f)})})},t);s=c.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),a={id:r,observer:c,elements:l},Iu.set(r,a)}return a}function Lw(t,r,a={},l=kw){if(typeof window.IntersectionObserver>"u"&&l!==void 0){const p=t.getBoundingClientRect();return r(l,{isIntersecting:l,target:t,intersectionRatio:typeof a.threshold=="number"?a.threshold:0,time:0,boundingClientRect:p,intersectionRect:p,rootBounds:p}),()=>{}}const{id:s,observer:c,elements:A}=Pw(a),f=A.get(t)||[];return A.has(t)||A.set(t,f),f.push(r),c.observe(t),function(){f.splice(f.indexOf(r),1),f.length===0&&(A.delete(t),c.unobserve(t)),A.size===0&&(c.disconnect(),Iu.delete(s))}}function CC({threshold:t,delay:r,trackVisibility:a,rootMargin:l,root:s,triggerOnce:c,skip:A,initialInView:f,fallbackInView:p,onChange:h}={}){var g;const[m,v]=y.useState(null),D=y.useRef(h),[x,w]=y.useState({inView:!!f,entry:void 0});D.current=h,y.useEffect(()=>{if(A||!m)return;let N;return N=Lw(m,(_,T)=>{w({inView:_,entry:T}),D.current&&D.current(_,T),T.isIntersecting&&c&&N&&(N(),N=void 0)},{root:s,rootMargin:l,threshold:t,trackVisibility:a,delay:r},p),()=>{N&&N()}},[Array.isArray(t)?t.toString():t,m,s,l,c,A,a,p,r]);const B=(g=x.entry)==null?void 0:g.target,b=y.useRef(void 0);!m&&B&&!c&&!A&&b.current!==B&&(b.current=B,w({inView:!!f,entry:void 0}));const E=[v,x.inView,x.entry];return E.ref=E[0],E.inView=E[1],E.entry=E[2],E}function Ow(...t){return r=>{jw(r,...t)}}function jw(t,...r){r.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}const kr=y.forwardRef((t,r)=>{const a=()=>{var c;return(c=FA.find(A=>A.path===t.to))==null?void 0:c.lazy()},{ref:l,inView:s}=CC();return y.useEffect(()=>{s&&a()},[s]),C.jsx(Ur,{ref:Ow(r,l),...t})}),Fe=y.forwardRef((t,r)=>{const{hideExternalIcon:a,href:l,variant:s="accent"}=t,{pathname:c}=a2();if(l!=null&&l.match(/^(www|https?)/))return C.jsx(_w,{...t,ref:r,className:s0(t.className,Np,s==="accent"&&Sp,s==="styleless"&&Ep),hideExternalIcon:a});const[A,f]=(l||"").split("#"),p=`${A||c}${f?`#${f}`:""}`;return C.jsx(kr,{...t,ref:r,className:s0(t.className,Np,s==="accent"&&Sp,s==="styleless"&&Ep),to:p})});var Uw="vocs_NotFound",Iw="vocs_NotFound_divider",zw="vocs_H1",gC="vocs_Heading",yC="vocs_Heading_slugTarget";function Ir({level:t,...r}){const a=`h${t}`;return C.jsxs(a,{...r,id:void 0,className:s0(r.className,gC),children:[C.jsx("div",{id:r.id,className:yC}),r.children]})}function vC(t){return C.jsx(Ir,{...t,className:s0(t.className,zw),level:1})}var Hw="vocs_Paragraph";function DC(t){return C.jsx("p",{...t,className:s0(t.className,Hw)})}function Vw(){return C.jsxs("div",{className:Uw,children:[C.jsx(vC,{children:"Page Not Found"}),C.jsx("div",{style:{height:Qo[24]}}),C.jsx("hr",{className:Iw}),C.jsx("div",{style:{height:Qo[24]}}),C.jsx(DC,{children:"The page you were looking for could not be found."}),C.jsx("div",{style:{height:Qo[8]}}),C.jsx(Fe,{href:"/",children:"Go to Home Page"})]})}var Ww="var(--vocs_Banner_bannerBackgroundColor)",Gw="var(--vocs_Banner_bannerHeight)",qw="var(--vocs_Banner_bannerTextColor)",$w="vocs_Banner",Yw="vocs_Banner_content",Kw="vocs_Banner_inner",Zw="vocs_Banner_closeButton";const Xw=Object.getPrototypeOf(Qw).constructor;async function Qw(t,r){return new Xw(String(t))(r)}function Jw(t,r){return new Function(String(t))(r)}function Ln(t,r){if(t==null)return{};var a={},l=Object.keys(t),s,c;for(c=0;c<l.length;c++)s=l[c],!(r.indexOf(s)>=0)&&(a[s]=t[s]);return a}var ex=["color"],tx=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,ex);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M6.85355 3.14645C7.04882 3.34171 7.04882 3.65829 6.85355 3.85355L3.70711 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H3.70711L6.85355 11.1464C7.04882 11.3417 7.04882 11.6583 6.85355 11.8536C6.65829 12.0488 6.34171 12.0488 6.14645 11.8536L2.14645 7.85355C1.95118 7.65829 1.95118 7.34171 2.14645 7.14645L6.14645 3.14645C6.34171 2.95118 6.65829 2.95118 6.85355 3.14645Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),nx=["color"],rx=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,nx);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),ox=["color"],ax=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,ox);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),lx=["color"],ix=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,lx);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V6H8.5C8.22386 6 8 5.77614 8 5.5V2H3.5ZM9 2.70711L11.2929 5H9V2.70711ZM2 2.5C2 1.67157 2.67157 1 3.5 1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645L12.8536 5.14645C12.9473 5.24021 13 5.36739 13 5.5V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),sx=["color"],cx=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,sx);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),ux=["color"],BA=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,ux);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),Ax=["color"],fx=y.forwardRef(function(t,r){var a=t.color,l=a===void 0?"currentColor":a,s=Ln(t,Ax);return y.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:r}),y.createElement("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))});function _n(t,r){if(typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map((l,s)=>_n(l,s));const a=t.props.children?{...t.props,children:_n(t.props.children)}:t.props;return r2.createElement(t.type,{...a,key:r})}function dx({hide:t}){const{banner:r}=m2(),a=y.useMemo(()=>{const l=(r==null?void 0:r.content)??"";if(!l)return null;if(typeof l!="string")return()=>_n(l);const{default:s}=Jw(l,{...f6,Fragment:y.Fragment});return s},[r]);return a?C.jsx("div",{className:s0($w),style:Pe({[Ww]:r==null?void 0:r.backgroundColor,[qw]:r==null?void 0:r.textColor}),children:C.jsxs("div",{className:s0(Kw),children:[C.jsx("div",{className:s0(Yw),children:C.jsx(a,{})}),(r==null?void 0:r.dismissable)!=="false"&&C.jsx("button",{className:s0(Zw),onClick:t,type:"button",children:C.jsx(ax,{width:14,height:14})})]})}):null}var hx="vocs_Content";function wC({children:t,className:r}){return C.jsx("article",{className:s0(r,hx),children:t})}const px=({children:t})=>t,mx=({children:t})=>t,bA=({children:t})=>t;function xC({items:t,pathname:r}){const a=r.replace(/\.html$/,""),l=[];for(const s of t)(s.link&&a.startsWith(s.match||s.link)||s.items&&xC({items:s.items,pathname:r}).length>0)&&l.push(s.id);return l}function ia({items:t,pathname:r}){return y.useMemo(()=>xC({items:t,pathname:r}),[t,r])}function tn(){const t=y.useContext(FC);if(!t)throw new Error("`usePageData` must be used within `PageDataContext.Provider`.");return t}const FC=y.createContext(void 0);function xi(){const{pathname:t}=a2(),r=m2(),{sidebar:a}=r;if(!a)return{items:[]};if(Array.isArray(a))return{items:a};const l=y.useMemo(()=>{const s=Object.keys(a).filter(c=>t.startsWith(c));return s[s.length-1]},[a,t]);return l?Array.isArray(a[l])?{key:l,items:a[l]}:{...a[l],key:l}:{items:[]}}function nn(){const{aiCta:t}=m2(),r=xi(),{frontmatter:a}=tn(),{layout:l,showLogo:s,showAiCta:c,showOutline:A,showSidebar:f,showTopNav:p}=a||{},h=l??"docs";return{layout:h,get showLogo(){return typeof s<"u"?s:!0},get showAiCta(){return typeof c<"u"?c:t===!1?!1:h==="docs"},get showOutline(){return typeof A<"u"?A:h==="docs"},get showSidebar(){return r.items.length===0?!1:typeof f<"u"?f:!(h==="minimal"||h==="landing")},get showTopNav(){return typeof p<"u"?p:!0}}}function h0(t,r,{checkForDefaultPrevented:a=!0}={}){return function(s){if(t==null||t(s),a===!1||!s.defaultPrevented)return r==null?void 0:r(s)}}function _p(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function sa(...t){return r=>{let a=!1;const l=t.map(s=>{const c=_p(s,r);return!a&&typeof c=="function"&&(a=!0),c});if(a)return()=>{for(let s=0;s<l.length;s++){const c=l[s];typeof c=="function"?c():_p(t[s],null)}}}}function o2(...t){return y.useCallback(sa(...t),t)}function Cx(t,r){const a=y.createContext(r),l=c=>{const{children:A,...f}=c,p=y.useMemo(()=>f,Object.values(f));return C.jsx(a.Provider,{value:p,children:A})};l.displayName=t+"Provider";function s(c){const A=y.useContext(a);if(A)return A;if(r!==void 0)return r;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[l,s]}function Le(t,r=[]){let a=[];function l(c,A){const f=y.createContext(A),p=a.length;a=[...a,A];const h=m=>{var b;const{scope:v,children:D,...x}=m,w=((b=v==null?void 0:v[t])==null?void 0:b[p])||f,B=y.useMemo(()=>x,Object.values(x));return C.jsx(w.Provider,{value:B,children:D})};h.displayName=c+"Provider";function g(m,v){var w;const D=((w=v==null?void 0:v[t])==null?void 0:w[p])||f,x=y.useContext(D);if(x)return x;if(A!==void 0)return A;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[h,g]}const s=()=>{const c=a.map(A=>y.createContext(A));return function(f){const p=(f==null?void 0:f[t])||c;return y.useMemo(()=>({[`__scope${t}`]:{...f,[t]:p}}),[f,p])}};return s.scopeName=t,[l,gx(s,...r)]}function gx(...t){const r=t[0];if(t.length===1)return r;const a=()=>{const l=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(c){const A=l.reduce((f,{useScope:p,scopeName:h})=>{const m=p(c)[`__scope${h}`];return{...f,...m}},{});return y.useMemo(()=>({[`__scope${r.scopeName}`]:A}),[A])}};return a.scopeName=r.scopeName,a}var Be=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},yx=yi[" useId ".trim().toString()]||(()=>{}),vx=0;function we(t){const[r,a]=y.useState(yx());return Be(()=>{a(l=>l??String(vx++))},[t]),t||(r?`radix-${r}`:"")}var Dx=yi[" useInsertionEffect ".trim().toString()]||Be;function Qe({prop:t,defaultProp:r,onChange:a=()=>{},caller:l}){const[s,c,A]=wx({defaultProp:r,onChange:a}),f=t!==void 0,p=f?t:s;{const g=y.useRef(t!==void 0);y.useEffect(()=>{const m=g.current;m!==f&&console.warn(`${l} is changing from ${m?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=f},[f,l])}const h=y.useCallback(g=>{var m;if(f){const v=xx(g)?g(t):g;v!==t&&((m=A.current)==null||m.call(A,v))}else c(g)},[f,t,c,A]);return[p,h]}function wx({defaultProp:t,onChange:r}){const[a,l]=y.useState(t),s=y.useRef(a),c=y.useRef(r);return Dx(()=>{c.current=r},[r]),y.useEffect(()=>{var A;s.current!==a&&((A=c.current)==null||A.call(c,a),s.current=a)},[a,s]),[a,l,c]}function xx(t){return typeof t=="function"}function Tr(t){const r=Fx(t),a=y.forwardRef((l,s)=>{const{children:c,...A}=l,f=y.Children.toArray(c),p=f.find(bx);if(p){const h=p.props.children,g=f.map(m=>m===p?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:m);return C.jsx(r,{...A,ref:s,children:y.isValidElement(h)?y.cloneElement(h,void 0,g):null})}return C.jsx(r,{...A,ref:s,children:c})});return a.displayName=`${t}.Slot`,a}function Fx(t){const r=y.forwardRef((a,l)=>{const{children:s,...c}=a;if(y.isValidElement(s)){const A=Sx(s),f=Nx(c,s.props);return s.type!==y.Fragment&&(f.ref=l?sa(l,A):A),y.cloneElement(s,f)}return y.Children.count(s)>1?y.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Bx=Symbol("radix.slottable");function bx(t){return y.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Bx}function Nx(t,r){const a={...r};for(const l in r){const s=t[l],c=r[l];/^on[A-Z]/.test(l)?s&&c?a[l]=(...f)=>{const p=c(...f);return s(...f),p}:s&&(a[l]=s):l==="style"?a[l]={...s,...c}:l==="className"&&(a[l]=[s,c].filter(Boolean).join(" "))}return{...t,...a}}function Sx(t){var l,s;let r=(l=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:l.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?t.ref:(r=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Ex=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],R0=Ex.reduce((t,r)=>{const a=Tr(`Primitive.${r}`),l=y.forwardRef((s,c)=>{const{asChild:A,...f}=s,p=A?a:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(p,{...f,ref:c})});return l.displayName=`Primitive.${r}`,{...t,[r]:l}},{});function li(t,r){t&&xA.flushSync(()=>t.dispatchEvent(r))}function O2(t){const r=y.useRef(t);return y.useEffect(()=>{r.current=t}),y.useMemo(()=>(...a)=>{var l;return(l=r.current)==null?void 0:l.call(r,...a)},[])}function Rx(t,r=globalThis==null?void 0:globalThis.document){const a=O2(t);y.useEffect(()=>{const l=s=>{s.key==="Escape"&&a(s)};return r.addEventListener("keydown",l,{capture:!0}),()=>r.removeEventListener("keydown",l,{capture:!0})},[a,r])}var _x="DismissableLayer",zu="dismissableLayer.update",kx="dismissableLayer.pointerDownOutside",Tx="dismissableLayer.focusOutside",kp,BC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ca=y.forwardRef((t,r)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:c,onInteractOutside:A,onDismiss:f,...p}=t,h=y.useContext(BC),[g,m]=y.useState(null),v=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,D]=y.useState({}),x=o2(r,L=>m(L)),w=Array.from(h.layers),[B]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),b=w.indexOf(B),E=g?w.indexOf(g):-1,N=h.layersWithOutsidePointerEventsDisabled.size>0,_=E>=b,T=Lx(L=>{const I=L.target,V=[...h.branches].some(r0=>r0.contains(I));!_||V||(s==null||s(L),A==null||A(L),L.defaultPrevented||f==null||f())},v),R=Ox(L=>{const I=L.target;[...h.branches].some(r0=>r0.contains(I))||(c==null||c(L),A==null||A(L),L.defaultPrevented||f==null||f())},v);return Rx(L=>{E===h.layers.size-1&&(l==null||l(L),!L.defaultPrevented&&f&&(L.preventDefault(),f()))},v),y.useEffect(()=>{if(g)return a&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(kp=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),Tp(),()=>{a&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=kp)}},[g,v,a,h]),y.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),Tp())},[g,h]),y.useEffect(()=>{const L=()=>D({});return document.addEventListener(zu,L),()=>document.removeEventListener(zu,L)},[]),C.jsx(R0.div,{...p,ref:x,style:{pointerEvents:N?_?"auto":"none":void 0,...t.style},onFocusCapture:h0(t.onFocusCapture,R.onFocusCapture),onBlurCapture:h0(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:h0(t.onPointerDownCapture,T.onPointerDownCapture)})});ca.displayName=_x;var Mx="DismissableLayerBranch",Px=y.forwardRef((t,r)=>{const a=y.useContext(BC),l=y.useRef(null),s=o2(r,l);return y.useEffect(()=>{const c=l.current;if(c)return a.branches.add(c),()=>{a.branches.delete(c)}},[a.branches]),C.jsx(R0.div,{...t,ref:s})});Px.displayName=Mx;function Lx(t,r=globalThis==null?void 0:globalThis.document){const a=O2(t),l=y.useRef(!1),s=y.useRef(()=>{});return y.useEffect(()=>{const c=f=>{if(f.target&&!l.current){let p=function(){bC(kx,a,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(r.removeEventListener("click",s.current),s.current=p,r.addEventListener("click",s.current,{once:!0})):p()}else r.removeEventListener("click",s.current);l.current=!1},A=window.setTimeout(()=>{r.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(A),r.removeEventListener("pointerdown",c),r.removeEventListener("click",s.current)}},[r,a]),{onPointerDownCapture:()=>l.current=!0}}function Ox(t,r=globalThis==null?void 0:globalThis.document){const a=O2(t),l=y.useRef(!1);return y.useEffect(()=>{const s=c=>{c.target&&!l.current&&bC(Tx,a,{originalEvent:c},{discrete:!1})};return r.addEventListener("focusin",s),()=>r.removeEventListener("focusin",s)},[r,a]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Tp(){const t=new CustomEvent(zu);document.dispatchEvent(t)}function bC(t,r,a,{discrete:l}){const s=a.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});r&&s.addEventListener(t,r,{once:!0}),l?li(s,c):s.dispatchEvent(c)}var au="focusScope.autoFocusOnMount",lu="focusScope.autoFocusOnUnmount",Mp={bubbles:!1,cancelable:!0},jx="FocusScope",Fi=y.forwardRef((t,r)=>{const{loop:a=!1,trapped:l=!1,onMountAutoFocus:s,onUnmountAutoFocus:c,...A}=t,[f,p]=y.useState(null),h=O2(s),g=O2(c),m=y.useRef(null),v=o2(r,w=>p(w)),D=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(l){let w=function(N){if(D.paused||!f)return;const _=N.target;f.contains(_)?m.current=_:Zt(m.current,{select:!0})},B=function(N){if(D.paused||!f)return;const _=N.relatedTarget;_!==null&&(f.contains(_)||Zt(m.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const T of N)T.removedNodes.length>0&&Zt(f)};document.addEventListener("focusin",w),document.addEventListener("focusout",B);const E=new MutationObserver(b);return f&&E.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",B),E.disconnect()}}},[l,f,D.paused]),y.useEffect(()=>{if(f){Lp.add(D);const w=document.activeElement;if(!f.contains(w)){const b=new CustomEvent(au,Mp);f.addEventListener(au,h),f.dispatchEvent(b),b.defaultPrevented||(Ux(Wx(NC(f)),{select:!0}),document.activeElement===w&&Zt(f))}return()=>{f.removeEventListener(au,h),setTimeout(()=>{const b=new CustomEvent(lu,Mp);f.addEventListener(lu,g),f.dispatchEvent(b),b.defaultPrevented||Zt(w??document.body,{select:!0}),f.removeEventListener(lu,g),Lp.remove(D)},0)}}},[f,h,g,D]);const x=y.useCallback(w=>{if(!a&&!l||D.paused)return;const B=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,b=document.activeElement;if(B&&b){const E=w.currentTarget,[N,_]=Ix(E);N&&_?!w.shiftKey&&b===_?(w.preventDefault(),a&&Zt(N,{select:!0})):w.shiftKey&&b===N&&(w.preventDefault(),a&&Zt(_,{select:!0})):b===E&&w.preventDefault()}},[a,l,D.paused]);return C.jsx(R0.div,{tabIndex:-1,...A,ref:v,onKeyDown:x})});Fi.displayName=jx;function Ux(t,{select:r=!1}={}){const a=document.activeElement;for(const l of t)if(Zt(l,{select:r}),document.activeElement!==a)return}function Ix(t){const r=NC(t),a=Pp(r,t),l=Pp(r.reverse(),t);return[a,l]}function NC(t){const r=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const s=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||s?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)r.push(a.currentNode);return r}function Pp(t,r){for(const a of t)if(!zx(a,{upTo:r}))return a}function zx(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Hx(t){return t instanceof HTMLInputElement&&"select"in t}function Zt(t,{select:r=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&Hx(t)&&r&&t.select()}}var Lp=Vx();function Vx(){let t=[];return{add(r){const a=t[0];r!==a&&(a==null||a.pause()),t=Op(t,r),t.unshift(r)},remove(r){var a;t=Op(t,r),(a=t[0])==null||a.resume()}}}function Op(t,r){const a=[...t],l=a.indexOf(r);return l!==-1&&a.splice(l,1),a}function Wx(t){return t.filter(r=>r.tagName!=="A")}var Gx="Portal",Bi=y.forwardRef((t,r)=>{var f;const{container:a,...l}=t,[s,c]=y.useState(!1);Be(()=>c(!0),[]);const A=a||s&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return A?fC.createPortal(C.jsx(R0.div,{...l,ref:r}),A):null});Bi.displayName=Gx;function qx(t,r){return y.useReducer((a,l)=>r[a][l]??a,t)}var j2=t=>{const{present:r,children:a}=t,l=$x(r),s=typeof a=="function"?a({present:l.isPresent}):y.Children.only(a),c=o2(l.ref,Yx(s));return typeof a=="function"||l.isPresent?y.cloneElement(s,{ref:c}):null};j2.displayName="Presence";function $x(t){const[r,a]=y.useState(),l=y.useRef(null),s=y.useRef(t),c=y.useRef("none"),A=t?"mounted":"unmounted",[f,p]=qx(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=Ol(l.current);c.current=f==="mounted"?h:"none"},[f]),Be(()=>{const h=l.current,g=s.current;if(g!==t){const v=c.current,D=Ol(h);t?p("MOUNT"):D==="none"||(h==null?void 0:h.display)==="none"?p("UNMOUNT"):p(g&&v!==D?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,p]),Be(()=>{if(r){let h;const g=r.ownerDocument.defaultView??window,m=D=>{const w=Ol(l.current).includes(D.animationName);if(D.target===r&&w&&(p("ANIMATION_END"),!s.current)){const B=r.style.animationFillMode;r.style.animationFillMode="forwards",h=g.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=B)})}},v=D=>{D.target===r&&(c.current=Ol(l.current))};return r.addEventListener("animationstart",v),r.addEventListener("animationcancel",m),r.addEventListener("animationend",m),()=>{g.clearTimeout(h),r.removeEventListener("animationstart",v),r.removeEventListener("animationcancel",m),r.removeEventListener("animationend",m)}}else p("ANIMATION_END")},[r,p]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:y.useCallback(h=>{l.current=h?getComputedStyle(h):null,a(h)},[])}}function Ol(t){return(t==null?void 0:t.animationName)||"none"}function Yx(t){var l,s;let r=(l=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:l.get,a=r&&"isReactWarning"in r&&r.isReactWarning;return a?t.ref:(r=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,a=r&&"isReactWarning"in r&&r.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var iu=0;function NA(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??jp()),document.body.insertAdjacentElement("beforeend",t[1]??jp()),iu++,()=>{iu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),iu--}},[])}function jp(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $e=function(){return $e=Object.assign||function(r){for(var a,l=1,s=arguments.length;l<s;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])}return r},$e.apply(this,arguments)};function SC(t,r){var a={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&r.indexOf(l)<0&&(a[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(t);s<l.length;s++)r.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(t,l[s])&&(a[l[s]]=t[l[s]]);return a}function Kx(t,r,a){if(a||arguments.length===2)for(var l=0,s=r.length,c;l<s;l++)(c||!(l in r))&&(c||(c=Array.prototype.slice.call(r,0,l)),c[l]=r[l]);return t.concat(c||Array.prototype.slice.call(r))}var Jl="right-scroll-bar-position",ei="width-before-scroll-bar",Zx="with-scroll-bars-hidden",Xx="--removed-body-scroll-bar-size";function su(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function Qx(t,r){var a=y.useState(function(){return{value:t,callback:r,facade:{get current(){return a.value},set current(l){var s=a.value;s!==l&&(a.value=l,a.callback(l,s))}}}})[0];return a.callback=r,a.facade}var Jx=typeof window<"u"?y.useLayoutEffect:y.useEffect,Up=new WeakMap;function eF(t,r){var a=Qx(null,function(l){return t.forEach(function(s){return su(s,l)})});return Jx(function(){var l=Up.get(a);if(l){var s=new Set(l),c=new Set(t),A=a.current;s.forEach(function(f){c.has(f)||su(f,null)}),c.forEach(function(f){s.has(f)||su(f,A)})}Up.set(a,t)},[t]),a}function tF(t){return t}function nF(t,r){r===void 0&&(r=tF);var a=[],l=!1,s={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(c){var A=r(c,l);return a.push(A),function(){a=a.filter(function(f){return f!==A})}},assignSyncMedium:function(c){for(l=!0;a.length;){var A=a;a=[],A.forEach(c)}a={push:function(f){return c(f)},filter:function(){return a}}},assignMedium:function(c){l=!0;var A=[];if(a.length){var f=a;a=[],f.forEach(c),A=a}var p=function(){var g=A;A=[],g.forEach(c)},h=function(){return Promise.resolve().then(p)};h(),a={push:function(g){A.push(g),h()},filter:function(g){return A=A.filter(g),a}}}};return s}function rF(t){t===void 0&&(t={});var r=nF(null);return r.options=$e({async:!0,ssr:!1},t),r}var EC=function(t){var r=t.sideCar,a=SC(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=r.read();if(!l)throw new Error("Sidecar medium not found");return y.createElement(l,$e({},a))};EC.isSideCarExport=!0;function oF(t,r){return t.useMedium(r),EC}var RC=rF(),cu=function(){},bi=y.forwardRef(function(t,r){var a=y.useRef(null),l=y.useState({onScrollCapture:cu,onWheelCapture:cu,onTouchMoveCapture:cu}),s=l[0],c=l[1],A=t.forwardProps,f=t.children,p=t.className,h=t.removeScrollBar,g=t.enabled,m=t.shards,v=t.sideCar,D=t.noRelative,x=t.noIsolation,w=t.inert,B=t.allowPinchZoom,b=t.as,E=b===void 0?"div":b,N=t.gapMode,_=SC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=v,R=eF([a,r]),L=$e($e({},_),s);return y.createElement(y.Fragment,null,g&&y.createElement(T,{sideCar:RC,removeScrollBar:h,shards:m,noRelative:D,noIsolation:x,inert:w,setCallbacks:c,allowPinchZoom:!!B,lockRef:a,gapMode:N}),A?y.cloneElement(y.Children.only(f),$e($e({},L),{ref:R})):y.createElement(E,$e({},L,{className:p,ref:R}),f))});bi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bi.classNames={fullWidth:ei,zeroRight:Jl};var aF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=aF();return r&&t.setAttribute("nonce",r),t}function iF(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function sF(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var cF=function(){var t=0,r=null;return{add:function(a){t==0&&(r=lF())&&(iF(r,a),sF(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},uF=function(){var t=cF();return function(r,a){y.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&a])}},_C=function(){var t=uF(),r=function(a){var l=a.styles,s=a.dynamic;return t(l,s),null};return r},AF={left:0,top:0,right:0,gap:0},uu=function(t){return parseInt(t||"",10)||0},fF=function(t){var r=window.getComputedStyle(document.body),a=r[t==="padding"?"paddingLeft":"marginLeft"],l=r[t==="padding"?"paddingTop":"marginTop"],s=r[t==="padding"?"paddingRight":"marginRight"];return[uu(a),uu(l),uu(s)]},dF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AF;var r=fF(t),a=document.documentElement.clientWidth,l=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,l-a+r[2]-r[0])}},hF=_C(),Rr="data-scroll-locked",pF=function(t,r,a,l){var s=t.left,c=t.top,A=t.right,f=t.gap;return a===void 0&&(a="margin"),`
  .`.concat(Zx,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(f,"px ").concat(l,`;
  }
  body[`).concat(Rr,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(l,";"),a==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(A,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(l,`;
    `),a==="padding"&&"padding-right: ".concat(f,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jl,` {
    right: `).concat(f,"px ").concat(l,`;
  }
  
  .`).concat(ei,` {
    margin-right: `).concat(f,"px ").concat(l,`;
  }
  
  .`).concat(Jl," .").concat(Jl,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(ei," .").concat(ei,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(Rr,`] {
    `).concat(Xx,": ").concat(f,`px;
  }
`)},Ip=function(){var t=parseInt(document.body.getAttribute(Rr)||"0",10);return isFinite(t)?t:0},mF=function(){y.useEffect(function(){return document.body.setAttribute(Rr,(Ip()+1).toString()),function(){var t=Ip()-1;t<=0?document.body.removeAttribute(Rr):document.body.setAttribute(Rr,t.toString())}},[])},CF=function(t){var r=t.noRelative,a=t.noImportant,l=t.gapMode,s=l===void 0?"margin":l;mF();var c=y.useMemo(function(){return dF(s)},[s]);return y.createElement(hF,{styles:pF(c,!r,s,a?"":"!important")})},Hu=!1;if(typeof window<"u")try{var jl=Object.defineProperty({},"passive",{get:function(){return Hu=!0,!0}});window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{Hu=!1}var xr=Hu?{passive:!1}:!1,gF=function(t){return t.tagName==="TEXTAREA"},kC=function(t,r){if(!(t instanceof Element))return!1;var a=window.getComputedStyle(t);return a[r]!=="hidden"&&!(a.overflowY===a.overflowX&&!gF(t)&&a[r]==="visible")},yF=function(t){return kC(t,"overflowY")},vF=function(t){return kC(t,"overflowX")},zp=function(t,r){var a=r.ownerDocument,l=r;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var s=TC(t,l);if(s){var c=MC(t,l),A=c[1],f=c[2];if(A>f)return!0}l=l.parentNode}while(l&&l!==a.body);return!1},DF=function(t){var r=t.scrollTop,a=t.scrollHeight,l=t.clientHeight;return[r,a,l]},wF=function(t){var r=t.scrollLeft,a=t.scrollWidth,l=t.clientWidth;return[r,a,l]},TC=function(t,r){return t==="v"?yF(r):vF(r)},MC=function(t,r){return t==="v"?DF(r):wF(r)},xF=function(t,r){return t==="h"&&r==="rtl"?-1:1},FF=function(t,r,a,l,s){var c=xF(t,window.getComputedStyle(r).direction),A=c*l,f=a.target,p=r.contains(f),h=!1,g=A>0,m=0,v=0;do{if(!f)break;var D=MC(t,f),x=D[0],w=D[1],B=D[2],b=w-B-c*x;(x||b)&&TC(t,f)&&(m+=b,v+=x);var E=f.parentNode;f=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!p&&f!==document.body||p&&(r.contains(f)||r===f));return(g&&Math.abs(m)<1||!g&&Math.abs(v)<1)&&(h=!0),h},Ul=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Hp=function(t){return[t.deltaX,t.deltaY]},Vp=function(t){return t&&"current"in t?t.current:t},BF=function(t,r){return t[0]===r[0]&&t[1]===r[1]},bF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},NF=0,Fr=[];function SF(t){var r=y.useRef([]),a=y.useRef([0,0]),l=y.useRef(),s=y.useState(NF++)[0],c=y.useState(_C)[0],A=y.useRef(t);y.useEffect(function(){A.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=Kx([t.lockRef.current],(t.shards||[]).map(Vp),!0).filter(Boolean);return w.forEach(function(B){return B.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(B){return B.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var f=y.useCallback(function(w,B){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!A.current.allowPinchZoom;var b=Ul(w),E=a.current,N="deltaX"in w?w.deltaX:E[0]-b[0],_="deltaY"in w?w.deltaY:E[1]-b[1],T,R=w.target,L=Math.abs(N)>Math.abs(_)?"h":"v";if("touches"in w&&L==="h"&&R.type==="range")return!1;var I=zp(L,R);if(!I)return!0;if(I?T=L:(T=L==="v"?"h":"v",I=zp(L,R)),!I)return!1;if(!l.current&&"changedTouches"in w&&(N||_)&&(l.current=T),!T)return!0;var V=l.current||T;return FF(V,B,w,V==="h"?N:_)},[]),p=y.useCallback(function(w){var B=w;if(!(!Fr.length||Fr[Fr.length-1]!==c)){var b="deltaY"in B?Hp(B):Ul(B),E=r.current.filter(function(T){return T.name===B.type&&(T.target===B.target||B.target===T.shadowParent)&&BF(T.delta,b)})[0];if(E&&E.should){B.cancelable&&B.preventDefault();return}if(!E){var N=(A.current.shards||[]).map(Vp).filter(Boolean).filter(function(T){return T.contains(B.target)}),_=N.length>0?f(B,N[0]):!A.current.noIsolation;_&&B.cancelable&&B.preventDefault()}}},[]),h=y.useCallback(function(w,B,b,E){var N={name:w,delta:B,target:b,should:E,shadowParent:EF(b)};r.current.push(N),setTimeout(function(){r.current=r.current.filter(function(_){return _!==N})},1)},[]),g=y.useCallback(function(w){a.current=Ul(w),l.current=void 0},[]),m=y.useCallback(function(w){h(w.type,Hp(w),w.target,f(w,t.lockRef.current))},[]),v=y.useCallback(function(w){h(w.type,Ul(w),w.target,f(w,t.lockRef.current))},[]);y.useEffect(function(){return Fr.push(c),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",p,xr),document.addEventListener("touchmove",p,xr),document.addEventListener("touchstart",g,xr),function(){Fr=Fr.filter(function(w){return w!==c}),document.removeEventListener("wheel",p,xr),document.removeEventListener("touchmove",p,xr),document.removeEventListener("touchstart",g,xr)}},[]);var D=t.removeScrollBar,x=t.inert;return y.createElement(y.Fragment,null,x?y.createElement(c,{styles:bF(s)}):null,D?y.createElement(CF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function EF(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const RF=oF(RC,SF);var Ni=y.forwardRef(function(t,r){return y.createElement(bi,$e({},t,{ref:r,sideCar:RF}))});Ni.classNames=bi.classNames;var _F=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},Br=new WeakMap,Il=new WeakMap,zl={},Au=0,PC=function(t){return t&&(t.host||PC(t.parentNode))},kF=function(t,r){return r.map(function(a){if(t.contains(a))return a;var l=PC(a);return l&&t.contains(l)?l:(console.error("aria-hidden",a,"in not contained inside",t,". Doing nothing"),null)}).filter(function(a){return!!a})},TF=function(t,r,a,l){var s=kF(r,Array.isArray(t)?t:[t]);zl[a]||(zl[a]=new WeakMap);var c=zl[a],A=[],f=new Set,p=new Set(s),h=function(m){!m||f.has(m)||(f.add(m),h(m.parentNode))};s.forEach(h);var g=function(m){!m||p.has(m)||Array.prototype.forEach.call(m.children,function(v){if(f.has(v))g(v);else try{var D=v.getAttribute(l),x=D!==null&&D!=="false",w=(Br.get(v)||0)+1,B=(c.get(v)||0)+1;Br.set(v,w),c.set(v,B),A.push(v),w===1&&x&&Il.set(v,!0),B===1&&v.setAttribute(a,"true"),x||v.setAttribute(l,"true")}catch(b){console.error("aria-hidden: cannot operate on ",v,b)}})};return g(r),f.clear(),Au++,function(){A.forEach(function(m){var v=Br.get(m)-1,D=c.get(m)-1;Br.set(m,v),c.set(m,D),v||(Il.has(m)||m.removeAttribute(l),Il.delete(m)),D||m.removeAttribute(a)}),Au--,Au||(Br=new WeakMap,Br=new WeakMap,Il=new WeakMap,zl={})}},SA=function(t,r,a){a===void 0&&(a="data-aria-hidden");var l=Array.from(Array.isArray(t)?t:[t]),s=_F(t);return s?(l.push.apply(l,Array.from(s.querySelectorAll("[aria-live], script"))),TF(l,s,a,"aria-hidden")):function(){return null}},Si="Dialog",[LC,H8]=Le(Si),[MF,Oe]=LC(Si),OC=t=>{const{__scopeDialog:r,children:a,open:l,defaultOpen:s,onOpenChange:c,modal:A=!0}=t,f=y.useRef(null),p=y.useRef(null),[h,g]=Qe({prop:l,defaultProp:s??!1,onChange:c,caller:Si});return C.jsx(MF,{scope:r,triggerRef:f,contentRef:p,contentId:we(),titleId:we(),descriptionId:we(),open:h,onOpenChange:g,onOpenToggle:y.useCallback(()=>g(m=>!m),[g]),modal:A,children:a})};OC.displayName=Si;var jC="DialogTrigger",UC=y.forwardRef((t,r)=>{const{__scopeDialog:a,...l}=t,s=Oe(jC,a),c=o2(r,s.triggerRef);return C.jsx(R0.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_A(s.open),...l,ref:c,onClick:h0(t.onClick,s.onOpenToggle)})});UC.displayName=jC;var EA="DialogPortal",[PF,IC]=LC(EA,{forceMount:void 0}),zC=t=>{const{__scopeDialog:r,forceMount:a,children:l,container:s}=t,c=Oe(EA,r);return C.jsx(PF,{scope:r,forceMount:a,children:y.Children.map(l,A=>C.jsx(j2,{present:a||c.open,children:C.jsx(Bi,{asChild:!0,container:s,children:A})}))})};zC.displayName=EA;var ii="DialogOverlay",HC=y.forwardRef((t,r)=>{const a=IC(ii,t.__scopeDialog),{forceMount:l=a.forceMount,...s}=t,c=Oe(ii,t.__scopeDialog);return c.modal?C.jsx(j2,{present:l||c.open,children:C.jsx(OF,{...s,ref:r})}):null});HC.displayName=ii;var LF=Tr("DialogOverlay.RemoveScroll"),OF=y.forwardRef((t,r)=>{const{__scopeDialog:a,...l}=t,s=Oe(ii,a);return C.jsx(Ni,{as:LF,allowPinchZoom:!0,shards:[s.contentRef],children:C.jsx(R0.div,{"data-state":_A(s.open),...l,ref:r,style:{pointerEvents:"auto",...l.style}})})}),kn="DialogContent",VC=y.forwardRef((t,r)=>{const a=IC(kn,t.__scopeDialog),{forceMount:l=a.forceMount,...s}=t,c=Oe(kn,t.__scopeDialog);return C.jsx(j2,{present:l||c.open,children:c.modal?C.jsx(jF,{...s,ref:r}):C.jsx(UF,{...s,ref:r})})});VC.displayName=kn;var jF=y.forwardRef((t,r)=>{const a=Oe(kn,t.__scopeDialog),l=y.useRef(null),s=o2(r,a.contentRef,l);return y.useEffect(()=>{const c=l.current;if(c)return SA(c)},[]),C.jsx(WC,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h0(t.onCloseAutoFocus,c=>{var A;c.preventDefault(),(A=a.triggerRef.current)==null||A.focus()}),onPointerDownOutside:h0(t.onPointerDownOutside,c=>{const A=c.detail.originalEvent,f=A.button===0&&A.ctrlKey===!0;(A.button===2||f)&&c.preventDefault()}),onFocusOutside:h0(t.onFocusOutside,c=>c.preventDefault())})}),UF=y.forwardRef((t,r)=>{const a=Oe(kn,t.__scopeDialog),l=y.useRef(!1),s=y.useRef(!1);return C.jsx(WC,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var A,f;(A=t.onCloseAutoFocus)==null||A.call(t,c),c.defaultPrevented||(l.current||(f=a.triggerRef.current)==null||f.focus(),c.preventDefault()),l.current=!1,s.current=!1},onInteractOutside:c=>{var p,h;(p=t.onInteractOutside)==null||p.call(t,c),c.defaultPrevented||(l.current=!0,c.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const A=c.target;((h=a.triggerRef.current)==null?void 0:h.contains(A))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.current&&c.preventDefault()}})}),WC=y.forwardRef((t,r)=>{const{__scopeDialog:a,trapFocus:l,onOpenAutoFocus:s,onCloseAutoFocus:c,...A}=t,f=Oe(kn,a),p=y.useRef(null),h=o2(r,p);return NA(),C.jsxs(C.Fragment,{children:[C.jsx(Fi,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:s,onUnmountAutoFocus:c,children:C.jsx(ca,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":_A(f.open),...A,ref:h,onDismiss:()=>f.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(HF,{titleId:f.titleId}),C.jsx(WF,{contentRef:p,descriptionId:f.descriptionId})]})]})}),RA="DialogTitle",GC=y.forwardRef((t,r)=>{const{__scopeDialog:a,...l}=t,s=Oe(RA,a);return C.jsx(R0.h2,{id:s.titleId,...l,ref:r})});GC.displayName=RA;var qC="DialogDescription",IF=y.forwardRef((t,r)=>{const{__scopeDialog:a,...l}=t,s=Oe(qC,a);return C.jsx(R0.p,{id:s.descriptionId,...l,ref:r})});IF.displayName=qC;var $C="DialogClose",zF=y.forwardRef((t,r)=>{const{__scopeDialog:a,...l}=t,s=Oe($C,a);return C.jsx(R0.button,{type:"button",...l,ref:r,onClick:h0(t.onClick,()=>s.onOpenChange(!1))})});zF.displayName=$C;function _A(t){return t?"open":"closed"}var YC="DialogTitleWarning",[V8,KC]=Cx(YC,{contentName:kn,titleName:RA,docsSlug:"dialog"}),HF=({titleId:t})=>{const r=KC(YC),a=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},VF="DialogDescriptionWarning",WF=({contentRef:t,descriptionId:r})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KC(VF).contentName}}.`;return y.useEffect(()=>{var c;const s=(c=t.current)==null?void 0:c.getAttribute("aria-describedby");r&&s&&(document.getElementById(r)||console.warn(l))},[l,t,r]),null},ZC=OC,XC=UC,GF=zC,qF=HC,$F=VC,YF=GC;const KF=async()=>JSON.stringify(await(await fetch("/.vocs/search-index-604baed6.json")).json());var n2=function(){return n2=Object.assign||function(r){for(var a,l=1,s=arguments.length;l<s;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])}return r},n2.apply(this,arguments)};function ZF(t,r,a,l){function s(c){return c instanceof a?c:new a(function(A){A(c)})}return new(a||(a=Promise))(function(c,A){function f(g){try{h(l.next(g))}catch(m){A(m)}}function p(g){try{h(l.throw(g))}catch(m){A(m)}}function h(g){g.done?c(g.value):s(g.value).then(f,p)}h((l=l.apply(t,[])).next())})}function XF(t,r){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,s,c,A;return A={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function f(h){return function(g){return p([h,g])}}function p(h){if(l)throw new TypeError("Generator is already executing.");for(;A&&(A=0,h[0]&&(a=0)),a;)try{if(l=1,s&&(c=h[0]&2?s.return:h[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,h[1])).done)return c;switch(s=0,c&&(h=[h[0]&2,c.value]),h[0]){case 0:case 1:c=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,s=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(h[0]===6||h[0]===2)){a=0;continue}if(h[0]===3&&(!c||h[1]>c[0]&&h[1]<c[3])){a.label=h[1];break}if(h[0]===6&&a.label<c[1]){a.label=c[1],c=h;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(h);break}c[2]&&a.ops.pop(),a.trys.pop();continue}h=r.call(t,a)}catch(g){h=[6,g],s=0}finally{l=c=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function L0(t){var r=typeof Symbol=="function"&&Symbol.iterator,a=r&&t[r],l=0;if(a)return a.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&l>=t.length&&(t=void 0),{value:t&&t[l++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function y2(t,r){var a=typeof Symbol=="function"&&t[Symbol.iterator];if(!a)return t;var l=a.call(t),s,c=[],A;try{for(;(r===void 0||r-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){A={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(A)throw A.error}}return c}var QF="ENTRIES",QC="KEYS",JC="VALUES",T2="",fu=function(){function t(r,a){var l=r._tree,s=Array.from(l.keys());this.set=r,this._type=a,this._path=s.length>0?[{node:l,keys:s}]:[]}return t.prototype.next=function(){var r=this.dive();return this.backtrack(),r},t.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var r=br(this._path),a=r.node,l=r.keys;if(br(l)===T2)return{done:!1,value:this.result()};var s=a.get(br(l));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()},t.prototype.backtrack=function(){if(this._path.length!==0){var r=br(this._path).keys;r.pop(),!(r.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map(function(r){var a=r.keys;return br(a)}).filter(function(r){return r!==T2}).join("")},t.prototype.value=function(){return br(this._path).node.get(T2)},t.prototype.result=function(){switch(this._type){case JC:return this.value();case QC:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),br=function(t){return t[t.length-1]},JF=function(t,r,a){var l=new Map;if(r===void 0)return l;for(var s=r.length+1,c=s+a,A=new Uint8Array(c*s).fill(a+1),f=0;f<s;++f)A[f]=f;for(var p=1;p<c;++p)A[p*s]=p;return eg(t,r,a,l,A,1,s,""),l},eg=function(t,r,a,l,s,c,A,f){var p,h,g=c*A;try{e:for(var m=L0(t.keys()),v=m.next();!v.done;v=m.next()){var D=v.value;if(D===T2){var x=s[g-1];x<=a&&l.set(f,[t.get(D),x])}else{for(var w=c,B=0;B<D.length;++B,++w){for(var b=D[B],E=A*w,N=E-A,_=s[E],T=Math.max(0,w-a-1),R=Math.min(A-1,w+a),L=T;L<R;++L){var I=b!==r[L],V=s[N+L]+ +I,r0=s[N+L+1]+1,u0=s[E+L]+1,l0=s[E+L+1]=Math.min(V,r0,u0);l0<_&&(_=l0)}if(_>a)continue e}eg(t.get(D),r,a,l,s,w,A,f+D)}}}catch(i0){p={error:i0}}finally{try{v&&!v.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error}}},du=function(){function t(r,a){r===void 0&&(r=new Map),a===void 0&&(a=""),this._size=void 0,this._tree=r,this._prefix=a}return t.prototype.atPrefix=function(r){var a,l;if(!r.startsWith(this._prefix))throw new Error("Mismatched prefix");var s=y2(si(this._tree,r.slice(this._prefix.length)),2),c=s[0],A=s[1];if(c===void 0){var f=y2(kA(A),2),p=f[0],h=f[1];try{for(var g=L0(p.keys()),m=g.next();!m.done;m=g.next()){var v=m.value;if(v!==T2&&v.startsWith(h)){var D=new Map;return D.set(v.slice(h.length),p.get(v)),new t(D,r)}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}}return new t(c,r)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(r){return this._size=void 0,e5(this._tree,r)},t.prototype.entries=function(){return new fu(this,QF)},t.prototype.forEach=function(r){var a,l;try{for(var s=L0(this),c=s.next();!c.done;c=s.next()){var A=y2(c.value,2),f=A[0],p=A[1];r(f,p,this)}}catch(h){a={error:h}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},t.prototype.fuzzyGet=function(r,a){return JF(this._tree,r,a)},t.prototype.get=function(r){var a=Vu(this._tree,r);return a!==void 0?a.get(T2):void 0},t.prototype.has=function(r){var a=Vu(this._tree,r);return a!==void 0&&a.has(T2)},t.prototype.keys=function(){return new fu(this,QC)},t.prototype.set=function(r,a){if(typeof r!="string")throw new Error("key must be a string");this._size=void 0;var l=hu(this._tree,r);return l.set(T2,a),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var r=this.entries();!r.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(r,a){if(typeof r!="string")throw new Error("key must be a string");this._size=void 0;var l=hu(this._tree,r);return l.set(T2,a(l.get(T2))),this},t.prototype.fetch=function(r,a){if(typeof r!="string")throw new Error("key must be a string");this._size=void 0;var l=hu(this._tree,r),s=l.get(T2);return s===void 0&&l.set(T2,s=a()),s},t.prototype.values=function(){return new fu(this,JC)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(r){var a,l,s=new t;try{for(var c=L0(r),A=c.next();!A.done;A=c.next()){var f=y2(A.value,2),p=f[0],h=f[1];s.set(p,h)}}catch(g){a={error:g}}finally{try{A&&!A.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}return s},t.fromObject=function(r){return t.from(Object.entries(r))},t}(),si=function(t,r,a){var l,s;if(a===void 0&&(a=[]),r.length===0||t==null)return[t,a];try{for(var c=L0(t.keys()),A=c.next();!A.done;A=c.next()){var f=A.value;if(f!==T2&&r.startsWith(f))return a.push([t,f]),si(t.get(f),r.slice(f.length),a)}}catch(p){l={error:p}}finally{try{A&&!A.done&&(s=c.return)&&s.call(c)}finally{if(l)throw l.error}}return a.push([t,r]),si(void 0,"",a)},Vu=function(t,r){var a,l;if(r.length===0||t==null)return t;try{for(var s=L0(t.keys()),c=s.next();!c.done;c=s.next()){var A=c.value;if(A!==T2&&r.startsWith(A))return Vu(t.get(A),r.slice(A.length))}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},hu=function(t,r){var a,l,s=r.length;e:for(var c=0;t&&c<s;){try{for(var A=(a=void 0,L0(t.keys())),f=A.next();!f.done;f=A.next()){var p=f.value;if(p!==T2&&r[c]===p[0]){for(var h=Math.min(s-c,p.length),g=1;g<h&&r[c+g]===p[g];)++g;var m=t.get(p);if(g===p.length)t=m;else{var v=new Map;v.set(p.slice(g),m),t.set(r.slice(c,c+g),v),t.delete(p),t=v}c+=g;continue e}}}catch(x){a={error:x}}finally{try{f&&!f.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}var D=new Map;return t.set(r.slice(c),D),D}return t},e5=function(t,r){var a=y2(si(t,r),2),l=a[0],s=a[1];if(l!==void 0){if(l.delete(T2),l.size===0)tg(s);else if(l.size===1){var c=y2(l.entries().next().value,2),A=c[0],f=c[1];ng(s,A,f)}}},tg=function(t){if(t.length!==0){var r=y2(kA(t),2),a=r[0],l=r[1];if(a.delete(l),a.size===0)tg(t.slice(0,-1));else if(a.size===1){var s=y2(a.entries().next().value,2),c=s[0],A=s[1];c!==T2&&ng(t.slice(0,-1),c,A)}}},ng=function(t,r,a){if(t.length!==0){var l=y2(kA(t),2),s=l[0],c=l[1];s.set(c+r,a),s.delete(c)}},kA=function(t){return t[t.length-1]},$o,TA="or",rg="and",t5="and_not",n5=function(){function t(r){if((r==null?void 0:r.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');var a=r.autoVacuum==null||r.autoVacuum===!0?Cu:r.autoVacuum;this._options=n2(n2(n2({},mu),r),{autoVacuum:a,searchOptions:n2(n2({},Wp),r.searchOptions||{}),autoSuggestOptions:n2(n2({},i5),r.autoSuggestOptions||{})}),this._index=new du,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Gu,this.addFields(this._options.fields)}return t.prototype.add=function(r){var a,l,s,c,A,f,p=this._options,h=p.extractField,g=p.tokenize,m=p.processTerm,v=p.fields,D=p.idField,x=h(r,D);if(x==null)throw new Error('MiniSearch: document does not have ID field "'.concat(D,'"'));if(this._idToShortId.has(x))throw new Error("MiniSearch: duplicate ID ".concat(x));var w=this.addDocumentId(x);this.saveStoredFields(w,r);try{for(var B=L0(v),b=B.next();!b.done;b=B.next()){var E=b.value,N=h(r,E);if(N!=null){var _=g(N.toString(),E),T=this._fieldIds[E],R=new Set(_).size;this.addFieldLength(w,T,this._documentCount-1,R);try{for(var L=(s=void 0,L0(_)),I=L.next();!I.done;I=L.next()){var V=I.value,r0=m(V,E);if(Array.isArray(r0))try{for(var u0=(A=void 0,L0(r0)),l0=u0.next();!l0.done;l0=u0.next()){var i0=l0.value;this.addTerm(T,w,i0)}}catch(q){A={error:q}}finally{try{l0&&!l0.done&&(f=u0.return)&&f.call(u0)}finally{if(A)throw A.error}}else r0&&this.addTerm(T,w,r0)}}catch(q){s={error:q}}finally{try{I&&!I.done&&(c=L.return)&&c.call(L)}finally{if(s)throw s.error}}}}}catch(q){a={error:q}}finally{try{b&&!b.done&&(l=B.return)&&l.call(B)}finally{if(a)throw a.error}}},t.prototype.addAll=function(r){var a,l;try{for(var s=L0(r),c=s.next();!c.done;c=s.next()){var A=c.value;this.add(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},t.prototype.addAllAsync=function(r,a){var l=this;a===void 0&&(a={});var s=a.chunkSize,c=s===void 0?10:s,A={chunk:[],promise:Promise.resolve()},f=r.reduce(function(g,m,v){var D=g.chunk,x=g.promise;return D.push(m),(v+1)%c===0?{chunk:[],promise:x.then(function(){return new Promise(function(w){return setTimeout(w,0)})}).then(function(){return l.addAll(D)})}:{chunk:D,promise:x}},A),p=f.chunk,h=f.promise;return h.then(function(){return l.addAll(p)})},t.prototype.remove=function(r){var a,l,s,c,A,f,p=this._options,h=p.tokenize,g=p.processTerm,m=p.extractField,v=p.fields,D=p.idField,x=m(r,D);if(x==null)throw new Error('MiniSearch: document does not have ID field "'.concat(D,'"'));var w=this._idToShortId.get(x);if(w==null)throw new Error("MiniSearch: cannot remove document with ID ".concat(x,": it is not in the index"));try{for(var B=L0(v),b=B.next();!b.done;b=B.next()){var E=b.value,N=m(r,E);if(N!=null){var _=h(N.toString(),E),T=this._fieldIds[E],R=new Set(_).size;this.removeFieldLength(w,T,this._documentCount,R);try{for(var L=(s=void 0,L0(_)),I=L.next();!I.done;I=L.next()){var V=I.value,r0=g(V,E);if(Array.isArray(r0))try{for(var u0=(A=void 0,L0(r0)),l0=u0.next();!l0.done;l0=u0.next()){var i0=l0.value;this.removeTerm(T,w,i0)}}catch(q){A={error:q}}finally{try{l0&&!l0.done&&(f=u0.return)&&f.call(u0)}finally{if(A)throw A.error}}else r0&&this.removeTerm(T,w,r0)}}catch(q){s={error:q}}finally{try{I&&!I.done&&(c=L.return)&&c.call(L)}finally{if(s)throw s.error}}}}}catch(q){a={error:q}}finally{try{b&&!b.done&&(l=B.return)&&l.call(B)}finally{if(a)throw a.error}}this._storedFields.delete(w),this._documentIds.delete(w),this._idToShortId.delete(x),this._fieldLength.delete(w),this._documentCount-=1},t.prototype.removeAll=function(r){var a,l;if(r)try{for(var s=L0(r),c=s.next();!c.done;c=s.next()){var A=c.value;this.remove(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new du,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.discard=function(r){var a=this,l=this._idToShortId.get(r);if(l==null)throw new Error("MiniSearch: cannot discard document with ID ".concat(r,": it is not in the index"));this._idToShortId.delete(r),this._documentIds.delete(l),this._storedFields.delete(l),(this._fieldLength.get(l)||[]).forEach(function(s,c){a.removeFieldLength(l,c,a._documentCount,s)}),this._fieldLength.delete(l),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},t.prototype.maybeAutoVacuum=function(){if(this._options.autoVacuum!==!1){var r=this._options.autoVacuum,a=r.minDirtFactor,l=r.minDirtCount,s=r.batchSize,c=r.batchWait;this.conditionalVacuum({batchSize:s,batchWait:c},{minDirtCount:l,minDirtFactor:a})}},t.prototype.discardAll=function(r){var a,l,s=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var c=L0(r),A=c.next();!A.done;A=c.next()){var f=A.value;this.discard(f)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()},t.prototype.replace=function(r){var a=this._options,l=a.idField,s=a.extractField,c=s(r,l);this.discard(c),this.add(r)},t.prototype.vacuum=function(r){return r===void 0&&(r={}),this.conditionalVacuum(r)},t.prototype.conditionalVacuum=function(r,a){var l=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&a,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(function(){var s=l._enqueuedVacuumConditions;return l._enqueuedVacuumConditions=Gu,l.performVacuuming(r,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(a)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(r),this._currentVacuum)},t.prototype.performVacuuming=function(r,a){return ZF(this,void 0,void 0,function(){var l,s,c,A,f,p,h,g,m,v,D,x,w,B,b,E,N,_,T,R,L,I,V,r0,u0;return XF(this,function(l0){switch(l0.label){case 0:if(l=this._dirtCount,!this.vacuumConditionsMet(a))return[3,10];s=r.batchSize||Wu.batchSize,c=r.batchWait||Wu.batchWait,A=1,l0.label=1;case 1:l0.trys.push([1,7,8,9]),f=L0(this._index),p=f.next(),l0.label=2;case 2:if(p.done)return[3,6];h=y2(p.value,2),g=h[0],m=h[1];try{for(v=(I=void 0,L0(m)),D=v.next();!D.done;D=v.next()){x=y2(D.value,2),w=x[0],B=x[1];try{for(b=(r0=void 0,L0(B)),E=b.next();!E.done;E=b.next())N=y2(E.value,1),_=N[0],!this._documentIds.has(_)&&(B.size<=1?m.delete(w):B.delete(_))}catch(i0){r0={error:i0}}finally{try{E&&!E.done&&(u0=b.return)&&u0.call(b)}finally{if(r0)throw r0.error}}}}catch(i0){I={error:i0}}finally{try{D&&!D.done&&(V=v.return)&&V.call(v)}finally{if(I)throw I.error}}return this._index.get(g).size===0&&this._index.delete(g),A%s!==0?[3,4]:[4,new Promise(function(i0){return setTimeout(i0,c)})];case 3:l0.sent(),l0.label=4;case 4:A+=1,l0.label=5;case 5:return p=f.next(),[3,2];case 6:return[3,9];case 7:return T=l0.sent(),R={error:T},[3,9];case 8:try{p&&!p.done&&(L=f.return)&&L.call(f)}finally{if(R)throw R.error}return[7];case 9:this._dirtCount-=l,l0.label=10;case 10:return[4,null];case 11:return l0.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}})})},t.prototype.vacuumConditionsMet=function(r){if(r==null)return!0;var a=r.minDirtCount,l=r.minDirtFactor;return a=a||Cu.minDirtCount,l=l||Cu.minDirtFactor,this.dirtCount>=a&&this.dirtFactor>=l},Object.defineProperty(t.prototype,"isVacuuming",{get:function(){return this._currentVacuum!=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),t.prototype.has=function(r){return this._idToShortId.has(r)},t.prototype.getStoredFields=function(r){var a=this._idToShortId.get(r);if(a!=null)return this._storedFields.get(a)},t.prototype.search=function(r,a){var l,s;a===void 0&&(a={});var c=this.executeQuery(r,a),A=[];try{for(var f=L0(c),p=f.next();!p.done;p=f.next()){var h=y2(p.value,2),g=h[0],m=h[1],v=m.score,D=m.terms,x=m.match,w=D.length||1,B={id:this._documentIds.get(g),score:v*w,terms:Object.keys(x),queryTerms:D,match:x};Object.assign(B,this._storedFields.get(g)),(a.filter==null||a.filter(B))&&A.push(B)}}catch(b){l={error:b}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(l)throw l.error}}return r===t.wildcard&&a.boostDocument==null&&this._options.searchOptions.boostDocument==null||A.sort(qp),A},t.prototype.autoSuggest=function(r,a){var l,s,c,A;a===void 0&&(a={}),a=n2(n2({},this._options.autoSuggestOptions),a);var f=new Map;try{for(var p=L0(this.search(r,a)),h=p.next();!h.done;h=p.next()){var g=h.value,m=g.score,v=g.terms,D=v.join(" "),x=f.get(D);x!=null?(x.score+=m,x.count+=1):f.set(D,{score:m,terms:v,count:1})}}catch(T){l={error:T}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(l)throw l.error}}var w=[];try{for(var B=L0(f),b=B.next();!b.done;b=B.next()){var E=y2(b.value,2),x=E[0],N=E[1],m=N.score,v=N.terms,_=N.count;w.push({suggestion:x,terms:v,score:m/_})}}catch(T){c={error:T}}finally{try{b&&!b.done&&(A=B.return)&&A.call(B)}finally{if(c)throw c.error}}return w.sort(qp),w},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),t.loadJSON=function(r,a){if(a==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(r),a)},t.getDefault=function(r){if(mu.hasOwnProperty(r))return pu(mu,r);throw new Error('MiniSearch: unknown option "'.concat(r,'"'))},t.loadJS=function(r,a){var l,s,c,A,f,p,h=r.index,g=r.documentCount,m=r.nextId,v=r.documentIds,D=r.fieldIds,x=r.fieldLength,w=r.averageFieldLength,B=r.storedFields,b=r.dirtCount,E=r.serializationVersion;if(E!==1&&E!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var N=new t(a);N._documentCount=g,N._nextId=m,N._documentIds=Hl(v),N._idToShortId=new Map,N._fieldIds=D,N._fieldLength=Hl(x),N._avgFieldLength=w,N._storedFields=Hl(B),N._dirtCount=b||0,N._index=new du;try{for(var _=L0(N._documentIds),T=_.next();!T.done;T=_.next()){var R=y2(T.value,2),L=R[0],I=R[1];N._idToShortId.set(I,L)}}catch(K){l={error:K}}finally{try{T&&!T.done&&(s=_.return)&&s.call(_)}finally{if(l)throw l.error}}try{for(var V=L0(h),r0=V.next();!r0.done;r0=V.next()){var u0=y2(r0.value,2),l0=u0[0],i0=u0[1],q=new Map;try{for(var A0=(f=void 0,L0(Object.keys(i0))),O=A0.next();!O.done;O=A0.next()){var G=O.value,X=i0[G];E===1&&(X=X.ds),q.set(parseInt(G,10),Hl(X))}}catch(K){f={error:K}}finally{try{O&&!O.done&&(p=A0.return)&&p.call(A0)}finally{if(f)throw f.error}}N._index.set(l0,q)}}catch(K){c={error:K}}finally{try{r0&&!r0.done&&(A=V.return)&&A.call(V)}finally{if(c)throw c.error}}return N},t.prototype.executeQuery=function(r,a){var l=this;if(a===void 0&&(a={}),r===t.wildcard)return this.executeWildcardQuery(a);if(typeof r!="string"){var s=n2(n2(n2({},a),r),{queries:void 0}),c=r.queries.map(function(B){return l.executeQuery(B,s)});return this.combineResults(c,s.combineWith)}var A=this._options,f=A.tokenize,p=A.processTerm,h=A.searchOptions,g=n2(n2({tokenize:f,processTerm:p},h),a),m=g.tokenize,v=g.processTerm,D=m(r).flatMap(function(B){return v(B)}).filter(function(B){return!!B}),x=D.map(l5(g)),w=x.map(function(B){return l.executeQuerySpec(B,g)});return this.combineResults(w,g.combineWith)},t.prototype.executeQuerySpec=function(r,a){var l,s,c,A,f=n2(n2({},this._options.searchOptions),a),p=(f.fields||this._options.fields).reduce(function(G,X){var K;return n2(n2({},G),(K={},K[X]=pu(f.boost,X)||1,K))},{}),h=f.boostDocument,g=f.weights,m=f.maxFuzzy,v=f.bm25,D=n2(n2({},Wp.weights),g),x=D.fuzzy,w=D.prefix,B=this._index.get(r.term),b=this.termResults(r.term,r.term,1,B,p,h,v),E,N;if(r.prefix&&(E=this._index.atPrefix(r.term)),r.fuzzy){var _=r.fuzzy===!0?.2:r.fuzzy,T=_<1?Math.min(m,Math.round(r.term.length*_)):_;T&&(N=this._index.fuzzyGet(r.term,T))}if(E)try{for(var R=L0(E),L=R.next();!L.done;L=R.next()){var I=y2(L.value,2),V=I[0],r0=I[1],u0=V.length-r.term.length;if(u0){N==null||N.delete(V);var l0=w*V.length/(V.length+.3*u0);this.termResults(r.term,V,l0,r0,p,h,v,b)}}}catch(G){l={error:G}}finally{try{L&&!L.done&&(s=R.return)&&s.call(R)}finally{if(l)throw l.error}}if(N)try{for(var i0=L0(N.keys()),q=i0.next();!q.done;q=i0.next()){var V=q.value,A0=y2(N.get(V),2),O=A0[0],u0=A0[1];if(u0){var l0=x*V.length/(V.length+u0);this.termResults(r.term,V,l0,O,p,h,v,b)}}}catch(G){c={error:G}}finally{try{q&&!q.done&&(A=i0.return)&&A.call(i0)}finally{if(c)throw c.error}}return b},t.prototype.executeWildcardQuery=function(r){var a,l,s=new Map,c=n2(n2({},this._options.searchOptions),r);try{for(var A=L0(this._documentIds),f=A.next();!f.done;f=A.next()){var p=y2(f.value,2),h=p[0],g=p[1],m=c.boostDocument?c.boostDocument(g,"",this._storedFields.get(h)):1;s.set(h,{score:m,terms:[],match:{}})}}catch(v){a={error:v}}finally{try{f&&!f.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}return s},t.prototype.combineResults=function(r,a){if(a===void 0&&(a=TA),r.length===0)return new Map;var l=a.toLowerCase();return r.reduce(r5[l])||new Map},t.prototype.toJSON=function(){var r,a,l,s,c=[];try{for(var A=L0(this._index),f=A.next();!f.done;f=A.next()){var p=y2(f.value,2),h=p[0],g=p[1],m={};try{for(var v=(l=void 0,L0(g)),D=v.next();!D.done;D=v.next()){var x=y2(D.value,2),w=x[0],B=x[1];m[w]=Object.fromEntries(B)}}catch(b){l={error:b}}finally{try{D&&!D.done&&(s=v.return)&&s.call(v)}finally{if(l)throw l.error}}c.push([h,m])}}catch(b){r={error:b}}finally{try{f&&!f.done&&(a=A.return)&&a.call(A)}finally{if(r)throw r.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:c,serializationVersion:2}},t.prototype.termResults=function(r,a,l,s,c,A,f,p){var h,g,m,v,D;if(p===void 0&&(p=new Map),s==null)return p;try{for(var x=L0(Object.keys(c)),w=x.next();!w.done;w=x.next()){var B=w.value,b=c[B],E=this._fieldIds[B],N=s.get(E);if(N!=null){var _=N.size,T=this._avgFieldLength[E];try{for(var R=(m=void 0,L0(N.keys())),L=R.next();!L.done;L=R.next()){var I=L.value;if(!this._documentIds.has(I)){this.removeTerm(E,I,a),_-=1;continue}var V=A?A(this._documentIds.get(I),a,this._storedFields.get(I)):1;if(V){var r0=N.get(I),u0=this._fieldLength.get(I)[E],l0=a5(r0,_,this._documentCount,u0,T,f),i0=l*b*V*l0,q=p.get(I);if(q){q.score+=i0,s5(q.terms,r);var A0=pu(q.match,a);A0?A0.push(B):q.match[a]=[B]}else p.set(I,{score:i0,terms:[r],match:(D={},D[a]=[B],D)})}}}catch(O){m={error:O}}finally{try{L&&!L.done&&(v=R.return)&&v.call(R)}finally{if(m)throw m.error}}}}}catch(O){h={error:O}}finally{try{w&&!w.done&&(g=x.return)&&g.call(x)}finally{if(h)throw h.error}}return p},t.prototype.addTerm=function(r,a,l){var s=this._index.fetch(l,$p),c=s.get(r);if(c==null)c=new Map,c.set(a,1),s.set(r,c);else{var A=c.get(a);c.set(a,(A||0)+1)}},t.prototype.removeTerm=function(r,a,l){if(!this._index.has(l)){this.warnDocumentChanged(a,r,l);return}var s=this._index.fetch(l,$p),c=s.get(r);c==null||c.get(a)==null?this.warnDocumentChanged(a,r,l):c.get(a)<=1?c.size<=1?s.delete(r):c.delete(a):c.set(a,c.get(a)-1),this._index.get(l).size===0&&this._index.delete(l)},t.prototype.warnDocumentChanged=function(r,a,l){var s,c;try{for(var A=L0(Object.keys(this._fieldIds)),f=A.next();!f.done;f=A.next()){var p=f.value;if(this._fieldIds[p]===a){this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(r),' has changed before removal: term "').concat(l,'" was not present in field "').concat(p,'". Removing a document after it has changed can corrupt the index!'),"version_conflict");return}}}catch(h){s={error:h}}finally{try{f&&!f.done&&(c=A.return)&&c.call(A)}finally{if(s)throw s.error}}},t.prototype.addDocumentId=function(r){var a=this._nextId;return this._idToShortId.set(r,a),this._documentIds.set(a,r),this._documentCount+=1,this._nextId+=1,a},t.prototype.addFields=function(r){for(var a=0;a<r.length;a++)this._fieldIds[r[a]]=a},t.prototype.addFieldLength=function(r,a,l,s){var c=this._fieldLength.get(r);c==null&&this._fieldLength.set(r,c=[]),c[a]=s;var A=this._avgFieldLength[a]||0,f=A*l+s;this._avgFieldLength[a]=f/(l+1)},t.prototype.removeFieldLength=function(r,a,l,s){if(l===1){this._avgFieldLength[a]=0;return}var c=this._avgFieldLength[a]*l-s;this._avgFieldLength[a]=c/(l-1)},t.prototype.saveStoredFields=function(r,a){var l,s,c=this._options,A=c.storeFields,f=c.extractField;if(!(A==null||A.length===0)){var p=this._storedFields.get(r);p==null&&this._storedFields.set(r,p={});try{for(var h=L0(A),g=h.next();!g.done;g=h.next()){var m=g.value,v=f(a,m);v!==void 0&&(p[m]=v)}}catch(D){l={error:D}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(l)throw l.error}}}},t.wildcard=Symbol("*"),t}(),pu=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)?t[r]:void 0},r5=($o={},$o[TA]=function(t,r){var a,l;try{for(var s=L0(r.keys()),c=s.next();!c.done;c=s.next()){var A=c.value,f=t.get(A);if(f==null)t.set(A,r.get(A));else{var p=r.get(A),h=p.score,g=p.terms,m=p.match;f.score=f.score+h,f.match=Object.assign(f.match,m),Gp(f.terms,g)}}}catch(v){a={error:v}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}return t},$o[rg]=function(t,r){var a,l,s=new Map;try{for(var c=L0(r.keys()),A=c.next();!A.done;A=c.next()){var f=A.value,p=t.get(f);if(p!=null){var h=r.get(f),g=h.score,m=h.terms,v=h.match;Gp(p.terms,m),s.set(f,{score:p.score+g,terms:p.terms,match:Object.assign(p.match,v)})}}}catch(D){a={error:D}}finally{try{A&&!A.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}return s},$o[t5]=function(t,r){var a,l;try{for(var s=L0(r.keys()),c=s.next();!c.done;c=s.next()){var A=c.value;t.delete(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}return t},$o),o5={k:1.2,b:.7,d:.5},a5=function(t,r,a,l,s,c){var A=c.k,f=c.b,p=c.d,h=Math.log(1+(a-r+.5)/(r+.5));return h*(p+t*(A+1)/(t+A*(1-f+f*l/s)))},l5=function(t){return function(r,a,l){var s=typeof t.fuzzy=="function"?t.fuzzy(r,a,l):t.fuzzy||!1,c=typeof t.prefix=="function"?t.prefix(r,a,l):t.prefix===!0;return{term:r,fuzzy:s,prefix:c}}},mu={idField:"id",extractField:function(t,r){return t[r]},tokenize:function(t){return t.split(c5)},processTerm:function(t){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(t,r){typeof(console==null?void 0:console[t])=="function"&&console[t](r)},autoVacuum:!0},Wp={combineWith:TA,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:o5},i5={combineWith:rg,prefix:function(t,r,a){return r===a.length-1}},Wu={batchSize:1e3,batchWait:10},Gu={minDirtFactor:.1,minDirtCount:20},Cu=n2(n2({},Wu),Gu),s5=function(t,r){t.includes(r)||t.push(r)},Gp=function(t,r){var a,l;try{for(var s=L0(r),c=s.next();!c.done;c=s.next()){var A=c.value;t.includes(A)||t.push(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},qp=function(t,r){var a=t.score,l=r.score;return l-a},$p=function(){return new Map},Hl=function(t){var r,a,l=new Map;try{for(var s=L0(Object.keys(t)),c=s.next();!c.done;c=s.next()){var A=c.value;l.set(parseInt(A,10),t[A])}}catch(f){r={error:f}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return l},c5=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;let gu;function og(){const[t,r]=y.useState();return y.useEffect(()=>{(async()=>{gu||(gu=KF());const a=await gu,l=n5.loadJSON(a,{fields:["title","titles","text"],searchOptions:{boost:{title:4,text:2,titles:1},fuzzy:.2,prefix:!0},storeFields:["href","html","isPage","text","title","titles"]});r(l)})()},[]),y.useEffect(()=>{},[]),t}var u5="vocs_DesktopSearch_search",A5="vocs_DesktopSearch_searchCommand",f5="Label",ag=y.forwardRef((t,r)=>C.jsx(R0.label,{...t,ref:r,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));ag.displayName=f5;var d5=ag,ti={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 20142018, Julian Khnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/var h5=ti.exports,Yp;function p5(){return Yp||(Yp=1,function(t,r){(function(a,l){t.exports=l()})(h5,function(){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l=function(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")},s=function(){function h(g,m){for(var v=0;v<m.length;v++){var D=m[v];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(g,D.key,D)}}return function(g,m,v){return m&&h(g.prototype,m),v&&h(g,v),g}}(),c=Object.assign||function(h){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(h[v]=m[v])}return h},A=function(){function h(g){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;l(this,h),this.ctx=g,this.iframes=m,this.exclude=v,this.iframesTimeout=D}return s(h,[{key:"getContexts",value:function(){var m=void 0,v=[];return typeof this.ctx>"u"||!this.ctx?m=[]:NodeList.prototype.isPrototypeOf(this.ctx)?m=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?m=this.ctx:typeof this.ctx=="string"?m=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):m=[this.ctx],m.forEach(function(D){var x=v.filter(function(w){return w.contains(D)}).length>0;v.indexOf(D)===-1&&!x&&v.push(D)}),v}},{key:"getIframeContents",value:function(m,v){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},x=void 0;try{var w=m.contentWindow;if(x=w.document,!w||!x)throw new Error("iframe inaccessible")}catch{D()}x&&v(x)}},{key:"isIframeBlank",value:function(m){var v="about:blank",D=m.getAttribute("src").trim(),x=m.contentWindow.location.href;return x===v&&D!==v&&D}},{key:"observeIframeLoad",value:function(m,v,D){var x=this,w=!1,B=null,b=function E(){if(!w){w=!0,clearTimeout(B);try{x.isIframeBlank(m)||(m.removeEventListener("load",E),x.getIframeContents(m,v,D))}catch{D()}}};m.addEventListener("load",b),B=setTimeout(b,this.iframesTimeout)}},{key:"onIframeReady",value:function(m,v,D){try{m.contentWindow.document.readyState==="complete"?this.isIframeBlank(m)?this.observeIframeLoad(m,v,D):this.getIframeContents(m,v,D):this.observeIframeLoad(m,v,D)}catch{D()}}},{key:"waitForIframes",value:function(m,v){var D=this,x=0;this.forEachIframe(m,function(){return!0},function(w){x++,D.waitForIframes(w.querySelector("html"),function(){--x||v()})},function(w){w||v()})}},{key:"forEachIframe",value:function(m,v,D){var x=this,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},B=m.querySelectorAll("iframe"),b=B.length,E=0;B=Array.prototype.slice.call(B);var N=function(){--b<=0&&w(E)};b||N(),B.forEach(function(_){h.matches(_,x.exclude)?N():x.onIframeReady(_,function(T){v(_)&&(E++,D(T)),N()},N)})}},{key:"createIterator",value:function(m,v,D){return document.createNodeIterator(m,v,D,!1)}},{key:"createInstanceOnIframe",value:function(m){return new h(m.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(m,v,D){var x=m.compareDocumentPosition(D),w=Node.DOCUMENT_POSITION_PRECEDING;if(x&w)if(v!==null){var B=v.compareDocumentPosition(D),b=Node.DOCUMENT_POSITION_FOLLOWING;if(B&b)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(m){var v=m.previousNode(),D=void 0;return v===null?D=m.nextNode():D=m.nextNode()&&m.nextNode(),{prevNode:v,node:D}}},{key:"checkIframeFilter",value:function(m,v,D,x){var w=!1,B=!1;return x.forEach(function(b,E){b.val===D&&(w=E,B=b.handled)}),this.compareNodeIframe(m,v,D)?(w===!1&&!B?x.push({val:D,handled:!0}):w!==!1&&!B&&(x[w].handled=!0),!0):(w===!1&&x.push({val:D,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(m,v,D,x){var w=this;m.forEach(function(B){B.handled||w.getIframeContents(B.val,function(b){w.createInstanceOnIframe(b).forEachNode(v,D,x)})})}},{key:"iterateThroughNodes",value:function(m,v,D,x,w){for(var B=this,b=this.createIterator(v,m,x),E=[],N=[],_=void 0,T=void 0,R=function(){var I=B.getIteratorNode(b);return T=I.prevNode,_=I.node,_};R();)this.iframes&&this.forEachIframe(v,function(L){return B.checkIframeFilter(_,T,L,E)},function(L){B.createInstanceOnIframe(L).forEachNode(m,function(I){return N.push(I)},x)}),N.push(_);N.forEach(function(L){D(L)}),this.iframes&&this.handleOpenIframes(E,m,D,x),w()}},{key:"forEachNode",value:function(m,v,D){var x=this,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},B=this.getContexts(),b=B.length;b||w(),B.forEach(function(E){var N=function(){x.iterateThroughNodes(m,E,v,D,function(){--b<=0&&w()})};x.iframes?x.waitForIframes(E,N):N()})}}],[{key:"matches",value:function(m,v){var D=typeof v=="string"?[v]:v,x=m.matches||m.matchesSelector||m.msMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.webkitMatchesSelector;if(x){var w=!1;return D.every(function(B){return x.call(m,B)?(w=!0,!1):!0}),w}else return!1}}]),h}(),f=function(){function h(g){l(this,h),this.ctx=g,this.ie=!1;var m=window.navigator.userAgent;(m.indexOf("MSIE")>-1||m.indexOf("Trident")>-1)&&(this.ie=!0)}return s(h,[{key:"log",value:function(m){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",D=this.opt.log;this.opt.debug&&(typeof D>"u"?"undefined":a(D))==="object"&&typeof D[v]=="function"&&D[v]("mark.js: "+m)}},{key:"escapeStr",value:function(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(m){return this.opt.wildcards!=="disabled"&&(m=this.setupWildcardsRegExp(m)),m=this.escapeStr(m),Object.keys(this.opt.synonyms).length&&(m=this.createSynonymsRegExp(m)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(m=this.setupIgnoreJoinersRegExp(m)),this.opt.diacritics&&(m=this.createDiacriticsRegExp(m)),m=this.createMergedBlanksRegExp(m),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(m=this.createJoinersRegExp(m)),this.opt.wildcards!=="disabled"&&(m=this.createWildcardsRegExp(m)),m=this.createAccuracyRegExp(m),m}},{key:"createSynonymsRegExp",value:function(m){var v=this.opt.synonyms,D=this.opt.caseSensitive?"":"i",x=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var w in v)if(v.hasOwnProperty(w)){var B=v[w],b=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(w):this.escapeStr(w),E=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(B):this.escapeStr(B);b!==""&&E!==""&&(m=m.replace(new RegExp("("+this.escapeStr(b)+"|"+this.escapeStr(E)+")","gm"+D),x+("("+this.processSynomyms(b)+"|")+(this.processSynomyms(E)+")")+x))}return m}},{key:"processSynomyms",value:function(m){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(m=this.setupIgnoreJoinersRegExp(m)),m}},{key:"setupWildcardsRegExp",value:function(m){return m=m.replace(/(?:\\)*\?/g,function(v){return v.charAt(0)==="\\"?"?":""}),m.replace(/(?:\\)*\*/g,function(v){return v.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(m){var v=this.opt.wildcards==="withSpaces";return m.replace(/\u0001/g,v?"[\\S\\s]?":"\\S?").replace(/\u0002/g,v?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(m){return m.replace(/[^(|)\\]/g,function(v,D,x){var w=x.charAt(D+1);return/[(|)\\]/.test(w)||w===""?v:v+"\0"})}},{key:"createJoinersRegExp",value:function(m){var v=[],D=this.opt.ignorePunctuation;return Array.isArray(D)&&D.length&&v.push(this.escapeStr(D.join(""))),this.opt.ignoreJoiners&&v.push("\\u00ad\\u200b\\u200c\\u200d"),v.length?m.split(/\u0000+/).join("["+v.join("")+"]*"):m}},{key:"createDiacriticsRegExp",value:function(m){var v=this.opt.caseSensitive?"":"i",D=this.opt.caseSensitive?["a","A","c","C","d","D","e","E","i","I","l","L","n","N","o","O","r","R","s","S","t","T","u","U","y","Y","z","Z"]:["aA","cC","dD","eE","iI","lL","nN","oO","rR","sS","tT","uU","yY","zZ"],x=[];return m.split("").forEach(function(w){D.every(function(B){if(B.indexOf(w)!==-1){if(x.indexOf(B)>-1)return!1;m=m.replace(new RegExp("["+B+"]","gm"+v),"["+B+"]"),x.push(B)}return!0})}),m}},{key:"createMergedBlanksRegExp",value:function(m){return m.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(m){var v=this,D="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",x=this.opt.accuracy,w=typeof x=="string"?x:x.value,B=typeof x=="string"?[]:x.limiters,b="";switch(B.forEach(function(E){b+="|"+v.escapeStr(E)}),w){case"partially":default:return"()("+m+")";case"complementary":return b="\\s"+(b||this.escapeStr(D)),"()([^"+b+"]*"+m+"[^"+b+"]*)";case"exactly":return"(^|\\s"+b+")("+m+")(?=$|\\s"+b+")"}}},{key:"getSeparatedKeywords",value:function(m){var v=this,D=[];return m.forEach(function(x){v.opt.separateWordSearch?x.split(" ").forEach(function(w){w.trim()&&D.indexOf(w)===-1&&D.push(w)}):x.trim()&&D.indexOf(x)===-1&&D.push(x)}),{keywords:D.sort(function(x,w){return w.length-x.length}),length:D.length}}},{key:"isNumeric",value:function(m){return Number(parseFloat(m))==m}},{key:"checkRanges",value:function(m){var v=this;if(!Array.isArray(m)||Object.prototype.toString.call(m[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(m),[];var D=[],x=0;return m.sort(function(w,B){return w.start-B.start}).forEach(function(w){var B=v.callNoMatchOnInvalidRanges(w,x),b=B.start,E=B.end,N=B.valid;N&&(w.start=b,w.length=E-b,D.push(w),x=E)}),D}},{key:"callNoMatchOnInvalidRanges",value:function(m,v){var D=void 0,x=void 0,w=!1;return m&&typeof m.start<"u"?(D=parseInt(m.start,10),x=D+parseInt(m.length,10),this.isNumeric(m.start)&&this.isNumeric(m.length)&&x-v>0&&x-D>0?w=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(m))),this.opt.noMatch(m))):(this.log("Ignoring invalid range: "+JSON.stringify(m)),this.opt.noMatch(m)),{start:D,end:x,valid:w}}},{key:"checkWhitespaceRanges",value:function(m,v,D){var x=void 0,w=!0,B=D.length,b=v-B,E=parseInt(m.start,10)-b;return E=E>B?B:E,x=E+parseInt(m.length,10),x>B&&(x=B,this.log("End range automatically set to the max value of "+B)),E<0||x-E<0||E>B||x>B?(w=!1,this.log("Invalid range: "+JSON.stringify(m)),this.opt.noMatch(m)):D.substring(E,x).replace(/\s+/g,"")===""&&(w=!1,this.log("Skipping whitespace only range: "+JSON.stringify(m)),this.opt.noMatch(m)),{start:E,end:x,valid:w}}},{key:"getTextNodes",value:function(m){var v=this,D="",x=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(w){x.push({start:D.length,end:(D+=w.textContent).length,node:w})},function(w){return v.matchesExclude(w.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){m({value:D,nodes:x})})}},{key:"matchesExclude",value:function(m){return A.matches(m,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(m,v,D){var x=this.opt.element?this.opt.element:"mark",w=m.splitText(v),B=w.splitText(D-v),b=document.createElement(x);return b.setAttribute("data-markjs","true"),this.opt.className&&b.setAttribute("class",this.opt.className),b.textContent=w.textContent,w.parentNode.replaceChild(b,w),B}},{key:"wrapRangeInMappedTextNode",value:function(m,v,D,x,w){var B=this;m.nodes.every(function(b,E){var N=m.nodes[E+1];if(typeof N>"u"||N.start>v){if(!x(b.node))return!1;var _=v-b.start,T=(D>b.end?b.end:D)-b.start,R=m.value.substr(0,b.start),L=m.value.substr(T+b.start);if(b.node=B.wrapRangeInTextNode(b.node,_,T),m.value=R+L,m.nodes.forEach(function(I,V){V>=E&&(m.nodes[V].start>0&&V!==E&&(m.nodes[V].start-=T),m.nodes[V].end-=T)}),D-=T,w(b.node.previousSibling,b.start),D>b.end)v=b.end;else return!1}return!0})}},{key:"wrapMatches",value:function(m,v,D,x,w){var B=this,b=v===0?0:v+1;this.getTextNodes(function(E){E.nodes.forEach(function(N){N=N.node;for(var _=void 0;(_=m.exec(N.textContent))!==null&&_[b]!=="";)if(D(_[b],N)){var T=_.index;if(b!==0)for(var R=1;R<b;R++)T+=_[R].length;N=B.wrapRangeInTextNode(N,T,T+_[b].length),x(N.previousSibling),m.lastIndex=0}}),w()})}},{key:"wrapMatchesAcrossElements",value:function(m,v,D,x,w){var B=this,b=v===0?0:v+1;this.getTextNodes(function(E){for(var N=void 0;(N=m.exec(E.value))!==null&&N[b]!=="";){var _=N.index;if(b!==0)for(var T=1;T<b;T++)_+=N[T].length;var R=_+N[b].length;B.wrapRangeInMappedTextNode(E,_,R,function(L){return D(N[b],L)},function(L,I){m.lastIndex=I,x(L)})}w()})}},{key:"wrapRangeFromIndex",value:function(m,v,D,x){var w=this;this.getTextNodes(function(B){var b=B.value.length;m.forEach(function(E,N){var _=w.checkWhitespaceRanges(E,b,B.value),T=_.start,R=_.end,L=_.valid;L&&w.wrapRangeInMappedTextNode(B,T,R,function(I){return v(I,E,B.value.substring(T,R),N)},function(I){D(I,E)})}),x()})}},{key:"unwrapMatches",value:function(m){for(var v=m.parentNode,D=document.createDocumentFragment();m.firstChild;)D.appendChild(m.removeChild(m.firstChild));v.replaceChild(D,m),this.ie?this.normalizeTextNode(v):v.normalize()}},{key:"normalizeTextNode",value:function(m){if(m){if(m.nodeType===3)for(;m.nextSibling&&m.nextSibling.nodeType===3;)m.nodeValue+=m.nextSibling.nodeValue,m.parentNode.removeChild(m.nextSibling);else this.normalizeTextNode(m.firstChild);this.normalizeTextNode(m.nextSibling)}}},{key:"markRegExp",value:function(m,v){var D=this;this.opt=v,this.log('Searching with expression "'+m+'"');var x=0,w="wrapMatches",B=function(E){x++,D.opt.each(E)};this.opt.acrossElements&&(w="wrapMatchesAcrossElements"),this[w](m,this.opt.ignoreGroups,function(b,E){return D.opt.filter(E,b,x)},B,function(){x===0&&D.opt.noMatch(m),D.opt.done(x)})}},{key:"mark",value:function(m,v){var D=this;this.opt=v;var x=0,w="wrapMatches",B=this.getSeparatedKeywords(typeof m=="string"?[m]:m),b=B.keywords,E=B.length,N=this.opt.caseSensitive?"":"i",_=function T(R){var L=new RegExp(D.createRegExp(R),"gm"+N),I=0;D.log('Searching with expression "'+L+'"'),D[w](L,1,function(V,r0){return D.opt.filter(r0,R,x,I)},function(V){I++,x++,D.opt.each(V)},function(){I===0&&D.opt.noMatch(R),b[E-1]===R?D.opt.done(x):T(b[b.indexOf(R)+1])})};this.opt.acrossElements&&(w="wrapMatchesAcrossElements"),E===0?this.opt.done(x):_(b[0])}},{key:"markRanges",value:function(m,v){var D=this;this.opt=v;var x=0,w=this.checkRanges(m);w&&w.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(w)),this.wrapRangeFromIndex(w,function(B,b,E,N){return D.opt.filter(B,b,E,N)},function(B,b){x++,D.opt.each(B,b)},function(){D.opt.done(x)})):this.opt.done(x)}},{key:"unmark",value:function(m){var v=this;this.opt=m;var D=this.opt.element?this.opt.element:"*";D+="[data-markjs]",this.opt.className&&(D+="."+this.opt.className),this.log('Removal selector "'+D+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(x){v.unwrapMatches(x)},function(x){var w=A.matches(x,D),B=v.matchesExclude(x);return!w||B?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(m){this._opt=c({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},m)},get:function(){return this._opt}},{key:"iterator",get:function(){return new A(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),h}();function p(h){var g=this,m=new f(h);return this.mark=function(v,D){return m.mark(v,D),g},this.markRegExp=function(v,D){return m.markRegExp(v,D),g},this.markRanges=function(v,D){return m.markRanges(v,D),g},this.unmark=function(v){return m.unmark(v),g},this}return p})}(ti)),ti.exports}var m5=p5();const C5=gi(m5);function g5(t,r){const[a,l]=y.useState(t);return y.useEffect(()=>{const s=setTimeout(()=>l(t),r);return()=>{clearTimeout(s)}},[t,r]),a}function lg(t,r){const[a,l]=y.useState();y.useEffect(()=>{const c=y5(t);l(typeof c>"u"||c===null?r:c)},[r,t]);const s=y.useCallback(c=>{l(A=>{let f;typeof c=="function"?f=c(A):f=c;try{localStorage.setItem(t,JSON.stringify(f))}catch{}return f})},[t]);return[a,s]}function y5(t){try{const r=localStorage.getItem(t);return typeof r=="string"?JSON.parse(r):void 0}catch{return}}function v5(t,r){const[a,l]=y.useState();y.useEffect(()=>{const c=D5(t);l(typeof c>"u"||c===null?r:c)},[r,t]);const s=y.useCallback(c=>{l(A=>{let f;typeof c=="function"?f=c(A):f=c;try{sessionStorage.setItem(t,JSON.stringify(f))}catch{}return f})},[t]);return[a,s]}function D5(t){try{const r=sessionStorage.getItem(t);return typeof r=="string"?JSON.parse(r):void 0}catch{return}}var ig="vocs_utils_visuallyHidden",w5="vocs_Kbd";function sg(t){return C.jsx("kbd",{...t,className:s0(t.className,w5)})}var x5="vocs_KeyboardShortcut",F5="vocs_KeyboardShortcut_kbdGroup";function Sr(t){const{description:r,keys:a}=t;return C.jsxs("span",{className:x5,children:[r,C.jsx("span",{className:F5,children:a.map(l=>C.jsx(sg,{children:l},l))})]})}var B5="vocs_SearchDialog",b5="vocs_SearchDialog_overlay",N5="vocs_SearchDialog_searchBox",S5="vocs_SearchDialog_searchInput",Vl="vocs_SearchDialog_searchInputIcon",E5="vocs_SearchDialog_searchInputIconDesktop",R5="vocs_SearchDialog_searchInputIconMobile",_5="vocs_SearchDialog_results",k5="vocs_SearchDialog_result",T5="vocs_SearchDialog_resultSelected",Kp="vocs_SearchDialog_resultIcon",M5="vocs_SearchDialog_titles",Zp="vocs_SearchDialog_title",P5="vocs_SearchDialog_titleIcon",L5="vocs_SearchDialog_content",Xp="vocs_SearchDialog_excerpt",O5="vocs_SearchDialog_searchShortcuts";function cg(t){const{search:r}=m2(),a=CA(),l=y.useRef(null),s=y.useRef(null),[c,A]=v5("filterText",""),f=g5(c,200),p=og(),[h,g]=y.useState(-1),[m,v]=y.useState(!1),[D,x]=lg("showDetailView",!0),w=y.useMemo(()=>p?f?(g(0),p.search(f,r).slice(0,16)):(g(-1),[]):[],[p,r,f]),B=w.length,b=w[h],E=y.useCallback(()=>{var R,L,I;if(!s.current)return;const N=new Set;for(const V of w)for(const r0 in V.match)N.add(r0);const _=new C5(s.current);_.unmark({done(){_==null||_.markRegExp(j5(N))}});const T=s.current.querySelectorAll(`.${Xp}`);for(const V of T)(R=V.querySelector('mark[data-markjs="true"]'))==null||R.scrollIntoView({block:"center"});(I=(L=s.current)==null?void 0:L.firstElementChild)==null||I.scrollIntoView({block:"start"})},[w]);return y.useEffect(()=>{if(!t.open)return;function N(_){var T;switch(_.key){case"ArrowDown":{_.preventDefault(),g(R=>{var V;let L=R+1;L>=B&&(L=0);const I=(V=s.current)==null?void 0:V.children[L];return I==null||I.scrollIntoView({block:"nearest"}),L}),v(!0);break}case"ArrowUp":{_.preventDefault(),g(R=>{var V;let L=R-1;L<0&&(L=B-1);const I=(V=s.current)==null?void 0:V.children[L];return I==null||I.scrollIntoView({block:"nearest"}),L}),v(!0);break}case"Backspace":{if(!_.metaKey)return;_.preventDefault(),A(""),(T=l.current)==null||T.focus();break}case"Enter":{if(_.target instanceof HTMLButtonElement&&_.target.type!=="submit"||!b)return;_.preventDefault(),a(b.href),t.onClose();break}}}return window.addEventListener("keydown",N),()=>{window.removeEventListener("keydown",N)}},[a,B,A,b,t.open,t.onClose]),y.useEffect(()=>{f!==""&&s.current&&E()},[E,f]),C.jsxs(GF,{children:[C.jsx(qF,{className:b5}),C.jsxs($F,{onOpenAutoFocus:N=>{l.current&&(N.preventDefault(),l.current.focus()),E()},onCloseAutoFocus:()=>{g(0)},className:B5,"aria-describedby":void 0,children:[C.jsx(YF,{className:ig,children:"Search"}),C.jsxs("form",{className:N5,children:[C.jsx("button",{"aria-label":"Close search dialog",type:"button",onClick:()=>t.onClose(),className:R5,children:C.jsx(tx,{className:Vl,height:20,width:20})}),C.jsx(d5,{htmlFor:"search-input",children:C.jsx(BA,{"aria-label":"Search",className:s0(Vl,E5),height:20,width:20})}),C.jsx("input",{ref:l,tabIndex:0,className:S5,id:"search-input",onChange:N=>A(N.target.value),placeholder:"Search",type:"search",value:c}),C.jsx("button",{"aria-label":"Toggle detail view",type:"button",onClick:()=>x(N=>!N),children:C.jsx(cx,{className:Vl,height:20,width:20})}),C.jsx("button",{"aria-label":"Reset search",type:"button",className:Vl,onClick:()=>{var N;A(""),(N=l.current)==null||N.focus()},children:""})]}),C.jsxs("ul",{className:_5,role:w.length?"listbox":void 0,onMouseMove:()=>v(!1),ref:s,children:[f&&w.length===0&&C.jsxs("li",{children:['No results for "',C.jsx("span",{children:f}),'"']}),w.map((N,_)=>{var T;return C.jsx("li",{role:"option",className:s0(k5,_===h&&T5),"aria-selected":_===h,"aria-label":[...N.titles.filter(R=>!!R),N.title].join(" > "),children:C.jsxs(Ur,{to:N.href,onClick:R=>{R.metaKey||t.onClose()},onMouseEnter:()=>!m&&g(_),onFocus:()=>g(_),children:[C.jsxs("div",{className:M5,children:[N.isPage?C.jsx(ix,{className:Kp}):C.jsx("span",{className:Kp,children:"#"}),N.titles.filter(R=>!!R).map(R=>C.jsxs("span",{className:Zp,children:[C.jsx("span",{dangerouslySetInnerHTML:{__html:R}}),C.jsx(rx,{className:P5})]},R)),C.jsx("span",{className:Zp,children:C.jsx("span",{dangerouslySetInnerHTML:{__html:N.title}})})]}),D&&((T=N.text)==null?void 0:T.trim())&&C.jsx("div",{className:Xp,children:C.jsx(wC,{className:L5,children:C.jsx("div",{dangerouslySetInnerHTML:{__html:N.html}})})})]})},N.id)})]}),C.jsxs("div",{className:O5,children:[C.jsx(Sr,{description:"Navigate",keys:["",""]}),C.jsx(Sr,{description:"Select",keys:["enter"]}),C.jsx(Sr,{description:"Close",keys:["esc"]}),C.jsx(Sr,{description:"Reset",keys:["",""]})]})]})]})}function j5(t){return new RegExp([...t].sort((r,a)=>a.length-r.length).map(r=>`(${r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})`).join("|"),"gi")}function U5(){og();const[t,r]=y.useState(!1);return y.useEffect(()=>{function a(l){const s=document.activeElement instanceof HTMLElement&&(["input","select","textarea"].includes(document.activeElement.tagName.toLowerCase())||document.activeElement.isContentEditable);l.key==="/"&&!t&&!s?(l.preventDefault(),r(!0)):l.metaKey===!0&&l.key==="k"&&(l.preventDefault(),r(c=>!c))}return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[t]),C.jsxs(ZC,{open:t,onOpenChange:r,children:[C.jsx(XC,{asChild:!0,children:C.jsxs("button",{className:u5,type:"button",children:[C.jsx(BA,{style:{marginTop:2}}),"Search...",C.jsx("div",{className:A5,children:C.jsx("div",{style:{background:"currentColor",transform:"rotate(45deg)",width:1.5,borderRadius:2,height:"100%"}})})]})}),C.jsx(cg,{open:t,onClose:()=>r(!1)})]})}var I5="vocs_DesktopTopNav",z5="vocs_DesktopTopNav_withLogo",H5="vocs_DesktopTopNav_content",V5="vocs_DesktopTopNav_curtain",W5="vocs_DesktopTopNav_group",Qp="vocs_DesktopTopNav_item",G5="vocs_DesktopTopNav_logo",q5="vocs_DesktopTopNav_logoWrapper",Jp="vocs_DesktopTopNav_section",yu="vocs_Logo",$5="vocs_Logo_logoDark",Y5="vocs_Logo_logoLight";function K5({className:t}){const{logoUrl:r}=m2();return r?C.jsx(C.Fragment,{children:typeof r=="string"?C.jsx("img",{alt:"Logo",className:s0(t,yu),src:r}):C.jsxs(C.Fragment,{children:[C.jsx("img",{alt:"Logo",className:s0(t,yu,$5),src:r.dark}),C.jsx("img",{alt:"Logo",className:s0(t,yu,Y5),src:r.light})]})}):null}var Z5="vocs_NavLogo_logoImage",X5="vocs_NavLogo_title";function MA(){const t=m2();return t.logoUrl?C.jsx(K5,{className:Z5}):C.jsx("div",{className:X5,children:t.title})}var Q5=y.createContext(void 0);function ua(t){const r=y.useContext(Q5);return t||r||"ltr"}function Aa(t){const r=t+"CollectionProvider",[a,l]=Le(r),[s,c]=a(r,{collectionRef:{current:null},itemMap:new Map}),A=w=>{const{scope:B,children:b}=w,E=r2.useRef(null),N=r2.useRef(new Map).current;return C.jsx(s,{scope:B,itemMap:N,collectionRef:E,children:b})};A.displayName=r;const f=t+"CollectionSlot",p=Tr(f),h=r2.forwardRef((w,B)=>{const{scope:b,children:E}=w,N=c(f,b),_=o2(B,N.collectionRef);return C.jsx(p,{ref:_,children:E})});h.displayName=f;const g=t+"CollectionItemSlot",m="data-radix-collection-item",v=Tr(g),D=r2.forwardRef((w,B)=>{const{scope:b,children:E,...N}=w,_=r2.useRef(null),T=o2(B,_),R=c(g,b);return r2.useEffect(()=>(R.itemMap.set(_,{ref:_,...N}),()=>void R.itemMap.delete(_))),C.jsx(v,{[m]:"",ref:T,children:E})});D.displayName=g;function x(w){const B=c(t+"CollectionConsumer",w);return r2.useCallback(()=>{const E=B.collectionRef.current;if(!E)return[];const N=Array.from(E.querySelectorAll(`[${m}]`));return Array.from(B.itemMap.values()).sort((R,L)=>N.indexOf(R.ref.current)-N.indexOf(L.ref.current))},[B.collectionRef,B.itemMap])}return[{Provider:A,Slot:h,ItemSlot:D},x,l]}function J5(t){const r=y.useRef({value:t,previous:t});return y.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var eB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tB="VisuallyHidden",ug=y.forwardRef((t,r)=>C.jsx(R0.span,{...t,ref:r,style:{...eB,...t.style}}));ug.displayName=tB;var nB=ug,On="NavigationMenu",[PA,Ag,rB]=Aa(On),[qu,oB,aB]=Aa(On),[LA,W8]=Le(On,[rB,aB]),[lB,Se]=LA(On),[iB,sB]=LA(On),fg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,value:l,onValueChange:s,defaultValue:c,delayDuration:A=200,skipDelayDuration:f=300,orientation:p="horizontal",dir:h,...g}=t,[m,v]=y.useState(null),D=o2(r,V=>v(V)),x=ua(h),w=y.useRef(0),B=y.useRef(0),b=y.useRef(0),[E,N]=y.useState(!0),[_,T]=Qe({prop:l,onChange:V=>{const r0=V!=="",u0=f>0;r0?(window.clearTimeout(b.current),u0&&N(!1)):(window.clearTimeout(b.current),b.current=window.setTimeout(()=>N(!0),f)),s==null||s(V)},defaultProp:c??"",caller:On}),R=y.useCallback(()=>{window.clearTimeout(B.current),B.current=window.setTimeout(()=>T(""),150)},[T]),L=y.useCallback(V=>{window.clearTimeout(B.current),T(V)},[T]),I=y.useCallback(V=>{_===V?window.clearTimeout(B.current):w.current=window.setTimeout(()=>{window.clearTimeout(B.current),T(V)},A)},[_,T,A]);return y.useEffect(()=>()=>{window.clearTimeout(w.current),window.clearTimeout(B.current),window.clearTimeout(b.current)},[]),C.jsx(dg,{scope:a,isRootMenu:!0,value:_,dir:x,orientation:p,rootNavigationMenu:m,onTriggerEnter:V=>{window.clearTimeout(w.current),E?I(V):L(V)},onTriggerLeave:()=>{window.clearTimeout(w.current),R()},onContentEnter:()=>window.clearTimeout(B.current),onContentLeave:R,onItemSelect:V=>{T(r0=>r0===V?"":V)},onItemDismiss:()=>T(""),children:C.jsx(R0.nav,{"aria-label":"Main","data-orientation":p,dir:x,...g,ref:D})})});fg.displayName=On;var $u="NavigationMenuSub",cB=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,value:l,onValueChange:s,defaultValue:c,orientation:A="horizontal",...f}=t,p=Se($u,a),[h,g]=Qe({prop:l,onChange:s,defaultProp:c??"",caller:$u});return C.jsx(dg,{scope:a,isRootMenu:!1,value:h,dir:p.dir,orientation:A,rootNavigationMenu:p.rootNavigationMenu,onTriggerEnter:m=>g(m),onItemSelect:m=>g(m),onItemDismiss:()=>g(""),children:C.jsx(R0.div,{"data-orientation":A,...f,ref:r})})});cB.displayName=$u;var dg=t=>{const{scope:r,isRootMenu:a,rootNavigationMenu:l,dir:s,orientation:c,children:A,value:f,onItemSelect:p,onItemDismiss:h,onTriggerEnter:g,onTriggerLeave:m,onContentEnter:v,onContentLeave:D}=t,[x,w]=y.useState(null),[B,b]=y.useState(new Map),[E,N]=y.useState(null);return C.jsx(lB,{scope:r,isRootMenu:a,rootNavigationMenu:l,value:f,previousValue:J5(f),baseId:we(),dir:s,orientation:c,viewport:x,onViewportChange:w,indicatorTrack:E,onIndicatorTrackChange:N,onTriggerEnter:O2(g),onTriggerLeave:O2(m),onContentEnter:O2(v),onContentLeave:O2(D),onItemSelect:O2(p),onItemDismiss:O2(h),onViewportContentChange:y.useCallback((_,T)=>{b(R=>(R.set(_,T),new Map(R)))},[]),onViewportContentRemove:y.useCallback(_=>{b(T=>T.has(_)?(T.delete(_),new Map(T)):T)},[]),children:C.jsx(PA.Provider,{scope:r,children:C.jsx(iB,{scope:r,items:B,children:A})})})},hg="NavigationMenuList",pg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,...l}=t,s=Se(hg,a),c=C.jsx(R0.ul,{"data-orientation":s.orientation,...l,ref:r});return C.jsx(R0.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:C.jsx(PA.Slot,{scope:a,children:s.isRootMenu?C.jsx(xg,{asChild:!0,children:c}):c})})});pg.displayName=hg;var mg="NavigationMenuItem",[uB,Cg]=LA(mg),gg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,value:l,...s}=t,c=we(),A=l||c||"LEGACY_REACT_AUTO_VALUE",f=y.useRef(null),p=y.useRef(null),h=y.useRef(null),g=y.useRef(()=>{}),m=y.useRef(!1),v=y.useCallback((x="start")=>{if(f.current){g.current();const w=Ku(f.current);w.length&&UA(x==="start"?w:w.reverse())}},[]),D=y.useCallback(()=>{if(f.current){const x=Ku(f.current);x.length&&(g.current=yB(x))}},[]);return C.jsx(uB,{scope:a,value:A,triggerRef:p,contentRef:f,focusProxyRef:h,wasEscapeCloseRef:m,onEntryKeyDown:v,onFocusProxyEnter:v,onRootContentClose:D,onContentFocusOutside:D,children:C.jsx(R0.li,{...s,ref:r})})});gg.displayName=mg;var Yu="NavigationMenuTrigger",yg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,disabled:l,...s}=t,c=Se(Yu,t.__scopeNavigationMenu),A=Cg(Yu,t.__scopeNavigationMenu),f=y.useRef(null),p=o2(f,A.triggerRef,r),h=Bg(c.baseId,A.value),g=bg(c.baseId,A.value),m=y.useRef(!1),v=y.useRef(!1),D=A.value===c.value;return C.jsxs(C.Fragment,{children:[C.jsx(PA.ItemSlot,{scope:a,value:A.value,children:C.jsx(Fg,{asChild:!0,children:C.jsx(R0.button,{id:h,disabled:l,"data-disabled":l?"":void 0,"data-state":IA(D),"aria-expanded":D,"aria-controls":g,...s,ref:p,onPointerEnter:h0(t.onPointerEnter,()=>{v.current=!1,A.wasEscapeCloseRef.current=!1}),onPointerMove:h0(t.onPointerMove,ci(()=>{l||v.current||A.wasEscapeCloseRef.current||m.current||(c.onTriggerEnter(A.value),m.current=!0)})),onPointerLeave:h0(t.onPointerLeave,ci(()=>{l||(c.onTriggerLeave(),m.current=!1)})),onClick:h0(t.onClick,()=>{c.onItemSelect(A.value),v.current=D}),onKeyDown:h0(t.onKeyDown,x=>{const B={horizontal:"ArrowDown",vertical:c.dir==="rtl"?"ArrowLeft":"ArrowRight"}[c.orientation];D&&x.key===B&&(A.onEntryKeyDown(),x.preventDefault())})})})}),D&&C.jsxs(C.Fragment,{children:[C.jsx(nB,{"aria-hidden":!0,tabIndex:0,ref:A.focusProxyRef,onFocus:x=>{const w=A.contentRef.current,B=x.relatedTarget,b=B===f.current,E=w==null?void 0:w.contains(B);(b||!E)&&A.onFocusProxyEnter(b?"start":"end")}}),c.viewport&&C.jsx("span",{"aria-owns":g})]})]})});yg.displayName=Yu;var AB="NavigationMenuLink",em="navigationMenu.linkSelect",vg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,active:l,onSelect:s,...c}=t;return C.jsx(Fg,{asChild:!0,children:C.jsx(R0.a,{"data-active":l?"":void 0,"aria-current":l?"page":void 0,...c,ref:r,onClick:h0(t.onClick,A=>{const f=A.target,p=new CustomEvent(em,{bubbles:!0,cancelable:!0});if(f.addEventListener(em,h=>s==null?void 0:s(h),{once:!0}),li(f,p),!p.defaultPrevented&&!A.metaKey){const h=new CustomEvent(ni,{bubbles:!0,cancelable:!0});li(f,h)}},{checkForDefaultPrevented:!1})})})});vg.displayName=AB;var OA="NavigationMenuIndicator",fB=y.forwardRef((t,r)=>{const{forceMount:a,...l}=t,s=Se(OA,t.__scopeNavigationMenu),c=!!s.value;return s.indicatorTrack?fC.createPortal(C.jsx(j2,{present:a||c,children:C.jsx(dB,{...l,ref:r})}),s.indicatorTrack):null});fB.displayName=OA;var dB=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,...l}=t,s=Se(OA,a),c=Ag(a),[A,f]=y.useState(null),[p,h]=y.useState(null),g=s.orientation==="horizontal",m=!!s.value;y.useEffect(()=>{var w;const x=(w=c().find(B=>B.value===s.value))==null?void 0:w.ref.current;x&&f(x)},[c,s.value]);const v=()=>{A&&h({size:g?A.offsetWidth:A.offsetHeight,offset:g?A.offsetLeft:A.offsetTop})};return Zu(A,v),Zu(s.indicatorTrack,v),p?C.jsx(R0.div,{"aria-hidden":!0,"data-state":m?"visible":"hidden","data-orientation":s.orientation,...l,ref:r,style:{position:"absolute",...g?{left:0,width:p.size+"px",transform:`translateX(${p.offset}px)`}:{top:0,height:p.size+"px",transform:`translateY(${p.offset}px)`},...l.style}}):null}),Mr="NavigationMenuContent",Dg=y.forwardRef((t,r)=>{const{forceMount:a,...l}=t,s=Se(Mr,t.__scopeNavigationMenu),c=Cg(Mr,t.__scopeNavigationMenu),A=o2(c.contentRef,r),f=c.value===s.value,p={value:c.value,triggerRef:c.triggerRef,focusProxyRef:c.focusProxyRef,wasEscapeCloseRef:c.wasEscapeCloseRef,onContentFocusOutside:c.onContentFocusOutside,onRootContentClose:c.onRootContentClose,...l};return s.viewport?C.jsx(hB,{forceMount:a,...p,ref:A}):C.jsx(j2,{present:a||f,children:C.jsx(wg,{"data-state":IA(f),...p,ref:A,onPointerEnter:h0(t.onPointerEnter,s.onContentEnter),onPointerLeave:h0(t.onPointerLeave,ci(s.onContentLeave)),style:{pointerEvents:!f&&s.isRootMenu?"none":void 0,...p.style}})})});Dg.displayName=Mr;var hB=y.forwardRef((t,r)=>{const a=Se(Mr,t.__scopeNavigationMenu),{onViewportContentChange:l,onViewportContentRemove:s}=a;return Be(()=>{l(t.value,{ref:r,...t})},[t,r,l]),Be(()=>()=>s(t.value),[t.value,s]),null}),ni="navigationMenu.rootContentDismiss",wg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,value:l,triggerRef:s,focusProxyRef:c,wasEscapeCloseRef:A,onRootContentClose:f,onContentFocusOutside:p,...h}=t,g=Se(Mr,a),m=y.useRef(null),v=o2(m,r),D=Bg(g.baseId,l),x=bg(g.baseId,l),w=Ag(a),B=y.useRef(null),{onItemDismiss:b}=g;y.useEffect(()=>{const N=m.current;if(g.isRootMenu&&N){const _=()=>{var T;b(),f(),N.contains(document.activeElement)&&((T=s.current)==null||T.focus())};return N.addEventListener(ni,_),()=>N.removeEventListener(ni,_)}},[g.isRootMenu,t.value,s,b,f]);const E=y.useMemo(()=>{const _=w().map(r0=>r0.value);g.dir==="rtl"&&_.reverse();const T=_.indexOf(g.value),R=_.indexOf(g.previousValue),L=l===g.value,I=R===_.indexOf(l);if(!L&&!I)return B.current;const V=(()=>{if(T!==R){if(L&&R!==-1)return T>R?"from-end":"from-start";if(I&&T!==-1)return T>R?"to-start":"to-end"}return null})();return B.current=V,V},[g.previousValue,g.value,g.dir,w,l]);return C.jsx(xg,{asChild:!0,children:C.jsx(ca,{id:x,"aria-labelledby":D,"data-motion":E,"data-orientation":g.orientation,...h,ref:v,disableOutsidePointerEvents:!1,onDismiss:()=>{var _;const N=new Event(ni,{bubbles:!0,cancelable:!0});(_=m.current)==null||_.dispatchEvent(N)},onFocusOutside:h0(t.onFocusOutside,N=>{var T;p();const _=N.target;(T=g.rootNavigationMenu)!=null&&T.contains(_)&&N.preventDefault()}),onPointerDownOutside:h0(t.onPointerDownOutside,N=>{var L;const _=N.target,T=w().some(I=>{var V;return(V=I.ref.current)==null?void 0:V.contains(_)}),R=g.isRootMenu&&((L=g.viewport)==null?void 0:L.contains(_));(T||R||!g.isRootMenu)&&N.preventDefault()}),onKeyDown:h0(t.onKeyDown,N=>{var R;const _=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!_){const L=Ku(N.currentTarget),I=document.activeElement,V=L.findIndex(l0=>l0===I),u0=N.shiftKey?L.slice(0,V).reverse():L.slice(V+1,L.length);UA(u0)?N.preventDefault():(R=c.current)==null||R.focus()}}),onEscapeKeyDown:h0(t.onEscapeKeyDown,N=>{A.current=!0})})})}),jA="NavigationMenuViewport",pB=y.forwardRef((t,r)=>{const{forceMount:a,...l}=t,c=!!Se(jA,t.__scopeNavigationMenu).value;return C.jsx(j2,{present:a||c,children:C.jsx(mB,{...l,ref:r})})});pB.displayName=jA;var mB=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,children:l,...s}=t,c=Se(jA,a),A=o2(r,c.onViewportChange),f=sB(Mr,t.__scopeNavigationMenu),[p,h]=y.useState(null),[g,m]=y.useState(null),v=p?(p==null?void 0:p.width)+"px":void 0,D=p?(p==null?void 0:p.height)+"px":void 0,x=!!c.value,w=x?c.value:c.previousValue;return Zu(g,()=>{g&&h({width:g.offsetWidth,height:g.offsetHeight})}),C.jsx(R0.div,{"data-state":IA(x),"data-orientation":c.orientation,...s,ref:A,style:{pointerEvents:!x&&c.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":v,"--radix-navigation-menu-viewport-height":D,...s.style},onPointerEnter:h0(t.onPointerEnter,c.onContentEnter),onPointerLeave:h0(t.onPointerLeave,ci(c.onContentLeave)),children:Array.from(f.items).map(([b,{ref:E,forceMount:N,..._}])=>{const T=w===b;return C.jsx(j2,{present:N||T,children:C.jsx(wg,{..._,ref:sa(E,R=>{T&&R&&m(R)})})},b)})})}),CB="FocusGroup",xg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,...l}=t,s=Se(CB,a);return C.jsx(qu.Provider,{scope:a,children:C.jsx(qu.Slot,{scope:a,children:C.jsx(R0.div,{dir:s.dir,...l,ref:r})})})}),tm=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],gB="FocusGroupItem",Fg=y.forwardRef((t,r)=>{const{__scopeNavigationMenu:a,...l}=t,s=oB(a),c=Se(gB,a);return C.jsx(qu.ItemSlot,{scope:a,children:C.jsx(R0.button,{...l,ref:r,onKeyDown:h0(t.onKeyDown,A=>{if(["Home","End",...tm].includes(A.key)){let p=s().map(m=>m.ref.current);if([c.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(A.key)&&p.reverse(),tm.includes(A.key)){const m=p.indexOf(A.currentTarget);p=p.slice(m+1)}setTimeout(()=>UA(p)),A.preventDefault()}})})})});function Ku(t){const r=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const s=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||s?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)r.push(a.currentNode);return r}function UA(t){const r=document.activeElement;return t.some(a=>a===r?!0:(a.focus(),document.activeElement!==r))}function yB(t){return t.forEach(r=>{r.dataset.tabindex=r.getAttribute("tabindex")||"",r.setAttribute("tabindex","-1")}),()=>{t.forEach(r=>{const a=r.dataset.tabindex;r.setAttribute("tabindex",a)})}}function Zu(t,r){const a=O2(r);Be(()=>{let l=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(a)});return s.observe(t),()=>{window.cancelAnimationFrame(l),s.unobserve(t)}}},[t,a])}function IA(t){return t?"open":"closed"}function Bg(t,r){return`${t}-trigger-${r}`}function bg(t,r){return`${t}-content-${r}`}function ci(t){return r=>r.pointerType==="mouse"?t(r):void 0}var vB=fg,DB=pg,wB=gg,xB=yg,FB=vg,BB=Dg,bB="vocs_NavigationMenu",NB="vocs_NavigationMenu_list",SB="vocs_NavigationMenu_link",EB="vocs_NavigationMenu_item",RB="var(--vocs_NavigationMenu_chevronDownIcon)",_B="vocs_NavigationMenu_trigger vocs_NavigationMenu_link",kB="vocs_NavigationMenu_content";const Ng=t=>C.jsx(vB,{...t,className:s0(t.className,bB)}),Sg=t=>C.jsx(DB,{...t,className:s0(t.className,NB)}),Ei=({active:t,children:r,className:a,href:l})=>C.jsx(FB,{asChild:!0,children:C.jsx(Fe,{"data-active":t,className:s0(a,SB),href:l,variant:"styleless",children:r})}),Eg=t=>C.jsx(wB,{...t,className:s0(t.className,EB)}),Rg=({active:t,className:r,...a})=>{const{basePath:l}=m2(),s=l;return C.jsx(xB,{...a,"data-active":t,className:s0(r,_B),style:Pe({[RB]:`url(${s}/.vocs/icons/chevron-down.svg)`})})},_g=t=>C.jsx(BB,{...t,className:s0(t.className,kB)});Xu.Curtain=TB;function Xu(){var l;const t=m2(),{showLogo:r,showSidebar:a}=nn();return C.jsxs("div",{className:s0(I5,r&&!a&&z5),children:[C.jsx(U5,{}),r&&C.jsx("div",{className:q5,children:C.jsx("div",{className:G5,children:C.jsx(kr,{to:"/",style:{alignItems:"center",display:"flex",height:"56px",marginTop:"4px"},children:C.jsx(MA,{})})})}),C.jsx("div",{className:Jp}),C.jsx("div",{className:Jp,children:(((l=t.topNav)==null?void 0:l.length)||0)>0&&C.jsx("div",{className:W5,children:C.jsx(MB,{})})})]})}function TB(){return C.jsx("div",{className:V5})}function MB(){const{topNav:t}=m2();if(!t)return null;const{pathname:r}=a2(),a=ia({pathname:r,items:t});return C.jsx(Ng,{delayDuration:0,children:C.jsxs(Sg,{children:[t.map((l,s)=>l.element?_n(l.element):l.link?C.jsx(Ei,{active:a.includes(l.id),className:Qp,href:l.link,children:l.text},s):l.items?C.jsxs(Eg,{className:Qp,children:[C.jsx(Rg,{active:a.includes(l.id),children:l.text}),C.jsx(_g,{className:H5,children:C.jsx(PB,{items:l.items})})]},s):null),C.jsx(bA,{})]})})}function PB({items:t}){const{pathname:r}=a2(),a=ia({pathname:r,items:t});return C.jsx("ul",{children:t==null?void 0:t.map((l,s)=>C.jsx(Ei,{active:a.includes(l.id),href:l.link,children:l.text},s))})}function LB(){const t=tn(),r=m2();return y.useMemo(()=>{const{pattern:a="",text:l="Edit page"}=r.editLink??{};let s="";return typeof a=="function"?s="":t.filePath&&(s=a.replace(/:path/g,t.filePath)),{url:s,text:l}},[r.editLink,t.filePath])}function zA(){const[t,r]=y.useState(!1);return y.useEffect(()=>{r(!0)},[]),t}var OB="vocs_Footer",jB="vocs_Footer_container",UB="vocs_Footer_editLink",IB="vocs_Footer_lastUpdated",zB="vocs_Footer_navigation",nm="vocs_Footer_navigationIcon",HB="vocs_Footer_navigationIcon_left",VB="vocs_Footer_navigationIcon_right",rm="vocs_Footer_navigationItem",WB="vocs_Footer_navigationItem_left",GB="vocs_Footer_navigationItem_right",om="vocs_Footer_navigationText",am="vocs_Footer_navigationTextInner",Qu="var(--vocs_Icon_size)",qB="vocs_Icon";function H2({className:t,label:r,icon:a,size:l,style:s}){return C.jsx("div",{"aria-label":r,className:s0(qB,t),role:"img",style:{...s,...Pe({[Qu]:l})},children:C.jsx(a,{height:l,width:l})})}var $B="vocs_Socials",YB="vocs_Socials_button",KB="vocs_Socials_icon";function ZB(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 127.14 96.36",children:[C.jsx("title",{children:"Discord"}),C.jsx("g",{id:"_2","data-name":" 2",children:C.jsx("g",{id:"Discord_Logos","data-name":"Discord Logos",children:C.jsx("g",{id:"Discord_Logo_-_Large_-_White","data-name":"Discord Logo - Large - White",children:C.jsx("path",{d:"M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z",fill:"currentColor"})})})})]})}function XB(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"GitHub"}),C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"currentColor"})]})}function QB(){return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 50 50",children:[C.jsx("title",{children:"Telegram"}),C.jsx("path",{d:"M25 2c12.703 0 23 10.297 23 23S37.703 48 25 48 2 37.703 2 25 12.297 2 25 2zm7.934 32.375c.423-1.298 2.405-14.234 2.65-16.783.074-.772-.17-1.285-.648-1.514-.578-.278-1.434-.139-2.427.219-1.362.491-18.774 7.884-19.78 8.312-.954.405-1.856.847-1.856 1.487 0 .45.267.703 1.003.966.766.273 2.695.858 3.834 1.172 1.097.303 2.346.04 3.046-.395.742-.461 9.305-6.191 9.92-6.693.614-.502 1.104.141.602.644-.502.502-6.38 6.207-7.155 6.997-.941.959-.273 1.953.358 2.351.721.454 5.906 3.932 6.687 4.49.781.558 1.573.811 2.298.811.725 0 1.107-.955 1.468-2.064z",fill:"currentColor"})]})}function JB(){return C.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Warpcast"}),C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.92028 31.9901H24.0698C28.4371 31.9901 31.9901 28.4373 31.9901 24.0699V7.92053C31.9901 3.55319 28.4371 0.000137329 24.0698 0.000137329H7.92028C3.55304 0.000137329 0 3.55319 0 7.92053V24.0699C0 28.4373 3.55304 31.9901 7.92028 31.9901ZM19.4134 16.048L20.9908 10.124H25.1383L21.2924 23.2218H17.7062L15.9951 17.1397L14.284 23.2218H10.7055L6.85115 10.124H10.999L12.5915 16.0916L14.1891 10.124H17.8309L19.4134 16.048Z",fill:"currentColor"})]})}function eb(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 1227",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"X"}),C.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z",fill:"currentColor"})]})}const tb={discord:ZB,github:XB,telegram:QB,warpcast:JB,x:eb},nb={discord:"18px",github:"17px",telegram:"17px",warpcast:"17px",x:"16px"};function HA(){const t=m2();return!t.socials||t.socials.length===0?null:C.jsx("div",{className:$B,children:t.socials.map((r,a)=>C.jsxs(y.Fragment,{children:[a!==0&&C.jsx("div",{style:{width:"1px",marginTop:Qo[4],marginBottom:Qo[4],backgroundColor:Uu.border}}),C.jsx("a",{className:YB,href:r.link,target:"_blank",rel:"noopener noreferrer",children:C.jsx(H2,{className:KB,label:r.label,icon:tb[r.icon],size:nb[r.icon]||"20px"})})]},a))})}function rb(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Arrow Left"}),C.jsx("path",{d:"M0.325684 29.7461C0.325684 30.8203 0.813963 31.8457 1.69286 32.6758L26.8882 57.8223C27.7671 58.6524 28.7437 59.043 29.7691 59.043C31.9175 59.043 33.5777 57.4317 33.5777 55.2344C33.5777 54.209 33.2359 53.1836 32.5035 52.5L25.7652 45.5176L9.26126 30.6738L8.38236 32.7734L21.3706 33.7012H67.4644C69.7593 33.7012 71.3706 32.041 71.3706 29.7461C71.3706 27.4512 69.7593 25.791 67.4644 25.791H21.3706L8.38236 26.7188L9.26126 28.8672L25.7652 13.9746L32.5035 6.99221C33.2359 6.30861 33.5777 5.28322 33.5777 4.25782C33.5777 2.06052 31.9175 0.449219 29.7691 0.449219C28.7437 0.449219 27.7671 0.839814 26.8882 1.66991L1.69286 26.8164C0.813963 27.6465 0.325684 28.6719 0.325684 29.7461Z",fill:"currentColor"})]})}function ob(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Arrow Right"}),C.jsx("path",{d:"M71.3706 29.7461C71.3706 28.6719 70.8824 27.6465 70.0035 26.8164L44.8081 1.66991C43.9292 0.839814 42.9527 0.449219 41.9273 0.449219C39.7789 0.449219 38.1187 2.06052 38.1187 4.25782C38.1187 5.28322 38.4605 6.30861 39.1929 6.99221L45.9312 13.9746L62.4351 28.8672L63.314 26.7188L50.3257 25.791H4.23196C1.93706 25.791 0.325684 27.4512 0.325684 29.7461C0.325684 32.041 1.93706 33.7012 4.23196 33.7012H50.3257L63.314 32.7734L62.4351 30.6738L45.9312 45.5176L39.1929 52.5C38.4605 53.1836 38.1187 54.209 38.1187 55.2344C38.1187 57.4317 39.7789 59.043 41.9273 59.043C42.9527 59.043 43.9292 58.6524 44.8081 57.8223L70.0035 32.6758C70.8824 31.8457 71.3706 30.8203 71.3706 29.7461Z",fill:"currentColor"})]})}function ab(){const{layout:t}=nn(),r=zA(),a=tn(),l=y.useMemo(()=>a.lastUpdatedAt?new Date(a.lastUpdatedAt):void 0,[a.lastUpdatedAt]),s=y.useMemo(()=>l==null?void 0:l.toISOString(),[l]);return C.jsxs("footer",{className:OB,"data-layout":t,children:[t==="docs"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:jB,children:[C.jsx(lb,{}),r&&a.lastUpdatedAt&&C.jsxs("div",{className:IB,children:["Last updated:"," ",C.jsx("time",{dateTime:s,children:new Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}).format(l)})]})]}),C.jsx(ib,{})]}),t!=="docs"&&C.jsx(HA,{}),C.jsx(mx,{})]})}function lb(){const t=LB();return t.url?C.jsx("div",{children:C.jsxs(Fe,{className:UB,href:t.url,children:[C.jsx(fx,{})," ",t.text]})}):null}function ib(){const t=zA(),r=xi(),{pathname:a}=a2(),l=y.useMemo(()=>kg(r.items||[]).filter(p=>p.link),[r]),s=y.useMemo(()=>l.findIndex(p=>p.link===a),[l,a]),[c,A]=y.useMemo(()=>s<0?[]:s===0?[null,l[s+1]]:s===l.length-1?[l[s-1],null]:[l[s-1],l[s+1]],[s,l]),f=CA();return y.useEffect(()=>{let p=s,h=!1;const g=v=>{if(v.code==="ShiftLeft"&&(h=!0),h){const D=l[p+1],x=l[p-1];v.code==="ArrowRight"&&(D!=null&&D.link)&&(!D.link.match(/^(\.*\/|#)/)?window.open(D.link,"noopener,noreferrer"):f(D.link),p++),v.code==="ArrowLeft"&&(x!=null&&x.link)&&(!x.link.match(/^(\.*\/|#)/)?window.open(x.link,"noopener,noreferrer"):f(x.link),p--)}},m=v=>{v.code==="ShiftLeft"&&(h=!1)};return window.addEventListener("keydown",g),window.addEventListener("keyup",m),()=>{window.removeEventListener("keydown",g),window.removeEventListener("keyup",m)}},[]),t?C.jsxs("div",{className:zB,children:[c?C.jsxs(Fe,{className:s0(rm,WB),href:c.link,variant:"styleless",children:[C.jsxs("div",{className:om,children:[C.jsx("div",{className:s0(nm,HB),style:Pe({[Qu]:"0.75em"}),children:C.jsx(H2,{label:"Previous",icon:rb})}),C.jsx("div",{className:am,children:c.text})]}),C.jsx(Sr,{description:"Previous",keys:["shift",""]})]}):C.jsx("div",{}),A?C.jsxs(Fe,{className:s0(rm,GB),href:A.link,variant:"styleless",children:[C.jsxs("div",{className:om,children:[C.jsx("div",{className:am,style:{textAlign:"right"},children:A.text}),C.jsx("div",{className:s0(nm,VB),style:Pe({[Qu]:"0.75em"}),children:C.jsx(H2,{label:"Next",icon:ob})})]}),C.jsx(Sr,{description:"Next",keys:["shift",""]})]}):C.jsx("div",{})]}):null}function kg(t){const r=[];for(const a of t)a.link&&r.push(a),a.items&&r.push(...kg(a.items));return r}var Ri="Collapsible",[sb,Tg]=Le(Ri),[cb,VA]=sb(Ri),Mg=y.forwardRef((t,r)=>{const{__scopeCollapsible:a,open:l,defaultOpen:s,disabled:c,onOpenChange:A,...f}=t,[p,h]=Qe({prop:l,defaultProp:s??!1,onChange:A,caller:Ri});return C.jsx(cb,{scope:a,disabled:c,contentId:we(),open:p,onOpenToggle:y.useCallback(()=>h(g=>!g),[h]),children:C.jsx(R0.div,{"data-state":GA(p),"data-disabled":c?"":void 0,...f,ref:r})})});Mg.displayName=Ri;var Pg="CollapsibleTrigger",Lg=y.forwardRef((t,r)=>{const{__scopeCollapsible:a,...l}=t,s=VA(Pg,a);return C.jsx(R0.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":GA(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...l,ref:r,onClick:h0(t.onClick,s.onOpenToggle)})});Lg.displayName=Pg;var WA="CollapsibleContent",Og=y.forwardRef((t,r)=>{const{forceMount:a,...l}=t,s=VA(WA,t.__scopeCollapsible);return C.jsx(j2,{present:a||s.open,children:({present:c})=>C.jsx(ub,{...l,ref:r,present:c})})});Og.displayName=WA;var ub=y.forwardRef((t,r)=>{const{__scopeCollapsible:a,present:l,children:s,...c}=t,A=VA(WA,a),[f,p]=y.useState(l),h=y.useRef(null),g=o2(r,h),m=y.useRef(0),v=m.current,D=y.useRef(0),x=D.current,w=A.open||f,B=y.useRef(w),b=y.useRef(void 0);return y.useEffect(()=>{const E=requestAnimationFrame(()=>B.current=!1);return()=>cancelAnimationFrame(E)},[]),Be(()=>{const E=h.current;if(E){b.current=b.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const N=E.getBoundingClientRect();m.current=N.height,D.current=N.width,B.current||(E.style.transitionDuration=b.current.transitionDuration,E.style.animationName=b.current.animationName),p(l)}},[A.open,l]),C.jsx(R0.div,{"data-state":GA(A.open),"data-disabled":A.disabled?"":void 0,id:A.contentId,hidden:!w,...c,ref:g,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:w&&s})});function GA(t){return t?"open":"closed"}var Ab=Mg,fb=Lg,db=Og,je="Accordion",hb=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[qA,pb,mb]=Aa(je),[_i,G8]=Le(je,[mb,Tg]),$A=Tg(),jg=r2.forwardRef((t,r)=>{const{type:a,...l}=t,s=l,c=l;return C.jsx(qA.Provider,{scope:t.__scopeAccordion,children:a==="multiple"?C.jsx(vb,{...c,ref:r}):C.jsx(yb,{...s,ref:r})})});jg.displayName=je;var[Ug,Cb]=_i(je),[Ig,gb]=_i(je,{collapsible:!1}),yb=r2.forwardRef((t,r)=>{const{value:a,defaultValue:l,onValueChange:s=()=>{},collapsible:c=!1,...A}=t,[f,p]=Qe({prop:a,defaultProp:l??"",onChange:s,caller:je});return C.jsx(Ug,{scope:t.__scopeAccordion,value:r2.useMemo(()=>f?[f]:[],[f]),onItemOpen:p,onItemClose:r2.useCallback(()=>c&&p(""),[c,p]),children:C.jsx(Ig,{scope:t.__scopeAccordion,collapsible:c,children:C.jsx(zg,{...A,ref:r})})})}),vb=r2.forwardRef((t,r)=>{const{value:a,defaultValue:l,onValueChange:s=()=>{},...c}=t,[A,f]=Qe({prop:a,defaultProp:l??[],onChange:s,caller:je}),p=r2.useCallback(g=>f((m=[])=>[...m,g]),[f]),h=r2.useCallback(g=>f((m=[])=>m.filter(v=>v!==g)),[f]);return C.jsx(Ug,{scope:t.__scopeAccordion,value:A,onItemOpen:p,onItemClose:h,children:C.jsx(Ig,{scope:t.__scopeAccordion,collapsible:!0,children:C.jsx(zg,{...c,ref:r})})})}),[Db,ki]=_i(je),zg=r2.forwardRef((t,r)=>{const{__scopeAccordion:a,disabled:l,dir:s,orientation:c="vertical",...A}=t,f=r2.useRef(null),p=o2(f,r),h=pb(a),m=ua(s)==="ltr",v=h0(t.onKeyDown,D=>{var I;if(!hb.includes(D.key))return;const x=D.target,w=h().filter(V=>{var r0;return!((r0=V.ref.current)!=null&&r0.disabled)}),B=w.findIndex(V=>V.ref.current===x),b=w.length;if(B===-1)return;D.preventDefault();let E=B;const N=0,_=b-1,T=()=>{E=B+1,E>_&&(E=N)},R=()=>{E=B-1,E<N&&(E=_)};switch(D.key){case"Home":E=N;break;case"End":E=_;break;case"ArrowRight":c==="horizontal"&&(m?T():R());break;case"ArrowDown":c==="vertical"&&T();break;case"ArrowLeft":c==="horizontal"&&(m?R():T());break;case"ArrowUp":c==="vertical"&&R();break}const L=E%b;(I=w[L].ref.current)==null||I.focus()});return C.jsx(Db,{scope:a,disabled:l,direction:s,orientation:c,children:C.jsx(qA.Slot,{scope:a,children:C.jsx(R0.div,{...A,"data-orientation":c,ref:p,onKeyDown:l?void 0:v})})})}),ui="AccordionItem",[wb,YA]=_i(ui),Hg=r2.forwardRef((t,r)=>{const{__scopeAccordion:a,value:l,...s}=t,c=ki(ui,a),A=Cb(ui,a),f=$A(a),p=we(),h=l&&A.value.includes(l)||!1,g=c.disabled||t.disabled;return C.jsx(wb,{scope:a,open:h,disabled:g,triggerId:p,children:C.jsx(Ab,{"data-orientation":c.orientation,"data-state":$g(h),...f,...s,ref:r,disabled:g,open:h,onOpenChange:m=>{m?A.onItemOpen(l):A.onItemClose(l)}})})});Hg.displayName=ui;var Vg="AccordionHeader",xb=r2.forwardRef((t,r)=>{const{__scopeAccordion:a,...l}=t,s=ki(je,a),c=YA(Vg,a);return C.jsx(R0.h3,{"data-orientation":s.orientation,"data-state":$g(c.open),"data-disabled":c.disabled?"":void 0,...l,ref:r})});xb.displayName=Vg;var Ju="AccordionTrigger",Wg=r2.forwardRef((t,r)=>{const{__scopeAccordion:a,...l}=t,s=ki(je,a),c=YA(Ju,a),A=gb(Ju,a),f=$A(a);return C.jsx(qA.ItemSlot,{scope:a,children:C.jsx(fb,{"aria-disabled":c.open&&!A.collapsible||void 0,"data-orientation":s.orientation,id:c.triggerId,...f,...l,ref:r})})});Wg.displayName=Ju;var Gg="AccordionContent",qg=r2.forwardRef((t,r)=>{const{__scopeAccordion:a,...l}=t,s=ki(je,a),c=YA(Gg,a),A=$A(a);return C.jsx(db,{role:"region","aria-labelledby":c.triggerId,"data-orientation":s.orientation,...A,...l,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});qg.displayName=Gg;function $g(t){return t?"open":"closed"}var Fb=jg,Bb=Hg,bb=Wg,Nb=qg,Sb="vocs_MobileSearch_searchButton";function Eb(){const[t,r]=y.useState(!1);return C.jsxs(ZC,{open:t,onOpenChange:r,children:[C.jsx(XC,{asChild:!0,children:C.jsx("button",{className:Sb,type:"button","aria-label":"Search",children:C.jsx(BA,{height:21,width:21})})}),C.jsx(cg,{open:t,onClose:()=>r(!1)})]})}var Rb="vocs_MobileTopNav",_b="vocs_MobileTopNav_content",kb="vocs_MobileTopNav_curtain",lm="vocs_MobileTopNav_curtainGroup",vu="vocs_MobileTopNav_curtainItem",Du="vocs_MobileTopNav_group",Tb="vocs_MobileTopNav_item",Mb="vocs_MobileTopNav_logo",Yg="vocs_MobileTopNav_menuTrigger",Pb="vocs_MobileTopNav_menuTitle",Lb="vocs_MobileTopNav_navigation_compact",Kg="vocs_MobileTopNav_navigation",Ob="vocs_MobileTopNav_navigationContent",Wl="vocs_MobileTopNav_navigationItem",jb="var(--vocs_MobileTopNav_chevronDownIcon)",Ub="var(--vocs_MobileTopNav_chevronUpIcon)",Ib="vocs_MobileTopNav_trigger",im="vocs_MobileTopNav_outlineTrigger",zb="vocs_MobileTopNav_outlinePopover",sm="vocs_MobileTopNav_section",Hb="vocs_MobileTopNav_separator",Vb="vocs_MobileTopNav_sidebarPopover",Wb="vocs_MobileTopNav_topNavPopover",Gb="vocs_MobileTopNav_topNavPopoverFooter";function qb(t,r){let a=!1;return()=>{a=!0,setTimeout(()=>{a&&t(),a=!1},r)}}function $b(t){const[r,a]=y.useState(void 0);return Be(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const l=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const c=s[0];let A,f;if("borderBoxSize"in c){const p=c.borderBoxSize,h=Array.isArray(p)?p[0]:p;A=h.inlineSize,f=h.blockSize}else A=t.offsetWidth,f=t.offsetHeight;a({width:A,height:f})});return l.observe(t,{box:"border-box"}),()=>l.unobserve(t)}else a(void 0)},[t]),r}const Yb=["top","right","bottom","left"],Qt=Math.min,ie=Math.max,Ai=Math.round,Gl=Math.floor,Ze=t=>({x:t,y:t}),Kb={left:"right",right:"left",bottom:"top",top:"bottom"},Zb={start:"end",end:"start"};function eA(t,r,a){return ie(t,Qt(r,a))}function Dt(t,r){return typeof t=="function"?t(r):t}function wt(t){return t.split("-")[0]}function zr(t){return t.split("-")[1]}function KA(t){return t==="x"?"y":"x"}function ZA(t){return t==="y"?"height":"width"}const Xb=new Set(["top","bottom"]);function Ye(t){return Xb.has(wt(t))?"y":"x"}function XA(t){return KA(Ye(t))}function Qb(t,r,a){a===void 0&&(a=!1);const l=zr(t),s=XA(t),c=ZA(s);let A=s==="x"?l===(a?"end":"start")?"right":"left":l==="start"?"bottom":"top";return r.reference[c]>r.floating[c]&&(A=fi(A)),[A,fi(A)]}function Jb(t){const r=fi(t);return[tA(t),r,tA(r)]}function tA(t){return t.replace(/start|end/g,r=>Zb[r])}const cm=["left","right"],um=["right","left"],eN=["top","bottom"],tN=["bottom","top"];function nN(t,r,a){switch(t){case"top":case"bottom":return a?r?um:cm:r?cm:um;case"left":case"right":return r?eN:tN;default:return[]}}function rN(t,r,a,l){const s=zr(t);let c=nN(wt(t),a==="start",l);return s&&(c=c.map(A=>A+"-"+s),r&&(c=c.concat(c.map(tA)))),c}function fi(t){return t.replace(/left|right|bottom|top/g,r=>Kb[r])}function oN(t){return{top:0,right:0,bottom:0,left:0,...t}}function Zg(t){return typeof t!="number"?oN(t):{top:t,right:t,bottom:t,left:t}}function di(t){const{x:r,y:a,width:l,height:s}=t;return{width:l,height:s,top:a,left:r,right:r+l,bottom:a+s,x:r,y:a}}function Am(t,r,a){let{reference:l,floating:s}=t;const c=Ye(r),A=XA(r),f=ZA(A),p=wt(r),h=c==="y",g=l.x+l.width/2-s.width/2,m=l.y+l.height/2-s.height/2,v=l[f]/2-s[f]/2;let D;switch(p){case"top":D={x:g,y:l.y-s.height};break;case"bottom":D={x:g,y:l.y+l.height};break;case"right":D={x:l.x+l.width,y:m};break;case"left":D={x:l.x-s.width,y:m};break;default:D={x:l.x,y:l.y}}switch(zr(r)){case"start":D[A]-=v*(a&&h?-1:1);break;case"end":D[A]+=v*(a&&h?-1:1);break}return D}const aN=async(t,r,a)=>{const{placement:l="bottom",strategy:s="absolute",middleware:c=[],platform:A}=a,f=c.filter(Boolean),p=await(A.isRTL==null?void 0:A.isRTL(r));let h=await A.getElementRects({reference:t,floating:r,strategy:s}),{x:g,y:m}=Am(h,l,p),v=l,D={},x=0;for(let w=0;w<f.length;w++){const{name:B,fn:b}=f[w],{x:E,y:N,data:_,reset:T}=await b({x:g,y:m,initialPlacement:l,placement:v,strategy:s,middlewareData:D,rects:h,platform:A,elements:{reference:t,floating:r}});g=E??g,m=N??m,D={...D,[B]:{...D[B],..._}},T&&x<=50&&(x++,typeof T=="object"&&(T.placement&&(v=T.placement),T.rects&&(h=T.rects===!0?await A.getElementRects({reference:t,floating:r,strategy:s}):T.rects),{x:g,y:m}=Am(h,v,p)),w=-1)}return{x:g,y:m,placement:v,strategy:s,middlewareData:D}};async function na(t,r){var a;r===void 0&&(r={});const{x:l,y:s,platform:c,rects:A,elements:f,strategy:p}=t,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:v=!1,padding:D=0}=Dt(r,t),x=Zg(D),B=f[v?m==="floating"?"reference":"floating":m],b=di(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(B)))==null||a?B:B.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:h,rootBoundary:g,strategy:p})),E=m==="floating"?{x:l,y:s,width:A.floating.width,height:A.floating.height}:A.reference,N=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),_=await(c.isElement==null?void 0:c.isElement(N))?await(c.getScale==null?void 0:c.getScale(N))||{x:1,y:1}:{x:1,y:1},T=di(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:E,offsetParent:N,strategy:p}):E);return{top:(b.top-T.top+x.top)/_.y,bottom:(T.bottom-b.bottom+x.bottom)/_.y,left:(b.left-T.left+x.left)/_.x,right:(T.right-b.right+x.right)/_.x}}const lN=t=>({name:"arrow",options:t,async fn(r){const{x:a,y:l,placement:s,rects:c,platform:A,elements:f,middlewareData:p}=r,{element:h,padding:g=0}=Dt(t,r)||{};if(h==null)return{};const m=Zg(g),v={x:a,y:l},D=XA(s),x=ZA(D),w=await A.getDimensions(h),B=D==="y",b=B?"top":"left",E=B?"bottom":"right",N=B?"clientHeight":"clientWidth",_=c.reference[x]+c.reference[D]-v[D]-c.floating[x],T=v[D]-c.reference[D],R=await(A.getOffsetParent==null?void 0:A.getOffsetParent(h));let L=R?R[N]:0;(!L||!await(A.isElement==null?void 0:A.isElement(R)))&&(L=f.floating[N]||c.floating[x]);const I=_/2-T/2,V=L/2-w[x]/2-1,r0=Qt(m[b],V),u0=Qt(m[E],V),l0=r0,i0=L-w[x]-u0,q=L/2-w[x]/2+I,A0=eA(l0,q,i0),O=!p.arrow&&zr(s)!=null&&q!==A0&&c.reference[x]/2-(q<l0?r0:u0)-w[x]/2<0,G=O?q<l0?q-l0:q-i0:0;return{[D]:v[D]+G,data:{[D]:A0,centerOffset:q-A0-G,...O&&{alignmentOffset:G}},reset:O}}}),iN=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var a,l;const{placement:s,middlewareData:c,rects:A,initialPlacement:f,platform:p,elements:h}=r,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:D="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,...B}=Dt(t,r);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const b=wt(s),E=Ye(f),N=wt(f)===f,_=await(p.isRTL==null?void 0:p.isRTL(h.floating)),T=v||(N||!w?[fi(f)]:Jb(f)),R=x!=="none";!v&&R&&T.push(...rN(f,w,x,_));const L=[f,...T],I=await na(r,B),V=[];let r0=((l=c.flip)==null?void 0:l.overflows)||[];if(g&&V.push(I[b]),m){const q=Qb(s,A,_);V.push(I[q[0]],I[q[1]])}if(r0=[...r0,{placement:s,overflows:V}],!V.every(q=>q<=0)){var u0,l0;const q=(((u0=c.flip)==null?void 0:u0.index)||0)+1,A0=L[q];if(A0&&(!(m==="alignment"?E!==Ye(A0):!1)||r0.every(X=>Ye(X.placement)===E?X.overflows[0]>0:!0)))return{data:{index:q,overflows:r0},reset:{placement:A0}};let O=(l0=r0.filter(G=>G.overflows[0]<=0).sort((G,X)=>G.overflows[1]-X.overflows[1])[0])==null?void 0:l0.placement;if(!O)switch(D){case"bestFit":{var i0;const G=(i0=r0.filter(X=>{if(R){const K=Ye(X.placement);return K===E||K==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(K=>K>0).reduce((K,k)=>K+k,0)]).sort((X,K)=>X[1]-K[1])[0])==null?void 0:i0[0];G&&(O=G);break}case"initialPlacement":O=f;break}if(s!==O)return{reset:{placement:O}}}return{}}}};function fm(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function dm(t){return Yb.some(r=>t[r]>=0)}const sN=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:a}=r,{strategy:l="referenceHidden",...s}=Dt(t,r);switch(l){case"referenceHidden":{const c=await na(r,{...s,elementContext:"reference"}),A=fm(c,a.reference);return{data:{referenceHiddenOffsets:A,referenceHidden:dm(A)}}}case"escaped":{const c=await na(r,{...s,altBoundary:!0}),A=fm(c,a.floating);return{data:{escapedOffsets:A,escaped:dm(A)}}}default:return{}}}}},Xg=new Set(["left","top"]);async function cN(t,r){const{placement:a,platform:l,elements:s}=t,c=await(l.isRTL==null?void 0:l.isRTL(s.floating)),A=wt(a),f=zr(a),p=Ye(a)==="y",h=Xg.has(A)?-1:1,g=c&&p?-1:1,m=Dt(r,t);let{mainAxis:v,crossAxis:D,alignmentAxis:x}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return f&&typeof x=="number"&&(D=f==="end"?x*-1:x),p?{x:D*g,y:v*h}:{x:v*h,y:D*g}}const uN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var a,l;const{x:s,y:c,placement:A,middlewareData:f}=r,p=await cN(r,t);return A===((a=f.offset)==null?void 0:a.placement)&&(l=f.arrow)!=null&&l.alignmentOffset?{}:{x:s+p.x,y:c+p.y,data:{...p,placement:A}}}}},AN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:a,y:l,placement:s}=r,{mainAxis:c=!0,crossAxis:A=!1,limiter:f={fn:B=>{let{x:b,y:E}=B;return{x:b,y:E}}},...p}=Dt(t,r),h={x:a,y:l},g=await na(r,p),m=Ye(wt(s)),v=KA(m);let D=h[v],x=h[m];if(c){const B=v==="y"?"top":"left",b=v==="y"?"bottom":"right",E=D+g[B],N=D-g[b];D=eA(E,D,N)}if(A){const B=m==="y"?"top":"left",b=m==="y"?"bottom":"right",E=x+g[B],N=x-g[b];x=eA(E,x,N)}const w=f.fn({...r,[v]:D,[m]:x});return{...w,data:{x:w.x-a,y:w.y-l,enabled:{[v]:c,[m]:A}}}}}},fN=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:a,y:l,placement:s,rects:c,middlewareData:A}=r,{offset:f=0,mainAxis:p=!0,crossAxis:h=!0}=Dt(t,r),g={x:a,y:l},m=Ye(s),v=KA(m);let D=g[v],x=g[m];const w=Dt(f,r),B=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(p){const N=v==="y"?"height":"width",_=c.reference[v]-c.floating[N]+B.mainAxis,T=c.reference[v]+c.reference[N]-B.mainAxis;D<_?D=_:D>T&&(D=T)}if(h){var b,E;const N=v==="y"?"width":"height",_=Xg.has(wt(s)),T=c.reference[m]-c.floating[N]+(_&&((b=A.offset)==null?void 0:b[m])||0)+(_?0:B.crossAxis),R=c.reference[m]+c.reference[N]+(_?0:((E=A.offset)==null?void 0:E[m])||0)-(_?B.crossAxis:0);x<T?x=T:x>R&&(x=R)}return{[v]:D,[m]:x}}}},dN=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var a,l;const{placement:s,rects:c,platform:A,elements:f}=r,{apply:p=()=>{},...h}=Dt(t,r),g=await na(r,h),m=wt(s),v=zr(s),D=Ye(s)==="y",{width:x,height:w}=c.floating;let B,b;m==="top"||m==="bottom"?(B=m,b=v===(await(A.isRTL==null?void 0:A.isRTL(f.floating))?"start":"end")?"left":"right"):(b=m,B=v==="end"?"top":"bottom");const E=w-g.top-g.bottom,N=x-g.left-g.right,_=Qt(w-g[B],E),T=Qt(x-g[b],N),R=!r.middlewareData.shift;let L=_,I=T;if((a=r.middlewareData.shift)!=null&&a.enabled.x&&(I=N),(l=r.middlewareData.shift)!=null&&l.enabled.y&&(L=E),R&&!v){const r0=ie(g.left,0),u0=ie(g.right,0),l0=ie(g.top,0),i0=ie(g.bottom,0);D?I=x-2*(r0!==0||u0!==0?r0+u0:ie(g.left,g.right)):L=w-2*(l0!==0||i0!==0?l0+i0:ie(g.top,g.bottom))}await p({...r,availableWidth:I,availableHeight:L});const V=await A.getDimensions(f.floating);return x!==V.width||w!==V.height?{reset:{rects:!0}}:{}}}};function Ti(){return typeof window<"u"}function Hr(t){return Qg(t)?(t.nodeName||"").toLowerCase():"#document"}function se(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function Je(t){var r;return(r=(Qg(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function Qg(t){return Ti()?t instanceof Node||t instanceof se(t).Node:!1}function S2(t){return Ti()?t instanceof Element||t instanceof se(t).Element:!1}function Xe(t){return Ti()?t instanceof HTMLElement||t instanceof se(t).HTMLElement:!1}function hi(t){return!Ti()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof se(t).ShadowRoot}const hN=new Set(["inline","contents"]);function fa(t){const{overflow:r,overflowX:a,overflowY:l,display:s}=be(t);return/auto|scroll|overlay|hidden|clip/.test(r+l+a)&&!hN.has(s)}const pN=new Set(["table","td","th"]);function mN(t){return pN.has(Hr(t))}const CN=[":popover-open",":modal"];function Mi(t){return CN.some(r=>{try{return t.matches(r)}catch{return!1}})}const gN=["transform","translate","scale","rotate","perspective"],yN=["transform","translate","scale","rotate","perspective","filter"],vN=["paint","layout","strict","content"];function QA(t){const r=JA(),a=S2(t)?be(t):t;return gN.some(l=>a[l]?a[l]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!r&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!r&&(a.filter?a.filter!=="none":!1)||yN.some(l=>(a.willChange||"").includes(l))||vN.some(l=>(a.contain||"").includes(l))}function DN(t){let r=Jt(t);for(;Xe(r)&&!Pr(r);){if(QA(r))return r;if(Mi(r))return null;r=Jt(r)}return null}function JA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wN=new Set(["html","body","#document"]);function Pr(t){return wN.has(Hr(t))}function be(t){return se(t).getComputedStyle(t)}function Pi(t){return S2(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Jt(t){if(Hr(t)==="html")return t;const r=t.assignedSlot||t.parentNode||hi(t)&&t.host||Je(t);return hi(r)?r.host:r}function Jg(t){const r=Jt(t);return Pr(r)?t.ownerDocument?t.ownerDocument.body:t.body:Xe(r)&&fa(r)?r:Jg(r)}function ra(t,r,a){var l;r===void 0&&(r=[]),a===void 0&&(a=!0);const s=Jg(t),c=s===((l=t.ownerDocument)==null?void 0:l.body),A=se(s);if(c){const f=nA(A);return r.concat(A,A.visualViewport||[],fa(s)?s:[],f&&a?ra(f):[])}return r.concat(s,ra(s,[],a))}function nA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ey(t){const r=be(t);let a=parseFloat(r.width)||0,l=parseFloat(r.height)||0;const s=Xe(t),c=s?t.offsetWidth:a,A=s?t.offsetHeight:l,f=Ai(a)!==c||Ai(l)!==A;return f&&(a=c,l=A),{width:a,height:l,$:f}}function ef(t){return S2(t)?t:t.contextElement}function _r(t){const r=ef(t);if(!Xe(r))return Ze(1);const a=r.getBoundingClientRect(),{width:l,height:s,$:c}=ey(r);let A=(c?Ai(a.width):a.width)/l,f=(c?Ai(a.height):a.height)/s;return(!A||!Number.isFinite(A))&&(A=1),(!f||!Number.isFinite(f))&&(f=1),{x:A,y:f}}const xN=Ze(0);function ty(t){const r=se(t);return!JA()||!r.visualViewport?xN:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function FN(t,r,a){return r===void 0&&(r=!1),!a||r&&a!==se(t)?!1:r}function Tn(t,r,a,l){r===void 0&&(r=!1),a===void 0&&(a=!1);const s=t.getBoundingClientRect(),c=ef(t);let A=Ze(1);r&&(l?S2(l)&&(A=_r(l)):A=_r(t));const f=FN(c,a,l)?ty(c):Ze(0);let p=(s.left+f.x)/A.x,h=(s.top+f.y)/A.y,g=s.width/A.x,m=s.height/A.y;if(c){const v=se(c),D=l&&S2(l)?se(l):l;let x=v,w=nA(x);for(;w&&l&&D!==x;){const B=_r(w),b=w.getBoundingClientRect(),E=be(w),N=b.left+(w.clientLeft+parseFloat(E.paddingLeft))*B.x,_=b.top+(w.clientTop+parseFloat(E.paddingTop))*B.y;p*=B.x,h*=B.y,g*=B.x,m*=B.y,p+=N,h+=_,x=se(w),w=nA(x)}}return di({width:g,height:m,x:p,y:h})}function tf(t,r){const a=Pi(t).scrollLeft;return r?r.left+a:Tn(Je(t)).left+a}function ny(t,r,a){a===void 0&&(a=!1);const l=t.getBoundingClientRect(),s=l.left+r.scrollLeft-(a?0:tf(t,l)),c=l.top+r.scrollTop;return{x:s,y:c}}function BN(t){let{elements:r,rect:a,offsetParent:l,strategy:s}=t;const c=s==="fixed",A=Je(l),f=r?Mi(r.floating):!1;if(l===A||f&&c)return a;let p={scrollLeft:0,scrollTop:0},h=Ze(1);const g=Ze(0),m=Xe(l);if((m||!m&&!c)&&((Hr(l)!=="body"||fa(A))&&(p=Pi(l)),Xe(l))){const D=Tn(l);h=_r(l),g.x=D.x+l.clientLeft,g.y=D.y+l.clientTop}const v=A&&!m&&!c?ny(A,p,!0):Ze(0);return{width:a.width*h.x,height:a.height*h.y,x:a.x*h.x-p.scrollLeft*h.x+g.x+v.x,y:a.y*h.y-p.scrollTop*h.y+g.y+v.y}}function bN(t){return Array.from(t.getClientRects())}function NN(t){const r=Je(t),a=Pi(t),l=t.ownerDocument.body,s=ie(r.scrollWidth,r.clientWidth,l.scrollWidth,l.clientWidth),c=ie(r.scrollHeight,r.clientHeight,l.scrollHeight,l.clientHeight);let A=-a.scrollLeft+tf(t);const f=-a.scrollTop;return be(l).direction==="rtl"&&(A+=ie(r.clientWidth,l.clientWidth)-s),{width:s,height:c,x:A,y:f}}function SN(t,r){const a=se(t),l=Je(t),s=a.visualViewport;let c=l.clientWidth,A=l.clientHeight,f=0,p=0;if(s){c=s.width,A=s.height;const h=JA();(!h||h&&r==="fixed")&&(f=s.offsetLeft,p=s.offsetTop)}return{width:c,height:A,x:f,y:p}}const EN=new Set(["absolute","fixed"]);function RN(t,r){const a=Tn(t,!0,r==="fixed"),l=a.top+t.clientTop,s=a.left+t.clientLeft,c=Xe(t)?_r(t):Ze(1),A=t.clientWidth*c.x,f=t.clientHeight*c.y,p=s*c.x,h=l*c.y;return{width:A,height:f,x:p,y:h}}function hm(t,r,a){let l;if(r==="viewport")l=SN(t,a);else if(r==="document")l=NN(Je(t));else if(S2(r))l=RN(r,a);else{const s=ty(t);l={x:r.x-s.x,y:r.y-s.y,width:r.width,height:r.height}}return di(l)}function ry(t,r){const a=Jt(t);return a===r||!S2(a)||Pr(a)?!1:be(a).position==="fixed"||ry(a,r)}function _N(t,r){const a=r.get(t);if(a)return a;let l=ra(t,[],!1).filter(f=>S2(f)&&Hr(f)!=="body"),s=null;const c=be(t).position==="fixed";let A=c?Jt(t):t;for(;S2(A)&&!Pr(A);){const f=be(A),p=QA(A);!p&&f.position==="fixed"&&(s=null),(c?!p&&!s:!p&&f.position==="static"&&!!s&&EN.has(s.position)||fa(A)&&!p&&ry(t,A))?l=l.filter(g=>g!==A):s=f,A=Jt(A)}return r.set(t,l),l}function kN(t){let{element:r,boundary:a,rootBoundary:l,strategy:s}=t;const A=[...a==="clippingAncestors"?Mi(r)?[]:_N(r,this._c):[].concat(a),l],f=A[0],p=A.reduce((h,g)=>{const m=hm(r,g,s);return h.top=ie(m.top,h.top),h.right=Qt(m.right,h.right),h.bottom=Qt(m.bottom,h.bottom),h.left=ie(m.left,h.left),h},hm(r,f,s));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function TN(t){const{width:r,height:a}=ey(t);return{width:r,height:a}}function MN(t,r,a){const l=Xe(r),s=Je(r),c=a==="fixed",A=Tn(t,!0,c,r);let f={scrollLeft:0,scrollTop:0};const p=Ze(0);function h(){p.x=tf(s)}if(l||!l&&!c)if((Hr(r)!=="body"||fa(s))&&(f=Pi(r)),l){const D=Tn(r,!0,c,r);p.x=D.x+r.clientLeft,p.y=D.y+r.clientTop}else s&&h();c&&!l&&s&&h();const g=s&&!l&&!c?ny(s,f):Ze(0),m=A.left+f.scrollLeft-p.x-g.x,v=A.top+f.scrollTop-p.y-g.y;return{x:m,y:v,width:A.width,height:A.height}}function wu(t){return be(t).position==="static"}function pm(t,r){if(!Xe(t)||be(t).position==="fixed")return null;if(r)return r(t);let a=t.offsetParent;return Je(t)===a&&(a=a.ownerDocument.body),a}function oy(t,r){const a=se(t);if(Mi(t))return a;if(!Xe(t)){let s=Jt(t);for(;s&&!Pr(s);){if(S2(s)&&!wu(s))return s;s=Jt(s)}return a}let l=pm(t,r);for(;l&&mN(l)&&wu(l);)l=pm(l,r);return l&&Pr(l)&&wu(l)&&!QA(l)?a:l||DN(t)||a}const PN=async function(t){const r=this.getOffsetParent||oy,a=this.getDimensions,l=await a(t.floating);return{reference:MN(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function LN(t){return be(t).direction==="rtl"}const ON={convertOffsetParentRelativeRectToViewportRelativeRect:BN,getDocumentElement:Je,getClippingRect:kN,getOffsetParent:oy,getElementRects:PN,getClientRects:bN,getDimensions:TN,getScale:_r,isElement:S2,isRTL:LN};function ay(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function jN(t,r){let a=null,l;const s=Je(t);function c(){var f;clearTimeout(l),(f=a)==null||f.disconnect(),a=null}function A(f,p){f===void 0&&(f=!1),p===void 0&&(p=1),c();const h=t.getBoundingClientRect(),{left:g,top:m,width:v,height:D}=h;if(f||r(),!v||!D)return;const x=Gl(m),w=Gl(s.clientWidth-(g+v)),B=Gl(s.clientHeight-(m+D)),b=Gl(g),N={rootMargin:-x+"px "+-w+"px "+-B+"px "+-b+"px",threshold:ie(0,Qt(1,p))||1};let _=!0;function T(R){const L=R[0].intersectionRatio;if(L!==p){if(!_)return A();L?A(!1,L):l=setTimeout(()=>{A(!1,1e-7)},1e3)}L===1&&!ay(h,t.getBoundingClientRect())&&A(),_=!1}try{a=new IntersectionObserver(T,{...N,root:s.ownerDocument})}catch{a=new IntersectionObserver(T,N)}a.observe(t)}return A(!0),c}function UN(t,r,a,l){l===void 0&&(l={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:A=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:p=!1}=l,h=ef(t),g=s||c?[...h?ra(h):[],...ra(r)]:[];g.forEach(b=>{s&&b.addEventListener("scroll",a,{passive:!0}),c&&b.addEventListener("resize",a)});const m=h&&f?jN(h,a):null;let v=-1,D=null;A&&(D=new ResizeObserver(b=>{let[E]=b;E&&E.target===h&&D&&(D.unobserve(r),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var N;(N=D)==null||N.observe(r)})),a()}),h&&!p&&D.observe(h),D.observe(r));let x,w=p?Tn(t):null;p&&B();function B(){const b=Tn(t);w&&!ay(w,b)&&a(),w=b,x=requestAnimationFrame(B)}return a(),()=>{var b;g.forEach(E=>{s&&E.removeEventListener("scroll",a),c&&E.removeEventListener("resize",a)}),m==null||m(),(b=D)==null||b.disconnect(),D=null,p&&cancelAnimationFrame(x)}}const IN=uN,zN=AN,HN=iN,VN=dN,WN=sN,mm=lN,GN=fN,qN=(t,r,a)=>{const l=new Map,s={platform:ON,...a},c={...s.platform,_c:l};return aN(t,r,{...s,platform:c})};var $N=typeof document<"u",YN=function(){},ri=$N?y.useLayoutEffect:YN;function pi(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let a,l,s;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(a=t.length,a!==r.length)return!1;for(l=a;l--!==0;)if(!pi(t[l],r[l]))return!1;return!0}if(s=Object.keys(t),a=s.length,a!==Object.keys(r).length)return!1;for(l=a;l--!==0;)if(!{}.hasOwnProperty.call(r,s[l]))return!1;for(l=a;l--!==0;){const c=s[l];if(!(c==="_owner"&&t.$$typeof)&&!pi(t[c],r[c]))return!1}return!0}return t!==t&&r!==r}function ly(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cm(t,r){const a=ly(t);return Math.round(r*a)/a}function xu(t){const r=y.useRef(t);return ri(()=>{r.current=t}),r}function iy(t){t===void 0&&(t={});const{placement:r="bottom",strategy:a="absolute",middleware:l=[],platform:s,elements:{reference:c,floating:A}={},transform:f=!0,whileElementsMounted:p,open:h}=t,[g,m]=y.useState({x:0,y:0,strategy:a,placement:r,middlewareData:{},isPositioned:!1}),[v,D]=y.useState(l);pi(v,l)||D(l);const[x,w]=y.useState(null),[B,b]=y.useState(null),E=y.useCallback(X=>{X!==R.current&&(R.current=X,w(X))},[]),N=y.useCallback(X=>{X!==L.current&&(L.current=X,b(X))},[]),_=c||x,T=A||B,R=y.useRef(null),L=y.useRef(null),I=y.useRef(g),V=p!=null,r0=xu(p),u0=xu(s),l0=xu(h),i0=y.useCallback(()=>{if(!R.current||!L.current)return;const X={placement:r,strategy:a,middleware:v};u0.current&&(X.platform=u0.current),qN(R.current,L.current,X).then(K=>{const k={...K,isPositioned:l0.current!==!1};q.current&&!pi(I.current,k)&&(I.current=k,xA.flushSync(()=>{m(k)}))})},[v,r,a,u0,l0]);ri(()=>{h===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,m(X=>({...X,isPositioned:!1})))},[h]);const q=y.useRef(!1);ri(()=>(q.current=!0,()=>{q.current=!1}),[]),ri(()=>{if(_&&(R.current=_),T&&(L.current=T),_&&T){if(r0.current)return r0.current(_,T,i0);i0()}},[_,T,i0,r0,V]);const A0=y.useMemo(()=>({reference:R,floating:L,setReference:E,setFloating:N}),[E,N]),O=y.useMemo(()=>({reference:_,floating:T}),[_,T]),G=y.useMemo(()=>{const X={position:a,left:0,top:0};if(!O.floating)return X;const K=Cm(O.floating,g.x),k=Cm(O.floating,g.y);return f?{...X,transform:"translate("+K+"px, "+k+"px)",...ly(O.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:K,top:k}},[a,f,O.floating,g.x,g.y]);return y.useMemo(()=>({...g,update:i0,refs:A0,elements:O,floatingStyles:G}),[g,i0,A0,O,G])}const KN=t=>{function r(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:t,fn(a){const{element:l,padding:s}=typeof t=="function"?t(a):t;return l&&r(l)?l.current!=null?mm({element:l.current,padding:s}).fn(a):{}:l?mm({element:l,padding:s}).fn(a):{}}}},sy=(t,r)=>({...IN(t),options:[t,r]}),cy=(t,r)=>({...zN(t),options:[t,r]}),ZN=(t,r)=>({...GN(t),options:[t,r]}),XN=(t,r)=>({...HN(t),options:[t,r]}),QN=(t,r)=>({...VN(t),options:[t,r]}),JN=(t,r)=>({...WN(t),options:[t,r]}),uy=(t,r)=>({...KN(t),options:[t,r]});var eS="Arrow",Ay=y.forwardRef((t,r)=>{const{children:a,width:l=10,height:s=5,...c}=t;return C.jsx(R0.svg,{...c,ref:r,width:l,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?a:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ay.displayName=eS;var tS=Ay,nf="Popper",[fy,Li]=Le(nf),[nS,dy]=fy(nf),hy=t=>{const{__scopePopper:r,children:a}=t,[l,s]=y.useState(null);return C.jsx(nS,{scope:r,anchor:l,onAnchorChange:s,children:a})};hy.displayName=nf;var py="PopperAnchor",my=y.forwardRef((t,r)=>{const{__scopePopper:a,virtualRef:l,...s}=t,c=dy(py,a),A=y.useRef(null),f=o2(r,A);return y.useEffect(()=>{c.onAnchorChange((l==null?void 0:l.current)||A.current)}),l?null:C.jsx(R0.div,{...s,ref:f})});my.displayName=py;var rf="PopperContent",[rS,oS]=fy(rf),Cy=y.forwardRef((t,r)=>{var $0,b0,T0,H0,u2,M2;const{__scopePopper:a,side:l="bottom",sideOffset:s=0,align:c="center",alignOffset:A=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:D="optimized",onPlaced:x,...w}=t,B=dy(rf,a),[b,E]=y.useState(null),N=o2(r,Ee=>E(Ee)),[_,T]=y.useState(null),R=$b(_),L=(R==null?void 0:R.width)??0,I=(R==null?void 0:R.height)??0,V=l+(c!=="center"?"-"+c:""),r0=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},u0=Array.isArray(h)?h:[h],l0=u0.length>0,i0={padding:r0,boundary:u0.filter(lS),altBoundary:l0},{refs:q,floatingStyles:A0,placement:O,isPositioned:G,middlewareData:X}=iy({strategy:"fixed",placement:V,whileElementsMounted:(...Ee)=>UN(...Ee,{animationFrame:D==="always"}),elements:{reference:B.anchor},middleware:[sy({mainAxis:s+I,alignmentAxis:A}),p&&cy({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?ZN():void 0,...i0}),p&&XN({...i0}),QN({...i0,apply:({elements:Ee,rects:W2,availableWidth:Vr,availableHeight:Wr})=>{const{width:U2,height:Gr}=W2.reference,et=Ee.floating.style;et.setProperty("--radix-popper-available-width",`${Vr}px`),et.setProperty("--radix-popper-available-height",`${Wr}px`),et.setProperty("--radix-popper-anchor-width",`${U2}px`),et.setProperty("--radix-popper-anchor-height",`${Gr}px`)}}),_&&uy({element:_,padding:f}),iS({arrowWidth:L,arrowHeight:I}),v&&JN({strategy:"referenceHidden",...i0})]}),[K,k]=vy(O),Q=O2(x);Be(()=>{G&&(Q==null||Q())},[G,Q]);const J=($0=X.arrow)==null?void 0:$0.x,n0=(b0=X.arrow)==null?void 0:b0.y,f0=((T0=X.arrow)==null?void 0:T0.centerOffset)!==0,[x0,m0]=y.useState();return Be(()=>{b&&m0(window.getComputedStyle(b).zIndex)},[b]),C.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...A0,transform:G?A0.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:x0,"--radix-popper-transform-origin":[(H0=X.transformOrigin)==null?void 0:H0.x,(u2=X.transformOrigin)==null?void 0:u2.y].join(" "),...((M2=X.hide)==null?void 0:M2.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:C.jsx(rS,{scope:a,placedSide:K,onArrowChange:T,arrowX:J,arrowY:n0,shouldHideArrow:f0,children:C.jsx(R0.div,{"data-side":K,"data-align":k,...w,ref:N,style:{...w.style,animation:G?void 0:"none"}})})})});Cy.displayName=rf;var gy="PopperArrow",aS={top:"bottom",right:"left",bottom:"top",left:"right"},yy=y.forwardRef(function(r,a){const{__scopePopper:l,...s}=r,c=oS(gy,l),A=aS[c.placedSide];return C.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[A]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:C.jsx(tS,{...s,ref:a,style:{...s.style,display:"block"}})})});yy.displayName=gy;function lS(t){return t!==null}var iS=t=>({name:"transformOrigin",options:t,fn(r){var B,b,E;const{placement:a,rects:l,middlewareData:s}=r,A=((B=s.arrow)==null?void 0:B.centerOffset)!==0,f=A?0:t.arrowWidth,p=A?0:t.arrowHeight,[h,g]=vy(a),m={start:"0%",center:"50%",end:"100%"}[g],v=(((b=s.arrow)==null?void 0:b.x)??0)+f/2,D=(((E=s.arrow)==null?void 0:E.y)??0)+p/2;let x="",w="";return h==="bottom"?(x=A?m:`${v}px`,w=`${-p}px`):h==="top"?(x=A?m:`${v}px`,w=`${l.floating.height+p}px`):h==="right"?(x=`${-p}px`,w=A?m:`${D}px`):h==="left"&&(x=`${l.floating.width+p}px`,w=A?m:`${D}px`),{data:{x,y:w}}}});function vy(t){const[r,a="center"]=t.split("-");return[r,a]}var Dy=hy,of=my,wy=Cy,xy=yy,Fu="rovingFocusGroup.onEntryFocus",sS={bubbles:!1,cancelable:!0},da="RovingFocusGroup",[rA,Fy,cS]=Aa(da),[uS,Oi]=Le(da,[cS]),[AS,fS]=uS(da),By=y.forwardRef((t,r)=>C.jsx(rA.Provider,{scope:t.__scopeRovingFocusGroup,children:C.jsx(rA.Slot,{scope:t.__scopeRovingFocusGroup,children:C.jsx(dS,{...t,ref:r})})}));By.displayName=da;var dS=y.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:a,orientation:l,loop:s=!1,dir:c,currentTabStopId:A,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:p,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...m}=t,v=y.useRef(null),D=o2(r,v),x=ua(c),[w,B]=Qe({prop:A,defaultProp:f??null,onChange:p,caller:da}),[b,E]=y.useState(!1),N=O2(h),_=Fy(a),T=y.useRef(!1),[R,L]=y.useState(0);return y.useEffect(()=>{const I=v.current;if(I)return I.addEventListener(Fu,N),()=>I.removeEventListener(Fu,N)},[N]),C.jsx(AS,{scope:a,orientation:l,dir:x,loop:s,currentTabStopId:w,onItemFocus:y.useCallback(I=>B(I),[B]),onItemShiftTab:y.useCallback(()=>E(!0),[]),onFocusableItemAdd:y.useCallback(()=>L(I=>I+1),[]),onFocusableItemRemove:y.useCallback(()=>L(I=>I-1),[]),children:C.jsx(R0.div,{tabIndex:b||R===0?-1:0,"data-orientation":l,...m,ref:D,style:{outline:"none",...t.style},onMouseDown:h0(t.onMouseDown,()=>{T.current=!0}),onFocus:h0(t.onFocus,I=>{const V=!T.current;if(I.target===I.currentTarget&&V&&!b){const r0=new CustomEvent(Fu,sS);if(I.currentTarget.dispatchEvent(r0),!r0.defaultPrevented){const u0=_().filter(O=>O.focusable),l0=u0.find(O=>O.active),i0=u0.find(O=>O.id===w),A0=[l0,i0,...u0].filter(Boolean).map(O=>O.ref.current);Sy(A0,g)}}T.current=!1}),onBlur:h0(t.onBlur,()=>E(!1))})})}),by="RovingFocusGroupItem",Ny=y.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:a,focusable:l=!0,active:s=!1,tabStopId:c,children:A,...f}=t,p=we(),h=c||p,g=fS(by,a),m=g.currentTabStopId===h,v=Fy(a),{onFocusableItemAdd:D,onFocusableItemRemove:x,currentTabStopId:w}=g;return y.useEffect(()=>{if(l)return D(),()=>x()},[l,D,x]),C.jsx(rA.ItemSlot,{scope:a,id:h,focusable:l,active:s,children:C.jsx(R0.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...f,ref:r,onMouseDown:h0(t.onMouseDown,B=>{l?g.onItemFocus(h):B.preventDefault()}),onFocus:h0(t.onFocus,()=>g.onItemFocus(h)),onKeyDown:h0(t.onKeyDown,B=>{if(B.key==="Tab"&&B.shiftKey){g.onItemShiftTab();return}if(B.target!==B.currentTarget)return;const b=mS(B,g.orientation,g.dir);if(b!==void 0){if(B.metaKey||B.ctrlKey||B.altKey||B.shiftKey)return;B.preventDefault();let N=v().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")N.reverse();else if(b==="prev"||b==="next"){b==="prev"&&N.reverse();const _=N.indexOf(B.currentTarget);N=g.loop?CS(N,_+1):N.slice(_+1)}setTimeout(()=>Sy(N))}}),children:typeof A=="function"?A({isCurrentTabStop:m,hasTabStop:w!=null}):A})})});Ny.displayName=by;var hS={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pS(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function mS(t,r,a){const l=pS(t.key,a);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return hS[l]}function Sy(t,r=!1){const a=document.activeElement;for(const l of t)if(l===a||(l.focus({preventScroll:r}),document.activeElement!==a))return}function CS(t,r){return t.map((a,l)=>t[(r+l)%t.length])}var Ey=By,Ry=Ny,oA=["Enter"," "],gS=["ArrowDown","PageUp","Home"],_y=["ArrowUp","PageDown","End"],yS=[...gS,..._y],vS={ltr:[...oA,"ArrowRight"],rtl:[...oA,"ArrowLeft"]},DS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ha="Menu",[oa,wS,xS]=Aa(ha),[jn,ky]=Le(ha,[xS,Li,Oi]),ji=Li(),Ty=Oi(),[FS,Un]=jn(ha),[BS,pa]=jn(ha),My=t=>{const{__scopeMenu:r,open:a=!1,children:l,dir:s,onOpenChange:c,modal:A=!0}=t,f=ji(r),[p,h]=y.useState(null),g=y.useRef(!1),m=O2(c),v=ua(s);return y.useEffect(()=>{const D=()=>{g.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>g.current=!1;return document.addEventListener("keydown",D,{capture:!0}),()=>{document.removeEventListener("keydown",D,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),C.jsx(Dy,{...f,children:C.jsx(FS,{scope:r,open:a,onOpenChange:m,content:p,onContentChange:h,children:C.jsx(BS,{scope:r,onClose:y.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:v,modal:A,children:l})})})};My.displayName=ha;var bS="MenuAnchor",af=y.forwardRef((t,r)=>{const{__scopeMenu:a,...l}=t,s=ji(a);return C.jsx(of,{...s,...l,ref:r})});af.displayName=bS;var lf="MenuPortal",[NS,Py]=jn(lf,{forceMount:void 0}),Ly=t=>{const{__scopeMenu:r,forceMount:a,children:l,container:s}=t,c=Un(lf,r);return C.jsx(NS,{scope:r,forceMount:a,children:C.jsx(j2,{present:a||c.open,children:C.jsx(Bi,{asChild:!0,container:s,children:l})})})};Ly.displayName=lf;var xe="MenuContent",[SS,sf]=jn(xe),Oy=y.forwardRef((t,r)=>{const a=Py(xe,t.__scopeMenu),{forceMount:l=a.forceMount,...s}=t,c=Un(xe,t.__scopeMenu),A=pa(xe,t.__scopeMenu);return C.jsx(oa.Provider,{scope:t.__scopeMenu,children:C.jsx(j2,{present:l||c.open,children:C.jsx(oa.Slot,{scope:t.__scopeMenu,children:A.modal?C.jsx(ES,{...s,ref:r}):C.jsx(RS,{...s,ref:r})})})})}),ES=y.forwardRef((t,r)=>{const a=Un(xe,t.__scopeMenu),l=y.useRef(null),s=o2(r,l);return y.useEffect(()=>{const c=l.current;if(c)return SA(c)},[]),C.jsx(cf,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:h0(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),RS=y.forwardRef((t,r)=>{const a=Un(xe,t.__scopeMenu);return C.jsx(cf,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),_S=Tr("MenuContent.ScrollLock"),cf=y.forwardRef((t,r)=>{const{__scopeMenu:a,loop:l=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:A,disableOutsidePointerEvents:f,onEntryFocus:p,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:D,disableOutsideScroll:x,...w}=t,B=Un(xe,a),b=pa(xe,a),E=ji(a),N=Ty(a),_=wS(a),[T,R]=y.useState(null),L=y.useRef(null),I=o2(r,L,B.onContentChange),V=y.useRef(0),r0=y.useRef(""),u0=y.useRef(0),l0=y.useRef(null),i0=y.useRef("right"),q=y.useRef(0),A0=x?Ni:y.Fragment,O=x?{as:_S,allowPinchZoom:!0}:void 0,G=K=>{var $0,b0;const k=r0.current+K,Q=_().filter(T0=>!T0.disabled),J=document.activeElement,n0=($0=Q.find(T0=>T0.ref.current===J))==null?void 0:$0.textValue,f0=Q.map(T0=>T0.textValue),x0=VS(f0,k,n0),m0=(b0=Q.find(T0=>T0.textValue===x0))==null?void 0:b0.ref.current;(function T0(H0){r0.current=H0,window.clearTimeout(V.current),H0!==""&&(V.current=window.setTimeout(()=>T0(""),1e3))})(k),m0&&setTimeout(()=>m0.focus())};y.useEffect(()=>()=>window.clearTimeout(V.current),[]),NA();const X=y.useCallback(K=>{var Q,J;return i0.current===((Q=l0.current)==null?void 0:Q.side)&&GS(K,(J=l0.current)==null?void 0:J.area)},[]);return C.jsx(SS,{scope:a,searchRef:r0,onItemEnter:y.useCallback(K=>{X(K)&&K.preventDefault()},[X]),onItemLeave:y.useCallback(K=>{var k;X(K)||((k=L.current)==null||k.focus(),R(null))},[X]),onTriggerLeave:y.useCallback(K=>{X(K)&&K.preventDefault()},[X]),pointerGraceTimerRef:u0,onPointerGraceIntentChange:y.useCallback(K=>{l0.current=K},[]),children:C.jsx(A0,{...O,children:C.jsx(Fi,{asChild:!0,trapped:s,onMountAutoFocus:h0(c,K=>{var k;K.preventDefault(),(k=L.current)==null||k.focus({preventScroll:!0})}),onUnmountAutoFocus:A,children:C.jsx(ca,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:D,children:C.jsx(Ey,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:l,currentTabStopId:T,onCurrentTabStopIdChange:R,onEntryFocus:h0(p,K=>{b.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(wy,{role:"menu","aria-orientation":"vertical","data-state":Jy(B.open),"data-radix-menu-content":"",dir:b.dir,...E,...w,ref:I,style:{outline:"none",...w.style},onKeyDown:h0(w.onKeyDown,K=>{const Q=K.target.closest("[data-radix-menu-content]")===K.currentTarget,J=K.ctrlKey||K.altKey||K.metaKey,n0=K.key.length===1;Q&&(K.key==="Tab"&&K.preventDefault(),!J&&n0&&G(K.key));const f0=L.current;if(K.target!==f0||!yS.includes(K.key))return;K.preventDefault();const m0=_().filter($0=>!$0.disabled).map($0=>$0.ref.current);_y.includes(K.key)&&m0.reverse(),zS(m0)}),onBlur:h0(t.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(V.current),r0.current="")}),onPointerMove:h0(t.onPointerMove,aa(K=>{const k=K.target,Q=q.current!==K.clientX;if(K.currentTarget.contains(k)&&Q){const J=K.clientX>q.current?"right":"left";i0.current=J,q.current=K.clientX}}))})})})})})})});Oy.displayName=xe;var kS="MenuGroup",uf=y.forwardRef((t,r)=>{const{__scopeMenu:a,...l}=t;return C.jsx(R0.div,{role:"group",...l,ref:r})});uf.displayName=kS;var TS="MenuLabel",jy=y.forwardRef((t,r)=>{const{__scopeMenu:a,...l}=t;return C.jsx(R0.div,{...l,ref:r})});jy.displayName=TS;var mi="MenuItem",gm="menu.itemSelect",Ui=y.forwardRef((t,r)=>{const{disabled:a=!1,onSelect:l,...s}=t,c=y.useRef(null),A=pa(mi,t.__scopeMenu),f=sf(mi,t.__scopeMenu),p=o2(r,c),h=y.useRef(!1),g=()=>{const m=c.current;if(!a&&m){const v=new CustomEvent(gm,{bubbles:!0,cancelable:!0});m.addEventListener(gm,D=>l==null?void 0:l(D),{once:!0}),li(m,v),v.defaultPrevented?h.current=!1:A.onClose()}};return C.jsx(Uy,{...s,ref:p,disabled:a,onClick:h0(t.onClick,g),onPointerDown:m=>{var v;(v=t.onPointerDown)==null||v.call(t,m),h.current=!0},onPointerUp:h0(t.onPointerUp,m=>{var v;h.current||(v=m.currentTarget)==null||v.click()}),onKeyDown:h0(t.onKeyDown,m=>{const v=f.searchRef.current!=="";a||v&&m.key===" "||oA.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Ui.displayName=mi;var Uy=y.forwardRef((t,r)=>{const{__scopeMenu:a,disabled:l=!1,textValue:s,...c}=t,A=sf(mi,a),f=Ty(a),p=y.useRef(null),h=o2(r,p),[g,m]=y.useState(!1),[v,D]=y.useState("");return y.useEffect(()=>{const x=p.current;x&&D((x.textContent??"").trim())},[c.children]),C.jsx(oa.ItemSlot,{scope:a,disabled:l,textValue:s??v,children:C.jsx(Ry,{asChild:!0,...f,focusable:!l,children:C.jsx(R0.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":l||void 0,"data-disabled":l?"":void 0,...c,ref:h,onPointerMove:h0(t.onPointerMove,aa(x=>{l?A.onItemLeave(x):(A.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:h0(t.onPointerLeave,aa(x=>A.onItemLeave(x))),onFocus:h0(t.onFocus,()=>m(!0)),onBlur:h0(t.onBlur,()=>m(!1))})})})}),MS="MenuCheckboxItem",Iy=y.forwardRef((t,r)=>{const{checked:a=!1,onCheckedChange:l,...s}=t;return C.jsx(Gy,{scope:t.__scopeMenu,checked:a,children:C.jsx(Ui,{role:"menuitemcheckbox","aria-checked":Ci(a)?"mixed":a,...s,ref:r,"data-state":ff(a),onSelect:h0(s.onSelect,()=>l==null?void 0:l(Ci(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Iy.displayName=MS;var zy="MenuRadioGroup",[PS,LS]=jn(zy,{value:void 0,onValueChange:()=>{}}),Hy=y.forwardRef((t,r)=>{const{value:a,onValueChange:l,...s}=t,c=O2(l);return C.jsx(PS,{scope:t.__scopeMenu,value:a,onValueChange:c,children:C.jsx(uf,{...s,ref:r})})});Hy.displayName=zy;var Vy="MenuRadioItem",Wy=y.forwardRef((t,r)=>{const{value:a,...l}=t,s=LS(Vy,t.__scopeMenu),c=a===s.value;return C.jsx(Gy,{scope:t.__scopeMenu,checked:c,children:C.jsx(Ui,{role:"menuitemradio","aria-checked":c,...l,ref:r,"data-state":ff(c),onSelect:h0(l.onSelect,()=>{var A;return(A=s.onValueChange)==null?void 0:A.call(s,a)},{checkForDefaultPrevented:!1})})})});Wy.displayName=Vy;var Af="MenuItemIndicator",[Gy,OS]=jn(Af,{checked:!1}),qy=y.forwardRef((t,r)=>{const{__scopeMenu:a,forceMount:l,...s}=t,c=OS(Af,a);return C.jsx(j2,{present:l||Ci(c.checked)||c.checked===!0,children:C.jsx(R0.span,{...s,ref:r,"data-state":ff(c.checked)})})});qy.displayName=Af;var jS="MenuSeparator",$y=y.forwardRef((t,r)=>{const{__scopeMenu:a,...l}=t;return C.jsx(R0.div,{role:"separator","aria-orientation":"horizontal",...l,ref:r})});$y.displayName=jS;var US="MenuArrow",Yy=y.forwardRef((t,r)=>{const{__scopeMenu:a,...l}=t,s=ji(a);return C.jsx(xy,{...s,...l,ref:r})});Yy.displayName=US;var IS="MenuSub",[q8,Ky]=jn(IS),Ko="MenuSubTrigger",Zy=y.forwardRef((t,r)=>{const a=Un(Ko,t.__scopeMenu),l=pa(Ko,t.__scopeMenu),s=Ky(Ko,t.__scopeMenu),c=sf(Ko,t.__scopeMenu),A=y.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:p}=c,h={__scopeMenu:t.__scopeMenu},g=y.useCallback(()=>{A.current&&window.clearTimeout(A.current),A.current=null},[]);return y.useEffect(()=>g,[g]),y.useEffect(()=>{const m=f.current;return()=>{window.clearTimeout(m),p(null)}},[f,p]),C.jsx(af,{asChild:!0,...h,children:C.jsx(Uy,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":s.contentId,"data-state":Jy(a.open),...t,ref:sa(r,s.onTriggerChange),onClick:m=>{var v;(v=t.onClick)==null||v.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:h0(t.onPointerMove,aa(m=>{c.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!a.open&&!A.current&&(c.onPointerGraceIntentChange(null),A.current=window.setTimeout(()=>{a.onOpenChange(!0),g()},100))})),onPointerLeave:h0(t.onPointerLeave,aa(m=>{var D,x;g();const v=(D=a.content)==null?void 0:D.getBoundingClientRect();if(v){const w=(x=a.content)==null?void 0:x.dataset.side,B=w==="right",b=B?-5:5,E=v[B?"left":"right"],N=v[B?"right":"left"];c.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:E,y:v.top},{x:N,y:v.top},{x:N,y:v.bottom},{x:E,y:v.bottom}],side:w}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(m),m.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:h0(t.onKeyDown,m=>{var D;const v=c.searchRef.current!=="";t.disabled||v&&m.key===" "||vS[l.dir].includes(m.key)&&(a.onOpenChange(!0),(D=a.content)==null||D.focus(),m.preventDefault())})})})});Zy.displayName=Ko;var Xy="MenuSubContent",Qy=y.forwardRef((t,r)=>{const a=Py(xe,t.__scopeMenu),{forceMount:l=a.forceMount,...s}=t,c=Un(xe,t.__scopeMenu),A=pa(xe,t.__scopeMenu),f=Ky(Xy,t.__scopeMenu),p=y.useRef(null),h=o2(r,p);return C.jsx(oa.Provider,{scope:t.__scopeMenu,children:C.jsx(j2,{present:l||c.open,children:C.jsx(oa.Slot,{scope:t.__scopeMenu,children:C.jsx(cf,{id:f.contentId,"aria-labelledby":f.triggerId,...s,ref:h,align:"start",side:A.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var m;A.isUsingKeyboardRef.current&&((m=p.current)==null||m.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:h0(t.onFocusOutside,g=>{g.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:h0(t.onEscapeKeyDown,g=>{A.onClose(),g.preventDefault()}),onKeyDown:h0(t.onKeyDown,g=>{var D;const m=g.currentTarget.contains(g.target),v=DS[A.dir].includes(g.key);m&&v&&(c.onOpenChange(!1),(D=f.trigger)==null||D.focus(),g.preventDefault())})})})})})});Qy.displayName=Xy;function Jy(t){return t?"open":"closed"}function Ci(t){return t==="indeterminate"}function ff(t){return Ci(t)?"indeterminate":t?"checked":"unchecked"}function zS(t){const r=document.activeElement;for(const a of t)if(a===r||(a.focus(),document.activeElement!==r))return}function HS(t,r){return t.map((a,l)=>t[(r+l)%t.length])}function VS(t,r,a){const s=r.length>1&&Array.from(r).every(h=>h===r[0])?r[0]:r,c=a?t.indexOf(a):-1;let A=HS(t,Math.max(c,0));s.length===1&&(A=A.filter(h=>h!==a));const p=A.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return p!==a?p:void 0}function WS(t,r){const{x:a,y:l}=t;let s=!1;for(let c=0,A=r.length-1;c<r.length;A=c++){const f=r[c],p=r[A],h=f.x,g=f.y,m=p.x,v=p.y;g>l!=v>l&&a<(m-h)*(l-g)/(v-g)+h&&(s=!s)}return s}function GS(t,r){if(!r)return!1;const a={x:t.clientX,y:t.clientY};return WS(a,r)}function aa(t){return r=>r.pointerType==="mouse"?t(r):void 0}var qS=My,$S=af,YS=Ly,KS=Oy,ZS=uf,XS=jy,QS=Ui,JS=Iy,eE=Hy,tE=Wy,nE=qy,rE=$y,oE=Yy,aE=Zy,lE=Qy,Ii="DropdownMenu",[iE,$8]=Le(Ii,[ky]),V2=ky(),[sE,ev]=iE(Ii),tv=t=>{const{__scopeDropdownMenu:r,children:a,dir:l,open:s,defaultOpen:c,onOpenChange:A,modal:f=!0}=t,p=V2(r),h=y.useRef(null),[g,m]=Qe({prop:s,defaultProp:c??!1,onChange:A,caller:Ii});return C.jsx(sE,{scope:r,triggerId:we(),triggerRef:h,contentId:we(),open:g,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(v=>!v),[m]),modal:f,children:C.jsx(qS,{...p,open:g,onOpenChange:m,dir:l,modal:f,children:a})})};tv.displayName=Ii;var nv="DropdownMenuTrigger",rv=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,disabled:l=!1,...s}=t,c=ev(nv,a),A=V2(a);return C.jsx($S,{asChild:!0,...A,children:C.jsx(R0.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":l?"":void 0,disabled:l,...s,ref:sa(r,c.triggerRef),onPointerDown:h0(t.onPointerDown,f=>{!l&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:h0(t.onKeyDown,f=>{l||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});rv.displayName=nv;var cE="DropdownMenuPortal",ov=t=>{const{__scopeDropdownMenu:r,...a}=t,l=V2(r);return C.jsx(YS,{...l,...a})};ov.displayName=cE;var av="DropdownMenuContent",lv=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=ev(av,a),c=V2(a),A=y.useRef(!1);return C.jsx(KS,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...l,ref:r,onCloseAutoFocus:h0(t.onCloseAutoFocus,f=>{var p;A.current||(p=s.triggerRef.current)==null||p.focus(),A.current=!1,f.preventDefault()}),onInteractOutside:h0(t.onInteractOutside,f=>{const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,g=p.button===2||h;(!s.modal||g)&&(A.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lv.displayName=av;var uE="DropdownMenuGroup",AE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(ZS,{...s,...l,ref:r})});AE.displayName=uE;var fE="DropdownMenuLabel",dE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(XS,{...s,...l,ref:r})});dE.displayName=fE;var hE="DropdownMenuItem",iv=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(QS,{...s,...l,ref:r})});iv.displayName=hE;var pE="DropdownMenuCheckboxItem",mE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(JS,{...s,...l,ref:r})});mE.displayName=pE;var CE="DropdownMenuRadioGroup",gE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(eE,{...s,...l,ref:r})});gE.displayName=CE;var yE="DropdownMenuRadioItem",vE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(tE,{...s,...l,ref:r})});vE.displayName=yE;var DE="DropdownMenuItemIndicator",wE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(nE,{...s,...l,ref:r})});wE.displayName=DE;var xE="DropdownMenuSeparator",FE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(rE,{...s,...l,ref:r})});FE.displayName=xE;var BE="DropdownMenuArrow",bE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(oE,{...s,...l,ref:r})});bE.displayName=BE;var NE="DropdownMenuSubTrigger",SE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(aE,{...s,...l,ref:r})});SE.displayName=NE;var EE="DropdownMenuSubContent",RE=y.forwardRef((t,r)=>{const{__scopeDropdownMenu:a,...l}=t,s=V2(a);return C.jsx(lE,{...s,...l,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});RE.displayName=EE;var _E=tv,kE=rv,TE=ov,ME=lv,PE=iv,zi="Popover",[sv,Y8]=Le(zi,[Li]),ma=Li(),[LE,rn]=sv(zi),cv=t=>{const{__scopePopover:r,children:a,open:l,defaultOpen:s,onOpenChange:c,modal:A=!1}=t,f=ma(r),p=y.useRef(null),[h,g]=y.useState(!1),[m,v]=Qe({prop:l,defaultProp:s??!1,onChange:c,caller:zi});return C.jsx(Dy,{...f,children:C.jsx(LE,{scope:r,contentId:we(),triggerRef:p,open:m,onOpenChange:v,onOpenToggle:y.useCallback(()=>v(D=>!D),[v]),hasCustomAnchor:h,onCustomAnchorAdd:y.useCallback(()=>g(!0),[]),onCustomAnchorRemove:y.useCallback(()=>g(!1),[]),modal:A,children:a})})};cv.displayName=zi;var uv="PopoverAnchor",OE=y.forwardRef((t,r)=>{const{__scopePopover:a,...l}=t,s=rn(uv,a),c=ma(a),{onCustomAnchorAdd:A,onCustomAnchorRemove:f}=s;return y.useEffect(()=>(A(),()=>f()),[A,f]),C.jsx(of,{...c,...l,ref:r})});OE.displayName=uv;var Av="PopoverTrigger",fv=y.forwardRef((t,r)=>{const{__scopePopover:a,...l}=t,s=rn(Av,a),c=ma(a),A=o2(r,s.triggerRef),f=C.jsx(R0.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Cv(s.open),...l,ref:A,onClick:h0(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?f:C.jsx(of,{asChild:!0,...c,children:f})});fv.displayName=Av;var df="PopoverPortal",[jE,UE]=sv(df,{forceMount:void 0}),dv=t=>{const{__scopePopover:r,forceMount:a,children:l,container:s}=t,c=rn(df,r);return C.jsx(jE,{scope:r,forceMount:a,children:C.jsx(j2,{present:a||c.open,children:C.jsx(Bi,{asChild:!0,container:s,children:l})})})};dv.displayName=df;var Lr="PopoverContent",hv=y.forwardRef((t,r)=>{const a=UE(Lr,t.__scopePopover),{forceMount:l=a.forceMount,...s}=t,c=rn(Lr,t.__scopePopover);return C.jsx(j2,{present:l||c.open,children:c.modal?C.jsx(zE,{...s,ref:r}):C.jsx(HE,{...s,ref:r})})});hv.displayName=Lr;var IE=Tr("PopoverContent.RemoveScroll"),zE=y.forwardRef((t,r)=>{const a=rn(Lr,t.__scopePopover),l=y.useRef(null),s=o2(r,l),c=y.useRef(!1);return y.useEffect(()=>{const A=l.current;if(A)return SA(A)},[]),C.jsx(Ni,{as:IE,allowPinchZoom:!0,children:C.jsx(pv,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h0(t.onCloseAutoFocus,A=>{var f;A.preventDefault(),c.current||(f=a.triggerRef.current)==null||f.focus()}),onPointerDownOutside:h0(t.onPointerDownOutside,A=>{const f=A.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,h=f.button===2||p;c.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:h0(t.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1})})})}),HE=y.forwardRef((t,r)=>{const a=rn(Lr,t.__scopePopover),l=y.useRef(!1),s=y.useRef(!1);return C.jsx(pv,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var A,f;(A=t.onCloseAutoFocus)==null||A.call(t,c),c.defaultPrevented||(l.current||(f=a.triggerRef.current)==null||f.focus(),c.preventDefault()),l.current=!1,s.current=!1},onInteractOutside:c=>{var p,h;(p=t.onInteractOutside)==null||p.call(t,c),c.defaultPrevented||(l.current=!0,c.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const A=c.target;((h=a.triggerRef.current)==null?void 0:h.contains(A))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.current&&c.preventDefault()}})}),pv=y.forwardRef((t,r)=>{const{__scopePopover:a,trapFocus:l,onOpenAutoFocus:s,onCloseAutoFocus:c,disableOutsidePointerEvents:A,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:h,onInteractOutside:g,...m}=t,v=rn(Lr,a),D=ma(a);return NA(),C.jsx(Fi,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:s,onUnmountAutoFocus:c,children:C.jsx(ca,{asChild:!0,disableOutsidePointerEvents:A,onInteractOutside:g,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:C.jsx(wy,{"data-state":Cv(v.open),role:"dialog",id:v.contentId,...D,...m,ref:r,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mv="PopoverClose",VE=y.forwardRef((t,r)=>{const{__scopePopover:a,...l}=t,s=rn(mv,a);return C.jsx(R0.button,{type:"button",...l,ref:r,onClick:h0(t.onClick,()=>s.onOpenChange(!1))})});VE.displayName=mv;var WE="PopoverArrow",GE=y.forwardRef((t,r)=>{const{__scopePopover:a,...l}=t,s=ma(a);return C.jsx(xy,{...s,...l,ref:r})});GE.displayName=WE;function Cv(t){return t?"open":"closed"}var qE=cv,$E=fv,YE=dv,KE=hv,Hi="Tabs",[ZE,K8]=Le(Hi,[Oi]),gv=Oi(),[XE,hf]=ZE(Hi),yv=y.forwardRef((t,r)=>{const{__scopeTabs:a,value:l,onValueChange:s,defaultValue:c,orientation:A="horizontal",dir:f,activationMode:p="automatic",...h}=t,g=ua(f),[m,v]=Qe({prop:l,onChange:s,defaultProp:c??"",caller:Hi});return C.jsx(XE,{scope:a,baseId:we(),value:m,onValueChange:v,orientation:A,dir:g,activationMode:p,children:C.jsx(R0.div,{dir:g,"data-orientation":A,...h,ref:r})})});yv.displayName=Hi;var vv="TabsList",Dv=y.forwardRef((t,r)=>{const{__scopeTabs:a,loop:l=!0,...s}=t,c=hf(vv,a),A=gv(a);return C.jsx(Ey,{asChild:!0,...A,orientation:c.orientation,dir:c.dir,loop:l,children:C.jsx(R0.div,{role:"tablist","aria-orientation":c.orientation,...s,ref:r})})});Dv.displayName=vv;var wv="TabsTrigger",xv=y.forwardRef((t,r)=>{const{__scopeTabs:a,value:l,disabled:s=!1,...c}=t,A=hf(wv,a),f=gv(a),p=bv(A.baseId,l),h=Nv(A.baseId,l),g=l===A.value;return C.jsx(Ry,{asChild:!0,...f,focusable:!s,active:g,children:C.jsx(R0.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":h,"data-state":g?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:p,...c,ref:r,onMouseDown:h0(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?A.onValueChange(l):m.preventDefault()}),onKeyDown:h0(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&A.onValueChange(l)}),onFocus:h0(t.onFocus,()=>{const m=A.activationMode!=="manual";!g&&!s&&m&&A.onValueChange(l)})})})});xv.displayName=wv;var Fv="TabsContent",Bv=y.forwardRef((t,r)=>{const{__scopeTabs:a,value:l,forceMount:s,children:c,...A}=t,f=hf(Fv,a),p=bv(f.baseId,l),h=Nv(f.baseId,l),g=l===f.value,m=y.useRef(g);return y.useEffect(()=>{const v=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(v)},[]),C.jsx(j2,{present:s||g,children:({present:v})=>C.jsx(R0.div,{"data-state":g?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":p,hidden:!v,id:h,tabIndex:0,...A,ref:r,style:{...t.style,animationDuration:m.current?"0s":void 0},children:v&&c})})});Bv.displayName=Fv;function bv(t,r){return`${t}-trigger-${r}`}function Nv(t,r){return`${t}-content-${r}`}var QE=yv,JE=Dv,eR=xv,tR=Bv,nR="vocs_AiCtaDropdown",ym="vocs_AiCtaDropdown_buttonLeft vocs_AiCtaDropdown_button vocs_Button_button",rR="vocs_AiCtaDropdown_buttonRight vocs_AiCtaDropdown_button vocs_Button_button",oR="vocs_AiCtaDropdown_dropdownMenuContent",aR="vocs_AiCtaDropdown_dropdownMenuItem",Bu="vocs_Button_button",Z8="vocs_Button_button_accent";function Sv(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Check"}),C.jsx("path",{d:"M7.49991 0.877045C3.84222 0.877045 0.877075 3.84219 0.877075 7.49988C0.877075 11.1575 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1576 0.877045 7.49991 0.877045ZM1.82708 7.49988C1.82708 4.36686 4.36689 1.82704 7.49991 1.82704C10.6329 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6329 13.1727 7.49991 13.1727C4.36689 13.1727 1.82708 10.6329 1.82708 7.49988ZM10.1589 5.53774C10.3178 5.31191 10.2636 5.00001 10.0378 4.84109C9.81194 4.68217 9.50004 4.73642 9.34112 4.96225L6.51977 8.97154L5.35681 7.78706C5.16334 7.59002 4.84677 7.58711 4.64973 7.78058C4.45268 7.97404 4.44978 8.29061 4.64325 8.48765L6.22658 10.1003C6.33054 10.2062 6.47617 10.2604 6.62407 10.2483C6.77197 10.2363 6.90686 10.1591 6.99226 10.0377L10.1589 5.53774Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function Ev(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Chevron Down"}),C.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function Rv(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Copy"}),C.jsx("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function lR(){return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",children:[C.jsx("title",{children:"OpenAI"}),C.jsx("path",{fill:"currentColor",d:"M22.282 9.821a6 6 0 0 0-.516-4.91a6.05 6.05 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a6 6 0 0 0-3.998 2.9a6.05 6.05 0 0 0 .743 7.097a5.98 5.98 0 0 0 .51 4.911a6.05 6.05 0 0 0 6.515 2.9A6 6 0 0 0 13.26 24a6.06 6.06 0 0 0 5.772-4.206a6 6 0 0 0 3.997-2.9a6.06 6.06 0 0 0-.747-7.073M13.26 22.43a4.48 4.48 0 0 1-2.876-1.04l.141-.081l4.779-2.758a.8.8 0 0 0 .392-.681v-6.737l2.02 1.168a.07.07 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494M3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085l4.783 2.759a.77.77 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646M2.34 7.896a4.5 4.5 0 0 1 2.366-1.973V11.6a.77.77 0 0 0 .388.677l5.815 3.354l-2.02 1.168a.08.08 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.08.08 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667m2.01-3.023l-.141-.085l-4.774-2.782a.78.78 0 0 0-.785 0L9.409 9.23V6.897a.07.07 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.8.8 0 0 0-.393.681zm1.097-2.365l2.602-1.5l2.607 1.5v2.999l-2.597 1.5l-2.607-1.5Z"})]})}function iR(){const{content:t}=tn(),{aiCta:r}=m2(),a=a2(),[l,s]=y.useState(!1);y.useEffect(()=>{if(!l)return;const f=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(f)},[l]);const c=y.useCallback(()=>{s(!0),navigator.clipboard.writeText(t??"")},[t]),A=y.useMemo(()=>{const f=window.location.origin+a.pathname;return typeof r=="object"?r.query({location:f}):`Please research and analyze this page: ${f} so I can ask you questions about it. Once you have read it, prompt me with any questions I have. Do not post content from the page in your response. Any of my follow up questions must reference the site I gave you.`},[r,a.pathname]);return C.jsxs("div",{className:nR,children:[l?C.jsxs("div",{className:s0(Bu,ym),children:[C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(Sv,{})}),"Copied"]}):C.jsxs(Fe,{className:s0(Bu,ym),href:`https://chatgpt.com?hints=search&q=${encodeURIComponent(A)}`,variant:"styleless",children:[C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(lR,{})}),"Ask in ChatGPT"]}),C.jsxs(_E,{children:[C.jsx(kE,{asChild:!0,children:C.jsx("button",{className:s0(Bu,rR),type:"button",children:C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(Ev,{})})})}),C.jsx(TE,{children:C.jsx(ME,{align:"end",className:oR,sideOffset:4,children:C.jsxs(PE,{className:aR,onClick:c,children:[C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(Rv,{})}),"Copy page for LLMs"]})})})]})]})}var sR="vocs_Outline",cR="vocs_Outline_nav",uR="vocs_Outline_heading",AR="vocs_Outline_items",fR="vocs_Outline_item",dR="vocs_Outline_link";function _v({minLevel:t=2,maxLevel:r=3,highlightActive:a=!0,onClickItem:l,showTitle:s=!0}={}){const{outlineFooter:c}=m2(),{showOutline:A,showAiCta:f}=nn(),p=typeof A=="number"?t+A-1:r,h=y.useRef(!0),{pathname:g,hash:m}=a2(),[v,D]=y.useState([]);y.useEffect(()=>{if(typeof window>"u")return;const E=Array.from(document.querySelectorAll(`.${gC}`));D(E)},[g]);const x=y.useMemo(()=>v?v.map(E=>{const N=E.querySelector(`.${yC}`);if(!N)return null;const _=N.getBoundingClientRect(),T=N.id,R=Number(E.tagName[1]),L=E.textContent,I=window.scrollY+_.top;return R<t||R>p?null:{id:T,level:R,slugTargetElement:N,text:L,topOffset:I}}).filter(Boolean):[],[v,p,t]),[w,B]=y.useState(m.replace("#",""));if(y.useEffect(()=>{if(typeof window>"u")return;const E=new IntersectionObserver(([N])=>{var T;if(!h.current)return;const _=N.target.id;if(N.isIntersecting)B(_);else{if(!(N.target.getBoundingClientRect().top>0))return;const I=x.findIndex(r0=>r0.id===w),V=(T=x[I-1])==null?void 0:T.id;B(V)}},{rootMargin:"0px 0px -95% 0px"});for(const N of x)E.observe(N.slugTargetElement);return()=>E.disconnect()},[w,x]),y.useEffect(()=>{if(typeof window>"u")return;const E=new IntersectionObserver(([N])=>{var T;if(!h.current)return;const _=(T=x[x.length-1])==null?void 0:T.id;N.isIntersecting?B(_):w===_&&B(x[x.length-2].id)});return E.observe(document.querySelector("[data-bottom-observer]")),()=>E.disconnect()},[w,x]),y.useEffect(()=>{if(typeof window>"u")return;const E=qb(()=>{var N,_,T;if(h.current){if(window.scrollY===0){B((N=x[0])==null?void 0:N.id);return}if(window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight){B((_=x[x.length-1])==null?void 0:_.id);return}for(let R=0;R<x.length;R++){const L=x[R];if(window.scrollY<L.topOffset){B((T=x[R-1])==null?void 0:T.id);break}}}},100);return window.addEventListener("scroll",E),()=>window.removeEventListener("scroll",E)},[x]),x.length===0)return null;const b=x.filter(E=>E.level===t);return C.jsxs("aside",{className:sR,children:[f&&C.jsx(iR,{}),C.jsxs("nav",{className:cR,children:[s&&C.jsx("h2",{className:uR,children:"On this page"}),C.jsx(kv,{activeId:a?w:null,items:x,onClickItem:()=>{l==null||l(),h.current=!1,setTimeout(()=>{h.current=!0},500)},levelItems:b,setActiveId:B})]}),_n(c)]})}function kv({activeId:t,items:r,levelItems:a,onClickItem:l,setActiveId:s}){return C.jsx("ul",{className:AR,children:a.map(({id:c,level:A,text:f})=>{const p=`#${c}`,h=t===c,g=(()=>{var w;const v=r.findIndex(B=>B.id===c)+1,D=(w=r[v])==null?void 0:w.level;if(D<=A)return null;const x=[];for(let B=v;B<r.length;B++){const b=r[B];if(b.level!==D)break;x.push(b)}return x})();return C.jsxs(y.Fragment,{children:[C.jsx("li",{className:fR,children:C.jsx(Ur,{"data-active":h,to:p,onClick:()=>{l==null||l(),s(c)},className:dR,children:f})}),g&&C.jsx(kv,{activeId:t,levelItems:g,items:r,onClickItem:l,setActiveId:s})]},c)})})}var hR="vocs_Popover";Me.Root=qE;Me.Trigger=$E;function Me({children:t,className:r}){return C.jsx(YE,{children:C.jsx(KE,{className:s0(hR,r),sideOffset:12,children:t})})}var pR="vocs_Sidebar",mR="vocs_Sidebar_backLink",CR="vocs_Sidebar_divider",gR="vocs_Sidebar_navigation",yR="vocs_Sidebar_group",vR="vocs_Sidebar_logo",DR="vocs_Sidebar_logoWrapper",Tv="vocs_Sidebar_section",wR="vocs_Sidebar_level",xR="vocs_Sidebar_levelCollapsed",FR="vocs_Sidebar_levelInset",BR="vocs_Sidebar_footer",bR="vocs_Sidebar_footerContent",NR="vocs_Sidebar_footerCurtain",Mv="vocs_Sidebar_items",Zo="vocs_Sidebar_item",ql="vocs_Sidebar_disabledItem",SR="vocs_Sidebar_sectionHeader",ER="vocs_Sidebar_sectionHeaderActive",vm="vocs_Sidebar_sectionTitle",RR="vocs_Sidebar_sectionTitleLink",_R="vocs_Sidebar_sectionCollapse",kR="vocs_Sidebar_sectionCollapseActive";function TR(){const[t,r]=y.useState(()=>{if(!(typeof window>"u")){if(localStorage.getItem("vocs.theme")){const a=localStorage.getItem("vocs.theme");if(a)return a}return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}});return y.useEffect(()=>{t&&localStorage.setItem("vocs.theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),{setTheme:r,theme:t,toggle(){r(a=>a==="light"?"dark":"light")}}}var MR="vocs_ThemeToggle",Dm="vocs_ThemeToggle_themeToggleButton";function PR(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Moon"}),C.jsx("path",{d:"M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89997 1.49998 8.89997C1.72089 8.89997 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.98184L8.24618 0.941586C8.03275 0.917676 7.90692 1.1655 8.02936 1.34194C8.17013 1.54479 8.29981 1.75592 8.41754 1.97445C8.91878 2.90485 9.20322 3.96932 9.20322 5.10022C9.20322 8.37201 6.82247 11.0878 3.69887 11.6097C3.45736 11.65 3.20988 11.6772 2.96008 11.6906C2.74563 11.702 2.62729 11.9535 2.77721 12.1072C2.84551 12.1773 2.91535 12.2458 2.98667 12.3128L3.05883 12.3795L3.31883 12.6045L3.50684 12.7532L3.62796 12.8433L3.81491 12.9742L3.99079 13.089C4.11175 13.1651 4.23536 13.2375 4.36157 13.3059L4.62496 13.4412L4.88553 13.5607L5.18837 13.6828L5.43169 13.7686C5.56564 13.8128 5.70149 13.8529 5.83857 13.8885C5.94262 13.9155 6.04767 13.9401 6.15405 13.9622C6.27993 13.9883 6.40713 14.0109 6.53544 14.0298L6.85241 14.0685L7.11934 14.0892C7.24637 14.0965 7.37436 14.1002 7.50322 14.1002C11.1483 14.1002 14.1032 11.1453 14.1032 7.50023C14.1032 7.25044 14.0893 7.00389 14.0623 6.76131L14.0255 6.48407C13.991 6.26083 13.9453 6.04129 13.8891 5.82642C13.8213 5.56709 13.7382 5.31398 13.6409 5.06881L13.5279 4.80132L13.4507 4.63542L13.3766 4.48666C13.2178 4.17773 13.0353 3.88295 12.8312 3.60423L12.6782 3.40352L12.4793 3.16432L12.3157 2.98361L12.1961 2.85951L12.0355 2.70246L11.8134 2.50184L11.4925 2.24191L11.2483 2.06498L10.9562 1.87446L10.6346 1.68894L10.3073 1.52378L10.1938 1.47176L9.95488 1.3706L9.67791 1.2669L9.42566 1.1846L9.10075 1.09489L8.83599 1.03486L8.54406 0.98184ZM10.4032 5.30023C10.4032 4.27588 10.2002 3.29829 9.83244 2.40604C11.7623 3.28995 13.1032 5.23862 13.1032 7.50023C13.1032 10.593 10.596 13.1002 7.50322 13.1002C6.63646 13.1002 5.81597 12.9036 5.08355 12.5522C6.5419 12.0941 7.81081 11.2082 8.74322 10.0416C8.87963 10.2284 9.10028 10.3497 9.34928 10.3497C9.76349 10.3497 10.0993 10.0139 10.0993 9.59971C10.0993 9.24256 9.84965 8.94373 9.51535 8.86816C9.57741 8.75165 9.63653 8.63334 9.6926 8.51332C9.88358 8.63163 10.1088 8.69993 10.35 8.69993C11.0403 8.69993 11.6 8.14028 11.6 7.44993C11.6 6.75976 11.0406 6.20024 10.3505 6.19993C10.3853 5.90487 10.4032 5.60464 10.4032 5.30023Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function LR(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",children:[C.jsx("title",{children:"Sun"}),C.jsx("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function Pv(){const{theme:t,setTheme:r}=TR();return!zA()||!t?null:C.jsxs("div",{className:MR,children:[C.jsx("button",{"data-active":t==="light",type:"button",className:Dm,onClick:()=>r("light"),children:C.jsx(H2,{label:"Light Mode",icon:LR,size:"16px"})}),C.jsx("button",{"data-active":t==="dark",type:"button",className:Dm,onClick:()=>r("dark"),children:C.jsx(H2,{label:"Dark Mode",icon:PR,size:"16px"})})]})}function Lv(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Chevron Right"}),C.jsx("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function Ov(t){var g;const{className:r,onClickItem:a}=t,{theme:l}=m2(),{previousPath:s}=tn(),c=y.useRef(null),A=xi(),[f,p]=y.useState("/");if(y.useEffect(()=>{typeof window>"u"||s&&p(s)},[A.key,A.backLink]),!A)return null;const h=OR(A.items);return C.jsxs("aside",{ref:c,className:s0(pR,r),children:[C.jsxs("div",{children:[C.jsxs("div",{className:DR,children:[C.jsx("div",{className:vR,children:C.jsx(kr,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:C.jsx(MA,{})})}),C.jsx("div",{className:CR})]}),C.jsx("nav",{className:gR,children:C.jsxs("div",{className:yR,children:[A.backLink&&C.jsx("section",{className:Tv,children:C.jsx("div",{className:Mv,children:C.jsxs(kr,{className:s0(Zo,mR),to:f,children:[""," ",typeof history<"u"&&((g=history.state)!=null&&g.key)&&f!=="/"?"Back":"Home"]})})}),h.map((m,v)=>C.jsx(Uv,{depth:0,item:m,onClick:a,sidebarRef:c},`${m.text}${v}`))]})})]}),C.jsxs("div",{className:BR,children:[C.jsx("div",{className:NR}),C.jsxs("div",{className:bR,children:[C.jsx(HA,{}),l!=null&&l.colorScheme?null:C.jsx(Pv,{})]})]})]},A.key)}function OR(t){const r=[];let a=0;for(const l of t){if(l.items){a=r.push(l);continue}r[a]?r[a].items.push(l):r.push({text:"",items:[l]})}return r}function jv(t,r){return t.find(a=>Rn(r,a.link??"")||a.link===r?!0:a.items?jv(a.items,r):!1)}function Uv(t){const{depth:r,item:a,onClick:l,sidebarRef:s}=t,c=y.useRef(null),{pathname:A}=a2(),f=w1(a.link||""),p=y.useMemo(()=>a.items?!!jv(a.items,A):!1,[a.items,A]),[h,g]=y.useState(()=>a.link&&f||!a.items||p?!1:!!a.collapsed),m=a.collapsed!==void 0&&a.items!==void 0,v=y.useCallback(w=>{"key"in w&&w.key!=="Enter"||g(B=>!B)},[]),D=y.useCallback(w=>{"key"in w&&w.key!=="Enter"||g(B=>!B)},[]),x=y.useRef(!0);return y.useEffect(()=>{!x.current||(x.current=!1,!Rn(A,a.link??""))||requestAnimationFrame(()=>{var E,N,_;const B=((E=c.current)==null?void 0:E.offsetTop)??0,b=((N=s==null?void 0:s.current)==null?void 0:N.clientHeight)??0;B<b||(_=s==null?void 0:s.current)==null||_.scrollTo({top:B-100})})},[a,A,s]),a.items?C.jsxs("section",{ref:c,className:s0(Tv,r===0&&a.text&&wR,r===0&&a.text&&h&&xR),children:[a.text&&C.jsxs("div",{className:SR,...m&&!a.link?{role:"button",tabIndex:0,onClick:v,onKeyDown:v}:{},children:[a.text&&(a.link?C.jsx(Fe,{"data-active":!!f,onClick:w=>{l==null||l(w),v(w)},className:s0(r===0?[vm,RR]:Zo,p&&ER,a.disabled&&ql),href:a.link,variant:"styleless",children:a.text}):C.jsx("div",{className:s0(r===0?vm:Zo,a.disabled&&ql),children:a.text})),m&&C.jsx("div",{role:"button",tabIndex:0,onClick:D,onKeyDown:D,children:C.jsx(H2,{className:s0(_R,h&&kR),label:"toggle section",icon:Lv,size:"16px"})})]}),!h&&C.jsx("div",{className:s0(Mv,r!==0&&FR),children:a.items&&a.items.length>0&&r<5&&a.items.map((w,B)=>C.jsx(Uv,{depth:r+1,item:w,onClick:l,sidebarRef:s},`${w.text}${B}`))})]}):C.jsx(C.Fragment,{children:a.link?C.jsx(Fe,{ref:c,"data-active":!!f,onClick:l,className:s0(Zo,a.disabled&&ql),href:a.link,variant:"styleless",children:a.text}):C.jsx("div",{className:s0(Zo,a.disabled&&ql),children:a.text})})}function jR(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Chevron Up"}),C.jsx("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function Iv(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 48",fill:"none",children:[C.jsx("title",{children:"Menu"}),C.jsx("path",{fill:"currentColor",d:"M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"})]})}aA.Curtain=HR;function aA(){const t=m2(),{showLogo:r}=nn();return C.jsxs("div",{className:Rb,children:[C.jsxs("div",{className:sm,children:[r&&C.jsx("div",{className:Du,children:C.jsx("div",{className:Mb,children:C.jsx(kr,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:C.jsx(MA,{})})})}),t.topNav&&C.jsxs("div",{className:Du,children:[C.jsx(UR,{items:t.topNav}),C.jsx(zR,{items:t.topNav})]})]}),C.jsx("div",{className:sm,children:C.jsx("div",{className:Du,style:{marginRight:"-8px"},children:C.jsx(Eb,{})})})]})}function UR({items:t}){const{pathname:r}=a2(),a=ia({pathname:r,items:t});return C.jsx(Ng,{className:Kg,children:C.jsxs(Sg,{children:[t.map((l,s)=>l.element?_n(l.element):l.link?C.jsx(Ei,{active:a==null?void 0:a.includes(l.id),href:l.link,children:l.text},s):C.jsxs(Eg,{className:Tb,children:[C.jsx(Rg,{active:a==null?void 0:a.includes(l.id),children:l.text}),C.jsx(_g,{className:_b,children:C.jsx(IR,{items:l.items||[]})})]},s)),C.jsx(bA,{})]})})}function IR({items:t}){const{pathname:r}=a2(),a=ia({pathname:r,items:t});return C.jsx("ul",{children:t==null?void 0:t.map((l,s)=>C.jsx(Ei,{active:a.includes(l.id),href:l.link,children:l.text},s))})}function zR({items:t}){const[r,a]=y.useState(!1),{showSidebar:l}=nn(),{pathname:s}=a2(),c=ia({pathname:s,items:t}),A=t.filter(g=>g.id===c[0])[0],{basePath:f,theme:p}=m2(),h=f;return C.jsx("div",{className:s0(Kg,Lb),children:C.jsxs(Me.Root,{modal:!0,open:r,onOpenChange:a,children:[C.jsx(Me.Trigger,{className:s0(Yg,Wl),children:l||A?C.jsxs(C.Fragment,{children:[(A==null?void 0:A.text)??"Menu",C.jsx(H2,{label:"Menu",icon:Ev,size:"16px"})]}):C.jsx(H2,{label:"Menu",icon:Iv,size:"16px"})}),C.jsxs(Me,{className:Wb,children:[C.jsxs(Fb,{type:"single",collapsible:!0,style:{display:"flex",flexDirection:"column"},children:[t.map((g,m)=>{var v;return g.element?_n(g.element):g.link?C.jsx(Fe,{"data-active":c.includes(g.id),className:Wl,href:g.link,onClick:()=>a(!1),variant:"styleless",children:g.text},m):C.jsxs(Bb,{value:m.toString(),children:[C.jsx(bb,{className:s0(Wl,Ib),"data-active":c.includes(g.id),style:Pe({[jb]:`url(${h}/.vocs/icons/chevron-down.svg)`,[Ub]:`url(${h}/.vocs/icons/chevron-up.svg)`}),children:g.text}),C.jsx(Nb,{className:Ob,children:(v=g.items)==null?void 0:v.map((D,x)=>C.jsx(Fe,{className:Wl,href:D.link,onClick:()=>a(!1),variant:"styleless",children:D.text},x))})]},m)}),C.jsx(bA,{})]}),C.jsxs("div",{className:Gb,children:[C.jsx(HA,{}),p!=null&&p.colorScheme?null:C.jsx(Pv,{})]})]})]})})}function HR({enableScrollToTop:t}){const{pathname:r}=a2(),{layout:a,showSidebar:l}=nn(),{frontmatter:s={}}=tn(),c=xi(),[A,f]=y.useState(!1),[p,h]=y.useState(!1),g=y.useMemo(()=>{if(!c||a==="minimal")return;const D=zv({sidebarItems:c.items,pathname:r});return D==null?void 0:D.text},[a,r,c]),m=y.useMemo(()=>{var D;if(!(typeof window>"u"))return(D=document.querySelector(".vocs_Content h1"))==null?void 0:D.textContent},[]),v=g||s.title||m;return C.jsxs("div",{className:kb,children:[C.jsx("div",{className:lm,children:C.jsx("div",{className:vu,children:l?C.jsxs(Me.Root,{modal:!0,open:p,onOpenChange:h,children:[C.jsxs(Me.Trigger,{className:Yg,children:[C.jsx(H2,{label:"Menu",icon:Iv,size:"13px"}),C.jsx("div",{className:Pb,children:v})]}),C.jsx(Me,{className:Vb,children:C.jsx(Ov,{onClickItem:()=>h(!1)})})]}):v})}),C.jsxs("div",{className:lm,children:[t&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:vu,children:C.jsxs("button",{className:im,onClick:()=>window.scrollTo({behavior:"smooth",top:0}),type:"button",children:["Top",C.jsx(H2,{label:"Scroll to top",icon:jR,size:"16px"})]})}),C.jsx("div",{className:Hb})]}),a==="docs"&&C.jsx("div",{className:vu,children:C.jsxs(Me.Root,{modal:!0,open:A,onOpenChange:f,children:[C.jsxs(Me.Trigger,{className:im,children:["On this page",C.jsx(H2,{label:"On this page",icon:Lv,size:"16px"})]}),C.jsx(Me,{className:zb,children:C.jsx(_v,{onClickItem:()=>f(!1),showTitle:!1})})]})})]})]})}function zv({sidebarItems:t,pathname:r}){const a=r.replace(/(.+)\/$/,"$1");for(const l of t){if((l==null?void 0:l.link)===a)return l;if(l.items){const s=zv({sidebarItems:l.items,pathname:a});if(s)return s}}}var VR="vocs_SkipLink";const Hv="vocs-content";function WR(){const{pathname:t}=a2();return C.jsx("a",{className:s0(VR,ig),href:`${t}#${Hv}`,children:"Skip to content"})}var GR="vocs_DocsLayout",qR="vocs_DocsLayout_content",$R="vocs_DocsLayout_content_withTopNav",YR="vocs_DocsLayout_content_withSidebar",KR="vocs_DocsLayout_gutterLeft",ZR="vocs_DocsLayout_gutterTop",XR="vocs_DocsLayout_gutterTop_offsetLeftGutter",QR="vocs_DocsLayout_gutterTop_sticky",JR="vocs_DocsLayout_gutterTopCurtain",e4="vocs_DocsLayout_gutterTopCurtain_hidden",t4="vocs_DocsLayout_gutterTopCurtain_withSidebar",n4="vocs_DocsLayout_gutterRight",r4="vocs_DocsLayout_gutterRight_withSidebar",o4="vocs_DocsLayout_sidebar";function lA({children:t}){var D,x;const{banner:r,font:a}=m2(),{frontmatter:l={}}=tn(),{content:s}=l,{layout:c,showOutline:A,showSidebar:f,showTopNav:p}=nn(),{ref:h,inView:g}=CC({initialInView:!0,rootMargin:"100px 0px 0px 0px"}),[m,v]=lg("banner",!0);return C.jsxs("div",{className:GR,"data-layout":c,style:Pe({[Gw]:m?r==null?void 0:r.height:void 0,[bp.default]:(D=a==null?void 0:a.default)!=null&&D.google?`${a.default.google}, ${Bp.default}`:void 0,[bp.mono]:(x=a==null?void 0:a.mono)!=null&&x.google?`${a.mono.google}, ${Bp.mono}`:void 0}),children:[C.jsx(WR,{}),m&&C.jsx(dx,{hide:()=>v(!1)}),f&&C.jsx("div",{className:KR,children:C.jsx(Ov,{className:o4})}),p&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{ref:h,className:s0(ZR,f&&XR,(c==="minimal"||c==="landing")&&QR),children:[C.jsx(Xu,{}),C.jsx(aA,{})]}),C.jsxs("div",{className:s0(JR,f&&t4,(c==="minimal"||c==="landing")&&e4),children:[C.jsx(Xu.Curtain,{}),C.jsx(aA.Curtain,{enableScrollToTop:!g})]})]}),A&&C.jsx("div",{className:s0(n4,f&&r4),children:C.jsx(_v,{})}),C.jsxs("div",{id:Hv,className:s0(qR,f&&YR,p&&$R),style:Pe({[ou.horizontalPadding]:s==null?void 0:s.horizontalPadding,[ou.width]:s==null?void 0:s.width,[ou.verticalPadding]:s==null?void 0:s.verticalPadding}),children:[C.jsx(wC,{children:t}),C.jsx(ab,{})]}),C.jsx("div",{"data-bottom-observer":!0})]})}const iA={},Vv=r2.createContext(iA);function a4(t){const r=r2.useContext(Vv);return r2.useMemo(function(){return typeof t=="function"?t(r):{...r,...t}},[r,t])}function l4(t){let r;return t.disableParentContext?r=typeof t.components=="function"?t.components(iA):t.components||iA:r=a4(t.components),r2.createElement(Vv.Provider,{value:r},t.children)}var bu="vocs_Anchor",i4="vocs_Autolink";function s4(t){return t.href?C.jsx(Ur,{...t,className:s0(t.className,i4),to:t.href}):null}function c4(t){const{children:r,href:a}=t,{pathname:l}=a2();return r&&typeof r=="object"&&"props"in r&&r.props["data-autolink-icon"]?C.jsx(s4,{className:s0(t.className,bu),...t}):a!=null&&a.match(/^#/)?C.jsx("a",{className:s0(t.className,bu),...t,href:`${l}${a}`}):C.jsx(Fe,{className:s0(t.className,bu),...t,hideExternalIcon:!0})}var Wv="vocs_Callout",Gv="vocs_Callout_content",qv="vocs_Callout_icon",u4="vocs_Callout_note",A4="vocs_Callout_info",f4="vocs_Callout_warning",d4="vocs_Callout_danger",h4="vocs_Callout_tip",p4="vocs_Callout_success";const m4=Object.freeze(Object.defineProperty({__proto__:null,content:Gv,danger:d4,icon:qv,info:A4,note:u4,root:Wv,success:p4,tip:h4,warning:f4},Symbol.toStringTag,{value:"Module"}));function wm(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Exclamation"}),C.jsx("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function xm(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Info"}),C.jsx("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function C4(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Lightning Bolt"}),C.jsx("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function g4({className:t,children:r,type:a}){return C.jsxs("aside",{className:s0(t,Wv,m4[a]),children:[C.jsxs("div",{className:qv,children:[a==="note"&&C.jsx(xm,{}),a==="info"&&C.jsx(xm,{}),a==="warning"&&C.jsx(wm,{}),a==="danger"&&C.jsx(wm,{}),a==="tip"&&C.jsx(C4,{}),a==="success"&&C.jsx(Sv,{})]}),C.jsx("div",{className:Gv,children:r})]})}var y4="vocs_Aside";function v4(t){const r=s0(t.className,y4);return"data-callout"in t?C.jsx(g4,{className:r,type:t["data-callout"],children:t.children}):C.jsx("aside",{...t,className:r})}var D4="vocs_Blockquote";function w4(t){return C.jsx("blockquote",{...t,className:s0(t.className,D4)})}var x4="vocs_Code";function F4(t){const r=B4(t.children);return C.jsx("code",{...t,className:s0(t.className,x4),children:r})}function B4(t){return Array.isArray(t)?t.map((r,a)=>{var l,s,c;return r.props&&"data-line"in r.props&&typeof r.props.children=="string"&&r.props.children.trim()===""&&((c=(s=(l=t[a+1])==null?void 0:l.props)==null?void 0:s.className)!=null&&c.includes("twoslash-tag-line"))?null:r}).filter(Boolean):t}var b4="vocs_Details";function N4(t){return C.jsx("details",{...t,className:s0(t.className,b4)})}var S4="vocs_Authors",E4="vocs_Authors_authors",R4="vocs_Authors_link",Fm="vocs_Authors_separator";function $v(t){const{frontmatter:r}=tn(),{authors:a=r==null?void 0:r.authors,date:l=r==null?void 0:r.date}=t,s=y.useMemo(()=>{if(a)return Array.isArray(a)?a:a.split(",").map(A=>A.trim())},[a]),c=y.useMemo(()=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,[l]);return C.jsxs("div",{className:S4,children:[c,s&&(c?" by ":"By "),C.jsx("span",{className:E4,children:s==null?void 0:s.map((A,f)=>{const{text:p,url:h}=_4(A);return C.jsxs(y.Fragment,{children:[h?C.jsx("a",{className:R4,href:h,target:"_blank",rel:"noopener noreferrer",children:p}):p,f<s.length-2&&C.jsx("span",{className:Fm,children:", "}),f<s.length-1&&C.jsx("span",{className:Fm,children:" & "})]},f)})})]})}function _4(t){const r=t.match(/\[(.+)\]\((.+)\)/);return r?{text:r[1],url:r[2]}:{text:t,url:void 0}}const Bm=[];var k4="vocs_BlogPosts",T4="vocs_BlogPosts_description",M4="vocs_BlogPosts_divider",P4="vocs_BlogPosts_post",L4="vocs_BlogPosts_readMore",O4="vocs_BlogPosts_title";function j4(){return C.jsx("div",{className:k4,children:Bm.map((t,r)=>C.jsxs(y.Fragment,{children:[C.jsx("div",{className:P4,children:C.jsxs(kr,{to:t.path,children:[C.jsx("h2",{className:O4,children:t.title}),C.jsx($v,{authors:t.authors,date:t.date}),C.jsxs("p",{className:T4,children:[t.description," ",C.jsx("span",{className:L4,children:"[]"})]})]})}),r<Bm.length-1&&C.jsx("hr",{className:M4})]},r))})}var U4="var(--vocs_Sponsors_columns)",I4="var(--vocs_Sponsors_height)",z4="vocs_Sponsors",H4="vocs_Sponsors_title",V4="vocs_Sponsors_row",W4="vocs_Sponsors_column",G4="vocs_Sponsors_sponsor",q4="vocs_Sponsors_image";function $4(){const{sponsors:t}=m2();return C.jsx("div",{className:z4,children:t==null?void 0:t.map((r,a)=>C.jsxs(y.Fragment,{children:[C.jsx("div",{className:H4,children:r.name}),r.items.map((l,s)=>{var c;return C.jsx("div",{className:V4,style:Pe({[U4]:l.length.toString(),[I4]:`${((c=r.height)==null?void 0:c.toString())??"40"}px`}),children:l.map((A,f)=>C.jsx(Fe,{className:s0(W4,A?G4:void 0),href:A==null?void 0:A.link,hideExternalIcon:!0,variant:"styleless",children:(A==null?void 0:A.image)&&C.jsx("img",{className:q4,src:A==null?void 0:A.image,alt:A==null?void 0:A.name})},f))},s)})]},a))})}var Y4="var(--vocs_AutolinkIcon_iconUrl)",K4="vocs_AutolinkIcon";function Z4(t){const{basePath:r}=m2(),a=r;return C.jsx("div",{...t,className:s0(t.className,K4),style:Pe({[Y4]:`url(${a}/.vocs/icons/link.svg)`})})}var X4="vocs_Tabs",Q4="vocs_Tabs_list",J4="vocs_Tabs_trigger",e9="vocs_Tabs_content";function t9(t){return C.jsx(QE,{...t,className:s0(t.className,X4)})}function n9(t){return C.jsx(JE,{...t,className:s0(t.className,Q4)})}function r9(t){return C.jsx(eR,{...t,className:s0(t.className,J4)})}function o9(t){return C.jsx(tR,{...t,className:s0(t.className,e9)})}var a9="vocs_CodeGroup";function l9({children:t}){if(!Array.isArray(t))return null;const r=t.map(a=>{const l=a.props["data-title"]?a:a.props.children,{props:s}=l,c=s["data-title"],A=s.children;return{title:c,content:A}});return C.jsxs(t9,{className:a9,defaultValue:r[0].title,children:[C.jsx(n9,{"aria-label":"Code group",children:r.map(({title:a},l)=>C.jsx(r9,{value:a||l.toString(),children:a},a||l.toString()))}),r.map(({title:a,content:l},s)=>{var A,f,p,h;const c=(h=(p=(f=(A=l.props)==null?void 0:A.children)==null?void 0:f.props)==null?void 0:p.className)==null?void 0:h.includes("shiki");return C.jsx(o9,{"data-shiki":c,value:a||s.toString(),children:l},a||s.toString())})]})}var i9="vocs_Div",s9="vocs_Step",Yv="vocs_Step_title",c9="vocs_Step_content",u9="vocs_H2";function Kv(t){return C.jsx(Ir,{...t,className:s0(t.className,u9),level:2})}var A9="vocs_H3";function Zv(t){return C.jsx(Ir,{...t,className:s0(t.className,A9),level:3})}var f9="vocs_H4";function Xv(t){return C.jsx(Ir,{...t,className:s0(t.className,f9),level:4})}var d9="vocs_H5";function Qv(t){return C.jsx(Ir,{...t,className:s0(t.className,d9),level:5})}var h9="vocs_H6";function Jv(t){return C.jsx(Ir,{...t,className:s0(t.className,h9),level:6})}function p9({children:t,className:r,title:a,titleLevel:l=2}){const s=(()=>{if(l===2)return Kv;if(l===3)return Zv;if(l===4)return Xv;if(l===5)return Qv;if(l===6)return Jv;throw new Error("Invalid.")})();return C.jsxs("div",{className:s0(r,s9),children:[typeof a=="string"?C.jsx(s,{className:Yv,children:a}):a,C.jsx("div",{className:c9,children:t})]})}var m9="vocs_Steps";function C9({children:t,className:r}){return C.jsx("div",{className:s0(r,m9),children:t})}function g9({children:t}){return Array.isArray(t)?C.jsx(C9,{children:t.map(({props:r},a)=>{const[l,...s]=Array.isArray(r.children)?r.children:[r.children];return C.jsx(p9,{title:y.cloneElement(l,{className:Yv}),children:s},a)})}):null}var y9="vocs_Subtitle";function v9({children:t}){return C.jsx("div",{className:y9,children:t})}function D9(t){const{layout:r}=nn(),a=s0(t.className,i9);return t.className==="code-group"?C.jsx(l9,{...t,className:a}):"data-authors"in t?C.jsx($v,{}):"data-blog-posts"in t?C.jsx(j4,{}):"data-sponsors"in t?C.jsx($4,{}):"data-autolink-icon"in t&&r==="docs"?C.jsx(Z4,{...t,className:a}):"data-vocs-steps"in t?C.jsx(g9,{...t,className:a}):t.role==="doc-subtitle"?C.jsx(v9,{...t}):C.jsx("div",{...t,className:a})}var w9="vocs_Figcaption";function x9(t){const r=s0(t.className,w9);return C.jsx("figcaption",{...t,className:r})}var F9="vocs_Figure";function B9(t){const r=s0(t.className,F9);return C.jsx("figure",{...t,className:r})}var b9="vocs_Header";function N9(t){return C.jsx("header",{...t,className:s0(t.className,b9)})}var S9="vocs_HorizontalRule";function E9(t){return C.jsx("hr",{...t,className:s0(t.className,S9)})}var R9="vocs_List",_9="vocs_List_ordered",k9="vocs_List_unordered";function bm({ordered:t,...r}){const a=t?"ol":"ul";return C.jsx(a,{...r,className:s0(r.className,R9,t?_9:k9)})}var T9="vocs_ListItem";function M9(t){return C.jsx("li",{...t,className:s0(t.className,T9)})}function P9(){const t=y.useRef(null),[r,a]=y.useState(!1);y.useEffect(()=>{if(!r)return;const s=setTimeout(()=>a(!1),1e3);return()=>clearTimeout(s)},[r]);function l(){var A;a(!0);const s=(A=t.current)==null?void 0:A.cloneNode(!0),c=s==null?void 0:s.querySelectorAll("button,.line.diff.remove,.twoslash-popup-info-hover,.twoslash-popup-info,.twoslash-meta-line,.twoslash-tag-line");for(const f of c??[])f.remove();navigator.clipboard.writeText(s==null?void 0:s.textContent)}return{copied:r,copy:l,ref:t}}var L9="vocs_CopyButton",O9="vocs_CopyButton_copied";function j9(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 68 67",children:[C.jsx("title",{children:"Checkmark"}),C.jsx("path",{fill:"currentColor",d:"M26.175 66.121c1.904 0 3.418-.83 4.492-2.49L66.263 7.332c.83-1.27 1.123-2.295 1.123-3.32 0-2.393-1.563-4.004-4.004-4.004-1.758 0-2.734.586-3.809 2.295L25.98 56.209 8.304 32.381c-1.123-1.514-2.198-2.149-3.809-2.149-2.441 0-4.2 1.71-4.2 4.15 0 1.026.44 2.15 1.27 3.224l19.971 25.927c1.367 1.758 2.734 2.588 4.639 2.588Z"})]})}function U9({copy:t,copied:r}){return C.jsx("button",{className:L9,"data-copied":r,onClick:t,type:"button",children:r?C.jsx(H2,{label:"Copied",size:"14px",className:O9,icon:j9}):C.jsx(H2,{label:"Copy",size:"18px",icon:Rv})})}var I9="vocs_CodeBlock";function z9(t){return C.jsx("div",{...t,className:s0(t.className,I9)})}function H9(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"File"}),C.jsx("path",{d:"M4.2 1H4.17741H4.1774C3.86936 0.999988 3.60368 0.999978 3.38609 1.02067C3.15576 1.04257 2.92825 1.09113 2.71625 1.22104C2.51442 1.34472 2.34473 1.51442 2.22104 1.71625C2.09113 1.92825 2.04257 2.15576 2.02067 2.38609C1.99998 2.60367 1.99999 2.86935 2 3.17738V3.1774V3.2V11.8V11.8226V11.8226C1.99999 12.1307 1.99998 12.3963 2.02067 12.6139C2.04257 12.8442 2.09113 13.0717 2.22104 13.2837C2.34473 13.4856 2.51442 13.6553 2.71625 13.779C2.92825 13.9089 3.15576 13.9574 3.38609 13.9793C3.60368 14 3.86937 14 4.17741 14H4.2H10.8H10.8226C11.1306 14 11.3963 14 11.6139 13.9793C11.8442 13.9574 12.0717 13.9089 12.2837 13.779C12.4856 13.6553 12.6553 13.4856 12.779 13.2837C12.9089 13.0717 12.9574 12.8442 12.9793 12.6139C13 12.3963 13 12.1306 13 11.8226V11.8V3.2V3.17741C13 2.86936 13 2.60368 12.9793 2.38609C12.9574 2.15576 12.9089 1.92825 12.779 1.71625C12.6553 1.51442 12.4856 1.34472 12.2837 1.22104C12.0717 1.09113 11.8442 1.04257 11.6139 1.02067C11.3963 0.999978 11.1306 0.999988 10.8226 1H10.8H4.2ZM3.23875 2.07368C3.26722 2.05623 3.32362 2.03112 3.48075 2.01618C3.64532 2.00053 3.86298 2 4.2 2H10.8C11.137 2 11.3547 2.00053 11.5193 2.01618C11.6764 2.03112 11.7328 2.05623 11.7613 2.07368C11.8285 2.11491 11.8851 2.17147 11.9263 2.23875C11.9438 2.26722 11.9689 2.32362 11.9838 2.48075C11.9995 2.64532 12 2.86298 12 3.2V11.8C12 12.137 11.9995 12.3547 11.9838 12.5193C11.9689 12.6764 11.9438 12.7328 11.9263 12.7613C11.8851 12.8285 11.8285 12.8851 11.7613 12.9263C11.7328 12.9438 11.6764 12.9689 11.5193 12.9838C11.3547 12.9995 11.137 13 10.8 13H4.2C3.86298 13 3.64532 12.9995 3.48075 12.9838C3.32362 12.9689 3.26722 12.9438 3.23875 12.9263C3.17147 12.8851 3.11491 12.8285 3.07368 12.7613C3.05624 12.7328 3.03112 12.6764 3.01618 12.5193C3.00053 12.3547 3 12.137 3 11.8V3.2C3 2.86298 3.00053 2.64532 3.01618 2.48075C3.03112 2.32362 3.05624 2.26722 3.07368 2.23875C3.11491 2.17147 3.17147 2.11491 3.23875 2.07368ZM5 10C4.72386 10 4.5 10.2239 4.5 10.5C4.5 10.7761 4.72386 11 5 11H8C8.27614 11 8.5 10.7761 8.5 10.5C8.5 10.2239 8.27614 10 8 10H5ZM4.5 7.5C4.5 7.22386 4.72386 7 5 7H10C10.2761 7 10.5 7.22386 10.5 7.5C10.5 7.77614 10.2761 8 10 8H5C4.72386 8 4.5 7.77614 4.5 7.5ZM5 4C4.72386 4 4.5 4.22386 4.5 4.5C4.5 4.77614 4.72386 5 5 5H10C10.2761 5 10.5 4.77614 10.5 4.5C10.5 4.22386 10.2761 4 10 4H5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function V9(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 95",fill:"none",children:[C.jsx("title",{children:"Terminal"}),C.jsx("path",{fill:"currentColor",d:"M38.281 34.033c0-1.074-.39-2.05-1.22-2.88L6.885 1.171C6.152.39 5.175 0 4.053 0 1.758 0 0 1.709 0 4.004c0 1.074.488 2.1 1.172 2.88l27.295 27.15L1.172 61.181C.488 61.962 0 62.939 0 64.062c0 2.295 1.758 4.004 4.053 4.004 1.123 0 2.1-.39 2.832-1.172l30.176-29.98c.83-.83 1.22-1.807 1.22-2.88Z"}),C.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"8px",d:"M36 75h55"})]})}var W9="vocs_CodeTitle";function G9({children:t,className:r,language:a,...l}){return C.jsxs("div",{...l,className:s0(r,W9),children:[a==="bash"?C.jsx(H2,{label:"Terminal",size:"14px",icon:V9,style:{marginTop:3}}):t.match(/\.(.*)$/)?C.jsx(H2,{label:"File",size:"14px",icon:H9,style:{marginTop:1}}):null,t]})}var q9="vocs_Pre",$9="vocs_Pre_wrapper";function Y9({children:t,className:r,...a}){const{copied:l,copy:s,ref:c}=P9();function A(h){return!h||typeof h!="object"?h:"props"in h?{...h,props:{...h.props,children:Array.isArray(h.props.children)?h.props.children.map(A):A(h.props.children)}}:h}const f=y.useMemo(()=>A(t),[t]);return(h=>r!=null&&r.includes("shiki")?C.jsxs(z9,{children:[a["data-title"]&&C.jsx(G9,{language:a["data-lang"],children:a["data-title"]}),h]}):h)(C.jsx("div",{className:s0($9),children:C.jsxs("pre",{ref:c,...a,className:s0(r,q9),children:[C.jsx(U9,{copied:l,copy:s}),f]})}))}var K9="vocs_Footnotes";function Z9(t){return C.jsx("section",{...t,className:s0(t.className,K9)})}var Nm="vocs_Section";function X9(t){return"data-footnotes"in t?C.jsx(Z9,{...t,className:s0(t.className,Nm)}):C.jsx("section",{...t,className:s0(t.className,Nm)})}var Sm="vocs_Span";function Q9(t,r){if(!t||!r)return!1;const a=r.getRootNode==null?void 0:r.getRootNode();if(t.contains(r))return!0;if(a&&hi(a)){let l=r;for(;l;){if(t===l)return!0;l=l.parentNode||l.host}}return!1}function $l(t){return(t==null?void 0:t.ownerDocument)||document}function sA(t,r){const a=["mouse","pen"];return a.push("",void 0),a.includes(t)}var J9=typeof document<"u",e8=function(){},Mn=J9?y.useLayoutEffect:e8;const t8={...yi};function Yl(t){const r=y.useRef(t);return Mn(()=>{r.current=t}),r}const n8=t8.useInsertionEffect,r8=n8||(t=>t());function Xo(t){const r=y.useRef(()=>{});return r8(()=>{r.current=t}),y.useCallback(function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return r.current==null?void 0:r.current(...l)},[])}const o8="data-floating-ui-focusable",Em="active",Rm="selected",a8={...yi};let _m=!1,l8=0;const km=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+l8++;function i8(){const[t,r]=y.useState(()=>_m?km():void 0);return Mn(()=>{t==null&&r(km())},[]),y.useEffect(()=>{_m=!0},[]),t}const s8=a8.useId,eD=s8||i8,c8=y.forwardRef(function(r,a){const{context:{placement:l,elements:{floating:s},middlewareData:{arrow:c,shift:A}},width:f=14,height:p=7,tipRadius:h=0,strokeWidth:g=0,staticOffset:m,stroke:v,d:D,style:{transform:x,...w}={},...B}=r,b=eD(),[E,N]=y.useState(!1);if(Mn(()=>{if(!s)return;be(s).direction==="rtl"&&N(!0)},[s]),!s)return null;const[_,T]=l.split("-"),R=_==="top"||_==="bottom";let L=m;(R&&A!=null&&A.x||!R&&A!=null&&A.y)&&(L=null);const I=g*2,V=I/2,r0=f/2*(h/-8+1),u0=p/2*h/4,l0=!!D,i0=L&&T==="end"?"bottom":"top";let q=L&&T==="end"?"right":"left";L&&E&&(q=T==="end"?"left":"right");const A0=(c==null?void 0:c.x)!=null?L||c.x:"",O=(c==null?void 0:c.y)!=null?L||c.y:"",G=D||"M0,0"+(" H"+f)+(" L"+(f-r0)+","+(p-u0))+(" Q"+f/2+","+p+" "+r0+","+(p-u0))+" Z",X={top:l0?"rotate(180deg)":"",left:l0?"rotate(90deg)":"rotate(-90deg)",bottom:l0?"":"rotate(180deg)",right:l0?"rotate(-90deg)":"rotate(90deg)"}[_];return C.jsxs("svg",{...B,"aria-hidden":!0,ref:a,width:l0?f:f+I,height:f,viewBox:"0 0 "+f+" "+(p>f?p:f),style:{position:"absolute",pointerEvents:"none",[q]:A0,[i0]:O,[_]:R||l0?"100%":"calc(100% - "+I/2+"px)",transform:[X,x].filter(K=>!!K).join(" "),...w},children:[I>0&&C.jsx("path",{clipPath:"url(#"+b+")",fill:"none",stroke:v,strokeWidth:I+(D?0:1),d:G}),C.jsx("path",{stroke:I&&!D?B.fill:"none",d:G}),C.jsx("clipPath",{id:b,children:C.jsx("rect",{x:-V,y:V*(l0?-1:1),width:f+I,height:f})})]})});function u8(){const t=new Map;return{emit(r,a){var l;(l=t.get(r))==null||l.forEach(s=>s(a))},on(r,a){t.has(r)||t.set(r,new Set),t.get(r).add(a)},off(r,a){var l;(l=t.get(r))==null||l.delete(a)}}}const A8=y.createContext(null),f8=y.createContext(null),tD=()=>{var t;return((t=y.useContext(A8))==null?void 0:t.id)||null},nD=()=>y.useContext(f8);function d8(t){return"data-floating-ui-"+t}function ae(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const Tm=d8("safe-polygon");function Nu(t,r,a){if(a&&!sA(a))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const l=t();return typeof l=="number"?l:l==null?void 0:l[r]}return t==null?void 0:t[r]}function Su(t){return typeof t=="function"?t():t}function h8(t,r){r===void 0&&(r={});const{open:a,onOpenChange:l,dataRef:s,events:c,elements:A}=t,{enabled:f=!0,delay:p=0,handleClose:h=null,mouseOnly:g=!1,restMs:m=0,move:v=!0}=r,D=nD(),x=tD(),w=Yl(h),B=Yl(p),b=Yl(a),E=Yl(m),N=y.useRef(),_=y.useRef(-1),T=y.useRef(),R=y.useRef(-1),L=y.useRef(!0),I=y.useRef(!1),V=y.useRef(()=>{}),r0=y.useRef(!1),u0=Xo(()=>{var G;const X=(G=s.current.openEvent)==null?void 0:G.type;return(X==null?void 0:X.includes("mouse"))&&X!=="mousedown"});y.useEffect(()=>{if(!f)return;function G(X){let{open:K}=X;K||(ae(_),ae(R),L.current=!0,r0.current=!1)}return c.on("openchange",G),()=>{c.off("openchange",G)}},[f,c]),y.useEffect(()=>{if(!f||!w.current||!a)return;function G(K){u0()&&l(!1,K,"hover")}const X=$l(A.floating).documentElement;return X.addEventListener("mouseleave",G),()=>{X.removeEventListener("mouseleave",G)}},[A.floating,a,l,f,w,u0]);const l0=y.useCallback(function(G,X,K){X===void 0&&(X=!0),K===void 0&&(K="hover");const k=Nu(B.current,"close",N.current);k&&!T.current?(ae(_),_.current=window.setTimeout(()=>l(!1,G,K),k)):X&&(ae(_),l(!1,G,K))},[B,l]),i0=Xo(()=>{V.current(),T.current=void 0}),q=Xo(()=>{if(I.current){const G=$l(A.floating).body;G.style.pointerEvents="",G.removeAttribute(Tm),I.current=!1}}),A0=Xo(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);y.useEffect(()=>{if(!f)return;function G(J){if(ae(_),L.current=!1,g&&!sA(N.current)||Su(E.current)>0&&!Nu(B.current,"open"))return;const n0=Nu(B.current,"open",N.current);n0?_.current=window.setTimeout(()=>{b.current||l(!0,J,"hover")},n0):a||l(!0,J,"hover")}function X(J){if(A0()){q();return}V.current();const n0=$l(A.floating);if(ae(R),r0.current=!1,w.current&&s.current.floatingContext){a||ae(_),T.current=w.current({...s.current.floatingContext,tree:D,x:J.clientX,y:J.clientY,onClose(){q(),i0(),A0()||l0(J,!0,"safe-polygon")}});const x0=T.current;n0.addEventListener("mousemove",x0),V.current=()=>{n0.removeEventListener("mousemove",x0)};return}(N.current==="touch"?!Q9(A.floating,J.relatedTarget):!0)&&l0(J)}function K(J){A0()||s.current.floatingContext&&(w.current==null||w.current({...s.current.floatingContext,tree:D,x:J.clientX,y:J.clientY,onClose(){q(),i0(),A0()||l0(J)}})(J))}function k(){ae(_)}function Q(J){A0()||l0(J,!1)}if(S2(A.domReference)){const J=A.domReference,n0=A.floating;return a&&J.addEventListener("mouseleave",K),v&&J.addEventListener("mousemove",G,{once:!0}),J.addEventListener("mouseenter",G),J.addEventListener("mouseleave",X),n0&&(n0.addEventListener("mouseleave",K),n0.addEventListener("mouseenter",k),n0.addEventListener("mouseleave",Q)),()=>{a&&J.removeEventListener("mouseleave",K),v&&J.removeEventListener("mousemove",G),J.removeEventListener("mouseenter",G),J.removeEventListener("mouseleave",X),n0&&(n0.removeEventListener("mouseleave",K),n0.removeEventListener("mouseenter",k),n0.removeEventListener("mouseleave",Q))}}},[A,f,t,g,v,l0,i0,q,l,a,b,D,B,w,s,A0,E]),Mn(()=>{var G;if(f&&a&&(G=w.current)!=null&&(G=G.__options)!=null&&G.blockPointerEvents&&u0()){I.current=!0;const K=A.floating;if(S2(A.domReference)&&K){var X;const k=$l(A.floating).body;k.setAttribute(Tm,"");const Q=A.domReference,J=D==null||(X=D.nodesRef.current.find(n0=>n0.id===x))==null||(X=X.context)==null?void 0:X.elements.floating;return J&&(J.style.pointerEvents=""),k.style.pointerEvents="none",Q.style.pointerEvents="auto",K.style.pointerEvents="auto",()=>{k.style.pointerEvents="",Q.style.pointerEvents="",K.style.pointerEvents=""}}}},[f,a,x,A,D,w,u0]),Mn(()=>{a||(N.current=void 0,r0.current=!1,i0(),q())},[a,i0,q]),y.useEffect(()=>()=>{i0(),ae(_),ae(R),q()},[f,A.domReference,i0,q]);const O=y.useMemo(()=>{function G(X){N.current=X.pointerType}return{onPointerDown:G,onPointerEnter:G,onMouseMove(X){const{nativeEvent:K}=X;function k(){!L.current&&!b.current&&l(!0,K,"hover")}g&&!sA(N.current)||a||Su(E.current)===0||r0.current&&X.movementX**2+X.movementY**2<2||(ae(R),N.current==="touch"?k():(r0.current=!0,R.current=window.setTimeout(k,Su(E.current))))}}},[g,l,a,b,E]);return y.useMemo(()=>f?{reference:O}:{},[f,O])}function Eu(t,r){if(!t||!r)return!1;const a=r.getRootNode==null?void 0:r.getRootNode();if(t.contains(r))return!0;if(a&&hi(a)){let l=r;for(;l;){if(t===l)return!0;l=l.parentNode||l.host}}return!1}function p8(t){return"composedPath"in t?t.composedPath()[0]:t.target}function m8(t){const{open:r=!1,onOpenChange:a,elements:l}=t,s=eD(),c=y.useRef({}),[A]=y.useState(()=>u8()),f=tD()!=null,[p,h]=y.useState(l.reference),g=Xo((D,x,w)=>{c.current.openEvent=D?x:void 0,A.emit("openchange",{open:D,event:x,reason:w,nested:f}),a==null||a(D,x,w)}),m=y.useMemo(()=>({setPositionReference:h}),[]),v=y.useMemo(()=>({reference:p||l.reference||null,floating:l.floating||null,domReference:l.reference}),[p,l.reference,l.floating]);return y.useMemo(()=>({dataRef:c,open:r,onOpenChange:g,elements:v,events:A,floatingId:s,refs:m}),[r,g,v,A,s,m])}function C8(t){t===void 0&&(t={});const{nodeId:r}=t,a=m8({...t,elements:{reference:null,floating:null,...t.elements}}),l=t.rootContext||a,s=l.elements,[c,A]=y.useState(null),[f,p]=y.useState(null),g=(s==null?void 0:s.domReference)||c,m=y.useRef(null),v=nD();Mn(()=>{g&&(m.current=g)},[g]);const D=iy({...t,elements:{...s,...f&&{reference:f}}}),x=y.useCallback(N=>{const _=S2(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),getClientRects:()=>N.getClientRects(),contextElement:N}:N;p(_),D.refs.setReference(_)},[D.refs]),w=y.useCallback(N=>{(S2(N)||N===null)&&(m.current=N,A(N)),(S2(D.refs.reference.current)||D.refs.reference.current===null||N!==null&&!S2(N))&&D.refs.setReference(N)},[D.refs]),B=y.useMemo(()=>({...D.refs,setReference:w,setPositionReference:x,domReference:m}),[D.refs,w,x]),b=y.useMemo(()=>({...D.elements,domReference:g}),[D.elements,g]),E=y.useMemo(()=>({...D,...l,refs:B,elements:b,nodeId:r}),[D,B,b,r,l]);return Mn(()=>{l.dataRef.current.floatingContext=E;const N=v==null?void 0:v.nodesRef.current.find(_=>_.id===r);N&&(N.context=E)}),y.useMemo(()=>({...D,context:E,refs:B,elements:b}),[D,B,b,E])}function Ru(t,r,a){const l=new Map,s=a==="item";let c=t;if(s&&t){const{[Em]:A,[Rm]:f,...p}=t;c=p}return{...a==="floating"&&{tabIndex:-1,[o8]:""},...c,...r.map(A=>{const f=A?A[a]:null;return typeof f=="function"?t?f(t):null:f}).concat(t).reduce((A,f)=>(f&&Object.entries(f).forEach(p=>{let[h,g]=p;if(!(s&&[Em,Rm].includes(h)))if(h.indexOf("on")===0){if(l.has(h)||l.set(h,[]),typeof g=="function"){var m;(m=l.get(h))==null||m.push(g),A[h]=function(){for(var v,D=arguments.length,x=new Array(D),w=0;w<D;w++)x[w]=arguments[w];return(v=l.get(h))==null?void 0:v.map(B=>B(...x)).find(B=>B!==void 0)}}}else A[h]=g}),A),{})}}function g8(t){t===void 0&&(t=[]);const r=t.map(f=>f==null?void 0:f.reference),a=t.map(f=>f==null?void 0:f.floating),l=t.map(f=>f==null?void 0:f.item),s=y.useCallback(f=>Ru(f,t,"reference"),r),c=y.useCallback(f=>Ru(f,t,"floating"),a),A=y.useCallback(f=>Ru(f,t,"item"),l);return y.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:A}),[s,c,A])}function rD(t,r,a){return a===void 0&&(a=!0),t.filter(s=>{var c;return s.parentId===r&&(!a||((c=s.context)==null?void 0:c.open))}).flatMap(s=>[s,...rD(t,s.id,a)])}function Mm(t,r){const[a,l]=t;let s=!1;const c=r.length;for(let A=0,f=c-1;A<c;f=A++){const[p,h]=r[A]||[0,0],[g,m]=r[f]||[0,0];h>=l!=m>=l&&a<=(g-p)*(l-h)/(m-h)+p&&(s=!s)}return s}function y8(t,r){return t[0]>=r.x&&t[0]<=r.x+r.width&&t[1]>=r.y&&t[1]<=r.y+r.height}function v8(t){t===void 0&&(t={});const{buffer:r=.5,blockPointerEvents:a=!1,requireIntent:l=!0}=t,s={current:-1};let c=!1,A=null,f=null,p=typeof performance<"u"?performance.now():0;function h(m,v){const D=performance.now(),x=D-p;if(A===null||f===null||x===0)return A=m,f=v,p=D,null;const w=m-A,B=v-f,E=Math.sqrt(w*w+B*B)/x;return A=m,f=v,p=D,E}const g=m=>{let{x:v,y:D,placement:x,elements:w,onClose:B,nodeId:b,tree:E}=m;return function(_){function T(){ae(s),B()}if(ae(s),!w.domReference||!w.floating||x==null||v==null||D==null)return;const{clientX:R,clientY:L}=_,I=[R,L],V=p8(_),r0=_.type==="mouseleave",u0=Eu(w.floating,V),l0=Eu(w.domReference,V),i0=w.domReference.getBoundingClientRect(),q=w.floating.getBoundingClientRect(),A0=x.split("-")[0],O=v>q.right-q.width/2,G=D>q.bottom-q.height/2,X=y8(I,i0),K=q.width>i0.width,k=q.height>i0.height,Q=(K?i0:q).left,J=(K?i0:q).right,n0=(k?i0:q).top,f0=(k?i0:q).bottom;if(u0&&(c=!0,!r0))return;if(l0&&(c=!1),l0&&!r0){c=!0;return}if(r0&&S2(_.relatedTarget)&&Eu(w.floating,_.relatedTarget)||E&&rD(E.nodesRef.current,b).length)return;if(A0==="top"&&D>=i0.bottom-1||A0==="bottom"&&D<=i0.top+1||A0==="left"&&v>=i0.right-1||A0==="right"&&v<=i0.left+1)return T();let x0=[];switch(A0){case"top":x0=[[Q,i0.top+1],[Q,q.bottom-1],[J,q.bottom-1],[J,i0.top+1]];break;case"bottom":x0=[[Q,q.top+1],[Q,i0.bottom-1],[J,i0.bottom-1],[J,q.top+1]];break;case"left":x0=[[q.right-1,f0],[q.right-1,n0],[i0.left+1,n0],[i0.left+1,f0]];break;case"right":x0=[[i0.right-1,f0],[i0.right-1,n0],[q.left+1,n0],[q.left+1,f0]];break}function m0($0){let[b0,T0]=$0;switch(A0){case"top":{const H0=[K?b0+r/2:O?b0+r*4:b0-r*4,T0+r+1],u2=[K?b0-r/2:O?b0+r*4:b0-r*4,T0+r+1],M2=[[q.left,O||K?q.bottom-r:q.top],[q.right,O?K?q.bottom-r:q.top:q.bottom-r]];return[H0,u2,...M2]}case"bottom":{const H0=[K?b0+r/2:O?b0+r*4:b0-r*4,T0-r],u2=[K?b0-r/2:O?b0+r*4:b0-r*4,T0-r],M2=[[q.left,O||K?q.top+r:q.bottom],[q.right,O?K?q.top+r:q.bottom:q.top+r]];return[H0,u2,...M2]}case"left":{const H0=[b0+r+1,k?T0+r/2:G?T0+r*4:T0-r*4],u2=[b0+r+1,k?T0-r/2:G?T0+r*4:T0-r*4];return[...[[G||k?q.right-r:q.left,q.top],[G?k?q.right-r:q.left:q.right-r,q.bottom]],H0,u2]}case"right":{const H0=[b0-r,k?T0+r/2:G?T0+r*4:T0-r*4],u2=[b0-r,k?T0-r/2:G?T0+r*4:T0-r*4],M2=[[G||k?q.left+r:q.right,q.top],[G?k?q.left+r:q.right:q.left+r,q.bottom]];return[H0,u2,...M2]}}}if(!Mm([R,L],x0)){if(c&&!X)return T();if(!r0&&l){const $0=h(_.clientX,_.clientY);if($0!==null&&$0<.1)return T()}Mm([R,L],m0([v,D]))?!c&&l&&(s.current=window.setTimeout(T,40)):T()}}};return g.__options={blockPointerEvents:a},g}function D8({children:t,...r}){const[a,l]=t,s=y.useRef(null),[c,A]=y.useState(!1),{context:f,refs:p,floatingStyles:h}=C8({middleware:[uy({element:s}),sy(8),cy()],open:c,onOpenChange:A,placement:"bottom-start"}),g=h8(f,{handleClose:v8()}),{getReferenceProps:m,getFloatingProps:v}=g8([g]),D=l.props.children,x=a.props.children;return C.jsxs("span",{...r,children:[C.jsx("span",{className:"twoslash-target",ref:p.setReference,...m(),children:D}),c&&C.jsxs("div",{className:"twoslash-popup-info-hover",ref:p.setFloating,style:h,...v(),children:[C.jsx(c8,{ref:s,context:f,fill:Uu.background5,height:3,stroke:Uu.border2,strokeWidth:1,width:7}),C.jsx("div",{className:"twoslash-popup-scroll-container",children:x})]})]})}function w8(t){var a;const r=s0(t.className,Sm);return(a=t.className)!=null&&a.includes("twoslash-hover")?C.jsx(D8,{...t,className:r}):C.jsx("span",{...t,className:s0(t.className,Sm)})}var x8="vocs_Strong";function F8(t){return C.jsx("strong",{...t,className:s0(t.className,x8)})}var B8="vocs_Summary";function b8(t){return C.jsx("summary",{...t,className:s0(t.className,B8)})}var N8="vocs_Table";function S8(t){return C.jsx("table",{...t,className:s0(t.className,N8)})}var E8="vocs_TableCell";function R8(t){return C.jsx("td",{...t,className:s0(t.className,E8)})}var _8="vocs_TableHeader";function k8(t){return C.jsx("th",{...t,className:s0(t.className,_8)})}var T8="vocs_TableRow";function M8(t){return C.jsx("tr",{...t,className:s0(t.className,T8)})}const P8={a:c4,aside:v4,blockquote:w4,code:F4,details:N4,div:D9,pre:Y9,header:N9,figcaption:x9,figure:B9,h1:vC,h2:Kv,h3:Zv,h4:Xv,h5:Qv,h6:Jv,hr:E9,kd:sg,li:M9,ol:t=>C.jsx(bm,{ordered:!0,...t}),p:DC,section:X9,span:w8,strong:F8,summary:b8,table:S8,td:R8,th:k8,tr:M8,ul:t=>C.jsx(bm,{ordered:!1,...t})};function L8(){const{pathname:t}=a2(),r=m2(),{ogImageUrl:a}=r;if(!a)return;if(typeof a=="string")return a;const l=y.useMemo(()=>{const s=Object.keys(a).filter(c=>t.startsWith(c));return s[s.length-1]},[a,t]);if(l)return a[l]}function cA(t){const{children:r,content:a,filePath:l,frontmatter:s,lastUpdatedAt:c,path:A}=t,{pathname:f}=a2(),p=y.useRef(void 0);return y.useEffect(()=>{p.current=f}),C.jsxs(C.Fragment,{children:[C.jsx(O8,{frontmatter:s}),typeof window<"u"&&C.jsx(uC,{}),C.jsx(l4,{components:P8,children:C.jsx(px,{frontmatter:s,path:A,children:C.jsx(FC.Provider,{value:{content:a,filePath:l,frontmatter:s,lastUpdatedAt:c,previousPath:p.current},children:r})})})]})}function O8({frontmatter:t}){var v,D,x,w,B,b;const r=m2(),a=L8(),{baseUrl:l,font:s,iconUrl:c,logoUrl:A}=r,f=(t==null?void 0:t.description)??r.description,p=(t==null?void 0:t.title)??r.title,h=(()=>{if(r.title&&!p.includes(r.title))return r.titleTemplate})(),g=typeof window<"u"&&window.location.hostname==="localhost",m=h?h.replace("%s",p):p;return C.jsxs(C.Fragment,{children:[m&&C.jsx("title",{children:m}),l&&!0&&!g&&C.jsx("base",{href:l}),f!=="undefined"&&C.jsx("meta",{name:"description",content:f}),c&&typeof c=="string"&&C.jsx("link",{rel:"icon",href:c,type:_u(c)}),c&&typeof c!="string"&&C.jsx("link",{rel:"icon",href:c.light,type:_u(c.light)}),c&&typeof c!="string"&&C.jsx("link",{rel:"icon",href:c.dark,type:_u(c.dark),media:"(prefers-color-scheme: dark)"}),C.jsx("meta",{property:"og:type",content:"website"}),C.jsx("meta",{property:"og:title",content:p||r.title}),l&&C.jsx("meta",{property:"og:url",content:l}),f!=="undefined"&&C.jsx("meta",{property:"og:description",content:f}),a&&C.jsx("meta",{property:"og:image",content:a.replace("%logo",`${l||""}${typeof A=="string"?A:(A==null?void 0:A.dark)||""}`).replace("%title",p||"").replace("%description",(f!=="undefined"?f:"")||"")}),(((v=s==null?void 0:s.default)==null?void 0:v.google)||((D=s==null?void 0:s.mono)==null?void 0:D.google))&&C.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(((x=s==null?void 0:s.default)==null?void 0:x.google)||((w=s==null?void 0:s.mono)==null?void 0:w.google))&&C.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),((B=s==null?void 0:s.default)==null?void 0:B.google)&&C.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${s.default.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),((b=s==null?void 0:s.mono)==null?void 0:b.google)&&C.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${s.mono.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),C.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a&&C.jsx("meta",{property:"twitter:image",content:a.replace("%logo",`${l||""}${typeof A=="string"?A:(A==null?void 0:A.dark)||""}`).replace("%title",p?encodeURIComponent(p):"").replace("%description",f?encodeURIComponent(f):"")})]})}function _u(t){if(t.endsWith(".svg"))return"image/svg+xml";if(t.endsWith(".png"))return"image/png";if(t.endsWith(".jpg"))return"image/jpeg";if(t.endsWith(".ico"))return"image/x-icon";if(t.endsWith(".webp"))return"image/webp"}const j8=(()=>{const t=FA.find(({path:r})=>r==="*");return t?{path:t.path,lazy:async()=>{const{frontmatter:r,...a}=await t.lazy();return{...a,element:C.jsx(cA,{frontmatter:r,path:t.path,children:C.jsx(lA,{children:C.jsx(a.default,{})})})}}}:{path:"*",lazy:void 0,element:C.jsx(cA,{frontmatter:{layout:"minimal"},path:"*",children:C.jsx(lA,{children:C.jsx(Vw,{})})})}})(),Pm=[...FA.filter(({path:t})=>t!=="*").map(t=>({path:t.path,lazy:async()=>{const{frontmatter:r,...a}=await t.lazy();return{...a,element:C.jsx(cA,{content:decodeURIComponent(t.content??""),filePath:t.filePath,frontmatter:r,lastUpdatedAt:t.lastUpdatedAt,path:t.path,children:C.jsx(lA,{children:C.jsx(a.default,{})})})}}})),j8];async function U8(t,r){var l;const a=(l=vt(t,window.location,r))==null?void 0:l.filter(s=>s.route.lazy);a&&(a==null?void 0:a.length)>0&&await Promise.all(a.map(async s=>{const c=await s.route.lazy();Object.assign(s.route,{...c,lazy:void 0})}))}function I8(){const t=document.querySelectorAll('style[data-vocs-temp-style="true"]');for(const r of t)r.remove()}z8();async function z8(){const t=pC().basePath;await U8(Pm,t),I8();const r=Aw(Pm,{basename:t});y6.hydrateRoot(document.getElementById("app"),C.jsx(Nw,{children:C.jsx(U1,{router:r})}))}export{o9 as C,Fe as L,t9 as R,r9 as T,Z8 as a,Bu as b,s0 as c,m2 as d,K5 as e,n9 as f,C as j,a4 as u};
