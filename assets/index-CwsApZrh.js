function Om(t,n){for(var a=0;a<n.length;a++){const l=n[a];if(typeof l!="string"&&!Array.isArray(l)){for(const s in l)if(s!=="default"&&!(s in t)){const c=Object.getOwnPropertyDescriptor(l,s);c&&Object.defineProperty(t,s,c.get?c:{enumerable:!0,get:()=>l[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const A of c.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&l(A)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();function yi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $c={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function c6(){if(qh)return Wo;qh=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(l,s,c){var A=null;if(c!==void 0&&(A=""+c),s.key!==void 0&&(A=""+s.key),"key"in s){c={};for(var f in s)f!=="key"&&(c[f]=s[f])}else c=s;return s=c.ref,{$$typeof:t,type:l,key:A,ref:s!==void 0?s:null,props:c}}return Wo.Fragment=n,Wo.jsx=a,Wo.jsxs=a,Wo}var $h;function u6(){return $h||($h=1,$c.exports=c6()),$c.exports}var C=u6();const A6=yi(C),f6=Om({__proto__:null,default:A6},[C]);var Yc={exports:{}},Ho={},Kc={exports:{}},Zc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh;function d6(){return Yh||(Yh=1,function(t){function n(L,G){var X=L.length;L.push(G);e:for(;0<X;){var K=X-1>>>1,k=L[K];if(0<s(k,G))L[K]=G,L[X]=k,X=K;else break e}}function a(L){return L.length===0?null:L[0]}function l(L){if(L.length===0)return null;var G=L[0],X=L.pop();if(X!==G){L[0]=X;e:for(var K=0,k=L.length,Q=k>>>1;K<Q;){var J=2*(K+1)-1,r0=L[J],f0=J+1,w0=L[f0];if(0>s(r0,X))f0<k&&0>s(w0,r0)?(L[K]=w0,L[f0]=X,K=f0):(L[K]=r0,L[J]=X,K=J);else if(f0<k&&0>s(w0,X))L[K]=w0,L[f0]=X,K=f0;else break e}}return G}function s(L,G){var X=L.sortIndex-G.sortIndex;return X!==0?X:L.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var A=Date,f=A.now();t.unstable_now=function(){return A.now()-f}}var p=[],h=[],y=1,m=null,D=3,v=!1,w=!1,x=!1,B=!1,b=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function _(L){for(var G=a(h);G!==null;){if(G.callback===null)l(h);else if(G.startTime<=L)l(h),G.sortIndex=G.expirationTime,n(p,G);else break;G=a(h)}}function T(L){if(x=!1,_(L),!w)if(a(p)!==null)w=!0,E||(E=!0,l0());else{var G=a(h);G!==null&&A0(T,G.startTime-L)}}var E=!1,O=-1,U=5,H=-1;function n0(){return B?!0:!(t.unstable_now()-H<U)}function u0(){if(B=!1,E){var L=t.unstable_now();H=L;var G=!0;try{e:{w=!1,x&&(x=!1,R(O),O=-1),v=!0;var X=D;try{t:{for(_(L),m=a(p);m!==null&&!(m.expirationTime>L&&n0());){var K=m.callback;if(typeof K=="function"){m.callback=null,D=m.priorityLevel;var k=K(m.expirationTime<=L);if(L=t.unstable_now(),typeof k=="function"){m.callback=k,_(L),G=!0;break t}m===a(p)&&l(p),_(L)}else l(p);m=a(p)}if(m!==null)G=!0;else{var Q=a(h);Q!==null&&A0(T,Q.startTime-L),G=!1}}break e}finally{m=null,D=X,v=!1}G=void 0}}finally{G?l0():E=!1}}}var l0;if(typeof N=="function")l0=function(){N(u0)};else if(typeof MessageChannel<"u"){var i0=new MessageChannel,q=i0.port2;i0.port1.onmessage=u0,l0=function(){q.postMessage(null)}}else l0=function(){b(u0,0)};function A0(L,G){O=b(function(){L(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_next=function(L){switch(D){case 1:case 2:case 3:var G=3;break;default:G=D}var X=D;D=G;try{return L()}finally{D=X}},t.unstable_requestPaint=function(){B=!0},t.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var X=D;D=L;try{return G()}finally{D=X}},t.unstable_scheduleCallback=function(L,G,X){var K=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,L){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=X+k,L={id:y++,callback:G,priorityLevel:L,startTime:X,expirationTime:k,sortIndex:-1},X>K?(L.sortIndex=X,n(h,L),a(p)===null&&L===a(h)&&(x?(R(O),O=-1):x=!0,A0(T,X-K))):(L.sortIndex=k,n(p,L),w||v||(w=!0,E||(E=!0,l0()))),L},t.unstable_shouldYield=n0,t.unstable_wrapCallback=function(L){var G=D;return function(){var X=D;D=G;try{return L.apply(this,arguments)}finally{D=X}}}}(Zc)),Zc}var Kh;function h6(){return Kh||(Kh=1,Kc.exports=d6()),Kc.exports}var Xc={exports:{}},k0={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function p6(){if(Zh)return k0;Zh=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),A=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.iterator;function D(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function B(k,Q,J){this.props=k,this.context=Q,this.refs=x,this.updater=J||v}B.prototype.isReactComponent={},B.prototype.setState=function(k,Q){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Q,"setState")},B.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function b(){}b.prototype=B.prototype;function R(k,Q,J){this.props=k,this.context=Q,this.refs=x,this.updater=J||v}var N=R.prototype=new b;N.constructor=R,w(N,B.prototype),N.isPureReactComponent=!0;var _=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function O(k,Q,J,r0,f0,w0){return J=w0.ref,{$$typeof:t,type:k,key:Q,ref:J!==void 0?J:null,props:w0}}function U(k,Q){return O(k.type,Q,void 0,void 0,void 0,k.props)}function H(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function n0(k){var Q={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(J){return Q[J]})}var u0=/\/+/g;function l0(k,Q){return typeof k=="object"&&k!==null&&k.key!=null?n0(""+k.key):Q.toString(36)}function i0(){}function q(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(i0,i0):(k.status="pending",k.then(function(Q){k.status==="pending"&&(k.status="fulfilled",k.value=Q)},function(Q){k.status==="pending"&&(k.status="rejected",k.reason=Q)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function A0(k,Q,J,r0,f0){var w0=typeof k;(w0==="undefined"||w0==="boolean")&&(k=null);var m0=!1;if(k===null)m0=!0;else switch(w0){case"bigint":case"string":case"number":m0=!0;break;case"object":switch(k.$$typeof){case t:case n:m0=!0;break;case y:return m0=k._init,A0(m0(k._payload),Q,J,r0,f0)}}if(m0)return f0=f0(k),m0=r0===""?"."+l0(k,0):r0,_(f0)?(J="",m0!=null&&(J=m0.replace(u0,"$&/")+"/"),A0(f0,Q,J,"",function(T0){return T0})):f0!=null&&(H(f0)&&(f0=U(f0,J+(f0.key==null||k&&k.key===f0.key?"":(""+f0.key).replace(u0,"$&/")+"/")+m0)),Q.push(f0)),1;m0=0;var $0=r0===""?".":r0+":";if(_(k))for(var b0=0;b0<k.length;b0++)r0=k[b0],w0=$0+l0(r0,b0),m0+=A0(r0,Q,J,w0,f0);else if(b0=D(k),typeof b0=="function")for(k=b0.call(k),b0=0;!(r0=k.next()).done;)r0=r0.value,w0=$0+l0(r0,b0++),m0+=A0(r0,Q,J,w0,f0);else if(w0==="object"){if(typeof k.then=="function")return A0(q(k),Q,J,r0,f0);throw Q=String(k),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return m0}function L(k,Q,J){if(k==null)return k;var r0=[],f0=0;return A0(k,r0,"","",function(w0){return Q.call(J,w0,f0++)}),r0}function G(k){if(k._status===-1){var Q=k._result;Q=Q(),Q.then(function(J){(k._status===0||k._status===-1)&&(k._status=1,k._result=J)},function(J){(k._status===0||k._status===-1)&&(k._status=2,k._result=J)}),k._status===-1&&(k._status=0,k._result=Q)}if(k._status===1)return k._result.default;throw k._result}var X=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function K(){}return k0.Children={map:L,forEach:function(k,Q,J){L(k,function(){Q.apply(this,arguments)},J)},count:function(k){var Q=0;return L(k,function(){Q++}),Q},toArray:function(k){return L(k,function(Q){return Q})||[]},only:function(k){if(!H(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},k0.Component=B,k0.Fragment=a,k0.Profiler=s,k0.PureComponent=R,k0.StrictMode=l,k0.Suspense=p,k0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,k0.__COMPILER_RUNTIME={__proto__:null,c:function(k){return T.H.useMemoCache(k)}},k0.cache=function(k){return function(){return k.apply(null,arguments)}},k0.cloneElement=function(k,Q,J){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var r0=w({},k.props),f0=k.key,w0=void 0;if(Q!=null)for(m0 in Q.ref!==void 0&&(w0=void 0),Q.key!==void 0&&(f0=""+Q.key),Q)!E.call(Q,m0)||m0==="key"||m0==="__self"||m0==="__source"||m0==="ref"&&Q.ref===void 0||(r0[m0]=Q[m0]);var m0=arguments.length-2;if(m0===1)r0.children=J;else if(1<m0){for(var $0=Array(m0),b0=0;b0<m0;b0++)$0[b0]=arguments[b0+2];r0.children=$0}return O(k.type,f0,void 0,void 0,w0,r0)},k0.createContext=function(k){return k={$$typeof:A,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},k0.createElement=function(k,Q,J){var r0,f0={},w0=null;if(Q!=null)for(r0 in Q.key!==void 0&&(w0=""+Q.key),Q)E.call(Q,r0)&&r0!=="key"&&r0!=="__self"&&r0!=="__source"&&(f0[r0]=Q[r0]);var m0=arguments.length-2;if(m0===1)f0.children=J;else if(1<m0){for(var $0=Array(m0),b0=0;b0<m0;b0++)$0[b0]=arguments[b0+2];f0.children=$0}if(k&&k.defaultProps)for(r0 in m0=k.defaultProps,m0)f0[r0]===void 0&&(f0[r0]=m0[r0]);return O(k,w0,void 0,void 0,null,f0)},k0.createRef=function(){return{current:null}},k0.forwardRef=function(k){return{$$typeof:f,render:k}},k0.isValidElement=H,k0.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:G}},k0.memo=function(k,Q){return{$$typeof:h,type:k,compare:Q===void 0?null:Q}},k0.startTransition=function(k){var Q=T.T,J={};T.T=J;try{var r0=k(),f0=T.S;f0!==null&&f0(J,r0),typeof r0=="object"&&r0!==null&&typeof r0.then=="function"&&r0.then(K,X)}catch(w0){X(w0)}finally{T.T=Q}},k0.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},k0.use=function(k){return T.H.use(k)},k0.useActionState=function(k,Q,J){return T.H.useActionState(k,Q,J)},k0.useCallback=function(k,Q){return T.H.useCallback(k,Q)},k0.useContext=function(k){return T.H.useContext(k)},k0.useDebugValue=function(){},k0.useDeferredValue=function(k,Q){return T.H.useDeferredValue(k,Q)},k0.useEffect=function(k,Q,J){var r0=T.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return r0.useEffect(k,Q)},k0.useId=function(){return T.H.useId()},k0.useImperativeHandle=function(k,Q,J){return T.H.useImperativeHandle(k,Q,J)},k0.useInsertionEffect=function(k,Q){return T.H.useInsertionEffect(k,Q)},k0.useLayoutEffect=function(k,Q){return T.H.useLayoutEffect(k,Q)},k0.useMemo=function(k,Q){return T.H.useMemo(k,Q)},k0.useOptimistic=function(k,Q){return T.H.useOptimistic(k,Q)},k0.useReducer=function(k,Q,J){return T.H.useReducer(k,Q,J)},k0.useRef=function(k){return T.H.useRef(k)},k0.useState=function(k){return T.H.useState(k)},k0.useSyncExternalStore=function(k,Q,J){return T.H.useSyncExternalStore(k,Q,J)},k0.useTransition=function(){return T.H.useTransition()},k0.version="19.1.1",k0}var Xh;function uA(){return Xh||(Xh=1,Xc.exports=p6()),Xc.exports}var Qc={exports:{}},O2={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qh;function m6(){if(Qh)return O2;Qh=1;var t=uA();function n(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var l={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");function c(p,h,y){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:p,containerInfo:h,implementation:y}}var A=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return O2.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,O2.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(n(299));return c(p,h,null,y)},O2.flushSync=function(p){var h=A.T,y=l.p;try{if(A.T=null,l.p=2,p)return p()}finally{A.T=h,l.p=y,l.d.f()}},O2.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(p,h))},O2.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},O2.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,m=f(y,h.crossOrigin),D=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?l.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:D,fetchPriority:v}):y==="script"&&l.d.X(p,{crossOrigin:m,integrity:D,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},O2.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=f(h.as,h.crossOrigin);l.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(p)},O2.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,m=f(y,h.crossOrigin);l.d.L(p,y,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},O2.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=f(h.as,h.crossOrigin);l.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(p)},O2.requestFormReset=function(p){l.d.r(p)},O2.unstable_batchedUpdates=function(p,h){return p(h)},O2.useFormState=function(p,h,y){return A.H.useFormState(p,h,y)},O2.useFormStatus=function(){return A.H.useHostTransitionStatus()},O2.version="19.1.1",O2}var Jh;function Lm(){if(Jh)return Qc.exports;Jh=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Qc.exports=m6(),Qc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function C6(){if(ep)return Ho;ep=1;var t=h6(),n=uA(),a=Lm();function l(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var r=e,o=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(o=r.return),e=r.return;while(e)}return r.tag===3?o:null}function A(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function f(e){if(c(e)!==e)throw Error(l(188))}function p(e){var r=e.alternate;if(!r){if(r=c(e),r===null)throw Error(l(188));return r!==e?null:e}for(var o=e,i=r;;){var u=o.return;if(u===null)break;var d=u.alternate;if(d===null){if(i=u.return,i!==null){o=i;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===o)return f(u),e;if(d===i)return f(u),r;d=d.sibling}throw Error(l(188))}if(o.return!==i.return)o=u,i=d;else{for(var F=!1,S=u.child;S;){if(S===o){F=!0,o=u,i=d;break}if(S===i){F=!0,i=u,o=d;break}S=S.sibling}if(!F){for(S=d.child;S;){if(S===o){F=!0,o=d,i=u;break}if(S===i){F=!0,i=d,o=u;break}S=S.sibling}if(!F)throw Error(l(189))}}if(o.alternate!==i)throw Error(l(190))}if(o.tag!==3)throw Error(l(188));return o.stateNode.current===o?e:r}function h(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=h(e),r!==null)return r;e=e.sibling}return null}var y=Object.assign,m=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),n0=Symbol.for("react.memo_cache_sentinel"),u0=Symbol.iterator;function l0(e){return e===null||typeof e!="object"?null:(e=u0&&e[u0]||e["@@iterator"],typeof e=="function"?e:null)}var i0=Symbol.for("react.client.reference");function q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===i0?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case B:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case E:return"SuspenseList";case H:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case N:return(e.displayName||"Context")+".Provider";case R:return(e._context.displayName||"Context")+".Consumer";case _:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return r=e.displayName||null,r!==null?r:q(e.type)||"Memo";case U:r=e._payload,e=e._init;try{return q(e(r))}catch{}}return null}var A0=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},K=[],k=-1;function Q(e){return{current:e}}function J(e){0>k||(e.current=K[k],K[k]=null,k--)}function r0(e,r){k++,K[k]=e.current,e.current=r}var f0=Q(null),w0=Q(null),m0=Q(null),$0=Q(null);function b0(e,r){switch(r0(m0,r),r0(w0,e),r0(f0,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?Dh(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=Dh(r),e=vh(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(f0),r0(f0,e)}function T0(){J(f0),J(w0),J(m0)}function W0(e){e.memoizedState!==null&&r0($0,e);var r=f0.current,o=vh(r,e.type);r!==o&&(r0(w0,e),r0(f0,o))}function u2(e){w0.current===e&&(J(f0),J(w0)),$0.current===e&&(J($0),Lo._currentValue=X)}var P2=Object.prototype.hasOwnProperty,Re=t.unstable_scheduleCallback,V2=t.unstable_cancelCallback,Hn=t.unstable_shouldYield,Vn=t.unstable_requestPaint,I2=t.unstable_now,Gn=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,Ca=t.unstable_UserBlockingPriority,Ir=t.unstable_NormalPriority,tt=t.unstable_LowPriority,Ft=t.unstable_IdlePriority,ya=t.log,qn=t.unstable_setDisableYieldValue,G2=null,i2=null;function Ee(e){if(typeof ya=="function"&&qn(e),i2&&typeof i2.setStrictMode=="function")try{i2.setStrictMode(G2,e)}catch{}}var R2=Math.clz32?Math.clz32:ga,Hi=Math.log,Ie=Math.LN2;function ga(e){return e>>>=0,e===0?32:31-(Hi(e)/Ie|0)|0}var or=256,ar=4194304;function rt(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function lr(e,r,o){var i=e.pendingLanes;if(i===0)return 0;var u=0,d=e.suspendedLanes,F=e.pingedLanes;e=e.warmLanes;var S=i&134217727;return S!==0?(i=S&~d,i!==0?u=rt(i):(F&=S,F!==0?u=rt(F):o||(o=S&~e,o!==0&&(u=rt(o))))):(S=i&~d,S!==0?u=rt(S):F!==0?u=rt(F):o||(o=i&~e,o!==0&&(u=rt(o)))),u===0?0:r!==0&&r!==u&&(r&d)===0&&(d=u&-u,o=r&-r,d>=o||d===32&&(o&4194048)!==0)?r:u}function Ue(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function Da(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ur(){var e=or;return or<<=1,(or&4194048)===0&&(or=256),e}function va(){var e=ar;return ar<<=1,(ar&62914560)===0&&(ar=4194304),e}function zr(e){for(var r=[],o=0;31>o;o++)r.push(e);return r}function ir(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xa(e,r,o,i,u,d){var F=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var S=e.entanglements,P=e.expirationTimes,V=e.hiddenUpdates;for(o=F&~o;0<o;){var e0=31-R2(o),o0=1<<e0;S[e0]=0,P[e0]=-1;var $=V[e0];if($!==null)for(V[e0]=null,e0=0;e0<$.length;e0++){var Y=$[e0];Y!==null&&(Y.lane&=-536870913)}o&=~o0}i!==0&&sr(e,i,0),d!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=d&~(F&~r))}function sr(e,r,o){e.pendingLanes|=r,e.suspendedLanes&=~r;var i=31-R2(r);e.entangledLanes|=r,e.entanglements[i]=e.entanglements[i]|1073741824|o&4194090}function cr(e,r){var o=e.entangledLanes|=r;for(e=e.entanglements;o;){var i=31-R2(o),u=1<<i;u&r|e[i]&r&&(e[i]|=r),o&=~u}}function $n(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function M(){var e=G.p;return e!==0?e:(e=window.event,e===void 0?32:Uh(e.type))}function z(e,r){var o=G.p;try{return G.p=e,r()}finally{G.p=o}}var Z=Math.random().toString(36).slice(2),a0="__reactFiber$"+Z,c0="__reactProps$"+Z,p0="__reactContainer$"+Z,y0="__reactEvents$"+Z,C0="__reactListeners$"+Z,v0="__reactHandles$"+Z,F0="__reactResources$"+Z,x0="__reactMarker$"+Z;function g0(e){delete e[a0],delete e[c0],delete e[y0],delete e[C0],delete e[v0]}function S0(e){var r=e[a0];if(r)return r;for(var o=e.parentNode;o;){if(r=o[p0]||o[a0]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(e=Bh(e);e!==null;){if(o=e[a0])return o;e=Bh(e)}return r}e=o,o=e.parentNode}return null}function G0(e){if(e=e[a0]||e[p0]){var r=e.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return e}return null}function A2(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(l(33))}function f2(e){var r=e[F0];return r||(r=e[F0]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function _0(e){e[x0]=!0}var Z0=new Set,ze={};function X2(e,r){U2(e,r),U2(e+"Capture",r)}function U2(e,r){for(ze[e]=r,e=0;e<r.length;e++)Z0.add(r[e])}var ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wr={},Bt={};function nt(e){return P2.call(Bt,e)?!0:P2.call(Wr,e)?!1:ue.test(e)?Bt[e]=!0:(Wr[e]=!0,!1)}function ot(e,r,o){if(nt(r))if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var i=r.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+o)}}function at(e,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+o)}}function j0(e,r,o,i){if(i===null)e.removeAttribute(o);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(r,o,""+i)}}var D2,ur;function Ae(e){if(D2===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);D2=r&&r[1]||"",ur=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D2+e+ur}var s2=!1;function bt(e,r){if(!e||s2)return"";s2=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(r){var o0=function(){throw Error()};if(Object.defineProperty(o0.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o0,[])}catch(Y){var $=Y}Reflect.construct(e,[],o0)}else{try{o0.call()}catch(Y){$=Y}e.call(o0.prototype)}}else{try{throw Error()}catch(Y){$=Y}(o0=e())&&typeof o0.catch=="function"&&o0.catch(function(){})}}catch(Y){if(Y&&$&&typeof Y.stack=="string")return[Y.stack,$.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=i.DetermineComponentFrameRoot(),F=d[0],S=d[1];if(F&&S){var P=F.split(`
`),V=S.split(`
`);for(u=i=0;i<P.length&&!P[i].includes("DetermineComponentFrameRoot");)i++;for(;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;if(i===P.length||u===V.length)for(i=P.length-1,u=V.length-1;1<=i&&0<=u&&P[i]!==V[u];)u--;for(;1<=i&&0<=u;i--,u--)if(P[i]!==V[u]){if(i!==1||u!==1)do if(i--,u--,0>u||P[i]!==V[u]){var e0=`
`+P[i].replace(" at new "," at ");return e.displayName&&e0.includes("<anonymous>")&&(e0=e0.replace("<anonymous>",e.displayName)),e0}while(1<=i&&0<=u);break}}}finally{s2=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?Ae(o):""}function wa(e){switch(e.tag){case 26:case 27:case 5:return Ae(e.type);case 16:return Ae("Lazy");case 13:return Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return bt(e.type,!1);case 11:return bt(e.type.render,!1);case 1:return bt(e.type,!0);case 31:return Ae("Activity");default:return""}}function Fa(e){try{var r="";do r+=wa(e),e=e.return;while(e);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pf(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ov(e){var r=pf(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),i=""+e[r];if(!e.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,d=o.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return u.call(this)},set:function(F){i=""+F,d.call(this,F)}}),Object.defineProperty(e,r,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(F){i=""+F},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function Ba(e){e._valueTracker||(e._valueTracker=ov(e))}function mf(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var o=r.getValue(),i="";return e&&(i=pf(e)?e.checked?"true":"false":e.value),e=i,e!==o?(r.setValue(e),!0):!1}function ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var av=/[\n"\\]/g;function de(e){return e.replace(av,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Vi(e,r,o,i,u,d,F,S){e.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?e.type=F:e.removeAttribute("type"),r!=null?F==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+fe(r)):e.value!==""+fe(r)&&(e.value=""+fe(r)):F!=="submit"&&F!=="reset"||e.removeAttribute("value"),r!=null?Gi(e,F,fe(r)):o!=null?Gi(e,F,fe(o)):i!=null&&e.removeAttribute("value"),u==null&&d!=null&&(e.defaultChecked=!!d),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+fe(S):e.removeAttribute("name")}function Cf(e,r,o,i,u,d,F,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),r!=null||o!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;o=o!=null?""+fe(o):"",r=r!=null?""+fe(r):o,S||r===e.value||(e.value=r),e.defaultValue=r}i=i??u,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=S?e.checked:!!i,e.defaultChecked=!!i,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(e.name=F)}function Gi(e,r,o){r==="number"&&ba(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Hr(e,r,o,i){if(e=e.options,r){r={};for(var u=0;u<o.length;u++)r["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=r.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&i&&(e[o].defaultSelected=!0)}else{for(o=""+fe(o),r=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,i&&(e[u].defaultSelected=!0);return}r!==null||e[u].disabled||(r=e[u])}r!==null&&(r.selected=!0)}}function yf(e,r,o){if(r!=null&&(r=""+fe(r),r!==e.value&&(e.value=r),o==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=o!=null?""+fe(o):""}function gf(e,r,o,i){if(r==null){if(i!=null){if(o!=null)throw Error(l(92));if(A0(i)){if(1<i.length)throw Error(l(93));i=i[0]}o=i}o==null&&(o=""),r=o}o=fe(r),e.defaultValue=o,i=e.textContent,i===o&&i!==""&&i!==null&&(e.value=i)}function Vr(e,r){if(r){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=r;return}}e.textContent=r}var lv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Df(e,r,o){var i=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?i?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":i?e.setProperty(r,o):typeof o!="number"||o===0||lv.has(r)?r==="float"?e.cssFloat=o:e[r]=(""+o).trim():e[r]=o+"px"}function vf(e,r,o){if(r!=null&&typeof r!="object")throw Error(l(62));if(e=e.style,o!=null){for(var i in o)!o.hasOwnProperty(i)||r!=null&&r.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var u in r)i=r[u],r.hasOwnProperty(u)&&o[u]!==i&&Df(e,u,i)}else for(var d in r)r.hasOwnProperty(d)&&Df(e,d,r[d])}function qi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(e){return sv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var $i=null;function Yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gr=null,qr=null;function xf(e){var r=G0(e);if(r&&(e=r.stateNode)){var o=e[c0]||null;e:switch(e=r.stateNode,r.type){case"input":if(Vi(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+de(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var i=o[r];if(i!==e&&i.form===e.form){var u=i[c0]||null;if(!u)throw Error(l(90));Vi(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(r=0;r<o.length;r++)i=o[r],i.form===e.form&&mf(i)}break e;case"textarea":yf(e,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Hr(e,!!o.multiple,r,!1)}}}var Ki=!1;function wf(e,r,o){if(Ki)return e(r,o);Ki=!0;try{var i=e(r);return i}finally{if(Ki=!1,(Gr!==null||qr!==null)&&(fl(),Gr&&(r=Gr,e=qr,qr=Gr=null,xf(r),e)))for(r=0;r<e.length;r++)xf(e[r])}}function Kn(e,r){var o=e.stateNode;if(o===null)return null;var i=o[c0]||null;if(i===null)return null;o=i[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(l(231,r,typeof o));return o}var lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zi=!1;if(lt)try{var Zn={};Object.defineProperty(Zn,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Zn,Zn),window.removeEventListener("test",Zn,Zn)}catch{Zi=!1}var Nt=null,Xi=null,Sa=null;function Ff(){if(Sa)return Sa;var e,r=Xi,o=r.length,i,u="value"in Nt?Nt.value:Nt.textContent,d=u.length;for(e=0;e<o&&r[e]===u[e];e++);var F=o-e;for(i=1;i<=F&&r[o-i]===u[d-i];i++);return Sa=u.slice(e,1<i?1-i:void 0)}function Ra(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ea(){return!0}function Bf(){return!1}function q2(e){function r(o,i,u,d,F){this._reactName=o,this._targetInst=u,this.type=i,this.nativeEvent=d,this.target=F,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(o=e[S],this[S]=o?o(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ea:Bf,this.isPropagationStopped=Bf,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),r}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=q2(Ar),Xn=y({},Ar,{view:0,detail:0}),cv=q2(Xn),Qi,Ji,Qn,ka=y({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(Qi=e.screenX-Qn.screenX,Ji=e.screenY-Qn.screenY):Ji=Qi=0,Qn=e),Qi)},movementY:function(e){return"movementY"in e?e.movementY:Ji}}),bf=q2(ka),uv=y({},ka,{dataTransfer:0}),Av=q2(uv),fv=y({},Xn,{relatedTarget:0}),es=q2(fv),dv=y({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),hv=q2(dv),pv=y({},Ar,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mv=q2(pv),Cv=y({},Ar,{data:0}),Nf=q2(Cv),yv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vv(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=Dv[e])?!!r[e]:!1}function ts(){return vv}var xv=y({},Xn,{key:function(e){if(e.key){var r=yv[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Ra(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(e){return e.type==="keypress"?Ra(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ra(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wv=q2(xv),Fv=y({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sf=q2(Fv),Bv=y({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),bv=q2(Bv),Nv=y({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sv=q2(Nv),Rv=y({},ka,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ev=q2(Rv),_v=y({},Ar,{newState:0,oldState:0}),kv=q2(_v),Tv=[9,13,27,32],rs=lt&&"CompositionEvent"in window,Jn=null;lt&&"documentMode"in document&&(Jn=document.documentMode);var Pv=lt&&"TextEvent"in window&&!Jn,Rf=lt&&(!rs||Jn&&8<Jn&&11>=Jn),Ef=" ",_f=!1;function kf(e,r){switch(e){case"keyup":return Tv.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function Mv(e,r){switch(e){case"compositionend":return Tf(r);case"keypress":return r.which!==32?null:(_f=!0,Ef);case"textInput":return e=r.data,e===Ef&&_f?null:e;default:return null}}function Ov(e,r){if($r)return e==="compositionend"||!rs&&kf(e,r)?(e=Ff(),Sa=Xi=Nt=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Rf&&r.locale!=="ko"?null:r.data;default:return null}}var Lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pf(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Lv[e.type]:r==="textarea"}function Mf(e,r,o,i){Gr?qr?qr.push(i):qr=[i]:Gr=i,r=yl(r,"onChange"),0<r.length&&(o=new _a("onChange","change",null,o,i),e.push({event:o,listeners:r}))}var eo=null,to=null;function jv(e){ph(e,0)}function Ta(e){var r=A2(e);if(mf(r))return e}function Of(e,r){if(e==="change")return r}var Lf=!1;if(lt){var ns;if(lt){var os="oninput"in document;if(!os){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),os=typeof jf.oninput=="function"}ns=os}else ns=!1;Lf=ns&&(!document.documentMode||9<document.documentMode)}function If(){eo&&(eo.detachEvent("onpropertychange",Uf),to=eo=null)}function Uf(e){if(e.propertyName==="value"&&Ta(to)){var r=[];Mf(r,to,e,Yi(e)),wf(jv,r)}}function Iv(e,r,o){e==="focusin"?(If(),eo=r,to=o,eo.attachEvent("onpropertychange",Uf)):e==="focusout"&&If()}function Uv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ta(to)}function zv(e,r){if(e==="click")return Ta(r)}function Wv(e,r){if(e==="input"||e==="change")return Ta(r)}function Hv(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var Q2=typeof Object.is=="function"?Object.is:Hv;function ro(e,r){if(Q2(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var o=Object.keys(e),i=Object.keys(r);if(o.length!==i.length)return!1;for(i=0;i<o.length;i++){var u=o[i];if(!P2.call(r,u)||!Q2(e[u],r[u]))return!1}return!0}function zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wf(e,r){var o=zf(e);e=0;for(var i;o;){if(o.nodeType===3){if(i=e+o.textContent.length,e<=r&&i>=r)return{node:o,offset:r-e};e=i}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zf(o)}}function Hf(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Hf(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Vf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=ba(e.document);r instanceof e.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)e=r.contentWindow;else break;r=ba(e.document)}return r}function as(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Vv=lt&&"documentMode"in document&&11>=document.documentMode,Yr=null,ls=null,no=null,is=!1;function Gf(e,r,o){var i=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;is||Yr==null||Yr!==ba(i)||(i=Yr,"selectionStart"in i&&as(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),no&&ro(no,i)||(no=i,i=yl(ls,"onSelect"),0<i.length&&(r=new _a("onSelect","select",null,r,o),e.push({event:r,listeners:i}),r.target=Yr)))}function fr(e,r){var o={};return o[e.toLowerCase()]=r.toLowerCase(),o["Webkit"+e]="webkit"+r,o["Moz"+e]="moz"+r,o}var Kr={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},ss={},qf={};lt&&(qf=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function dr(e){if(ss[e])return ss[e];if(!Kr[e])return e;var r=Kr[e],o;for(o in r)if(r.hasOwnProperty(o)&&o in qf)return ss[e]=r[o];return e}var $f=dr("animationend"),Yf=dr("animationiteration"),Kf=dr("animationstart"),Gv=dr("transitionrun"),qv=dr("transitionstart"),$v=dr("transitioncancel"),Zf=dr("transitionend"),Xf=new Map,cs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cs.push("scrollEnd");function _e(e,r){Xf.set(e,r),X2(r,[e])}var Qf=new WeakMap;function he(e,r){if(typeof e=="object"&&e!==null){var o=Qf.get(e);return o!==void 0?o:(r={value:e,source:r,stack:Fa(r)},Qf.set(e,r),r)}return{value:e,source:r,stack:Fa(r)}}var pe=[],Zr=0,us=0;function Pa(){for(var e=Zr,r=us=Zr=0;r<e;){var o=pe[r];pe[r++]=null;var i=pe[r];pe[r++]=null;var u=pe[r];pe[r++]=null;var d=pe[r];if(pe[r++]=null,i!==null&&u!==null){var F=i.pending;F===null?u.next=u:(u.next=F.next,F.next=u),i.pending=u}d!==0&&Jf(o,u,d)}}function Ma(e,r,o,i){pe[Zr++]=e,pe[Zr++]=r,pe[Zr++]=o,pe[Zr++]=i,us|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function As(e,r,o,i){return Ma(e,r,o,i),Oa(e)}function Xr(e,r){return Ma(e,null,null,r),Oa(e)}function Jf(e,r,o){e.lanes|=o;var i=e.alternate;i!==null&&(i.lanes|=o);for(var u=!1,d=e.return;d!==null;)d.childLanes|=o,i=d.alternate,i!==null&&(i.childLanes|=o),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(u=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,u&&r!==null&&(u=31-R2(o),e=d.hiddenUpdates,i=e[u],i===null?e[u]=[r]:i.push(r),r.lane=o|536870912),d):null}function Oa(e){if(50<Ro)throw Ro=0,Cc=null,Error(l(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var Qr={};function Yv(e,r,o,i){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function J2(e,r,o,i){return new Yv(e,r,o,i)}function fs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function it(e,r){var o=e.alternate;return o===null?(o=J2(e.tag,r,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=r,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,r=e.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function ed(e,r){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,r=o.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function La(e,r,o,i,u,d){var F=0;if(i=e,typeof e=="function")fs(e)&&(F=1);else if(typeof e=="string")F=Z7(e,o,f0.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case H:return e=J2(31,o,r,u),e.elementType=H,e.lanes=d,e;case w:return hr(o.children,u,d,r);case x:F=8,u|=24;break;case B:return e=J2(12,o,r,u|2),e.elementType=B,e.lanes=d,e;case T:return e=J2(13,o,r,u),e.elementType=T,e.lanes=d,e;case E:return e=J2(19,o,r,u),e.elementType=E,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case b:case N:F=10;break e;case R:F=9;break e;case _:F=11;break e;case O:F=14;break e;case U:F=16,i=null;break e}F=29,o=Error(l(130,e===null?"null":typeof e,"")),i=null}return r=J2(F,o,r,u),r.elementType=e,r.type=i,r.lanes=d,r}function hr(e,r,o,i){return e=J2(7,e,i,r),e.lanes=o,e}function ds(e,r,o){return e=J2(6,e,null,r),e.lanes=o,e}function hs(e,r,o){return r=J2(4,e.children!==null?e.children:[],e.key,r),r.lanes=o,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var Jr=[],en=0,ja=null,Ia=0,me=[],Ce=0,pr=null,st=1,ct="";function mr(e,r){Jr[en++]=Ia,Jr[en++]=ja,ja=e,Ia=r}function td(e,r,o){me[Ce++]=st,me[Ce++]=ct,me[Ce++]=pr,pr=e;var i=st;e=ct;var u=32-R2(i)-1;i&=~(1<<u),o+=1;var d=32-R2(r)+u;if(30<d){var F=u-u%5;d=(i&(1<<F)-1).toString(32),i>>=F,u-=F,st=1<<32-R2(r)+u|o<<u|i,ct=d+e}else st=1<<d|o<<u|i,ct=e}function ps(e){e.return!==null&&(mr(e,1),td(e,1,0))}function ms(e){for(;e===ja;)ja=Jr[--en],Jr[en]=null,Ia=Jr[--en],Jr[en]=null;for(;e===pr;)pr=me[--Ce],me[Ce]=null,ct=me[--Ce],me[Ce]=null,st=me[--Ce],me[Ce]=null}var z2=null,d2=null,q0=!1,Cr=null,We=!1,Cs=Error(l(519));function yr(e){var r=Error(l(418,""));throw lo(he(r,e)),Cs}function rd(e){var r=e.stateNode,o=e.type,i=e.memoizedProps;switch(r[a0]=e,r[c0]=i,o){case"dialog":z0("cancel",r),z0("close",r);break;case"iframe":case"object":case"embed":z0("load",r);break;case"video":case"audio":for(o=0;o<_o.length;o++)z0(_o[o],r);break;case"source":z0("error",r);break;case"img":case"image":case"link":z0("error",r),z0("load",r);break;case"details":z0("toggle",r);break;case"input":z0("invalid",r),Cf(r,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Ba(r);break;case"select":z0("invalid",r);break;case"textarea":z0("invalid",r),gf(r,i.value,i.defaultValue,i.children),Ba(r)}o=i.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||i.suppressHydrationWarning===!0||gh(r.textContent,o)?(i.popover!=null&&(z0("beforetoggle",r),z0("toggle",r)),i.onScroll!=null&&z0("scroll",r),i.onScrollEnd!=null&&z0("scrollend",r),i.onClick!=null&&(r.onclick=gl),r=!0):r=!1,r||yr(e)}function nd(e){for(z2=e.return;z2;)switch(z2.tag){case 5:case 13:We=!1;return;case 27:case 3:We=!0;return;default:z2=z2.return}}function oo(e){if(e!==z2)return!1;if(!q0)return nd(e),q0=!0,!1;var r=e.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Tc(e.type,e.memoizedProps)),o=!o),o&&d2&&yr(e),nd(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8)if(o=e.data,o==="/$"){if(r===0){d2=Te(e.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;e=e.nextSibling}d2=null}}else r===27?(r=d2,Ht(e.type)?(e=Lc,Lc=null,d2=e):d2=r):d2=z2?Te(e.stateNode.nextSibling):null;return!0}function ao(){d2=z2=null,q0=!1}function od(){var e=Cr;return e!==null&&(K2===null?K2=e:K2.push.apply(K2,e),Cr=null),e}function lo(e){Cr===null?Cr=[e]:Cr.push(e)}var ys=Q(null),gr=null,ut=null;function St(e,r,o){r0(ys,r._currentValue),r._currentValue=o}function At(e){e._currentValue=ys.current,J(ys)}function gs(e,r,o){for(;e!==null;){var i=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,i!==null&&(i.childLanes|=r)):i!==null&&(i.childLanes&r)!==r&&(i.childLanes|=r),e===o)break;e=e.return}}function Ds(e,r,o,i){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var d=u.dependencies;if(d!==null){var F=u.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=u;for(var P=0;P<r.length;P++)if(S.context===r[P]){d.lanes|=o,S=d.alternate,S!==null&&(S.lanes|=o),gs(d.return,o,e),i||(F=null);break e}d=S.next}}else if(u.tag===18){if(F=u.return,F===null)throw Error(l(341));F.lanes|=o,d=F.alternate,d!==null&&(d.lanes|=o),gs(F,o,e),F=null}else F=u.child;if(F!==null)F.return=u;else for(F=u;F!==null;){if(F===e){F=null;break}if(u=F.sibling,u!==null){u.return=F.return,F=u;break}F=F.return}u=F}}function io(e,r,o,i){e=null;for(var u=r,d=!1;u!==null;){if(!d){if((u.flags&524288)!==0)d=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var F=u.alternate;if(F===null)throw Error(l(387));if(F=F.memoizedProps,F!==null){var S=u.type;Q2(u.pendingProps.value,F.value)||(e!==null?e.push(S):e=[S])}}else if(u===$0.current){if(F=u.alternate,F===null)throw Error(l(387));F.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(Lo):e=[Lo])}u=u.return}e!==null&&Ds(r,e,o,i),r.flags|=262144}function Ua(e){for(e=e.firstContext;e!==null;){if(!Q2(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Dr(e){gr=e,ut=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function M2(e){return ad(gr,e)}function za(e,r){return gr===null&&Dr(e),ad(e,r)}function ad(e,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ut===null){if(e===null)throw Error(l(308));ut=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else ut=ut.next=r;return o}var Kv=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(o,i){e.push(i)}};this.abort=function(){r.aborted=!0,e.forEach(function(o){return o()})}},Zv=t.unstable_scheduleCallback,Xv=t.unstable_NormalPriority,w2={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vs(){return{controller:new Kv,data:new Map,refCount:0}}function so(e){e.refCount--,e.refCount===0&&Zv(Xv,function(){e.controller.abort()})}var co=null,xs=0,tn=0,rn=null;function Qv(e,r){if(co===null){var o=co=[];xs=0,tn=Fc(),rn={status:"pending",value:void 0,then:function(i){o.push(i)}}}return xs++,r.then(ld,ld),r}function ld(){if(--xs===0&&co!==null){rn!==null&&(rn.status="fulfilled");var e=co;co=null,tn=0,rn=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function Jv(e,r){var o=[],i={status:"pending",value:null,reason:null,then:function(u){o.push(u)}};return e.then(function(){i.status="fulfilled",i.value=r;for(var u=0;u<o.length;u++)(0,o[u])(r)},function(u){for(i.status="rejected",i.reason=u,u=0;u<o.length;u++)(0,o[u])(void 0)}),i}var id=L.S;L.S=function(e,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Qv(e,r),id!==null&&id(e,r)};var vr=Q(null);function ws(){var e=vr.current;return e!==null?e:t2.pooledCache}function Wa(e,r){r===null?r0(vr,vr.current):r0(vr,r.pool)}function sd(){var e=ws();return e===null?null:{parent:w2._currentValue,pool:e}}var uo=Error(l(460)),cd=Error(l(474)),Ha=Error(l(542)),Fs={then:function(){}};function ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Va(){}function Ad(e,r,o){switch(o=e[o],o===void 0?e.push(r):o!==r&&(r.then(Va,Va),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,dd(e),e;default:if(typeof r.status=="string")r.then(Va,Va);else{if(e=t2,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=r,e.status="pending",e.then(function(i){if(r.status==="pending"){var u=r;u.status="fulfilled",u.value=i}},function(i){if(r.status==="pending"){var u=r;u.status="rejected",u.reason=i}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,dd(e),e}throw Ao=r,uo}}var Ao=null;function fd(){if(Ao===null)throw Error(l(459));var e=Ao;return Ao=null,e}function dd(e){if(e===uo||e===Ha)throw Error(l(483))}var Rt=!1;function Bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bs(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Et(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _t(e,r,o){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Y0&2)!==0){var u=i.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),i.pending=r,r=Oa(e),Jf(e,null,o),r}return Ma(e,i,r,o),Oa(e)}function fo(e,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var i=r.lanes;i&=e.pendingLanes,o|=i,r.lanes=o,cr(e,o)}}function Ns(e,r){var o=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,o===i)){var u=null,d=null;if(o=o.firstBaseUpdate,o!==null){do{var F={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};d===null?u=d=F:d=d.next=F,o=o.next}while(o!==null);d===null?u=d=r:d=d.next=r}else u=d=r;o={baseState:i.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:i.shared,callbacks:i.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=r:e.next=r,o.lastBaseUpdate=r}var Ss=!1;function ho(){if(Ss){var e=rn;if(e!==null)throw e}}function po(e,r,o,i){Ss=!1;var u=e.updateQueue;Rt=!1;var d=u.firstBaseUpdate,F=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var P=S,V=P.next;P.next=null,F===null?d=V:F.next=V,F=P;var e0=e.alternate;e0!==null&&(e0=e0.updateQueue,S=e0.lastBaseUpdate,S!==F&&(S===null?e0.firstBaseUpdate=V:S.next=V,e0.lastBaseUpdate=P))}if(d!==null){var o0=u.baseState;F=0,e0=V=P=null,S=d;do{var $=S.lane&-536870913,Y=$!==S.lane;if(Y?(H0&$)===$:(i&$)===$){$!==0&&$===tn&&(Ss=!0),e0!==null&&(e0=e0.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var R0=e,B0=S;$=r;var J0=o;switch(B0.tag){case 1:if(R0=B0.payload,typeof R0=="function"){o0=R0.call(J0,o0,$);break e}o0=R0;break e;case 3:R0.flags=R0.flags&-65537|128;case 0:if(R0=B0.payload,$=typeof R0=="function"?R0.call(J0,o0,$):R0,$==null)break e;o0=y({},o0,$);break e;case 2:Rt=!0}}$=S.callback,$!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=u.callbacks,Y===null?u.callbacks=[$]:Y.push($))}else Y={lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},e0===null?(V=e0=Y,P=o0):e0=e0.next=Y,F|=$;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,u.lastBaseUpdate=Y,u.shared.pending=null}}while(!0);e0===null&&(P=o0),u.baseState=P,u.firstBaseUpdate=V,u.lastBaseUpdate=e0,d===null&&(u.shared.lanes=0),It|=F,e.lanes=F,e.memoizedState=o0}}function hd(e,r){if(typeof e!="function")throw Error(l(191,e));e.call(r)}function pd(e,r){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)hd(o[e],r)}var nn=Q(null),Ga=Q(0);function md(e,r){e=yt,r0(Ga,e),r0(nn,r),yt=e|r.baseLanes}function Rs(){r0(Ga,yt),r0(nn,nn.current)}function Es(){yt=Ga.current,J(nn),J(Ga)}var kt=0,P0=null,X0=null,v2=null,qa=!1,on=!1,xr=!1,$a=0,mo=0,an=null,e7=0;function C2(){throw Error(l(321))}function _s(e,r){if(r===null)return!1;for(var o=0;o<r.length&&o<e.length;o++)if(!Q2(e[o],r[o]))return!1;return!0}function ks(e,r,o,i,u,d){return kt=d,P0=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,L.H=e===null||e.memoizedState===null?Jd:e3,xr=!1,d=o(i,u),xr=!1,on&&(d=yd(r,o,i,u)),Cd(e),d}function Cd(e){L.H=Ja;var r=X0!==null&&X0.next!==null;if(kt=0,v2=X0=P0=null,qa=!1,mo=0,an=null,r)throw Error(l(300));e===null||B2||(e=e.dependencies,e!==null&&Ua(e)&&(B2=!0))}function yd(e,r,o,i){P0=e;var u=0;do{if(on&&(an=null),mo=0,on=!1,25<=u)throw Error(l(301));if(u+=1,v2=X0=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}L.H=i7,d=r(o,i)}while(on);return d}function t7(){var e=L.H,r=e.useState()[0];return r=typeof r.then=="function"?Co(r):r,e=e.useState()[0],(X0!==null?X0.memoizedState:null)!==e&&(P0.flags|=1024),r}function Ts(){var e=$a!==0;return $a=0,e}function Ps(e,r,o){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~o}function Ms(e){if(qa){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}qa=!1}kt=0,v2=X0=P0=null,on=!1,mo=$a=0,an=null}function $2(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return v2===null?P0.memoizedState=v2=e:v2=v2.next=e,v2}function x2(){if(X0===null){var e=P0.alternate;e=e!==null?e.memoizedState:null}else e=X0.next;var r=v2===null?P0.memoizedState:v2.next;if(r!==null)v2=r,X0=e;else{if(e===null)throw P0.alternate===null?Error(l(467)):Error(l(310));X0=e,e={memoizedState:X0.memoizedState,baseState:X0.baseState,baseQueue:X0.baseQueue,queue:X0.queue,next:null},v2===null?P0.memoizedState=v2=e:v2=v2.next=e}return v2}function Os(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Co(e){var r=mo;return mo+=1,an===null&&(an=[]),e=Ad(an,e,r),r=P0,(v2===null?r.memoizedState:v2.next)===null&&(r=r.alternate,L.H=r===null||r.memoizedState===null?Jd:e3),e}function Ya(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Co(e);if(e.$$typeof===N)return M2(e)}throw Error(l(438,String(e)))}function Ls(e){var r=null,o=P0.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var i=P0.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(r={data:i.data.map(function(u){return u.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Os(),P0.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(e),i=0;i<e;i++)o[i]=n0;return r.index++,o}function ft(e,r){return typeof r=="function"?r(e):r}function Ka(e){var r=x2();return js(r,X0,e)}function js(e,r,o){var i=e.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=o;var u=e.baseQueue,d=i.pending;if(d!==null){if(u!==null){var F=u.next;u.next=d.next,d.next=F}r.baseQueue=u=d,i.pending=null}if(d=e.baseState,u===null)e.memoizedState=d;else{r=u.next;var S=F=null,P=null,V=r,e0=!1;do{var o0=V.lane&-536870913;if(o0!==V.lane?(H0&o0)===o0:(kt&o0)===o0){var $=V.revertLane;if($===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),o0===tn&&(e0=!0);else if((kt&$)===$){V=V.next,$===tn&&(e0=!0);continue}else o0={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},P===null?(S=P=o0,F=d):P=P.next=o0,P0.lanes|=$,It|=$;o0=V.action,xr&&o(d,o0),d=V.hasEagerState?V.eagerState:o(d,o0)}else $={lane:o0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},P===null?(S=P=$,F=d):P=P.next=$,P0.lanes|=o0,It|=o0;V=V.next}while(V!==null&&V!==r);if(P===null?F=d:P.next=S,!Q2(d,e.memoizedState)&&(B2=!0,e0&&(o=rn,o!==null)))throw o;e.memoizedState=d,e.baseState=F,e.baseQueue=P,i.lastRenderedState=d}return u===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Is(e){var r=x2(),o=r.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=e;var i=o.dispatch,u=o.pending,d=r.memoizedState;if(u!==null){o.pending=null;var F=u=u.next;do d=e(d,F.action),F=F.next;while(F!==u);Q2(d,r.memoizedState)||(B2=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),o.lastRenderedState=d}return[d,i]}function gd(e,r,o){var i=P0,u=x2(),d=q0;if(d){if(o===void 0)throw Error(l(407));o=o()}else o=r();var F=!Q2((X0||u).memoizedState,o);F&&(u.memoizedState=o,B2=!0),u=u.queue;var S=xd.bind(null,i,u,e);if(yo(2048,8,S,[e]),u.getSnapshot!==r||F||v2!==null&&v2.memoizedState.tag&1){if(i.flags|=2048,ln(9,Za(),vd.bind(null,i,u,o,r),null),t2===null)throw Error(l(349));d||(kt&124)!==0||Dd(i,r,o)}return o}function Dd(e,r,o){e.flags|=16384,e={getSnapshot:r,value:o},r=P0.updateQueue,r===null?(r=Os(),P0.updateQueue=r,r.stores=[e]):(o=r.stores,o===null?r.stores=[e]:o.push(e))}function vd(e,r,o,i){r.value=o,r.getSnapshot=i,wd(r)&&Fd(e)}function xd(e,r,o){return o(function(){wd(r)&&Fd(e)})}function wd(e){var r=e.getSnapshot;e=e.value;try{var o=r();return!Q2(e,o)}catch{return!0}}function Fd(e){var r=Xr(e,2);r!==null&&oe(r,e,2)}function Us(e){var r=$2();if(typeof e=="function"){var o=e;if(e=o(),xr){Ee(!0);try{o()}finally{Ee(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:e},r}function Bd(e,r,o,i){return e.baseState=o,js(e,X0,typeof i=="function"?i:ft)}function r7(e,r,o,i,u){if(Qa(e))throw Error(l(485));if(e=r.action,e!==null){var d={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){d.listeners.push(F)}};L.T!==null?o(!0):d.isTransition=!1,i(d),o=r.pending,o===null?(d.next=r.pending=d,bd(r,d)):(d.next=o.next,r.pending=o.next=d)}}function bd(e,r){var o=r.action,i=r.payload,u=e.state;if(r.isTransition){var d=L.T,F={};L.T=F;try{var S=o(u,i),P=L.S;P!==null&&P(F,S),Nd(e,r,S)}catch(V){zs(e,r,V)}finally{L.T=d}}else try{d=o(u,i),Nd(e,r,d)}catch(V){zs(e,r,V)}}function Nd(e,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(i){Sd(e,r,i)},function(i){return zs(e,r,i)}):Sd(e,r,o)}function Sd(e,r,o){r.status="fulfilled",r.value=o,Rd(r),e.state=o,r=e.pending,r!==null&&(o=r.next,o===r?e.pending=null:(o=o.next,r.next=o,bd(e,o)))}function zs(e,r,o){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do r.status="rejected",r.reason=o,Rd(r),r=r.next;while(r!==i)}e.action=null}function Rd(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function Ed(e,r){return r}function _d(e,r){if(q0){var o=t2.formState;if(o!==null){e:{var i=P0;if(q0){if(d2){t:{for(var u=d2,d=We;u.nodeType!==8;){if(!d){u=null;break t}if(u=Te(u.nextSibling),u===null){u=null;break t}}d=u.data,u=d==="F!"||d==="F"?u:null}if(u){d2=Te(u.nextSibling),i=u.data==="F!";break e}}yr(i)}i=!1}i&&(r=o[0])}}return o=$2(),o.memoizedState=o.baseState=r,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ed,lastRenderedState:r},o.queue=i,o=Zd.bind(null,P0,i),i.dispatch=o,i=Us(!1),d=qs.bind(null,P0,!1,i.queue),i=$2(),u={state:r,dispatch:null,action:e,pending:null},i.queue=u,o=r7.bind(null,P0,u,d,o),u.dispatch=o,i.memoizedState=e,[r,o,!1]}function kd(e){var r=x2();return Td(r,X0,e)}function Td(e,r,o){if(r=js(e,r,Ed)[0],e=Ka(ft)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var i=Co(r)}catch(F){throw F===uo?Ha:F}else i=r;r=x2();var u=r.queue,d=u.dispatch;return o!==r.memoizedState&&(P0.flags|=2048,ln(9,Za(),n7.bind(null,u,o),null)),[i,d,e]}function n7(e,r){e.action=r}function Pd(e){var r=x2(),o=X0;if(o!==null)return Td(r,o,e);x2(),r=r.memoizedState,o=x2();var i=o.queue.dispatch;return o.memoizedState=e,[r,i,!1]}function ln(e,r,o,i){return e={tag:e,create:o,deps:i,inst:r,next:null},r=P0.updateQueue,r===null&&(r=Os(),P0.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=e.next=e:(i=o.next,o.next=e,e.next=i,r.lastEffect=e),e}function Za(){return{destroy:void 0,resource:void 0}}function Md(){return x2().memoizedState}function Xa(e,r,o,i){var u=$2();i=i===void 0?null:i,P0.flags|=e,u.memoizedState=ln(1|r,Za(),o,i)}function yo(e,r,o,i){var u=x2();i=i===void 0?null:i;var d=u.memoizedState.inst;X0!==null&&i!==null&&_s(i,X0.memoizedState.deps)?u.memoizedState=ln(r,d,o,i):(P0.flags|=e,u.memoizedState=ln(1|r,d,o,i))}function Od(e,r){Xa(8390656,8,e,r)}function Ld(e,r){yo(2048,8,e,r)}function jd(e,r){return yo(4,2,e,r)}function Id(e,r){return yo(4,4,e,r)}function Ud(e,r){if(typeof r=="function"){e=e();var o=r(e);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function zd(e,r,o){o=o!=null?o.concat([e]):null,yo(4,4,Ud.bind(null,r,e),o)}function Ws(){}function Wd(e,r){var o=x2();r=r===void 0?null:r;var i=o.memoizedState;return r!==null&&_s(r,i[1])?i[0]:(o.memoizedState=[e,r],e)}function Hd(e,r){var o=x2();r=r===void 0?null:r;var i=o.memoizedState;if(r!==null&&_s(r,i[1]))return i[0];if(i=e(),xr){Ee(!0);try{e()}finally{Ee(!1)}}return o.memoizedState=[i,r],i}function Hs(e,r,o){return o===void 0||(kt&1073741824)!==0?e.memoizedState=r:(e.memoizedState=o,e=q3(),P0.lanes|=e,It|=e,o)}function Vd(e,r,o,i){return Q2(o,r)?o:nn.current!==null?(e=Hs(e,o,i),Q2(e,r)||(B2=!0),e):(kt&42)===0?(B2=!0,e.memoizedState=o):(e=q3(),P0.lanes|=e,It|=e,r)}function Gd(e,r,o,i,u){var d=G.p;G.p=d!==0&&8>d?d:8;var F=L.T,S={};L.T=S,qs(e,!1,r,o);try{var P=u(),V=L.S;if(V!==null&&V(S,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var e0=Jv(P,i);go(e,r,e0,ne(e))}else go(e,r,i,ne(e))}catch(o0){go(e,r,{then:function(){},status:"rejected",reason:o0},ne())}finally{G.p=d,L.T=F}}function o7(){}function Vs(e,r,o,i){if(e.tag!==5)throw Error(l(476));var u=qd(e).queue;Gd(e,u,r,X,o===null?o7:function(){return $d(e),o(i)})}function qd(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:X},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ft,lastRenderedState:o},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function $d(e){var r=qd(e).next.queue;go(e,r,{},ne())}function Gs(){return M2(Lo)}function Yd(){return x2().memoizedState}function Kd(){return x2().memoizedState}function a7(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var o=ne();e=Et(o);var i=_t(r,e,o);i!==null&&(oe(i,r,o),fo(i,r,o)),r={cache:vs()},e.payload=r;return}r=r.return}}function l7(e,r,o){var i=ne();o={lane:i,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Qa(e)?Xd(r,o):(o=As(e,r,o,i),o!==null&&(oe(o,e,i),Qd(o,r,i)))}function Zd(e,r,o){var i=ne();go(e,r,o,i)}function go(e,r,o,i){var u={lane:i,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Xd(r,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var F=r.lastRenderedState,S=d(F,o);if(u.hasEagerState=!0,u.eagerState=S,Q2(S,F))return Ma(e,r,u,0),t2===null&&Pa(),!1}catch{}finally{}if(o=As(e,r,u,i),o!==null)return oe(o,e,i),Qd(o,r,i),!0}return!1}function qs(e,r,o,i){if(i={lane:2,revertLane:Fc(),action:i,hasEagerState:!1,eagerState:null,next:null},Qa(e)){if(r)throw Error(l(479))}else r=As(e,o,i,2),r!==null&&oe(r,e,2)}function Qa(e){var r=e.alternate;return e===P0||r!==null&&r===P0}function Xd(e,r){on=qa=!0;var o=e.pending;o===null?r.next=r:(r.next=o.next,o.next=r),e.pending=r}function Qd(e,r,o){if((o&4194048)!==0){var i=r.lanes;i&=e.pendingLanes,o|=i,r.lanes=o,cr(e,o)}}var Ja={readContext:M2,use:Ya,useCallback:C2,useContext:C2,useEffect:C2,useImperativeHandle:C2,useLayoutEffect:C2,useInsertionEffect:C2,useMemo:C2,useReducer:C2,useRef:C2,useState:C2,useDebugValue:C2,useDeferredValue:C2,useTransition:C2,useSyncExternalStore:C2,useId:C2,useHostTransitionStatus:C2,useFormState:C2,useActionState:C2,useOptimistic:C2,useMemoCache:C2,useCacheRefresh:C2},Jd={readContext:M2,use:Ya,useCallback:function(e,r){return $2().memoizedState=[e,r===void 0?null:r],e},useContext:M2,useEffect:Od,useImperativeHandle:function(e,r,o){o=o!=null?o.concat([e]):null,Xa(4194308,4,Ud.bind(null,r,e),o)},useLayoutEffect:function(e,r){return Xa(4194308,4,e,r)},useInsertionEffect:function(e,r){Xa(4,2,e,r)},useMemo:function(e,r){var o=$2();r=r===void 0?null:r;var i=e();if(xr){Ee(!0);try{e()}finally{Ee(!1)}}return o.memoizedState=[i,r],i},useReducer:function(e,r,o){var i=$2();if(o!==void 0){var u=o(r);if(xr){Ee(!0);try{o(r)}finally{Ee(!1)}}}else u=r;return i.memoizedState=i.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},i.queue=e,e=e.dispatch=l7.bind(null,P0,e),[i.memoizedState,e]},useRef:function(e){var r=$2();return e={current:e},r.memoizedState=e},useState:function(e){e=Us(e);var r=e.queue,o=Zd.bind(null,P0,r);return r.dispatch=o,[e.memoizedState,o]},useDebugValue:Ws,useDeferredValue:function(e,r){var o=$2();return Hs(o,e,r)},useTransition:function(){var e=Us(!1);return e=Gd.bind(null,P0,e.queue,!0,!1),$2().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,o){var i=P0,u=$2();if(q0){if(o===void 0)throw Error(l(407));o=o()}else{if(o=r(),t2===null)throw Error(l(349));(H0&124)!==0||Dd(i,r,o)}u.memoizedState=o;var d={value:o,getSnapshot:r};return u.queue=d,Od(xd.bind(null,i,d,e),[e]),i.flags|=2048,ln(9,Za(),vd.bind(null,i,d,o,r),null),o},useId:function(){var e=$2(),r=t2.identifierPrefix;if(q0){var o=ct,i=st;o=(i&~(1<<32-R2(i)-1)).toString(32)+o,r=""+r+"R"+o,o=$a++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=e7++,r=""+r+"r"+o.toString(32)+"";return e.memoizedState=r},useHostTransitionStatus:Gs,useFormState:_d,useActionState:_d,useOptimistic:function(e){var r=$2();r.memoizedState=r.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=qs.bind(null,P0,!0,o),o.dispatch=r,[e,r]},useMemoCache:Ls,useCacheRefresh:function(){return $2().memoizedState=a7.bind(null,P0)}},e3={readContext:M2,use:Ya,useCallback:Wd,useContext:M2,useEffect:Ld,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Id,useMemo:Hd,useReducer:Ka,useRef:Md,useState:function(){return Ka(ft)},useDebugValue:Ws,useDeferredValue:function(e,r){var o=x2();return Vd(o,X0.memoizedState,e,r)},useTransition:function(){var e=Ka(ft)[0],r=x2().memoizedState;return[typeof e=="boolean"?e:Co(e),r]},useSyncExternalStore:gd,useId:Yd,useHostTransitionStatus:Gs,useFormState:kd,useActionState:kd,useOptimistic:function(e,r){var o=x2();return Bd(o,X0,e,r)},useMemoCache:Ls,useCacheRefresh:Kd},i7={readContext:M2,use:Ya,useCallback:Wd,useContext:M2,useEffect:Ld,useImperativeHandle:zd,useInsertionEffect:jd,useLayoutEffect:Id,useMemo:Hd,useReducer:Is,useRef:Md,useState:function(){return Is(ft)},useDebugValue:Ws,useDeferredValue:function(e,r){var o=x2();return X0===null?Hs(o,e,r):Vd(o,X0.memoizedState,e,r)},useTransition:function(){var e=Is(ft)[0],r=x2().memoizedState;return[typeof e=="boolean"?e:Co(e),r]},useSyncExternalStore:gd,useId:Yd,useHostTransitionStatus:Gs,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,r){var o=x2();return X0!==null?Bd(o,X0,e,r):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Ls,useCacheRefresh:Kd},sn=null,Do=0;function el(e){var r=Do;return Do+=1,sn===null&&(sn=[]),Ad(sn,e,r)}function vo(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function tl(e,r){throw r.$$typeof===m?Error(l(525)):(e=Object.prototype.toString.call(r),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function t3(e){var r=e._init;return r(e._payload)}function r3(e){function r(I,j){if(e){var W=I.deletions;W===null?(I.deletions=[j],I.flags|=16):W.push(j)}}function o(I,j){if(!e)return null;for(;j!==null;)r(I,j),j=j.sibling;return null}function i(I){for(var j=new Map;I!==null;)I.key!==null?j.set(I.key,I):j.set(I.index,I),I=I.sibling;return j}function u(I,j){return I=it(I,j),I.index=0,I.sibling=null,I}function d(I,j,W){return I.index=W,e?(W=I.alternate,W!==null?(W=W.index,W<j?(I.flags|=67108866,j):W):(I.flags|=67108866,j)):(I.flags|=1048576,j)}function F(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function S(I,j,W,t0){return j===null||j.tag!==6?(j=ds(W,I.mode,t0),j.return=I,j):(j=u(j,W),j.return=I,j)}function P(I,j,W,t0){var d0=W.type;return d0===w?e0(I,j,W.props.children,t0,W.key):j!==null&&(j.elementType===d0||typeof d0=="object"&&d0!==null&&d0.$$typeof===U&&t3(d0)===j.type)?(j=u(j,W.props),vo(j,W),j.return=I,j):(j=La(W.type,W.key,W.props,null,I.mode,t0),vo(j,W),j.return=I,j)}function V(I,j,W,t0){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=hs(W,I.mode,t0),j.return=I,j):(j=u(j,W.children||[]),j.return=I,j)}function e0(I,j,W,t0,d0){return j===null||j.tag!==7?(j=hr(W,I.mode,t0,d0),j.return=I,j):(j=u(j,W),j.return=I,j)}function o0(I,j,W){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=ds(""+j,I.mode,W),j.return=I,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case D:return W=La(j.type,j.key,j.props,null,I.mode,W),vo(W,j),W.return=I,W;case v:return j=hs(j,I.mode,W),j.return=I,j;case U:var t0=j._init;return j=t0(j._payload),o0(I,j,W)}if(A0(j)||l0(j))return j=hr(j,I.mode,W,null),j.return=I,j;if(typeof j.then=="function")return o0(I,el(j),W);if(j.$$typeof===N)return o0(I,za(I,j),W);tl(I,j)}return null}function $(I,j,W,t0){var d0=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return d0!==null?null:S(I,j,""+W,t0);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case D:return W.key===d0?P(I,j,W,t0):null;case v:return W.key===d0?V(I,j,W,t0):null;case U:return d0=W._init,W=d0(W._payload),$(I,j,W,t0)}if(A0(W)||l0(W))return d0!==null?null:e0(I,j,W,t0,null);if(typeof W.then=="function")return $(I,j,el(W),t0);if(W.$$typeof===N)return $(I,j,za(I,W),t0);tl(I,W)}return null}function Y(I,j,W,t0,d0){if(typeof t0=="string"&&t0!==""||typeof t0=="number"||typeof t0=="bigint")return I=I.get(W)||null,S(j,I,""+t0,d0);if(typeof t0=="object"&&t0!==null){switch(t0.$$typeof){case D:return I=I.get(t0.key===null?W:t0.key)||null,P(j,I,t0,d0);case v:return I=I.get(t0.key===null?W:t0.key)||null,V(j,I,t0,d0);case U:var I0=t0._init;return t0=I0(t0._payload),Y(I,j,W,t0,d0)}if(A0(t0)||l0(t0))return I=I.get(W)||null,e0(j,I,t0,d0,null);if(typeof t0.then=="function")return Y(I,j,W,el(t0),d0);if(t0.$$typeof===N)return Y(I,j,W,za(j,t0),d0);tl(j,t0)}return null}function R0(I,j,W,t0){for(var d0=null,I0=null,D0=j,N0=j=0,N2=null;D0!==null&&N0<W.length;N0++){D0.index>N0?(N2=D0,D0=null):N2=D0.sibling;var V0=$(I,D0,W[N0],t0);if(V0===null){D0===null&&(D0=N2);break}e&&D0&&V0.alternate===null&&r(I,D0),j=d(V0,j,N0),I0===null?d0=V0:I0.sibling=V0,I0=V0,D0=N2}if(N0===W.length)return o(I,D0),q0&&mr(I,N0),d0;if(D0===null){for(;N0<W.length;N0++)D0=o0(I,W[N0],t0),D0!==null&&(j=d(D0,j,N0),I0===null?d0=D0:I0.sibling=D0,I0=D0);return q0&&mr(I,N0),d0}for(D0=i(D0);N0<W.length;N0++)N2=Y(D0,I,N0,W[N0],t0),N2!==null&&(e&&N2.alternate!==null&&D0.delete(N2.key===null?N0:N2.key),j=d(N2,j,N0),I0===null?d0=N2:I0.sibling=N2,I0=N2);return e&&D0.forEach(function(Yt){return r(I,Yt)}),q0&&mr(I,N0),d0}function B0(I,j,W,t0){if(W==null)throw Error(l(151));for(var d0=null,I0=null,D0=j,N0=j=0,N2=null,V0=W.next();D0!==null&&!V0.done;N0++,V0=W.next()){D0.index>N0?(N2=D0,D0=null):N2=D0.sibling;var Yt=$(I,D0,V0.value,t0);if(Yt===null){D0===null&&(D0=N2);break}e&&D0&&Yt.alternate===null&&r(I,D0),j=d(Yt,j,N0),I0===null?d0=Yt:I0.sibling=Yt,I0=Yt,D0=N2}if(V0.done)return o(I,D0),q0&&mr(I,N0),d0;if(D0===null){for(;!V0.done;N0++,V0=W.next())V0=o0(I,V0.value,t0),V0!==null&&(j=d(V0,j,N0),I0===null?d0=V0:I0.sibling=V0,I0=V0);return q0&&mr(I,N0),d0}for(D0=i(D0);!V0.done;N0++,V0=W.next())V0=Y(D0,I,N0,V0.value,t0),V0!==null&&(e&&V0.alternate!==null&&D0.delete(V0.key===null?N0:V0.key),j=d(V0,j,N0),I0===null?d0=V0:I0.sibling=V0,I0=V0);return e&&D0.forEach(function(s6){return r(I,s6)}),q0&&mr(I,N0),d0}function J0(I,j,W,t0){if(typeof W=="object"&&W!==null&&W.type===w&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case D:e:{for(var d0=W.key;j!==null;){if(j.key===d0){if(d0=W.type,d0===w){if(j.tag===7){o(I,j.sibling),t0=u(j,W.props.children),t0.return=I,I=t0;break e}}else if(j.elementType===d0||typeof d0=="object"&&d0!==null&&d0.$$typeof===U&&t3(d0)===j.type){o(I,j.sibling),t0=u(j,W.props),vo(t0,W),t0.return=I,I=t0;break e}o(I,j);break}else r(I,j);j=j.sibling}W.type===w?(t0=hr(W.props.children,I.mode,t0,W.key),t0.return=I,I=t0):(t0=La(W.type,W.key,W.props,null,I.mode,t0),vo(t0,W),t0.return=I,I=t0)}return F(I);case v:e:{for(d0=W.key;j!==null;){if(j.key===d0)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){o(I,j.sibling),t0=u(j,W.children||[]),t0.return=I,I=t0;break e}else{o(I,j);break}else r(I,j);j=j.sibling}t0=hs(W,I.mode,t0),t0.return=I,I=t0}return F(I);case U:return d0=W._init,W=d0(W._payload),J0(I,j,W,t0)}if(A0(W))return R0(I,j,W,t0);if(l0(W)){if(d0=l0(W),typeof d0!="function")throw Error(l(150));return W=d0.call(W),B0(I,j,W,t0)}if(typeof W.then=="function")return J0(I,j,el(W),t0);if(W.$$typeof===N)return J0(I,j,za(I,W),t0);tl(I,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,j!==null&&j.tag===6?(o(I,j.sibling),t0=u(j,W),t0.return=I,I=t0):(o(I,j),t0=ds(W,I.mode,t0),t0.return=I,I=t0),F(I)):o(I,j)}return function(I,j,W,t0){try{Do=0;var d0=J0(I,j,W,t0);return sn=null,d0}catch(D0){if(D0===uo||D0===Ha)throw D0;var I0=J2(29,D0,null,I.mode);return I0.lanes=t0,I0.return=I,I0}finally{}}}var cn=r3(!0),n3=r3(!1),ye=Q(null),He=null;function Tt(e){var r=e.alternate;r0(F2,F2.current&1),r0(ye,e),He===null&&(r===null||nn.current!==null||r.memoizedState!==null)&&(He=e)}function o3(e){if(e.tag===22){if(r0(F2,F2.current),r0(ye,e),He===null){var r=e.alternate;r!==null&&r.memoizedState!==null&&(He=e)}}else Pt()}function Pt(){r0(F2,F2.current),r0(ye,ye.current)}function dt(e){J(ye),He===e&&(He=null),J(F2)}var F2=Q(0);function rl(e){for(var r=e;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Oc(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $s(e,r,o,i){r=e.memoizedState,o=o(i,r),o=o==null?r:y({},r,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Ys={enqueueSetState:function(e,r,o){e=e._reactInternals;var i=ne(),u=Et(i);u.payload=r,o!=null&&(u.callback=o),r=_t(e,u,i),r!==null&&(oe(r,e,i),fo(r,e,i))},enqueueReplaceState:function(e,r,o){e=e._reactInternals;var i=ne(),u=Et(i);u.tag=1,u.payload=r,o!=null&&(u.callback=o),r=_t(e,u,i),r!==null&&(oe(r,e,i),fo(r,e,i))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var o=ne(),i=Et(o);i.tag=2,r!=null&&(i.callback=r),r=_t(e,i,o),r!==null&&(oe(r,e,o),fo(r,e,o))}};function a3(e,r,o,i,u,d,F){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,F):r.prototype&&r.prototype.isPureReactComponent?!ro(o,i)||!ro(u,d):!0}function l3(e,r,o,i){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,i),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,i),r.state!==e&&Ys.enqueueReplaceState(r,r.state,null)}function wr(e,r){var o=r;if("ref"in r){o={};for(var i in r)i!=="ref"&&(o[i]=r[i])}if(e=e.defaultProps){o===r&&(o=y({},o));for(var u in e)o[u]===void 0&&(o[u]=e[u])}return o}var nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function i3(e){nl(e)}function s3(e){console.error(e)}function c3(e){nl(e)}function ol(e,r){try{var o=e.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(i){setTimeout(function(){throw i})}}function u3(e,r,o){try{var i=e.onCaughtError;i(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Ks(e,r,o){return o=Et(o),o.tag=3,o.payload={element:null},o.callback=function(){ol(e,r)},o}function A3(e){return e=Et(e),e.tag=3,e}function f3(e,r,o,i){var u=o.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;e.payload=function(){return u(d)},e.callback=function(){u3(r,o,i)}}var F=o.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(e.callback=function(){u3(r,o,i),typeof u!="function"&&(Ut===null?Ut=new Set([this]):Ut.add(this));var S=i.stack;this.componentDidCatch(i.value,{componentStack:S!==null?S:""})})}function s7(e,r,o,i,u){if(o.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(r=o.alternate,r!==null&&io(r,o,u,!0),o=ye.current,o!==null){switch(o.tag){case 13:return He===null?gc():o.alternate===null&&h2===0&&(h2=3),o.flags&=-257,o.flags|=65536,o.lanes=u,i===Fs?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([i]):r.add(i),vc(e,i,u)),!1;case 22:return o.flags|=65536,i===Fs?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([i])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([i]):o.add(i)),vc(e,i,u)),!1}throw Error(l(435,o.tag))}return vc(e,i,u),gc(),!1}if(q0)return r=ye.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=u,i!==Cs&&(e=Error(l(422),{cause:i}),lo(he(e,o)))):(i!==Cs&&(r=Error(l(423),{cause:i}),lo(he(r,o))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,i=he(i,o),u=Ks(e.stateNode,i,u),Ns(e,u),h2!==4&&(h2=2)),!1;var d=Error(l(520),{cause:i});if(d=he(d,o),So===null?So=[d]:So.push(d),h2!==4&&(h2=2),r===null)return!0;i=he(i,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,e=u&-u,o.lanes|=e,e=Ks(o.stateNode,i,e),Ns(o,e),!1;case 1:if(r=o.type,d=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ut===null||!Ut.has(d))))return o.flags|=65536,u&=-u,o.lanes|=u,u=A3(u),f3(u,e,o,i),Ns(o,u),!1}o=o.return}while(o!==null);return!1}var d3=Error(l(461)),B2=!1;function E2(e,r,o,i){r.child=e===null?n3(r,null,o,i):cn(r,e.child,o,i)}function h3(e,r,o,i,u){o=o.render;var d=r.ref;if("ref"in i){var F={};for(var S in i)S!=="ref"&&(F[S]=i[S])}else F=i;return Dr(r),i=ks(e,r,o,F,d,u),S=Ts(),e!==null&&!B2?(Ps(e,r,u),ht(e,r,u)):(q0&&S&&ps(r),r.flags|=1,E2(e,r,i,u),r.child)}function p3(e,r,o,i,u){if(e===null){var d=o.type;return typeof d=="function"&&!fs(d)&&d.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=d,m3(e,r,d,i,u)):(e=La(o.type,null,i,r,r.mode,u),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!nc(e,u)){var F=d.memoizedProps;if(o=o.compare,o=o!==null?o:ro,o(F,i)&&e.ref===r.ref)return ht(e,r,u)}return r.flags|=1,e=it(d,i),e.ref=r.ref,e.return=r,r.child=e}function m3(e,r,o,i,u){if(e!==null){var d=e.memoizedProps;if(ro(d,i)&&e.ref===r.ref)if(B2=!1,r.pendingProps=i=d,nc(e,u))(e.flags&131072)!==0&&(B2=!0);else return r.lanes=e.lanes,ht(e,r,u)}return Zs(e,r,o,i,u)}function C3(e,r,o){var i=r.pendingProps,u=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if((r.flags&128)!==0){if(i=d!==null?d.baseLanes|o:o,e!==null){for(u=r.child=e.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;r.childLanes=d&~i}else r.childLanes=0,r.child=null;return y3(e,r,i,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wa(r,d!==null?d.cachePool:null),d!==null?md(r,d):Rs(),o3(r);else return r.lanes=r.childLanes=536870912,y3(e,r,d!==null?d.baseLanes|o:o,o)}else d!==null?(Wa(r,d.cachePool),md(r,d),Pt(),r.memoizedState=null):(e!==null&&Wa(r,null),Rs(),Pt());return E2(e,r,u,o),r.child}function y3(e,r,o,i){var u=ws();return u=u===null?null:{parent:w2._currentValue,pool:u},r.memoizedState={baseLanes:o,cachePool:u},e!==null&&Wa(r,null),Rs(),o3(r),e!==null&&io(e,r,i,!0),null}function al(e,r){var o=r.ref;if(o===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(l(284));(e===null||e.ref!==o)&&(r.flags|=4194816)}}function Zs(e,r,o,i,u){return Dr(r),o=ks(e,r,o,i,void 0,u),i=Ts(),e!==null&&!B2?(Ps(e,r,u),ht(e,r,u)):(q0&&i&&ps(r),r.flags|=1,E2(e,r,o,u),r.child)}function g3(e,r,o,i,u,d){return Dr(r),r.updateQueue=null,o=yd(r,i,o,u),Cd(e),i=Ts(),e!==null&&!B2?(Ps(e,r,d),ht(e,r,d)):(q0&&i&&ps(r),r.flags|=1,E2(e,r,o,d),r.child)}function D3(e,r,o,i,u){if(Dr(r),r.stateNode===null){var d=Qr,F=o.contextType;typeof F=="object"&&F!==null&&(d=M2(F)),d=new o(i,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ys,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=i,d.state=r.memoizedState,d.refs={},Bs(r),F=o.contextType,d.context=typeof F=="object"&&F!==null?M2(F):Qr,d.state=r.memoizedState,F=o.getDerivedStateFromProps,typeof F=="function"&&($s(r,o,F,i),d.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(F=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),F!==d.state&&Ys.enqueueReplaceState(d,d.state,null),po(r,i,d,u),ho(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),i=!0}else if(e===null){d=r.stateNode;var S=r.memoizedProps,P=wr(o,S);d.props=P;var V=d.context,e0=o.contextType;F=Qr,typeof e0=="object"&&e0!==null&&(F=M2(e0));var o0=o.getDerivedStateFromProps;e0=typeof o0=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,e0||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||V!==F)&&l3(r,d,i,F),Rt=!1;var $=r.memoizedState;d.state=$,po(r,i,d,u),ho(),V=r.memoizedState,S||$!==V||Rt?(typeof o0=="function"&&($s(r,o,o0,i),V=r.memoizedState),(P=Rt||a3(r,o,P,i,$,V,F))?(e0||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=i,r.memoizedState=V),d.props=i,d.state=V,d.context=F,i=P):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),i=!1)}else{d=r.stateNode,bs(e,r),F=r.memoizedProps,e0=wr(o,F),d.props=e0,o0=r.pendingProps,$=d.context,V=o.contextType,P=Qr,typeof V=="object"&&V!==null&&(P=M2(V)),S=o.getDerivedStateFromProps,(V=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(F!==o0||$!==P)&&l3(r,d,i,P),Rt=!1,$=r.memoizedState,d.state=$,po(r,i,d,u),ho();var Y=r.memoizedState;F!==o0||$!==Y||Rt||e!==null&&e.dependencies!==null&&Ua(e.dependencies)?(typeof S=="function"&&($s(r,o,S,i),Y=r.memoizedState),(e0=Rt||a3(r,o,e0,i,$,Y,P)||e!==null&&e.dependencies!==null&&Ua(e.dependencies))?(V||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,Y,P),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,Y,P)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(r.flags|=1024),r.memoizedProps=i,r.memoizedState=Y),d.props=i,d.state=Y,d.context=P,i=e0):(typeof d.componentDidUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||F===e.memoizedProps&&$===e.memoizedState||(r.flags|=1024),i=!1)}return d=i,al(e,r),i=(r.flags&128)!==0,d||i?(d=r.stateNode,o=i&&typeof o.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,e!==null&&i?(r.child=cn(r,e.child,null,u),r.child=cn(r,null,o,u)):E2(e,r,o,u),r.memoizedState=d.state,e=r.child):e=ht(e,r,u),e}function v3(e,r,o,i){return ao(),r.flags|=256,E2(e,r,o,i),r.child}var Xs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qs(e){return{baseLanes:e,cachePool:sd()}}function Js(e,r,o){return e=e!==null?e.childLanes&~o:0,r&&(e|=ge),e}function x3(e,r,o){var i=r.pendingProps,u=!1,d=(r.flags&128)!==0,F;if((F=d)||(F=e!==null&&e.memoizedState===null?!1:(F2.current&2)!==0),F&&(u=!0,r.flags&=-129),F=(r.flags&32)!==0,r.flags&=-33,e===null){if(q0){if(u?Tt(r):Pt(),q0){var S=d2,P;if(P=S){e:{for(P=S,S=We;P.nodeType!==8;){if(!S){S=null;break e}if(P=Te(P.nextSibling),P===null){S=null;break e}}S=P}S!==null?(r.memoizedState={dehydrated:S,treeContext:pr!==null?{id:st,overflow:ct}:null,retryLane:536870912,hydrationErrors:null},P=J2(18,null,null,0),P.stateNode=S,P.return=r,r.child=P,z2=r,d2=null,P=!0):P=!1}P||yr(r)}if(S=r.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Oc(S)?r.lanes=32:r.lanes=536870912,null;dt(r)}return S=i.children,i=i.fallback,u?(Pt(),u=r.mode,S=ll({mode:"hidden",children:S},u),i=hr(i,u,o,null),S.return=r,i.return=r,S.sibling=i,r.child=S,u=r.child,u.memoizedState=Qs(o),u.childLanes=Js(e,F,o),r.memoizedState=Xs,i):(Tt(r),ec(r,S))}if(P=e.memoizedState,P!==null&&(S=P.dehydrated,S!==null)){if(d)r.flags&256?(Tt(r),r.flags&=-257,r=tc(e,r,o)):r.memoizedState!==null?(Pt(),r.child=e.child,r.flags|=128,r=null):(Pt(),u=i.fallback,S=r.mode,i=ll({mode:"visible",children:i.children},S),u=hr(u,S,o,null),u.flags|=2,i.return=r,u.return=r,i.sibling=u,r.child=i,cn(r,e.child,null,o),i=r.child,i.memoizedState=Qs(o),i.childLanes=Js(e,F,o),r.memoizedState=Xs,r=u);else if(Tt(r),Oc(S)){if(F=S.nextSibling&&S.nextSibling.dataset,F)var V=F.dgst;F=V,i=Error(l(419)),i.stack="",i.digest=F,lo({value:i,source:null,stack:null}),r=tc(e,r,o)}else if(B2||io(e,r,o,!1),F=(o&e.childLanes)!==0,B2||F){if(F=t2,F!==null&&(i=o&-o,i=(i&42)!==0?1:$n(i),i=(i&(F.suspendedLanes|o))!==0?0:i,i!==0&&i!==P.retryLane))throw P.retryLane=i,Xr(e,i),oe(F,e,i),d3;S.data==="$?"||gc(),r=tc(e,r,o)}else S.data==="$?"?(r.flags|=192,r.child=e.child,r=null):(e=P.treeContext,d2=Te(S.nextSibling),z2=r,q0=!0,Cr=null,We=!1,e!==null&&(me[Ce++]=st,me[Ce++]=ct,me[Ce++]=pr,st=e.id,ct=e.overflow,pr=r),r=ec(r,i.children),r.flags|=4096);return r}return u?(Pt(),u=i.fallback,S=r.mode,P=e.child,V=P.sibling,i=it(P,{mode:"hidden",children:i.children}),i.subtreeFlags=P.subtreeFlags&65011712,V!==null?u=it(V,u):(u=hr(u,S,o,null),u.flags|=2),u.return=r,i.return=r,i.sibling=u,r.child=i,i=u,u=r.child,S=e.child.memoizedState,S===null?S=Qs(o):(P=S.cachePool,P!==null?(V=w2._currentValue,P=P.parent!==V?{parent:V,pool:V}:P):P=sd(),S={baseLanes:S.baseLanes|o,cachePool:P}),u.memoizedState=S,u.childLanes=Js(e,F,o),r.memoizedState=Xs,i):(Tt(r),o=e.child,e=o.sibling,o=it(o,{mode:"visible",children:i.children}),o.return=r,o.sibling=null,e!==null&&(F=r.deletions,F===null?(r.deletions=[e],r.flags|=16):F.push(e)),r.child=o,r.memoizedState=null,o)}function ec(e,r){return r=ll({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function ll(e,r){return e=J2(22,e,null,r),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function tc(e,r,o){return cn(r,e.child,null,o),e=ec(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function w3(e,r,o){e.lanes|=r;var i=e.alternate;i!==null&&(i.lanes|=r),gs(e.return,r,o)}function rc(e,r,o,i,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:i,tail:o,tailMode:u}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=o,d.tailMode=u)}function F3(e,r,o){var i=r.pendingProps,u=i.revealOrder,d=i.tail;if(E2(e,r,i.children,o),i=F2.current,(i&2)!==0)i=i&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w3(e,o,r);else if(e.tag===19)w3(e,o,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(r0(F2,i),u){case"forwards":for(o=r.child,u=null;o!==null;)e=o.alternate,e!==null&&rl(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=r.child,r.child=null):(u=o.sibling,o.sibling=null),rc(r,!1,u,o,d);break;case"backwards":for(o=null,u=r.child,r.child=null;u!==null;){if(e=u.alternate,e!==null&&rl(e)===null){r.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}rc(r,!0,o,null,d);break;case"together":rc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ht(e,r,o){if(e!==null&&(r.dependencies=e.dependencies),It|=r.lanes,(o&r.childLanes)===0)if(e!==null){if(io(e,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(l(153));if(r.child!==null){for(e=r.child,o=it(e,e.pendingProps),r.child=o,o.return=r;e.sibling!==null;)e=e.sibling,o=o.sibling=it(e,e.pendingProps),o.return=r;o.sibling=null}return r.child}function nc(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&Ua(e)))}function c7(e,r,o){switch(r.tag){case 3:b0(r,r.stateNode.containerInfo),St(r,w2,e.memoizedState.cache),ao();break;case 27:case 5:W0(r);break;case 4:b0(r,r.stateNode.containerInfo);break;case 10:St(r,r.type,r.memoizedProps.value);break;case 13:var i=r.memoizedState;if(i!==null)return i.dehydrated!==null?(Tt(r),r.flags|=128,null):(o&r.child.childLanes)!==0?x3(e,r,o):(Tt(r),e=ht(e,r,o),e!==null?e.sibling:null);Tt(r);break;case 19:var u=(e.flags&128)!==0;if(i=(o&r.childLanes)!==0,i||(io(e,r,o,!1),i=(o&r.childLanes)!==0),u){if(i)return F3(e,r,o);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),r0(F2,F2.current),i)break;return null;case 22:case 23:return r.lanes=0,C3(e,r,o);case 24:St(r,w2,e.memoizedState.cache)}return ht(e,r,o)}function B3(e,r,o){if(e!==null)if(e.memoizedProps!==r.pendingProps)B2=!0;else{if(!nc(e,o)&&(r.flags&128)===0)return B2=!1,c7(e,r,o);B2=(e.flags&131072)!==0}else B2=!1,q0&&(r.flags&1048576)!==0&&td(r,Ia,r.index);switch(r.lanes=0,r.tag){case 16:e:{e=r.pendingProps;var i=r.elementType,u=i._init;if(i=u(i._payload),r.type=i,typeof i=="function")fs(i)?(e=wr(i,e),r.tag=1,r=D3(null,r,i,e,o)):(r.tag=0,r=Zs(null,r,i,e,o));else{if(i!=null){if(u=i.$$typeof,u===_){r.tag=11,r=h3(null,r,i,e,o);break e}else if(u===O){r.tag=14,r=p3(null,r,i,e,o);break e}}throw r=q(i)||i,Error(l(306,r,""))}}return r;case 0:return Zs(e,r,r.type,r.pendingProps,o);case 1:return i=r.type,u=wr(i,r.pendingProps),D3(e,r,i,u,o);case 3:e:{if(b0(r,r.stateNode.containerInfo),e===null)throw Error(l(387));i=r.pendingProps;var d=r.memoizedState;u=d.element,bs(e,r),po(r,i,null,o);var F=r.memoizedState;if(i=F.cache,St(r,w2,i),i!==d.cache&&Ds(r,[w2],o,!0),ho(),i=F.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:F.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=v3(e,r,i,o);break e}else if(i!==u){u=he(Error(l(424)),r),lo(u),r=v3(e,r,i,o);break e}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(d2=Te(e.firstChild),z2=r,q0=!0,Cr=null,We=!0,o=n3(r,null,i,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ao(),i===u){r=ht(e,r,o);break e}E2(e,r,i,o)}r=r.child}return r;case 26:return al(e,r),e===null?(o=Rh(r.type,null,r.pendingProps,null))?r.memoizedState=o:q0||(o=r.type,e=r.pendingProps,i=Dl(m0.current).createElement(o),i[a0]=r,i[c0]=e,k2(i,o,e),_0(i),r.stateNode=i):r.memoizedState=Rh(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return W0(r),e===null&&q0&&(i=r.stateNode=bh(r.type,r.pendingProps,m0.current),z2=r,We=!0,u=d2,Ht(r.type)?(Lc=u,d2=Te(i.firstChild)):d2=u),E2(e,r,r.pendingProps.children,o),al(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&q0&&((u=i=d2)&&(i=L7(i,r.type,r.pendingProps,We),i!==null?(r.stateNode=i,z2=r,d2=Te(i.firstChild),We=!1,u=!0):u=!1),u||yr(r)),W0(r),u=r.type,d=r.pendingProps,F=e!==null?e.memoizedProps:null,i=d.children,Tc(u,d)?i=null:F!==null&&Tc(u,F)&&(r.flags|=32),r.memoizedState!==null&&(u=ks(e,r,t7,null,null,o),Lo._currentValue=u),al(e,r),E2(e,r,i,o),r.child;case 6:return e===null&&q0&&((e=o=d2)&&(o=j7(o,r.pendingProps,We),o!==null?(r.stateNode=o,z2=r,d2=null,e=!0):e=!1),e||yr(r)),null;case 13:return x3(e,r,o);case 4:return b0(r,r.stateNode.containerInfo),i=r.pendingProps,e===null?r.child=cn(r,null,i,o):E2(e,r,i,o),r.child;case 11:return h3(e,r,r.type,r.pendingProps,o);case 7:return E2(e,r,r.pendingProps,o),r.child;case 8:return E2(e,r,r.pendingProps.children,o),r.child;case 12:return E2(e,r,r.pendingProps.children,o),r.child;case 10:return i=r.pendingProps,St(r,r.type,i.value),E2(e,r,i.children,o),r.child;case 9:return u=r.type._context,i=r.pendingProps.children,Dr(r),u=M2(u),i=i(u),r.flags|=1,E2(e,r,i,o),r.child;case 14:return p3(e,r,r.type,r.pendingProps,o);case 15:return m3(e,r,r.type,r.pendingProps,o);case 19:return F3(e,r,o);case 31:return i=r.pendingProps,o=r.mode,i={mode:i.mode,children:i.children},e===null?(o=ll(i,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=it(e.child,i),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return C3(e,r,o);case 24:return Dr(r),i=M2(w2),e===null?(u=ws(),u===null&&(u=t2,d=vs(),u.pooledCache=d,d.refCount++,d!==null&&(u.pooledCacheLanes|=o),u=d),r.memoizedState={parent:i,cache:u},Bs(r),St(r,w2,u)):((e.lanes&o)!==0&&(bs(e,r),po(r,null,null,o),ho()),u=e.memoizedState,d=r.memoizedState,u.parent!==i?(u={parent:i,cache:i},r.memoizedState=u,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=u),St(r,w2,i)):(i=d.cache,St(r,w2,i),i!==u.cache&&Ds(r,[w2],o,!0))),E2(e,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(l(156,r.tag))}function pt(e){e.flags|=4}function b3(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ph(r)){if(r=ye.current,r!==null&&((H0&4194048)===H0?He!==null:(H0&62914560)!==H0&&(H0&536870912)===0||r!==He))throw Ao=Fs,cd;e.flags|=8192}}function il(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?va():536870912,e.lanes|=r,dn|=r)}function xo(e,r){if(!q0)switch(e.tailMode){case"hidden":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var i=null;o!==null;)o.alternate!==null&&(i=o),o=o.sibling;i===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function c2(e){var r=e.alternate!==null&&e.alternate.child===e.child,o=0,i=0;if(r)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,i|=u.subtreeFlags&65011712,i|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,i|=u.subtreeFlags,i|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=i,e.childLanes=o,r}function u7(e,r,o){var i=r.pendingProps;switch(ms(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return c2(r),null;case 1:return c2(r),null;case 3:return o=r.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),At(w2),T0(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(oo(r)?pt(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,od())),c2(r),null;case 26:return o=r.memoizedState,e===null?(pt(r),o!==null?(c2(r),b3(r,o)):(c2(r),r.flags&=-16777217)):o?o!==e.memoizedState?(pt(r),c2(r),b3(r,o)):(c2(r),r.flags&=-16777217):(e.memoizedProps!==i&&pt(r),c2(r),r.flags&=-16777217),null;case 27:u2(r),o=m0.current;var u=r.type;if(e!==null&&r.stateNode!=null)e.memoizedProps!==i&&pt(r);else{if(!i){if(r.stateNode===null)throw Error(l(166));return c2(r),null}e=f0.current,oo(r)?rd(r):(e=bh(u,i,o),r.stateNode=e,pt(r))}return c2(r),null;case 5:if(u2(r),o=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==i&&pt(r);else{if(!i){if(r.stateNode===null)throw Error(l(166));return c2(r),null}if(e=f0.current,oo(r))rd(r);else{switch(u=Dl(m0.current),e){case 1:e=u.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:e=u.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":e=u.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":e=u.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?u.createElement("select",{is:i.is}):u.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?u.createElement(o,{is:i.is}):u.createElement(o)}}e[a0]=r,e[c0]=i;e:for(u=r.child;u!==null;){if(u.tag===5||u.tag===6)e.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break e;for(;u.sibling===null;){if(u.return===null||u.return===r)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r.stateNode=e;e:switch(k2(e,o,i),o){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&pt(r)}}return c2(r),r.flags&=-16777217,null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==i&&pt(r);else{if(typeof i!="string"&&r.stateNode===null)throw Error(l(166));if(e=m0.current,oo(r)){if(e=r.stateNode,o=r.memoizedProps,i=null,u=z2,u!==null)switch(u.tag){case 27:case 5:i=u.memoizedProps}e[a0]=r,e=!!(e.nodeValue===o||i!==null&&i.suppressHydrationWarning===!0||gh(e.nodeValue,o)),e||yr(r)}else e=Dl(e).createTextNode(i),e[a0]=r,r.stateNode=e}return c2(r),null;case 13:if(i=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=oo(r),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=r.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[a0]=r}else ao(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;c2(r),u=!1}else u=od(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return r.flags&256?(dt(r),r):(dt(r),null)}if(dt(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=i!==null,e=e!==null&&e.memoizedState!==null,o){i=r.child,u=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(u=i.alternate.memoizedState.cachePool.pool);var d=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==u&&(i.flags|=2048)}return o!==e&&o&&(r.child.flags|=8192),il(r,r.updateQueue),c2(r),null;case 4:return T0(),e===null&&Sc(r.stateNode.containerInfo),c2(r),null;case 10:return At(r.type),c2(r),null;case 19:if(J(F2),u=r.memoizedState,u===null)return c2(r),null;if(i=(r.flags&128)!==0,d=u.rendering,d===null)if(i)xo(u,!1);else{if(h2!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(d=rl(e),d!==null){for(r.flags|=128,xo(u,!1),e=d.updateQueue,r.updateQueue=e,il(r,e),r.subtreeFlags=0,e=o,o=r.child;o!==null;)ed(o,e),o=o.sibling;return r0(F2,F2.current&1|2),r.child}e=e.sibling}u.tail!==null&&I2()>ul&&(r.flags|=128,i=!0,xo(u,!1),r.lanes=4194304)}else{if(!i)if(e=rl(d),e!==null){if(r.flags|=128,i=!0,e=e.updateQueue,r.updateQueue=e,il(r,e),xo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!q0)return c2(r),null}else 2*I2()-u.renderingStartTime>ul&&o!==536870912&&(r.flags|=128,i=!0,xo(u,!1),r.lanes=4194304);u.isBackwards?(d.sibling=r.child,r.child=d):(e=u.last,e!==null?e.sibling=d:r.child=d,u.last=d)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=I2(),r.sibling=null,e=F2.current,r0(F2,i?e&1|2:e&1),r):(c2(r),null);case 22:case 23:return dt(r),Es(),i=r.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(r.flags|=8192):i&&(r.flags|=8192),i?(o&536870912)!==0&&(r.flags&128)===0&&(c2(r),r.subtreeFlags&6&&(r.flags|=8192)):c2(r),o=r.updateQueue,o!==null&&il(r,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048),e!==null&&J(vr),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),At(w2),c2(r),null;case 25:return null;case 30:return null}throw Error(l(156,r.tag))}function A7(e,r){switch(ms(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return At(w2),T0(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return u2(r),null;case 13:if(dt(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(l(340));ao()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return J(F2),null;case 4:return T0(),null;case 10:return At(r.type),null;case 22:case 23:return dt(r),Es(),e!==null&&J(vr),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return At(w2),null;case 25:return null;default:return null}}function N3(e,r){switch(ms(r),r.tag){case 3:At(w2),T0();break;case 26:case 27:case 5:u2(r);break;case 4:T0();break;case 13:dt(r);break;case 19:J(F2);break;case 10:At(r.type);break;case 22:case 23:dt(r),Es(),e!==null&&J(vr);break;case 24:At(w2)}}function wo(e,r){try{var o=r.updateQueue,i=o!==null?o.lastEffect:null;if(i!==null){var u=i.next;o=u;do{if((o.tag&e)===e){i=void 0;var d=o.create,F=o.inst;i=d(),F.destroy=i}o=o.next}while(o!==u)}}catch(S){e2(r,r.return,S)}}function Mt(e,r,o){try{var i=r.updateQueue,u=i!==null?i.lastEffect:null;if(u!==null){var d=u.next;i=d;do{if((i.tag&e)===e){var F=i.inst,S=F.destroy;if(S!==void 0){F.destroy=void 0,u=r;var P=o,V=S;try{V()}catch(e0){e2(u,P,e0)}}}i=i.next}while(i!==d)}}catch(e0){e2(r,r.return,e0)}}function S3(e){var r=e.updateQueue;if(r!==null){var o=e.stateNode;try{pd(r,o)}catch(i){e2(e,e.return,i)}}}function R3(e,r,o){o.props=wr(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(i){e2(e,r,i)}}function Fo(e,r){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof o=="function"?e.refCleanup=o(i):o.current=i}}catch(u){e2(e,r,u)}}function Ve(e,r){var o=e.ref,i=e.refCleanup;if(o!==null)if(typeof i=="function")try{i()}catch(u){e2(e,r,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(u){e2(e,r,u)}else o.current=null}function E3(e){var r=e.type,o=e.memoizedProps,i=e.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&i.focus();break e;case"img":o.src?i.src=o.src:o.srcSet&&(i.srcset=o.srcSet)}}catch(u){e2(e,e.return,u)}}function oc(e,r,o){try{var i=e.stateNode;k7(i,e.type,o,r),i[c0]=r}catch(u){e2(e,e.return,u)}}function _3(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ht(e.type)||e.tag===4}function ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ht(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lc(e,r,o){var i=e.tag;if(i===5||i===6)e=e.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(e),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=gl));else if(i!==4&&(i===27&&Ht(e.type)&&(o=e.stateNode,r=null),e=e.child,e!==null))for(lc(e,r,o),e=e.sibling;e!==null;)lc(e,r,o),e=e.sibling}function sl(e,r,o){var i=e.tag;if(i===5||i===6)e=e.stateNode,r?o.insertBefore(e,r):o.appendChild(e);else if(i!==4&&(i===27&&Ht(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(sl(e,r,o),e=e.sibling;e!==null;)sl(e,r,o),e=e.sibling}function k3(e){var r=e.stateNode,o=e.memoizedProps;try{for(var i=e.type,u=r.attributes;u.length;)r.removeAttributeNode(u[0]);k2(r,i,o),r[a0]=e,r[c0]=o}catch(d){e2(e,e.return,d)}}var mt=!1,y2=!1,ic=!1,T3=typeof WeakSet=="function"?WeakSet:Set,b2=null;function f7(e,r){if(e=e.containerInfo,_c=bl,e=Vf(e),as(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var i=o.getSelection&&o.getSelection();if(i&&i.rangeCount!==0){o=i.anchorNode;var u=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{o.nodeType,d.nodeType}catch{o=null;break e}var F=0,S=-1,P=-1,V=0,e0=0,o0=e,$=null;t:for(;;){for(var Y;o0!==o||u!==0&&o0.nodeType!==3||(S=F+u),o0!==d||i!==0&&o0.nodeType!==3||(P=F+i),o0.nodeType===3&&(F+=o0.nodeValue.length),(Y=o0.firstChild)!==null;)$=o0,o0=Y;for(;;){if(o0===e)break t;if($===o&&++V===u&&(S=F),$===d&&++e0===i&&(P=F),(Y=o0.nextSibling)!==null)break;o0=$,$=o0.parentNode}o0=Y}o=S===-1||P===-1?null:{start:S,end:P}}else o=null}o=o||{start:0,end:0}}else o=null;for(kc={focusedElem:e,selectionRange:o},bl=!1,b2=r;b2!==null;)if(r=b2,e=r.child,(r.subtreeFlags&1024)!==0&&e!==null)e.return=r,b2=e;else for(;b2!==null;){switch(r=b2,d=r.alternate,e=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,o=r,u=d.memoizedProps,d=d.memoizedState,i=o.stateNode;try{var R0=wr(o.type,u,o.elementType===o.type);e=i.getSnapshotBeforeUpdate(R0,d),i.__reactInternalSnapshotBeforeUpdate=e}catch(B0){e2(o,o.return,B0)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,o=e.nodeType,o===9)Mc(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Mc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=r.sibling,e!==null){e.return=r.return,b2=e;break}b2=r.return}}function P3(e,r,o){var i=o.flags;switch(o.tag){case 0:case 11:case 15:Ot(e,o),i&4&&wo(5,o);break;case 1:if(Ot(e,o),i&4)if(e=o.stateNode,r===null)try{e.componentDidMount()}catch(F){e2(o,o.return,F)}else{var u=wr(o.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(u,r,e.__reactInternalSnapshotBeforeUpdate)}catch(F){e2(o,o.return,F)}}i&64&&S3(o),i&512&&Fo(o,o.return);break;case 3:if(Ot(e,o),i&64&&(e=o.updateQueue,e!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{pd(e,r)}catch(F){e2(o,o.return,F)}}break;case 27:r===null&&i&4&&k3(o);case 26:case 5:Ot(e,o),r===null&&i&4&&E3(o),i&512&&Fo(o,o.return);break;case 12:Ot(e,o);break;case 13:Ot(e,o),i&4&&L3(e,o),i&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=v7.bind(null,o),I7(e,o))));break;case 22:if(i=o.memoizedState!==null||mt,!i){r=r!==null&&r.memoizedState!==null||y2,u=mt;var d=y2;mt=i,(y2=r)&&!d?Lt(e,o,(o.subtreeFlags&8772)!==0):Ot(e,o),mt=u,y2=d}break;case 30:break;default:Ot(e,o)}}function M3(e){var r=e.alternate;r!==null&&(e.alternate=null,M3(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&g0(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var l2=null,Y2=!1;function Ct(e,r,o){for(o=o.child;o!==null;)O3(e,r,o),o=o.sibling}function O3(e,r,o){if(i2&&typeof i2.onCommitFiberUnmount=="function")try{i2.onCommitFiberUnmount(G2,o)}catch{}switch(o.tag){case 26:y2||Ve(o,r),Ct(e,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:y2||Ve(o,r);var i=l2,u=Y2;Ht(o.type)&&(l2=o.stateNode,Y2=!1),Ct(e,r,o),To(o.stateNode),l2=i,Y2=u;break;case 5:y2||Ve(o,r);case 6:if(i=l2,u=Y2,l2=null,Ct(e,r,o),l2=i,Y2=u,l2!==null)if(Y2)try{(l2.nodeType===9?l2.body:l2.nodeName==="HTML"?l2.ownerDocument.body:l2).removeChild(o.stateNode)}catch(d){e2(o,r,d)}else try{l2.removeChild(o.stateNode)}catch(d){e2(o,r,d)}break;case 18:l2!==null&&(Y2?(e=l2,Fh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),zo(e)):Fh(l2,o.stateNode));break;case 4:i=l2,u=Y2,l2=o.stateNode.containerInfo,Y2=!0,Ct(e,r,o),l2=i,Y2=u;break;case 0:case 11:case 14:case 15:y2||Mt(2,o,r),y2||Mt(4,o,r),Ct(e,r,o);break;case 1:y2||(Ve(o,r),i=o.stateNode,typeof i.componentWillUnmount=="function"&&R3(o,r,i)),Ct(e,r,o);break;case 21:Ct(e,r,o);break;case 22:y2=(i=y2)||o.memoizedState!==null,Ct(e,r,o),y2=i;break;default:Ct(e,r,o)}}function L3(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zo(e)}catch(o){e2(r,r.return,o)}}function d7(e){switch(e.tag){case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new T3),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new T3),r;default:throw Error(l(435,e.tag))}}function sc(e,r){var o=d7(e);r.forEach(function(i){var u=x7.bind(null,e,i);o.has(i)||(o.add(i),i.then(u,u))})}function ee(e,r){var o=r.deletions;if(o!==null)for(var i=0;i<o.length;i++){var u=o[i],d=e,F=r,S=F;e:for(;S!==null;){switch(S.tag){case 27:if(Ht(S.type)){l2=S.stateNode,Y2=!1;break e}break;case 5:l2=S.stateNode,Y2=!1;break e;case 3:case 4:l2=S.stateNode.containerInfo,Y2=!0;break e}S=S.return}if(l2===null)throw Error(l(160));O3(d,F,u),l2=null,Y2=!1,d=u.alternate,d!==null&&(d.return=null),u.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)j3(r,e),r=r.sibling}var ke=null;function j3(e,r){var o=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ee(r,e),te(e),i&4&&(Mt(3,e,e.return),wo(3,e),Mt(5,e,e.return));break;case 1:ee(r,e),te(e),i&512&&(y2||o===null||Ve(o,o.return)),i&64&&mt&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?i:o.concat(i))));break;case 26:var u=ke;if(ee(r,e),te(e),i&512&&(y2||o===null||Ve(o,o.return)),i&4){var d=o!==null?o.memoizedState:null;if(i=e.memoizedState,o===null)if(i===null)if(e.stateNode===null){e:{i=e.type,o=e.memoizedProps,u=u.ownerDocument||u;t:switch(i){case"title":d=u.getElementsByTagName("title")[0],(!d||d[x0]||d[a0]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=u.createElement(i),u.head.insertBefore(d,u.querySelector("head > title"))),k2(d,i,o),d[a0]=e,_0(d),i=d;break e;case"link":var F=kh("link","href",u).get(i+(o.href||""));if(F){for(var S=0;S<F.length;S++)if(d=F[S],d.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&d.getAttribute("rel")===(o.rel==null?null:o.rel)&&d.getAttribute("title")===(o.title==null?null:o.title)&&d.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){F.splice(S,1);break t}}d=u.createElement(i),k2(d,i,o),u.head.appendChild(d);break;case"meta":if(F=kh("meta","content",u).get(i+(o.content||""))){for(S=0;S<F.length;S++)if(d=F[S],d.getAttribute("content")===(o.content==null?null:""+o.content)&&d.getAttribute("name")===(o.name==null?null:o.name)&&d.getAttribute("property")===(o.property==null?null:o.property)&&d.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&d.getAttribute("charset")===(o.charSet==null?null:o.charSet)){F.splice(S,1);break t}}d=u.createElement(i),k2(d,i,o),u.head.appendChild(d);break;default:throw Error(l(468,i))}d[a0]=e,_0(d),i=d}e.stateNode=i}else Th(u,e.type,e.stateNode);else e.stateNode=_h(u,i,e.memoizedProps);else d!==i?(d===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):d.count--,i===null?Th(u,e.type,e.stateNode):_h(u,i,e.memoizedProps)):i===null&&e.stateNode!==null&&oc(e,e.memoizedProps,o.memoizedProps)}break;case 27:ee(r,e),te(e),i&512&&(y2||o===null||Ve(o,o.return)),o!==null&&i&4&&oc(e,e.memoizedProps,o.memoizedProps);break;case 5:if(ee(r,e),te(e),i&512&&(y2||o===null||Ve(o,o.return)),e.flags&32){u=e.stateNode;try{Vr(u,"")}catch(Y){e2(e,e.return,Y)}}i&4&&e.stateNode!=null&&(u=e.memoizedProps,oc(e,u,o!==null?o.memoizedProps:u)),i&1024&&(ic=!0);break;case 6:if(ee(r,e),te(e),i&4){if(e.stateNode===null)throw Error(l(162));i=e.memoizedProps,o=e.stateNode;try{o.nodeValue=i}catch(Y){e2(e,e.return,Y)}}break;case 3:if(wl=null,u=ke,ke=vl(r.containerInfo),ee(r,e),ke=u,te(e),i&4&&o!==null&&o.memoizedState.isDehydrated)try{zo(r.containerInfo)}catch(Y){e2(e,e.return,Y)}ic&&(ic=!1,I3(e));break;case 4:i=ke,ke=vl(e.stateNode.containerInfo),ee(r,e),te(e),ke=i;break;case 12:ee(r,e),te(e);break;case 13:ee(r,e),te(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hc=I2()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sc(e,i)));break;case 22:u=e.memoizedState!==null;var P=o!==null&&o.memoizedState!==null,V=mt,e0=y2;if(mt=V||u,y2=e0||P,ee(r,e),y2=e0,mt=V,te(e),i&8192)e:for(r=e.stateNode,r._visibility=u?r._visibility&-2:r._visibility|1,u&&(o===null||P||mt||y2||Fr(e)),o=null,r=e;;){if(r.tag===5||r.tag===26){if(o===null){P=o=r;try{if(d=P.stateNode,u)F=d.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{S=P.stateNode;var o0=P.memoizedProps.style,$=o0!=null&&o0.hasOwnProperty("display")?o0.display:null;S.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Y){e2(P,P.return,Y)}}}else if(r.tag===6){if(o===null){P=r;try{P.stateNode.nodeValue=u?"":P.memoizedProps}catch(Y){e2(P,P.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}i&4&&(i=e.updateQueue,i!==null&&(o=i.retryQueue,o!==null&&(i.retryQueue=null,sc(e,o))));break;case 19:ee(r,e),te(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,sc(e,i)));break;case 30:break;case 21:break;default:ee(r,e),te(e)}}function te(e){var r=e.flags;if(r&2){try{for(var o,i=e.return;i!==null;){if(_3(i)){o=i;break}i=i.return}if(o==null)throw Error(l(160));switch(o.tag){case 27:var u=o.stateNode,d=ac(e);sl(e,d,u);break;case 5:var F=o.stateNode;o.flags&32&&(Vr(F,""),o.flags&=-33);var S=ac(e);sl(e,S,F);break;case 3:case 4:var P=o.stateNode.containerInfo,V=ac(e);lc(e,V,P);break;default:throw Error(l(161))}}catch(e0){e2(e,e.return,e0)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function I3(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;I3(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function Ot(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)P3(e,r.alternate,r),r=r.sibling}function Fr(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Mt(4,r,r.return),Fr(r);break;case 1:Ve(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&R3(r,r.return,o),Fr(r);break;case 27:To(r.stateNode);case 26:case 5:Ve(r,r.return),Fr(r);break;case 22:r.memoizedState===null&&Fr(r);break;case 30:Fr(r);break;default:Fr(r)}e=e.sibling}}function Lt(e,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var i=r.alternate,u=e,d=r,F=d.flags;switch(d.tag){case 0:case 11:case 15:Lt(u,d,o),wo(4,d);break;case 1:if(Lt(u,d,o),i=d,u=i.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(V){e2(i,i.return,V)}if(i=d,u=i.updateQueue,u!==null){var S=i.stateNode;try{var P=u.shared.hiddenCallbacks;if(P!==null)for(u.shared.hiddenCallbacks=null,u=0;u<P.length;u++)hd(P[u],S)}catch(V){e2(i,i.return,V)}}o&&F&64&&S3(d),Fo(d,d.return);break;case 27:k3(d);case 26:case 5:Lt(u,d,o),o&&i===null&&F&4&&E3(d),Fo(d,d.return);break;case 12:Lt(u,d,o);break;case 13:Lt(u,d,o),o&&F&4&&L3(u,d);break;case 22:d.memoizedState===null&&Lt(u,d,o),Fo(d,d.return);break;case 30:break;default:Lt(u,d,o)}r=r.sibling}}function cc(e,r){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&so(o))}function uc(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&so(e))}function Ge(e,r,o,i){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)U3(e,r,o,i),r=r.sibling}function U3(e,r,o,i){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Ge(e,r,o,i),u&2048&&wo(9,r);break;case 1:Ge(e,r,o,i);break;case 3:Ge(e,r,o,i),u&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&so(e)));break;case 12:if(u&2048){Ge(e,r,o,i),e=r.stateNode;try{var d=r.memoizedProps,F=d.id,S=d.onPostCommit;typeof S=="function"&&S(F,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(P){e2(r,r.return,P)}}else Ge(e,r,o,i);break;case 13:Ge(e,r,o,i);break;case 23:break;case 22:d=r.stateNode,F=r.alternate,r.memoizedState!==null?d._visibility&2?Ge(e,r,o,i):Bo(e,r):d._visibility&2?Ge(e,r,o,i):(d._visibility|=2,un(e,r,o,i,(r.subtreeFlags&10256)!==0)),u&2048&&cc(F,r);break;case 24:Ge(e,r,o,i),u&2048&&uc(r.alternate,r);break;default:Ge(e,r,o,i)}}function un(e,r,o,i,u){for(u=u&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=e,F=r,S=o,P=i,V=F.flags;switch(F.tag){case 0:case 11:case 15:un(d,F,S,P,u),wo(8,F);break;case 23:break;case 22:var e0=F.stateNode;F.memoizedState!==null?e0._visibility&2?un(d,F,S,P,u):Bo(d,F):(e0._visibility|=2,un(d,F,S,P,u)),u&&V&2048&&cc(F.alternate,F);break;case 24:un(d,F,S,P,u),u&&V&2048&&uc(F.alternate,F);break;default:un(d,F,S,P,u)}r=r.sibling}}function Bo(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=e,i=r,u=i.flags;switch(i.tag){case 22:Bo(o,i),u&2048&&cc(i.alternate,i);break;case 24:Bo(o,i),u&2048&&uc(i.alternate,i);break;default:Bo(o,i)}r=r.sibling}}var bo=8192;function An(e){if(e.subtreeFlags&bo)for(e=e.child;e!==null;)z3(e),e=e.sibling}function z3(e){switch(e.tag){case 26:An(e),e.flags&bo&&e.memoizedState!==null&&Q7(ke,e.memoizedState,e.memoizedProps);break;case 5:An(e);break;case 3:case 4:var r=ke;ke=vl(e.stateNode.containerInfo),An(e),ke=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=bo,bo=16777216,An(e),bo=r):An(e));break;default:An(e)}}function W3(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function No(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var i=r[o];b2=i,V3(i,e)}W3(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)H3(e),e=e.sibling}function H3(e){switch(e.tag){case 0:case 11:case 15:No(e),e.flags&2048&&Mt(9,e,e.return);break;case 3:No(e);break;case 12:No(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,cl(e)):No(e);break;default:No(e)}}function cl(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var i=r[o];b2=i,V3(i,e)}W3(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Mt(8,r,r.return),cl(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,cl(r));break;default:cl(r)}e=e.sibling}}function V3(e,r){for(;b2!==null;){var o=b2;switch(o.tag){case 0:case 11:case 15:Mt(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var i=o.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:so(o.memoizedState.cache)}if(i=o.child,i!==null)i.return=o,b2=i;else e:for(o=e;b2!==null;){i=b2;var u=i.sibling,d=i.return;if(M3(i),i===o){b2=null;break e}if(u!==null){u.return=d,b2=u;break e}b2=d}}}var h7={getCacheForType:function(e){var r=M2(w2),o=r.data.get(e);return o===void 0&&(o=e(),r.data.set(e,o)),o}},p7=typeof WeakMap=="function"?WeakMap:Map,Y0=0,t2=null,U0=null,H0=0,K0=0,re=null,jt=!1,fn=!1,Ac=!1,yt=0,h2=0,It=0,Br=0,fc=0,ge=0,dn=0,So=null,K2=null,dc=!1,hc=0,ul=1/0,Al=null,Ut=null,_2=0,zt=null,hn=null,pn=0,pc=0,mc=null,G3=null,Ro=0,Cc=null;function ne(){if((Y0&2)!==0&&H0!==0)return H0&-H0;if(L.T!==null){var e=tn;return e!==0?e:Fc()}return M()}function q3(){ge===0&&(ge=(H0&536870912)===0||q0?Ur():536870912);var e=ye.current;return e!==null&&(e.flags|=32),ge}function oe(e,r,o){(e===t2&&(K0===2||K0===9)||e.cancelPendingCommit!==null)&&(mn(e,0),Wt(e,H0,ge,!1)),ir(e,o),((Y0&2)===0||e!==t2)&&(e===t2&&((Y0&2)===0&&(Br|=o),h2===4&&Wt(e,H0,ge,!1)),qe(e))}function $3(e,r,o){if((Y0&6)!==0)throw Error(l(327));var i=!o&&(r&124)===0&&(r&e.expiredLanes)===0||Ue(e,r),u=i?y7(e,r):Dc(e,r,!0),d=i;do{if(u===0){fn&&!i&&Wt(e,r,0,!1);break}else{if(o=e.current.alternate,d&&!m7(o)){u=Dc(e,r,!1),d=!1;continue}if(u===2){if(d=r,e.errorRecoveryDisabledLanes&d)var F=0;else F=e.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){r=F;e:{var S=e;u=So;var P=S.current.memoizedState.isDehydrated;if(P&&(mn(S,F).flags|=256),F=Dc(S,F,!1),F!==2){if(Ac&&!P){S.errorRecoveryDisabledLanes|=d,Br|=d,u=4;break e}d=K2,K2=u,d!==null&&(K2===null?K2=d:K2.push.apply(K2,d))}u=F}if(d=!1,u!==2)continue}}if(u===1){mn(e,0),Wt(e,r,0,!0);break}e:{switch(i=e,d=u,d){case 0:case 1:throw Error(l(345));case 4:if((r&4194048)!==r)break;case 6:Wt(i,r,ge,!jt);break e;case 2:K2=null;break;case 3:case 5:break;default:throw Error(l(329))}if((r&62914560)===r&&(u=hc+300-I2(),10<u)){if(Wt(i,r,ge,!jt),lr(i,0,!0)!==0)break e;i.timeoutHandle=xh(Y3.bind(null,i,o,K2,Al,dc,r,ge,Br,dn,jt,d,2,-0,0),u);break e}Y3(i,o,K2,Al,dc,r,ge,Br,dn,jt,d,0,-0,0)}}break}while(!0);qe(e)}function Y3(e,r,o,i,u,d,F,S,P,V,e0,o0,$,Y){if(e.timeoutHandle=-1,o0=r.subtreeFlags,(o0&8192||(o0&16785408)===16785408)&&(Oo={stylesheets:null,count:0,unsuspend:X7},z3(r),o0=J7(),o0!==null)){e.cancelPendingCommit=o0(th.bind(null,e,r,d,o,i,u,F,S,P,e0,1,$,Y)),Wt(e,d,F,!V);return}th(e,r,d,o,i,u,F,S,P)}function m7(e){for(var r=e;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var i=0;i<o.length;i++){var u=o[i],d=u.getSnapshot;u=u.value;try{if(!Q2(d(),u))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Wt(e,r,o,i){r&=~fc,r&=~Br,e.suspendedLanes|=r,e.pingedLanes&=~r,i&&(e.warmLanes|=r),i=e.expirationTimes;for(var u=r;0<u;){var d=31-R2(u),F=1<<d;i[d]=-1,u&=~F}o!==0&&sr(e,o,r)}function fl(){return(Y0&6)===0?(Eo(0),!1):!0}function yc(){if(U0!==null){if(K0===0)var e=U0.return;else e=U0,ut=gr=null,Ms(e),sn=null,Do=0,e=U0;for(;e!==null;)N3(e.alternate,e),e=e.return;U0=null}}function mn(e,r){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,P7(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),yc(),t2=e,U0=o=it(e.current,null),H0=r,K0=0,re=null,jt=!1,fn=Ue(e,r),Ac=!1,dn=ge=fc=Br=It=h2=0,K2=So=null,dc=!1,(r&8)!==0&&(r|=r&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=r;0<i;){var u=31-R2(i),d=1<<u;r|=e[u],i&=~d}return yt=r,Pa(),o}function K3(e,r){P0=null,L.H=Ja,r===uo||r===Ha?(r=fd(),K0=3):r===cd?(r=fd(),K0=4):K0=r===d3?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,re=r,U0===null&&(h2=1,ol(e,he(r,e.current)))}function Z3(){var e=L.H;return L.H=Ja,e===null?Ja:e}function X3(){var e=L.A;return L.A=h7,e}function gc(){h2=4,jt||(H0&4194048)!==H0&&ye.current!==null||(fn=!0),(It&134217727)===0&&(Br&134217727)===0||t2===null||Wt(t2,H0,ge,!1)}function Dc(e,r,o){var i=Y0;Y0|=2;var u=Z3(),d=X3();(t2!==e||H0!==r)&&(Al=null,mn(e,r)),r=!1;var F=h2;e:do try{if(K0!==0&&U0!==null){var S=U0,P=re;switch(K0){case 8:yc(),F=6;break e;case 3:case 2:case 9:case 6:ye.current===null&&(r=!0);var V=K0;if(K0=0,re=null,Cn(e,S,P,V),o&&fn){F=0;break e}break;default:V=K0,K0=0,re=null,Cn(e,S,P,V)}}C7(),F=h2;break}catch(e0){K3(e,e0)}while(!0);return r&&e.shellSuspendCounter++,ut=gr=null,Y0=i,L.H=u,L.A=d,U0===null&&(t2=null,H0=0,Pa()),F}function C7(){for(;U0!==null;)Q3(U0)}function y7(e,r){var o=Y0;Y0|=2;var i=Z3(),u=X3();t2!==e||H0!==r?(Al=null,ul=I2()+500,mn(e,r)):fn=Ue(e,r);e:do try{if(K0!==0&&U0!==null){r=U0;var d=re;t:switch(K0){case 1:K0=0,re=null,Cn(e,r,d,1);break;case 2:case 9:if(ud(d)){K0=0,re=null,J3(r);break}r=function(){K0!==2&&K0!==9||t2!==e||(K0=7),qe(e)},d.then(r,r);break e;case 3:K0=7;break e;case 4:K0=5;break e;case 7:ud(d)?(K0=0,re=null,J3(r)):(K0=0,re=null,Cn(e,r,d,7));break;case 5:var F=null;switch(U0.tag){case 26:F=U0.memoizedState;case 5:case 27:var S=U0;if(!F||Ph(F)){K0=0,re=null;var P=S.sibling;if(P!==null)U0=P;else{var V=S.return;V!==null?(U0=V,dl(V)):U0=null}break t}}K0=0,re=null,Cn(e,r,d,5);break;case 6:K0=0,re=null,Cn(e,r,d,6);break;case 8:yc(),h2=6;break e;default:throw Error(l(462))}}g7();break}catch(e0){K3(e,e0)}while(!0);return ut=gr=null,L.H=i,L.A=u,Y0=o,U0!==null?0:(t2=null,H0=0,Pa(),h2)}function g7(){for(;U0!==null&&!Hn();)Q3(U0)}function Q3(e){var r=B3(e.alternate,e,yt);e.memoizedProps=e.pendingProps,r===null?dl(e):U0=r}function J3(e){var r=e,o=r.alternate;switch(r.tag){case 15:case 0:r=g3(o,r,r.pendingProps,r.type,void 0,H0);break;case 11:r=g3(o,r,r.pendingProps,r.type.render,r.ref,H0);break;case 5:Ms(r);default:N3(o,r),r=U0=ed(r,yt),r=B3(o,r,yt)}e.memoizedProps=e.pendingProps,r===null?dl(e):U0=r}function Cn(e,r,o,i){ut=gr=null,Ms(r),sn=null,Do=0;var u=r.return;try{if(s7(e,u,r,o,H0)){h2=1,ol(e,he(o,e.current)),U0=null;return}}catch(d){if(u!==null)throw U0=u,d;h2=1,ol(e,he(o,e.current)),U0=null;return}r.flags&32768?(q0||i===1?e=!0:fn||(H0&536870912)!==0?e=!1:(jt=e=!0,(i===2||i===9||i===3||i===6)&&(i=ye.current,i!==null&&i.tag===13&&(i.flags|=16384))),eh(r,e)):dl(r)}function dl(e){var r=e;do{if((r.flags&32768)!==0){eh(r,jt);return}e=r.return;var o=u7(r.alternate,r,yt);if(o!==null){U0=o;return}if(r=r.sibling,r!==null){U0=r;return}U0=r=e}while(r!==null);h2===0&&(h2=5)}function eh(e,r){do{var o=A7(e.alternate,e);if(o!==null){o.flags&=32767,U0=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(e=e.sibling,e!==null)){U0=e;return}U0=e=o}while(e!==null);h2=6,U0=null}function th(e,r,o,i,u,d,F,S,P){e.cancelPendingCommit=null;do hl();while(_2!==0);if((Y0&6)!==0)throw Error(l(327));if(r!==null){if(r===e.current)throw Error(l(177));if(d=r.lanes|r.childLanes,d|=us,xa(e,o,d,F,S,P),e===t2&&(U0=t2=null,H0=0),hn=r,zt=e,pn=o,pc=d,mc=u,G3=i,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,w7(Ir,function(){return lh(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||i){i=L.T,L.T=null,u=G.p,G.p=2,F=Y0,Y0|=4;try{f7(e,r,o)}finally{Y0=F,G.p=u,L.T=i}}_2=1,rh(),nh(),oh()}}function rh(){if(_2===1){_2=0;var e=zt,r=hn,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=L.T,L.T=null;var i=G.p;G.p=2;var u=Y0;Y0|=4;try{j3(r,e);var d=kc,F=Vf(e.containerInfo),S=d.focusedElem,P=d.selectionRange;if(F!==S&&S&&S.ownerDocument&&Hf(S.ownerDocument.documentElement,S)){if(P!==null&&as(S)){var V=P.start,e0=P.end;if(e0===void 0&&(e0=V),"selectionStart"in S)S.selectionStart=V,S.selectionEnd=Math.min(e0,S.value.length);else{var o0=S.ownerDocument||document,$=o0&&o0.defaultView||window;if($.getSelection){var Y=$.getSelection(),R0=S.textContent.length,B0=Math.min(P.start,R0),J0=P.end===void 0?B0:Math.min(P.end,R0);!Y.extend&&B0>J0&&(F=J0,J0=B0,B0=F);var I=Wf(S,B0),j=Wf(S,J0);if(I&&j&&(Y.rangeCount!==1||Y.anchorNode!==I.node||Y.anchorOffset!==I.offset||Y.focusNode!==j.node||Y.focusOffset!==j.offset)){var W=o0.createRange();W.setStart(I.node,I.offset),Y.removeAllRanges(),B0>J0?(Y.addRange(W),Y.extend(j.node,j.offset)):(W.setEnd(j.node,j.offset),Y.addRange(W))}}}}for(o0=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&o0.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<o0.length;S++){var t0=o0[S];t0.element.scrollLeft=t0.left,t0.element.scrollTop=t0.top}}bl=!!_c,kc=_c=null}finally{Y0=u,G.p=i,L.T=o}}e.current=r,_2=2}}function nh(){if(_2===2){_2=0;var e=zt,r=hn,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=L.T,L.T=null;var i=G.p;G.p=2;var u=Y0;Y0|=4;try{P3(e,r.alternate,r)}finally{Y0=u,G.p=i,L.T=o}}_2=3}}function oh(){if(_2===4||_2===3){_2=0,Vn();var e=zt,r=hn,o=pn,i=G3;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?_2=5:(_2=0,hn=zt=null,ah(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ut=null),Yn(o),r=r.stateNode,i2&&typeof i2.onCommitFiberRoot=="function")try{i2.onCommitFiberRoot(G2,r,void 0,(r.current.flags&128)===128)}catch{}if(i!==null){r=L.T,u=G.p,G.p=2,L.T=null;try{for(var d=e.onRecoverableError,F=0;F<i.length;F++){var S=i[F];d(S.value,{componentStack:S.stack})}}finally{L.T=r,G.p=u}}(pn&3)!==0&&hl(),qe(e),u=e.pendingLanes,(o&4194090)!==0&&(u&42)!==0?e===Cc?Ro++:(Ro=0,Cc=e):Ro=0,Eo(0)}}function ah(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,so(r)))}function hl(e){return rh(),nh(),oh(),lh()}function lh(){if(_2!==5)return!1;var e=zt,r=pc;pc=0;var o=Yn(pn),i=L.T,u=G.p;try{G.p=32>o?32:o,L.T=null,o=mc,mc=null;var d=zt,F=pn;if(_2=0,hn=zt=null,pn=0,(Y0&6)!==0)throw Error(l(331));var S=Y0;if(Y0|=4,H3(d.current),U3(d,d.current,F,o),Y0=S,Eo(0,!1),i2&&typeof i2.onPostCommitFiberRoot=="function")try{i2.onPostCommitFiberRoot(G2,d)}catch{}return!0}finally{G.p=u,L.T=i,ah(e,r)}}function ih(e,r,o){r=he(o,r),r=Ks(e.stateNode,r,2),e=_t(e,r,2),e!==null&&(ir(e,2),qe(e))}function e2(e,r,o){if(e.tag===3)ih(e,e,o);else for(;r!==null;){if(r.tag===3){ih(r,e,o);break}else if(r.tag===1){var i=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ut===null||!Ut.has(i))){e=he(o,e),o=A3(2),i=_t(r,o,2),i!==null&&(f3(o,i,r,e),ir(i,2),qe(i));break}}r=r.return}}function vc(e,r,o){var i=e.pingCache;if(i===null){i=e.pingCache=new p7;var u=new Set;i.set(r,u)}else u=i.get(r),u===void 0&&(u=new Set,i.set(r,u));u.has(o)||(Ac=!0,u.add(o),e=D7.bind(null,e,r,o),r.then(e,e))}function D7(e,r,o){var i=e.pingCache;i!==null&&i.delete(r),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,t2===e&&(H0&o)===o&&(h2===4||h2===3&&(H0&62914560)===H0&&300>I2()-hc?(Y0&2)===0&&mn(e,0):fc|=o,dn===H0&&(dn=0)),qe(e)}function sh(e,r){r===0&&(r=va()),e=Xr(e,r),e!==null&&(ir(e,r),qe(e))}function v7(e){var r=e.memoizedState,o=0;r!==null&&(o=r.retryLane),sh(e,o)}function x7(e,r){var o=0;switch(e.tag){case 13:var i=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(l(314))}i!==null&&i.delete(r),sh(e,o)}function w7(e,r){return Re(e,r)}var pl=null,yn=null,xc=!1,ml=!1,wc=!1,br=0;function qe(e){e!==yn&&e.next===null&&(yn===null?pl=yn=e:yn=yn.next=e),ml=!0,xc||(xc=!0,B7())}function Eo(e,r){if(!wc&&ml){wc=!0;do for(var o=!1,i=pl;i!==null;){if(e!==0){var u=i.pendingLanes;if(u===0)var d=0;else{var F=i.suspendedLanes,S=i.pingedLanes;d=(1<<31-R2(42|e)+1)-1,d&=u&~(F&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(o=!0,fh(i,d))}else d=H0,d=lr(i,i===t2?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(d&3)===0||Ue(i,d)||(o=!0,fh(i,d));i=i.next}while(o);wc=!1}}function F7(){ch()}function ch(){ml=xc=!1;var e=0;br!==0&&(T7()&&(e=br),br=0);for(var r=I2(),o=null,i=pl;i!==null;){var u=i.next,d=uh(i,r);d===0?(i.next=null,o===null?pl=u:o.next=u,u===null&&(yn=o)):(o=i,(e!==0||(d&3)!==0)&&(ml=!0)),i=u}Eo(e)}function uh(e,r){for(var o=e.suspendedLanes,i=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var F=31-R2(d),S=1<<F,P=u[F];P===-1?((S&o)===0||(S&i)!==0)&&(u[F]=Da(S,r)):P<=r&&(e.expiredLanes|=S),d&=~S}if(r=t2,o=H0,o=lr(e,e===r?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,o===0||e===r&&(K0===2||K0===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&V2(i),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ue(e,o)){if(r=o&-o,r===e.callbackPriority)return r;switch(i!==null&&V2(i),Yn(o)){case 2:case 8:o=Ca;break;case 32:o=Ir;break;case 268435456:o=Ft;break;default:o=Ir}return i=Ah.bind(null,e),o=Re(o,i),e.callbackPriority=r,e.callbackNode=o,r}return i!==null&&i!==null&&V2(i),e.callbackPriority=2,e.callbackNode=null,2}function Ah(e,r){if(_2!==0&&_2!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(hl()&&e.callbackNode!==o)return null;var i=H0;return i=lr(e,e===t2?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:($3(e,i,r),uh(e,I2()),e.callbackNode!=null&&e.callbackNode===o?Ah.bind(null,e):null)}function fh(e,r){if(hl())return null;$3(e,r,!0)}function B7(){M7(function(){(Y0&6)!==0?Re(et,F7):ch()})}function Fc(){return br===0&&(br=Ur()),br}function dh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Na(""+e)}function hh(e,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,e.id&&o.setAttribute("form",e.id),r.parentNode.insertBefore(o,r),e=new FormData(e),o.parentNode.removeChild(o),e}function b7(e,r,o,i,u){if(r==="submit"&&o&&o.stateNode===u){var d=dh((u[c0]||null).action),F=i.submitter;F&&(r=(r=F[c0]||null)?dh(r.formAction):F.getAttribute("formAction"),r!==null&&(d=r,F=null));var S=new _a("action","action",null,i,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(br!==0){var P=F?hh(u,F):new FormData(u);Vs(o,{pending:!0,data:P,method:u.method,action:d},null,P)}}else typeof d=="function"&&(S.preventDefault(),P=F?hh(u,F):new FormData(u),Vs(o,{pending:!0,data:P,method:u.method,action:d},d,P))},currentTarget:u}]})}}for(var Bc=0;Bc<cs.length;Bc++){var bc=cs[Bc],N7=bc.toLowerCase(),S7=bc[0].toUpperCase()+bc.slice(1);_e(N7,"on"+S7)}_e($f,"onAnimationEnd"),_e(Yf,"onAnimationIteration"),_e(Kf,"onAnimationStart"),_e("dblclick","onDoubleClick"),_e("focusin","onFocus"),_e("focusout","onBlur"),_e(Gv,"onTransitionRun"),_e(qv,"onTransitionStart"),_e($v,"onTransitionCancel"),_e(Zf,"onTransitionEnd"),U2("onMouseEnter",["mouseout","mouseover"]),U2("onMouseLeave",["mouseout","mouseover"]),U2("onPointerEnter",["pointerout","pointerover"]),U2("onPointerLeave",["pointerout","pointerover"]),X2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),X2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),X2("onBeforeInput",["compositionend","keypress","textInput","paste"]),X2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),X2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),X2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function ph(e,r){r=(r&4)!==0;for(var o=0;o<e.length;o++){var i=e[o],u=i.event;i=i.listeners;e:{var d=void 0;if(r)for(var F=i.length-1;0<=F;F--){var S=i[F],P=S.instance,V=S.currentTarget;if(S=S.listener,P!==d&&u.isPropagationStopped())break e;d=S,u.currentTarget=V;try{d(u)}catch(e0){nl(e0)}u.currentTarget=null,d=P}else for(F=0;F<i.length;F++){if(S=i[F],P=S.instance,V=S.currentTarget,S=S.listener,P!==d&&u.isPropagationStopped())break e;d=S,u.currentTarget=V;try{d(u)}catch(e0){nl(e0)}u.currentTarget=null,d=P}}}}function z0(e,r){var o=r[y0];o===void 0&&(o=r[y0]=new Set);var i=e+"__bubble";o.has(i)||(mh(r,e,2,!1),o.add(i))}function Nc(e,r,o){var i=0;r&&(i|=4),mh(o,e,i,r)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function Sc(e){if(!e[Cl]){e[Cl]=!0,Z0.forEach(function(o){o!=="selectionchange"&&(R7.has(o)||Nc(o,!1,e),Nc(o,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Cl]||(r[Cl]=!0,Nc("selectionchange",!1,r))}}function mh(e,r,o,i){switch(Uh(r)){case 2:var u=r6;break;case 8:u=n6;break;default:u=Wc}o=u.bind(null,r,o,e),u=void 0,!Zi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),i?u!==void 0?e.addEventListener(r,o,{capture:!0,passive:u}):e.addEventListener(r,o,!0):u!==void 0?e.addEventListener(r,o,{passive:u}):e.addEventListener(r,o,!1)}function Rc(e,r,o,i,u){var d=i;if((r&1)===0&&(r&2)===0&&i!==null)e:for(;;){if(i===null)return;var F=i.tag;if(F===3||F===4){var S=i.stateNode.containerInfo;if(S===u)break;if(F===4)for(F=i.return;F!==null;){var P=F.tag;if((P===3||P===4)&&F.stateNode.containerInfo===u)return;F=F.return}for(;S!==null;){if(F=S0(S),F===null)return;if(P=F.tag,P===5||P===6||P===26||P===27){i=d=F;continue e}S=S.parentNode}}i=i.return}wf(function(){var V=d,e0=Yi(o),o0=[];e:{var $=Xf.get(e);if($!==void 0){var Y=_a,R0=e;switch(e){case"keypress":if(Ra(o)===0)break e;case"keydown":case"keyup":Y=wv;break;case"focusin":R0="focus",Y=es;break;case"focusout":R0="blur",Y=es;break;case"beforeblur":case"afterblur":Y=es;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Av;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=bv;break;case $f:case Yf:case Kf:Y=hv;break;case Zf:Y=Sv;break;case"scroll":case"scrollend":Y=cv;break;case"wheel":Y=Ev;break;case"copy":case"cut":case"paste":Y=mv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Sf;break;case"toggle":case"beforetoggle":Y=kv}var B0=(r&4)!==0,J0=!B0&&(e==="scroll"||e==="scrollend"),I=B0?$!==null?$+"Capture":null:$;B0=[];for(var j=V,W;j!==null;){var t0=j;if(W=t0.stateNode,t0=t0.tag,t0!==5&&t0!==26&&t0!==27||W===null||I===null||(t0=Kn(j,I),t0!=null&&B0.push(ko(j,t0,W))),J0)break;j=j.return}0<B0.length&&($=new Y($,R0,null,o,e0),o0.push({event:$,listeners:B0}))}}if((r&7)===0){e:{if($=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",$&&o!==$i&&(R0=o.relatedTarget||o.fromElement)&&(S0(R0)||R0[p0]))break e;if((Y||$)&&($=e0.window===e0?e0:($=e0.ownerDocument)?$.defaultView||$.parentWindow:window,Y?(R0=o.relatedTarget||o.toElement,Y=V,R0=R0?S0(R0):null,R0!==null&&(J0=c(R0),B0=R0.tag,R0!==J0||B0!==5&&B0!==27&&B0!==6)&&(R0=null)):(Y=null,R0=V),Y!==R0)){if(B0=bf,t0="onMouseLeave",I="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(B0=Sf,t0="onPointerLeave",I="onPointerEnter",j="pointer"),J0=Y==null?$:A2(Y),W=R0==null?$:A2(R0),$=new B0(t0,j+"leave",Y,o,e0),$.target=J0,$.relatedTarget=W,t0=null,S0(e0)===V&&(B0=new B0(I,j+"enter",R0,o,e0),B0.target=W,B0.relatedTarget=J0,t0=B0),J0=t0,Y&&R0)t:{for(B0=Y,I=R0,j=0,W=B0;W;W=gn(W))j++;for(W=0,t0=I;t0;t0=gn(t0))W++;for(;0<j-W;)B0=gn(B0),j--;for(;0<W-j;)I=gn(I),W--;for(;j--;){if(B0===I||I!==null&&B0===I.alternate)break t;B0=gn(B0),I=gn(I)}B0=null}else B0=null;Y!==null&&Ch(o0,$,Y,B0,!1),R0!==null&&J0!==null&&Ch(o0,J0,R0,B0,!0)}}e:{if($=V?A2(V):window,Y=$.nodeName&&$.nodeName.toLowerCase(),Y==="select"||Y==="input"&&$.type==="file")var d0=Of;else if(Pf($))if(Lf)d0=Wv;else{d0=Uv;var I0=Iv}else Y=$.nodeName,!Y||Y.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?V&&qi(V.elementType)&&(d0=Of):d0=zv;if(d0&&(d0=d0(e,V))){Mf(o0,d0,o,e0);break e}I0&&I0(e,$,V),e==="focusout"&&V&&$.type==="number"&&V.memoizedProps.value!=null&&Gi($,"number",$.value)}switch(I0=V?A2(V):window,e){case"focusin":(Pf(I0)||I0.contentEditable==="true")&&(Yr=I0,ls=V,no=null);break;case"focusout":no=ls=Yr=null;break;case"mousedown":is=!0;break;case"contextmenu":case"mouseup":case"dragend":is=!1,Gf(o0,o,e0);break;case"selectionchange":if(Vv)break;case"keydown":case"keyup":Gf(o0,o,e0)}var D0;if(rs)e:{switch(e){case"compositionstart":var N0="onCompositionStart";break e;case"compositionend":N0="onCompositionEnd";break e;case"compositionupdate":N0="onCompositionUpdate";break e}N0=void 0}else $r?kf(e,o)&&(N0="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(N0="onCompositionStart");N0&&(Rf&&o.locale!=="ko"&&($r||N0!=="onCompositionStart"?N0==="onCompositionEnd"&&$r&&(D0=Ff()):(Nt=e0,Xi="value"in Nt?Nt.value:Nt.textContent,$r=!0)),I0=yl(V,N0),0<I0.length&&(N0=new Nf(N0,e,null,o,e0),o0.push({event:N0,listeners:I0}),D0?N0.data=D0:(D0=Tf(o),D0!==null&&(N0.data=D0)))),(D0=Pv?Mv(e,o):Ov(e,o))&&(N0=yl(V,"onBeforeInput"),0<N0.length&&(I0=new Nf("onBeforeInput","beforeinput",null,o,e0),o0.push({event:I0,listeners:N0}),I0.data=D0)),b7(o0,e,V,o,e0)}ph(o0,r)})}function ko(e,r,o){return{instance:e,listener:r,currentTarget:o}}function yl(e,r){for(var o=r+"Capture",i=[];e!==null;){var u=e,d=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||d===null||(u=Kn(e,o),u!=null&&i.unshift(ko(e,u,d)),u=Kn(e,r),u!=null&&i.push(ko(e,u,d))),e.tag===3)return i;e=e.return}return[]}function gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ch(e,r,o,i,u){for(var d=r._reactName,F=[];o!==null&&o!==i;){var S=o,P=S.alternate,V=S.stateNode;if(S=S.tag,P!==null&&P===i)break;S!==5&&S!==26&&S!==27||V===null||(P=V,u?(V=Kn(o,d),V!=null&&F.unshift(ko(o,V,P))):u||(V=Kn(o,d),V!=null&&F.push(ko(o,V,P)))),o=o.return}F.length!==0&&e.push({event:r,listeners:F})}var E7=/\r\n?/g,_7=/\u0000|\uFFFD/g;function yh(e){return(typeof e=="string"?e:""+e).replace(E7,`
`).replace(_7,"")}function gh(e,r){return r=yh(r),yh(e)===r}function gl(){}function Q0(e,r,o,i,u,d){switch(o){case"children":typeof i=="string"?r==="body"||r==="textarea"&&i===""||Vr(e,i):(typeof i=="number"||typeof i=="bigint")&&r!=="body"&&Vr(e,""+i);break;case"className":at(e,"class",i);break;case"tabIndex":at(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,o,i);break;case"style":vf(e,i,d);break;case"data":if(r!=="object"){at(e,"data",i);break}case"src":case"href":if(i===""&&(r!=="a"||o!=="href")){e.removeAttribute(o);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(o);break}i=Na(""+i),e.setAttribute(o,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(o==="formAction"?(r!=="input"&&Q0(e,r,"name",u.name,u,null),Q0(e,r,"formEncType",u.formEncType,u,null),Q0(e,r,"formMethod",u.formMethod,u,null),Q0(e,r,"formTarget",u.formTarget,u,null)):(Q0(e,r,"encType",u.encType,u,null),Q0(e,r,"method",u.method,u,null),Q0(e,r,"target",u.target,u,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(o);break}i=Na(""+i),e.setAttribute(o,i);break;case"onClick":i!=null&&(e.onclick=gl);break;case"onScroll":i!=null&&z0("scroll",e);break;case"onScrollEnd":i!=null&&z0("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(o=i.__html,o!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=o}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}o=Na(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(o,""+i):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":i===!0?e.setAttribute(o,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(o,i):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(o,i):e.removeAttribute(o);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(o):e.setAttribute(o,i);break;case"popover":z0("beforetoggle",e),z0("toggle",e),ot(e,"popover",i);break;case"xlinkActuate":j0(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":j0(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":j0(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":j0(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":j0(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":j0(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":j0(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":j0(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":j0(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ot(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=iv.get(o)||o,ot(e,o,i))}}function Ec(e,r,o,i,u,d){switch(o){case"style":vf(e,i,d);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(l(61));if(o=i.__html,o!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=o}}break;case"children":typeof i=="string"?Vr(e,i):(typeof i=="number"||typeof i=="bigint")&&Vr(e,""+i);break;case"onScroll":i!=null&&z0("scroll",e);break;case"onScrollEnd":i!=null&&z0("scrollend",e);break;case"onClick":i!=null&&(e.onclick=gl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ze.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(u=o.endsWith("Capture"),r=o.slice(2,u?o.length-7:void 0),d=e[c0]||null,d=d!=null?d[o]:null,typeof d=="function"&&e.removeEventListener(r,d,u),typeof i=="function")){typeof d!="function"&&d!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(r,i,u);break e}o in e?e[o]=i:i===!0?e.setAttribute(o,""):ot(e,o,i)}}}function k2(e,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":z0("error",e),z0("load",e);var i=!1,u=!1,d;for(d in o)if(o.hasOwnProperty(d)){var F=o[d];if(F!=null)switch(d){case"src":i=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,r));default:Q0(e,r,d,F,o,null)}}u&&Q0(e,r,"srcSet",o.srcSet,o,null),i&&Q0(e,r,"src",o.src,o,null);return;case"input":z0("invalid",e);var S=d=F=u=null,P=null,V=null;for(i in o)if(o.hasOwnProperty(i)){var e0=o[i];if(e0!=null)switch(i){case"name":u=e0;break;case"type":F=e0;break;case"checked":P=e0;break;case"defaultChecked":V=e0;break;case"value":d=e0;break;case"defaultValue":S=e0;break;case"children":case"dangerouslySetInnerHTML":if(e0!=null)throw Error(l(137,r));break;default:Q0(e,r,i,e0,o,null)}}Cf(e,d,S,P,V,F,u,!1),Ba(e);return;case"select":z0("invalid",e),i=F=d=null;for(u in o)if(o.hasOwnProperty(u)&&(S=o[u],S!=null))switch(u){case"value":d=S;break;case"defaultValue":F=S;break;case"multiple":i=S;default:Q0(e,r,u,S,o,null)}r=d,o=F,e.multiple=!!i,r!=null?Hr(e,!!i,r,!1):o!=null&&Hr(e,!!i,o,!0);return;case"textarea":z0("invalid",e),d=u=i=null;for(F in o)if(o.hasOwnProperty(F)&&(S=o[F],S!=null))switch(F){case"value":i=S;break;case"defaultValue":u=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:Q0(e,r,F,S,o,null)}gf(e,i,u,d),Ba(e);return;case"option":for(P in o)if(o.hasOwnProperty(P)&&(i=o[P],i!=null))switch(P){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Q0(e,r,P,i,o,null)}return;case"dialog":z0("beforetoggle",e),z0("toggle",e),z0("cancel",e),z0("close",e);break;case"iframe":case"object":z0("load",e);break;case"video":case"audio":for(i=0;i<_o.length;i++)z0(_o[i],e);break;case"image":z0("error",e),z0("load",e);break;case"details":z0("toggle",e);break;case"embed":case"source":case"link":z0("error",e),z0("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in o)if(o.hasOwnProperty(V)&&(i=o[V],i!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,r));default:Q0(e,r,V,i,o,null)}return;default:if(qi(r)){for(e0 in o)o.hasOwnProperty(e0)&&(i=o[e0],i!==void 0&&Ec(e,r,e0,i,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(i=o[S],i!=null&&Q0(e,r,S,i,o,null))}function k7(e,r,o,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,d=null,F=null,S=null,P=null,V=null,e0=null;for(Y in o){var o0=o[Y];if(o.hasOwnProperty(Y)&&o0!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":P=o0;default:i.hasOwnProperty(Y)||Q0(e,r,Y,null,i,o0)}}for(var $ in i){var Y=i[$];if(o0=o[$],i.hasOwnProperty($)&&(Y!=null||o0!=null))switch($){case"type":d=Y;break;case"name":u=Y;break;case"checked":V=Y;break;case"defaultChecked":e0=Y;break;case"value":F=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(l(137,r));break;default:Y!==o0&&Q0(e,r,$,Y,i,o0)}}Vi(e,F,S,P,V,e0,d,u);return;case"select":Y=F=S=$=null;for(d in o)if(P=o[d],o.hasOwnProperty(d)&&P!=null)switch(d){case"value":break;case"multiple":Y=P;default:i.hasOwnProperty(d)||Q0(e,r,d,null,i,P)}for(u in i)if(d=i[u],P=o[u],i.hasOwnProperty(u)&&(d!=null||P!=null))switch(u){case"value":$=d;break;case"defaultValue":S=d;break;case"multiple":F=d;default:d!==P&&Q0(e,r,u,d,i,P)}r=S,o=F,i=Y,$!=null?Hr(e,!!o,$,!1):!!i!=!!o&&(r!=null?Hr(e,!!o,r,!0):Hr(e,!!o,o?[]:"",!1));return;case"textarea":Y=$=null;for(S in o)if(u=o[S],o.hasOwnProperty(S)&&u!=null&&!i.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Q0(e,r,S,null,i,u)}for(F in i)if(u=i[F],d=o[F],i.hasOwnProperty(F)&&(u!=null||d!=null))switch(F){case"value":$=u;break;case"defaultValue":Y=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==d&&Q0(e,r,F,u,i,d)}yf(e,$,Y);return;case"option":for(var R0 in o)if($=o[R0],o.hasOwnProperty(R0)&&$!=null&&!i.hasOwnProperty(R0))switch(R0){case"selected":e.selected=!1;break;default:Q0(e,r,R0,null,i,$)}for(P in i)if($=i[P],Y=o[P],i.hasOwnProperty(P)&&$!==Y&&($!=null||Y!=null))switch(P){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Q0(e,r,P,$,i,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var B0 in o)$=o[B0],o.hasOwnProperty(B0)&&$!=null&&!i.hasOwnProperty(B0)&&Q0(e,r,B0,null,i,$);for(V in i)if($=i[V],Y=o[V],i.hasOwnProperty(V)&&$!==Y&&($!=null||Y!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,r));break;default:Q0(e,r,V,$,i,Y)}return;default:if(qi(r)){for(var J0 in o)$=o[J0],o.hasOwnProperty(J0)&&$!==void 0&&!i.hasOwnProperty(J0)&&Ec(e,r,J0,void 0,i,$);for(e0 in i)$=i[e0],Y=o[e0],!i.hasOwnProperty(e0)||$===Y||$===void 0&&Y===void 0||Ec(e,r,e0,$,i,Y);return}}for(var I in o)$=o[I],o.hasOwnProperty(I)&&$!=null&&!i.hasOwnProperty(I)&&Q0(e,r,I,null,i,$);for(o0 in i)$=i[o0],Y=o[o0],!i.hasOwnProperty(o0)||$===Y||$==null&&Y==null||Q0(e,r,o0,$,i,Y)}var _c=null,kc=null;function Dl(e){return e.nodeType===9?e:e.ownerDocument}function Dh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vh(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function Tc(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pc=null;function T7(){var e=window.event;return e&&e.type==="popstate"?e===Pc?!1:(Pc=e,!0):(Pc=null,!1)}var xh=typeof setTimeout=="function"?setTimeout:void 0,P7=typeof clearTimeout=="function"?clearTimeout:void 0,wh=typeof Promise=="function"?Promise:void 0,M7=typeof queueMicrotask=="function"?queueMicrotask:typeof wh<"u"?function(e){return wh.resolve(null).then(e).catch(O7)}:xh;function O7(e){setTimeout(function(){throw e})}function Ht(e){return e==="head"}function Fh(e,r){var o=r,i=0,u=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"){if(0<i&&8>i){o=i;var F=e.ownerDocument;if(o&1&&To(F.documentElement),o&2&&To(F.body),o&4)for(o=F.head,To(o),F=o.firstChild;F;){var S=F.nextSibling,P=F.nodeName;F[x0]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&F.rel.toLowerCase()==="stylesheet"||o.removeChild(F),F=S}}if(u===0){e.removeChild(d),zo(r);return}u--}else o==="$"||o==="$?"||o==="$!"?u++:i=o.charCodeAt(0)-48;else i=0;o=d}while(o);zo(r)}function Mc(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Mc(o),g0(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function L7(e,r,o,i){for(;e.nodeType===1;){var u=o;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[x0])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var d=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Te(e.nextSibling),e===null)break}return null}function j7(e,r,o){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Te(e.nextSibling),e===null))return null;return e}function Oc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function I7(e,r){var o=e.ownerDocument;if(e.data!=="$?"||o.readyState==="complete")r();else{var i=function(){r(),o.removeEventListener("DOMContentLoaded",i)};o.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Te(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return e}var Lc=null;function Bh(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return e;r--}else o==="/$"&&r++}e=e.previousSibling}return null}function bh(e,r,o){switch(r=Dl(o),e){case"html":if(e=r.documentElement,!e)throw Error(l(452));return e;case"head":if(e=r.head,!e)throw Error(l(453));return e;case"body":if(e=r.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function To(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);g0(e)}var De=new Map,Nh=new Set;function vl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gt=G.d;G.d={f:U7,r:z7,D:W7,C:H7,L:V7,m:G7,X:$7,S:q7,M:Y7};function U7(){var e=gt.f(),r=fl();return e||r}function z7(e){var r=G0(e);r!==null&&r.tag===5&&r.type==="form"?$d(r):gt.r(e)}var Dn=typeof document>"u"?null:document;function Sh(e,r,o){var i=Dn;if(i&&typeof r=="string"&&r){var u=de(r);u='link[rel="'+e+'"][href="'+u+'"]',typeof o=="string"&&(u+='[crossorigin="'+o+'"]'),Nh.has(u)||(Nh.add(u),e={rel:e,crossOrigin:o,href:r},i.querySelector(u)===null&&(r=i.createElement("link"),k2(r,"link",e),_0(r),i.head.appendChild(r)))}}function W7(e){gt.D(e),Sh("dns-prefetch",e,null)}function H7(e,r){gt.C(e,r),Sh("preconnect",e,r)}function V7(e,r,o){gt.L(e,r,o);var i=Dn;if(i&&e&&r){var u='link[rel="preload"][as="'+de(r)+'"]';r==="image"&&o&&o.imageSrcSet?(u+='[imagesrcset="'+de(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(u+='[imagesizes="'+de(o.imageSizes)+'"]')):u+='[href="'+de(e)+'"]';var d=u;switch(r){case"style":d=vn(e);break;case"script":d=xn(e)}De.has(d)||(e=y({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:e,as:r},o),De.set(d,e),i.querySelector(u)!==null||r==="style"&&i.querySelector(Po(d))||r==="script"&&i.querySelector(Mo(d))||(r=i.createElement("link"),k2(r,"link",e),_0(r),i.head.appendChild(r)))}}function G7(e,r){gt.m(e,r);var o=Dn;if(o&&e){var i=r&&typeof r.as=="string"?r.as:"script",u='link[rel="modulepreload"][as="'+de(i)+'"][href="'+de(e)+'"]',d=u;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=xn(e)}if(!De.has(d)&&(e=y({rel:"modulepreload",href:e},r),De.set(d,e),o.querySelector(u)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Mo(d)))return}i=o.createElement("link"),k2(i,"link",e),_0(i),o.head.appendChild(i)}}}function q7(e,r,o){gt.S(e,r,o);var i=Dn;if(i&&e){var u=f2(i).hoistableStyles,d=vn(e);r=r||"default";var F=u.get(d);if(!F){var S={loading:0,preload:null};if(F=i.querySelector(Po(d)))S.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":r},o),(o=De.get(d))&&jc(e,o);var P=F=i.createElement("link");_0(P),k2(P,"link",e),P._p=new Promise(function(V,e0){P.onload=V,P.onerror=e0}),P.addEventListener("load",function(){S.loading|=1}),P.addEventListener("error",function(){S.loading|=2}),S.loading|=4,xl(F,r,i)}F={type:"stylesheet",instance:F,count:1,state:S},u.set(d,F)}}}function $7(e,r){gt.X(e,r);var o=Dn;if(o&&e){var i=f2(o).hoistableScripts,u=xn(e),d=i.get(u);d||(d=o.querySelector(Mo(u)),d||(e=y({src:e,async:!0},r),(r=De.get(u))&&Ic(e,r),d=o.createElement("script"),_0(d),k2(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},i.set(u,d))}}function Y7(e,r){gt.M(e,r);var o=Dn;if(o&&e){var i=f2(o).hoistableScripts,u=xn(e),d=i.get(u);d||(d=o.querySelector(Mo(u)),d||(e=y({src:e,async:!0,type:"module"},r),(r=De.get(u))&&Ic(e,r),d=o.createElement("script"),_0(d),k2(d,"link",e),o.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},i.set(u,d))}}function Rh(e,r,o,i){var u=(u=m0.current)?vl(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=vn(o.href),o=f2(u).hoistableStyles,i=o.get(r),i||(i={type:"style",instance:null,count:0,state:null},o.set(r,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=vn(o.href);var d=f2(u).hoistableStyles,F=d.get(e);if(F||(u=u.ownerDocument||u,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,F),(d=u.querySelector(Po(e)))&&!d._p&&(F.instance=d,F.state.loading=5),De.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},De.set(e,o),d||K7(u,e,o,F.state))),r&&i===null)throw Error(l(528,""));return F}if(r&&i!==null)throw Error(l(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xn(o),o=f2(u).hoistableScripts,i=o.get(r),i||(i={type:"script",instance:null,count:0,state:null},o.set(r,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function vn(e){return'href="'+de(e)+'"'}function Po(e){return'link[rel="stylesheet"]['+e+"]"}function Eh(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function K7(e,r,o,i){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?i.loading=1:(r=e.createElement("link"),i.preload=r,r.addEventListener("load",function(){return i.loading|=1}),r.addEventListener("error",function(){return i.loading|=2}),k2(r,"link",o),_0(r),e.head.appendChild(r))}function xn(e){return'[src="'+de(e)+'"]'}function Mo(e){return"script[async]"+e}function _h(e,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var i=e.querySelector('style[data-href~="'+de(o.href)+'"]');if(i)return r.instance=i,_0(i),i;var u=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),_0(i),k2(i,"style",u),xl(i,o.precedence,e),r.instance=i;case"stylesheet":u=vn(o.href);var d=e.querySelector(Po(u));if(d)return r.state.loading|=4,r.instance=d,_0(d),d;i=Eh(o),(u=De.get(u))&&jc(i,u),d=(e.ownerDocument||e).createElement("link"),_0(d);var F=d;return F._p=new Promise(function(S,P){F.onload=S,F.onerror=P}),k2(d,"link",i),r.state.loading|=4,xl(d,o.precedence,e),r.instance=d;case"script":return d=xn(o.src),(u=e.querySelector(Mo(d)))?(r.instance=u,_0(u),u):(i=o,(u=De.get(d))&&(i=y({},o),Ic(i,u)),e=e.ownerDocument||e,u=e.createElement("script"),_0(u),k2(u,"link",i),e.head.appendChild(u),r.instance=u);case"void":return null;default:throw Error(l(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(i=r.instance,r.state.loading|=4,xl(i,o.precedence,e));return r.instance}function xl(e,r,o){for(var i=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=i.length?i[i.length-1]:null,d=u,F=0;F<i.length;F++){var S=i[F];if(S.dataset.precedence===r)d=S;else if(d!==u)break}d?d.parentNode.insertBefore(e,d.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(e,r.firstChild))}function jc(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function Ic(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var wl=null;function kh(e,r,o){if(wl===null){var i=new Map,u=wl=new Map;u.set(o,i)}else u=wl,i=u.get(o),i||(i=new Map,u.set(o,i));if(i.has(e))return i;for(i.set(e,null),o=o.getElementsByTagName(e),u=0;u<o.length;u++){var d=o[u];if(!(d[x0]||d[a0]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var F=d.getAttribute(r)||"";F=e+F;var S=i.get(F);S?S.push(d):i.set(F,[d])}}return i}function Th(e,r,o){e=e.ownerDocument||e,e.head.insertBefore(o,r==="title"?e.querySelector("head > title"):null)}function Z7(e,r,o){if(o===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ph(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Oo=null;function X7(){}function Q7(e,r,o){if(Oo===null)throw Error(l(475));var i=Oo;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=vn(o.href),d=e.querySelector(Po(u));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=Fl.bind(i),e.then(i,i)),r.state.loading|=4,r.instance=d,_0(d);return}d=e.ownerDocument||e,o=Eh(o),(u=De.get(u))&&jc(o,u),d=d.createElement("link"),_0(d);var F=d;F._p=new Promise(function(S,P){F.onload=S,F.onerror=P}),k2(d,"link",o),r.instance=d}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,e),(e=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Fl.bind(i),e.addEventListener("load",r),e.addEventListener("error",r))}}function J7(){if(Oo===null)throw Error(l(475));var e=Oo;return e.stylesheets&&e.count===0&&Uc(e,e.stylesheets),0<e.count?function(r){var o=setTimeout(function(){if(e.stylesheets&&Uc(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o)}}:null}function Fl(){if(this.count--,this.count===0){if(this.stylesheets)Uc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Bl=null;function Uc(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Bl=new Map,r.forEach(e6,e),Bl=null,Fl.call(e))}function e6(e,r){if(!(r.state.loading&4)){var o=Bl.get(e);if(o)var i=o.get(null);else{o=new Map,Bl.set(e,o);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<u.length;d++){var F=u[d];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(o.set(F.dataset.precedence,F),i=F)}i&&o.set(null,i)}u=r.instance,F=u.getAttribute("data-precedence"),d=o.get(F)||i,d===i&&o.set(null,u),o.set(F,u),this.count++,i=Fl.bind(this),u.addEventListener("load",i),u.addEventListener("error",i),d?d.parentNode.insertBefore(u,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),r.state.loading|=4}}var Lo={$$typeof:N,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function t6(e,r,o,i,u,d,F,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zr(0),this.hiddenUpdates=zr(null),this.identifierPrefix=i,this.onUncaughtError=u,this.onCaughtError=d,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Mh(e,r,o,i,u,d,F,S,P,V,e0,o0){return e=new t6(e,r,o,F,S,P,V,o0),r=1,d===!0&&(r|=24),d=J2(3,null,null,r),e.current=d,d.stateNode=e,r=vs(),r.refCount++,e.pooledCache=r,r.refCount++,d.memoizedState={element:i,isDehydrated:o,cache:r},Bs(d),e}function Oh(e){return e?(e=Qr,e):Qr}function Lh(e,r,o,i,u,d){u=Oh(u),i.context===null?i.context=u:i.pendingContext=u,i=Et(r),i.payload={element:o},d=d===void 0?null:d,d!==null&&(i.callback=d),o=_t(e,i,r),o!==null&&(oe(o,e,r),fo(o,e,r))}function jh(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<r?o:r}}function zc(e,r){jh(e,r),(e=e.alternate)&&jh(e,r)}function Ih(e){if(e.tag===13){var r=Xr(e,67108864);r!==null&&oe(r,e,67108864),zc(e,67108864)}}var bl=!0;function r6(e,r,o,i){var u=L.T;L.T=null;var d=G.p;try{G.p=2,Wc(e,r,o,i)}finally{G.p=d,L.T=u}}function n6(e,r,o,i){var u=L.T;L.T=null;var d=G.p;try{G.p=8,Wc(e,r,o,i)}finally{G.p=d,L.T=u}}function Wc(e,r,o,i){if(bl){var u=Hc(i);if(u===null)Rc(e,r,i,Nl,o),zh(e,i);else if(a6(u,e,r,o,i))i.stopPropagation();else if(zh(e,i),r&4&&-1<o6.indexOf(e)){for(;u!==null;){var d=G0(u);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var F=rt(d.pendingLanes);if(F!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;F;){var P=1<<31-R2(F);S.entanglements[1]|=P,F&=~P}qe(d),(Y0&6)===0&&(ul=I2()+500,Eo(0))}}break;case 13:S=Xr(d,2),S!==null&&oe(S,d,2),fl(),zc(d,2)}if(d=Hc(i),d===null&&Rc(e,r,i,Nl,o),d===u)break;u=d}u!==null&&i.stopPropagation()}else Rc(e,r,i,null,o)}}function Hc(e){return e=Yi(e),Vc(e)}var Nl=null;function Vc(e){if(Nl=null,e=S0(e),e!==null){var r=c(e);if(r===null)e=null;else{var o=r.tag;if(o===13){if(e=A(r),e!==null)return e;e=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Nl=e,null}function Uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gn()){case et:return 2;case Ca:return 8;case Ir:case tt:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var Gc=!1,Vt=null,Gt=null,qt=null,jo=new Map,Io=new Map,$t=[],o6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zh(e,r){switch(e){case"focusin":case"focusout":Vt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":jo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Io.delete(r.pointerId)}}function Uo(e,r,o,i,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:o,eventSystemFlags:i,nativeEvent:d,targetContainers:[u]},r!==null&&(r=G0(r),r!==null&&Ih(r)),e):(e.eventSystemFlags|=i,r=e.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),e)}function a6(e,r,o,i,u){switch(r){case"focusin":return Vt=Uo(Vt,e,r,o,i,u),!0;case"dragenter":return Gt=Uo(Gt,e,r,o,i,u),!0;case"mouseover":return qt=Uo(qt,e,r,o,i,u),!0;case"pointerover":var d=u.pointerId;return jo.set(d,Uo(jo.get(d)||null,e,r,o,i,u)),!0;case"gotpointercapture":return d=u.pointerId,Io.set(d,Uo(Io.get(d)||null,e,r,o,i,u)),!0}return!1}function Wh(e){var r=S0(e.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=A(o),r!==null){e.blockedOn=r,z(e.priority,function(){if(o.tag===13){var i=ne();i=$n(i);var u=Xr(o,i);u!==null&&oe(u,o,i),zc(o,i)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sl(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var o=Hc(e.nativeEvent);if(o===null){o=e.nativeEvent;var i=new o.constructor(o.type,o);$i=i,o.target.dispatchEvent(i),$i=null}else return r=G0(o),r!==null&&Ih(r),e.blockedOn=o,!1;r.shift()}return!0}function Hh(e,r,o){Sl(e)&&o.delete(r)}function l6(){Gc=!1,Vt!==null&&Sl(Vt)&&(Vt=null),Gt!==null&&Sl(Gt)&&(Gt=null),qt!==null&&Sl(qt)&&(qt=null),jo.forEach(Hh),Io.forEach(Hh)}function Rl(e,r){e.blockedOn===r&&(e.blockedOn=null,Gc||(Gc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,l6)))}var El=null;function Vh(e){El!==e&&(El=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){El===e&&(El=null);for(var r=0;r<e.length;r+=3){var o=e[r],i=e[r+1],u=e[r+2];if(typeof i!="function"){if(Vc(i||o)===null)continue;break}var d=G0(o);d!==null&&(e.splice(r,3),r-=3,Vs(d,{pending:!0,data:u,method:o.method,action:i},i,u))}}))}function zo(e){function r(P){return Rl(P,e)}Vt!==null&&Rl(Vt,e),Gt!==null&&Rl(Gt,e),qt!==null&&Rl(qt,e),jo.forEach(r),Io.forEach(r);for(var o=0;o<$t.length;o++){var i=$t[o];i.blockedOn===e&&(i.blockedOn=null)}for(;0<$t.length&&(o=$t[0],o.blockedOn===null);)Wh(o),o.blockedOn===null&&$t.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(i=0;i<o.length;i+=3){var u=o[i],d=o[i+1],F=u[c0]||null;if(typeof d=="function")F||Vh(o);else if(F){var S=null;if(d&&d.hasAttribute("formAction")){if(u=d,F=d[c0]||null)S=F.formAction;else if(Vc(u)!==null)continue}else S=F.action;typeof S=="function"?o[i+1]=S:(o.splice(i,3),i-=3),Vh(o)}}}function qc(e){this._internalRoot=e}_l.prototype.render=qc.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(l(409));var o=r.current,i=ne();Lh(o,i,e,r,null,null)},_l.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Lh(e.current,2,null,e,null,null),fl(),r[p0]=null}};function _l(e){this._internalRoot=e}_l.prototype.unstable_scheduleHydration=function(e){if(e){var r=M();e={blockedOn:null,target:e,priority:r};for(var o=0;o<$t.length&&r!==0&&r<$t[o].priority;o++);$t.splice(o,0,e),o===0&&Wh(e)}};var Gh=n.version;if(Gh!=="19.1.1")throw Error(l(527,Gh,"19.1.1"));G.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(r),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var i6={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{G2=kl.inject(i6),i2=kl}catch{}}return Ho.createRoot=function(e,r){if(!s(e))throw Error(l(299));var o=!1,i="",u=i3,d=s3,F=c3,S=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(F=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(S=r.unstable_transitionCallbacks)),r=Mh(e,1,!1,null,null,o,i,u,d,F,S,null),e[p0]=r.current,Sc(e),new qc(r)},Ho.hydrateRoot=function(e,r,o){if(!s(e))throw Error(l(299));var i=!1,u="",d=i3,F=s3,S=c3,P=null,V=null;return o!=null&&(o.unstable_strictMode===!0&&(i=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(F=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(P=o.unstable_transitionCallbacks),o.formState!==void 0&&(V=o.formState)),r=Mh(e,1,!0,r,o??null,i,u,d,F,S,P,V),r.context=Oh(null),o=r.current,i=ne(),i=$n(i),u=Et(i),u.callback=null,_t(o,u,i),o=i,r.current.lanes=o,ir(r,o),qe(r),e[p0]=r.current,Sc(e),new _l(r)},Ho.version="19.1.1",Ho}var tp;function y6(){if(tp)return Yc.exports;tp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Yc.exports=C6(),Yc.exports}var g6=y6(),g=uA();const n2=yi(g),gi=Om({__proto__:null,default:n2},[g]);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jm=t=>{throw TypeError(t)},D6=(t,n,a)=>n.has(t)||jm("Cannot "+a),Jc=(t,n,a)=>(D6(t,n,"read from private field"),a?a.call(t):n.get(t)),v6=(t,n,a)=>n.has(t)?jm("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,a),rp="popstate";function x6(t={}){function n(l,s){let{pathname:c,search:A,hash:f}=l.location;return Jo("",{pathname:c,search:A,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function a(l,s){return typeof s=="string"?s:Xt(s)}return F6(n,a,null,t)}function L0(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function p2(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function w6(){return Math.random().toString(36).substring(2,10)}function np(t,n){return{usr:t.state,key:t.key,idx:n}}function Jo(t,n,a=null,l){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?er(n):n,state:a,key:n&&n.key||l||w6()}}function Xt({pathname:t="/",search:n="",hash:a=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function er(t){let n={};if(t){let a=t.indexOf("#");a>=0&&(n.hash=t.substring(a),t=t.substring(0,a));let l=t.indexOf("?");l>=0&&(n.search=t.substring(l),t=t.substring(0,l)),t&&(n.pathname=t)}return n}function F6(t,n,a,l={}){let{window:s=document.defaultView,v5Compat:c=!1}=l,A=s.history,f="POP",p=null,h=y();h==null&&(h=0,A.replaceState({...A.state,idx:h},""));function y(){return(A.state||{idx:null}).idx}function m(){f="POP";let B=y(),b=B==null?null:B-h;h=B,p&&p({action:f,location:x.location,delta:b})}function D(B,b){f="PUSH";let R=Jo(x.location,B,b);h=y()+1;let N=np(R,h),_=x.createHref(R);try{A.pushState(N,"",_)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(_)}c&&p&&p({action:f,location:x.location,delta:1})}function v(B,b){f="REPLACE";let R=Jo(x.location,B,b);h=y();let N=np(R,h),_=x.createHref(R);A.replaceState(N,"",_),c&&p&&p({action:f,location:x.location,delta:0})}function w(B){return Im(B)}let x={get action(){return f},get location(){return t(s,A)},listen(B){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(rp,m),p=B,()=>{s.removeEventListener(rp,m),p=null}},createHref(B){return n(s,B)},createURL:w,encodeLocation(B){let b=w(B);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:D,replace:v,go(B){return A.go(B)}};return x}function Im(t,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),L0(a,"No window.location.(origin|href) available to create URL");let l=typeof t=="string"?t:Xt(t);return l=l.replace(/ $/,"%20"),!n&&l.startsWith("//")&&(l=a+l),new URL(l,a)}var Yo,op=class{constructor(t){if(v6(this,Yo,new Map),t)for(let[n,a]of t)this.set(n,a)}get(t){if(Jc(this,Yo).has(t))return Jc(this,Yo).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,n){Jc(this,Yo).set(t,n)}};Yo=new WeakMap;var B6=new Set(["lazy","caseSensitive","path","id","index","children"]);function b6(t){return B6.has(t)}var N6=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function S6(t){return N6.has(t)}function R6(t){return t.index===!0}function ea(t,n,a=[],l={},s=!1){return t.map((c,A)=>{let f=[...a,String(A)],p=typeof c.id=="string"?c.id:f.join("-");if(L0(c.index!==!0||!c.children,"Cannot specify children on an index route"),L0(s||!l[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),R6(c)){let h={...c,...n(c),id:p};return l[p]=h,h}else{let h={...c,...n(c),id:p,children:void 0};return l[p]=h,c.children&&(h.children=ea(c.children,n,f,l,s)),h}})}function Dt(t,n,a="/"){return Kl(t,n,a,!1)}function Kl(t,n,a,l){let s=typeof n=="string"?er(n):n,c=ce(s.pathname||"/",a);if(c==null)return null;let A=zm(t);E6(A);let f=null;for(let p=0;f==null&&p<A.length;++p){let h=Hm(c);f=I6(A[p],h,l)}return f}function Um(t,n){let{route:a,pathname:l,params:s}=t;return{id:a.id,pathname:l,params:s,data:n[a.id],handle:a.handle}}function zm(t,n=[],a=[],l=""){let s=(c,A,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:A,route:c};p.relativePath.startsWith("/")&&(L0(p.relativePath.startsWith(l),`Absolute route path "${p.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(l.length));let h=Ke([l,p.relativePath]),y=a.concat(p);c.children&&c.children.length>0&&(L0(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),zm(c.children,n,y,h)),!(c.path==null&&!c.index)&&n.push({path:h,score:L6(h,c.index),routesMeta:y})};return t.forEach((c,A)=>{var f;if(c.path===""||!((f=c.path)!=null&&f.includes("?")))s(c,A);else for(let p of Wm(c.path))s(c,A,p)}),n}function Wm(t){let n=t.split("/");if(n.length===0)return[];let[a,...l]=n,s=a.endsWith("?"),c=a.replace(/\?$/,"");if(l.length===0)return s?[c,""]:[c];let A=Wm(l.join("/")),f=[];return f.push(...A.map(p=>p===""?c:[c,p].join("/"))),s&&f.push(...A),f.map(p=>t.startsWith("/")&&p===""?"/":p)}function E6(t){t.sort((n,a)=>n.score!==a.score?a.score-n.score:j6(n.routesMeta.map(l=>l.childrenIndex),a.routesMeta.map(l=>l.childrenIndex)))}var _6=/^:[\w-]+$/,k6=3,T6=2,P6=1,M6=10,O6=-2,ap=t=>t==="*";function L6(t,n){let a=t.split("/"),l=a.length;return a.some(ap)&&(l+=O6),n&&(l+=T6),a.filter(s=>!ap(s)).reduce((s,c)=>s+(_6.test(c)?k6:c===""?P6:M6),l)}function j6(t,n){return t.length===n.length&&t.slice(0,-1).every((l,s)=>l===n[s])?t[t.length-1]-n[n.length-1]:0}function I6(t,n,a=!1){let{routesMeta:l}=t,s={},c="/",A=[];for(let f=0;f<l.length;++f){let p=l[f],h=f===l.length-1,y=c==="/"?n:n.slice(c.length)||"/",m=Rr({path:p.relativePath,caseSensitive:p.caseSensitive,end:h},y),D=p.route;if(!m&&h&&a&&!l[l.length-1].route.index&&(m=Rr({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!m)return null;Object.assign(s,m.params),A.push({params:s,pathname:Ke([c,m.pathname]),pathnameBase:V6(Ke([c,m.pathnameBase])),route:D}),m.pathnameBase!=="/"&&(c=Ke([c,m.pathnameBase]))}return A}function Rr(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,l]=U6(t.path,t.caseSensitive,t.end),s=n.match(a);if(!s)return null;let c=s[0],A=c.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:l.reduce((h,{paramName:y,isOptional:m},D)=>{if(y==="*"){let w=f[D]||"";A=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const v=f[D];return m&&!v?h[y]=void 0:h[y]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:c,pathnameBase:A,pattern:t}}function U6(t,n=!1,a=!0){p2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let l=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(A,f,p)=>(l.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(l.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,n?void 0:"i"),l]}function Hm(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return p2(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function ce(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,l=t.charAt(a);return l&&l!=="/"?null:t.slice(a)||"/"}function z6({basename:t,pathname:n}){return n==="/"?t:Ke([t,n])}function W6(t,n="/"){let{pathname:a,search:l="",hash:s=""}=typeof t=="string"?er(t):t;return{pathname:a?a.startsWith("/")?a:H6(a,n):n,search:G6(l),hash:q6(s)}}function H6(t,n){let a=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?a.length>1&&a.pop():s!=="."&&a.push(s)}),a.length>1?a.join("/"):"/"}function eu(t,n,a,l){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vm(t){return t.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function AA(t){let n=Vm(t);return n.map((a,l)=>l===n.length-1?a.pathname:a.pathnameBase)}function fA(t,n,a,l=!1){let s;typeof t=="string"?s=er(t):(s={...t},L0(!s.pathname||!s.pathname.includes("?"),eu("?","pathname","search",s)),L0(!s.pathname||!s.pathname.includes("#"),eu("#","pathname","hash",s)),L0(!s.search||!s.search.includes("#"),eu("#","search","hash",s)));let c=t===""||s.pathname==="",A=c?"/":s.pathname,f;if(A==null)f=a;else{let m=n.length-1;if(!l&&A.startsWith("..")){let D=A.split("/");for(;D[0]==="..";)D.shift(),m-=1;s.pathname=D.join("/")}f=m>=0?n[m]:"/"}let p=W6(s,f),h=A&&A!=="/"&&A.endsWith("/"),y=(c||A===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(h||y)&&(p.pathname+="/"),p}var Ke=t=>t.join("/").replace(/\/\/+/g,"/"),V6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),G6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,q6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,oi=class{constructor(t,n,a,l=!1){this.status=t,this.statusText=n||"",this.internal=l,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function ta(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Gm=["POST","PUT","PATCH","DELETE"],$6=new Set(Gm),Y6=["GET",...Gm],K6=new Set(Y6),Z6=new Set([301,302,303,307,308]),X6=new Set([307,308]),tu={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Q6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},J6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dA=t=>J6.test(t),ex=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),qm="remix-router-transitions",$m=Symbol("ResetLoaderData");function tx(t){const n=t.window?t.window:typeof window<"u"?window:void 0,a=typeof n<"u"&&typeof n.document<"u"&&typeof n.document.createElement<"u";L0(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let l=t.hydrationRouteProperties||[],s=t.mapRouteProperties||ex,c={},A=ea(t.routes,s,void 0,c),f,p=t.basename||"/",h=t.dataStrategy||lx,y={unstable_middleware:!1,...t.future},m=null,D=new Set,v=null,w=null,x=null,B=t.hydrationData!=null,b=Dt(A,t.history.location,p),R=!1,N=null,_;if(b==null&&!t.patchRoutesOnNavigation){let M=ve(404,{pathname:t.history.location.pathname}),{matches:z,route:Z}=Cp(A);_=!0,b=z,N={[Z.id]:M}}else if(b&&!t.hydrationData&&sr(b,A,t.history.location.pathname).active&&(b=null),b)if(b.some(M=>M.route.lazy))_=!1;else if(!b.some(M=>M.route.loader))_=!0;else{let M=t.hydrationData?t.hydrationData.loaderData:null,z=t.hydrationData?t.hydrationData.errors:null;if(z){let Z=b.findIndex(a0=>z[a0.route.id]!==void 0);_=b.slice(0,Z+1).every(a0=>!Tu(a0.route,M,z))}else _=b.every(Z=>!Tu(Z.route,M,z))}else{_=!1,b=[];let M=sr(null,A,t.history.location.pathname);M.active&&M.matches&&(R=!0,b=M.matches)}let T,E={historyAction:t.history.action,location:t.history.location,matches:b,initialized:_,navigation:tu,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||N,fetchers:new Map,blockers:new Map},O="POP",U=!1,H,n0=!1,u0=new Map,l0=null,i0=!1,q=!1,A0=new Set,L=new Map,G=0,X=-1,K=new Map,k=new Set,Q=new Map,J=new Map,r0=new Set,f0=new Map,w0,m0=null;function $0(){if(m=t.history.listen(({action:M,location:z,delta:Z})=>{if(w0){w0(),w0=void 0;return}p2(f0.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let a0=Da({currentLocation:E.location,nextLocation:z,historyAction:M});if(a0&&Z!=null){let c0=new Promise(p0=>{w0=p0});t.history.go(Z*-1),Ue(a0,{state:"blocked",location:z,proceed(){Ue(a0,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),c0.then(()=>t.history.go(Z))},reset(){let p0=new Map(E.blockers);p0.set(a0,Vo),W0({blockers:p0})}});return}return V2(M,z)}),a){Cx(n,u0);let M=()=>yx(n,u0);n.addEventListener("pagehide",M),l0=()=>n.removeEventListener("pagehide",M)}return E.initialized||V2("POP",E.location,{initialHydration:!0}),T}function b0(){m&&m(),l0&&l0(),D.clear(),H&&H.abort(),E.fetchers.forEach((M,z)=>R2(z)),E.blockers.forEach((M,z)=>lr(z))}function T0(M){return D.add(M),()=>D.delete(M)}function W0(M,z={}){M.matches&&(M.matches=M.matches.map(c0=>{let p0=c[c0.route.id],y0=c0.route;return y0.element!==p0.element||y0.errorElement!==p0.errorElement||y0.hydrateFallbackElement!==p0.hydrateFallbackElement?{...c0,route:p0}:c0})),E={...E,...M};let Z=[],a0=[];E.fetchers.forEach((c0,p0)=>{c0.state==="idle"&&(r0.has(p0)?Z.push(p0):a0.push(p0))}),r0.forEach(c0=>{!E.fetchers.has(c0)&&!L.has(c0)&&Z.push(c0)}),[...D].forEach(c0=>c0(E,{deletedFetchers:Z,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),Z.forEach(c0=>R2(c0)),a0.forEach(c0=>E.fetchers.delete(c0))}function u2(M,z,{flushSync:Z}={}){var x0,g0;let a0=E.actionData!=null&&E.navigation.formMethod!=null&&Z2(E.navigation.formMethod)&&E.navigation.state==="loading"&&((x0=M.state)==null?void 0:x0._isRedirect)!==!0,c0;z.actionData?Object.keys(z.actionData).length>0?c0=z.actionData:c0=null:a0?c0=E.actionData:c0=null;let p0=z.loaderData?pp(E.loaderData,z.loaderData,z.matches||[],z.errors):E.loaderData,y0=E.blockers;y0.size>0&&(y0=new Map(y0),y0.forEach((S0,G0)=>y0.set(G0,Vo)));let C0=i0?!1:xa(M,z.matches||E.matches),v0=U===!0||E.navigation.formMethod!=null&&Z2(E.navigation.formMethod)&&((g0=M.state)==null?void 0:g0._isRedirect)!==!0;f&&(A=f,f=void 0),i0||O==="POP"||(O==="PUSH"?t.history.push(M,M.state):O==="REPLACE"&&t.history.replace(M,M.state));let F0;if(O==="POP"){let S0=u0.get(E.location.pathname);S0&&S0.has(M.pathname)?F0={currentLocation:E.location,nextLocation:M}:u0.has(M.pathname)&&(F0={currentLocation:M,nextLocation:E.location})}else if(n0){let S0=u0.get(E.location.pathname);S0?S0.add(M.pathname):(S0=new Set([M.pathname]),u0.set(E.location.pathname,S0)),F0={currentLocation:E.location,nextLocation:M}}W0({...z,actionData:c0,loaderData:p0,historyAction:O,location:M,initialized:!0,navigation:tu,revalidation:"idle",restoreScrollPosition:C0,preventScrollReset:v0,blockers:y0},{viewTransitionOpts:F0,flushSync:Z===!0}),O="POP",U=!1,n0=!1,i0=!1,q=!1,m0==null||m0.resolve(),m0=null}async function P2(M,z){if(typeof M=="number"){t.history.go(M);return}let Z=ku(E.location,E.matches,p,M,z==null?void 0:z.fromRouteId,z==null?void 0:z.relative),{path:a0,submission:c0,error:p0}=lp(!1,Z,z),y0=E.location,C0=Jo(E.location,a0,z&&z.state);C0={...C0,...t.history.encodeLocation(C0)};let v0=z&&z.replace!=null?z.replace:void 0,F0="PUSH";v0===!0?F0="REPLACE":v0===!1||c0!=null&&Z2(c0.formMethod)&&c0.formAction===E.location.pathname+E.location.search&&(F0="REPLACE");let x0=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,g0=(z&&z.flushSync)===!0,S0=Da({currentLocation:y0,nextLocation:C0,historyAction:F0});if(S0){Ue(S0,{state:"blocked",location:C0,proceed(){Ue(S0,{state:"proceeding",proceed:void 0,reset:void 0,location:C0}),P2(M,z)},reset(){let G0=new Map(E.blockers);G0.set(S0,Vo),W0({blockers:G0})}});return}await V2(F0,C0,{submission:c0,pendingError:p0,preventScrollReset:x0,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:g0})}function Re(){m0||(m0=gx()),qn(),W0({revalidation:"loading"});let M=m0.promise;return E.navigation.state==="submitting"?M:E.navigation.state==="idle"?(V2(E.historyAction,E.location,{startUninterruptedRevalidation:!0}),M):(V2(O||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:n0===!0}),M)}async function V2(M,z,Z){H&&H.abort(),H=null,O=M,i0=(Z&&Z.startUninterruptedRevalidation)===!0,ir(E.location,E.matches),U=(Z&&Z.preventScrollReset)===!0,n0=(Z&&Z.enableViewTransition)===!0;let a0=f||A,c0=Z&&Z.overrideNavigation,p0=Z!=null&&Z.initialHydration&&E.matches&&E.matches.length>0&&!R?E.matches:Dt(a0,z,p),y0=(Z&&Z.flushSync)===!0;if(p0&&E.initialized&&!q&&fx(E.location,z)&&!(Z&&Z.submission&&Z2(Z.submission.formMethod))){u2(z,{matches:p0},{flushSync:y0});return}let C0=sr(p0,a0,z.pathname);if(C0.active&&C0.matches&&(p0=C0.matches),!p0){let{error:f2,notFoundMatches:_0,route:Z0}=Ur(z.pathname);u2(z,{matches:_0,loaderData:{},errors:{[Z0.id]:f2}},{flushSync:y0});return}H=new AbortController;let v0=Nn(t.history,z,H.signal,Z&&Z.submission),F0=new op(t.unstable_getContext?await t.unstable_getContext():void 0),x0;if(Z&&Z.pendingError)x0=[Nr(p0).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&Z2(Z.submission.formMethod)){let f2=await Hn(v0,z,Z.submission,p0,F0,C0.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:y0});if(f2.shortCircuited)return;if(f2.pendingActionResult){let[_0,Z0]=f2.pendingActionResult;if(le(Z0)&&ta(Z0.error)&&Z0.error.status===404){H=null,u2(z,{matches:f2.matches,loaderData:{},errors:{[_0]:Z0.error}});return}}p0=f2.matches||p0,x0=f2.pendingActionResult,c0=ru(z,Z.submission),y0=!1,C0.active=!1,v0=Nn(t.history,v0.url,v0.signal)}let{shortCircuited:g0,matches:S0,loaderData:G0,errors:A2}=await Vn(v0,z,p0,F0,C0.active,c0,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,y0,x0);g0||(H=null,u2(z,{matches:S0||p0,...mp(x0),loaderData:G0,errors:A2}))}async function Hn(M,z,Z,a0,c0,p0,y0,C0={}){qn();let v0=px(z,Z);if(W0({navigation:v0},{flushSync:C0.flushSync===!0}),p0){let g0=await cr(a0,z.pathname,M.signal);if(g0.type==="aborted")return{shortCircuited:!0};if(g0.type==="error"){let S0=Nr(g0.partialMatches).route.id;return{matches:g0.partialMatches,pendingActionResult:[S0,{type:"error",error:g0.error}]}}else if(g0.matches)a0=g0.matches;else{let{notFoundMatches:S0,error:G0,route:A2}=Ur(z.pathname);return{matches:S0,pendingActionResult:[A2.id,{type:"error",error:G0}]}}}let F0,x0=Zl(a0,z);if(!x0.route.action&&!x0.route.lazy)F0={type:"error",error:ve(405,{method:M.method,pathname:z.pathname,routeId:x0.route.id})};else{let g0=Rn(s,c,M,a0,x0,y0?[]:l,c0),S0=await Ft(M,g0,c0,null);if(F0=S0[x0.route.id],!F0){for(let G0 of a0)if(S0[G0.route.id]){F0=S0[G0.route.id];break}}if(M.signal.aborted)return{shortCircuited:!0}}if(Sr(F0)){let g0;return C0&&C0.replace!=null?g0=C0.replace:g0=fp(F0.response.headers.get("Location"),new URL(M.url),p)===E.location.pathname+E.location.search,await tt(M,F0,!0,{submission:Z,replace:g0}),{shortCircuited:!0}}if(le(F0)){let g0=Nr(a0,x0.route.id);return(C0&&C0.replace)!==!0&&(O="PUSH"),{matches:a0,pendingActionResult:[g0.route.id,F0,x0.route.id]}}return{matches:a0,pendingActionResult:[x0.route.id,F0]}}async function Vn(M,z,Z,a0,c0,p0,y0,C0,v0,F0,x0,g0){let S0=p0||ru(z,y0),G0=y0||C0||gp(S0),A2=!i0&&!F0;if(c0){if(A2){let D2=I2(g0);W0({navigation:S0,...D2!==void 0?{actionData:D2}:{}},{flushSync:x0})}let j0=await cr(Z,z.pathname,M.signal);if(j0.type==="aborted")return{shortCircuited:!0};if(j0.type==="error"){let D2=Nr(j0.partialMatches).route.id;return{matches:j0.partialMatches,loaderData:{},errors:{[D2]:j0.error}}}else if(j0.matches)Z=j0.matches;else{let{error:D2,notFoundMatches:ur,route:Ae}=Ur(z.pathname);return{matches:ur,loaderData:{},errors:{[Ae.id]:D2}}}}let f2=f||A,{dsMatches:_0,revalidatingFetchers:Z0}=ip(M,a0,s,c,t.history,E,Z,G0,z,F0?[]:l,F0===!0,q,A0,r0,Q,k,f2,p,t.patchRoutesOnNavigation!=null,g0);if(X=++G,!t.dataStrategy&&!_0.some(j0=>j0.shouldLoad)&&Z0.length===0){let j0=or();return u2(z,{matches:Z,loaderData:{},errors:g0&&le(g0[1])?{[g0[0]]:g0[1].error}:null,...mp(g0),...j0?{fetchers:new Map(E.fetchers)}:{}},{flushSync:x0}),{shortCircuited:!0}}if(A2){let j0={};if(!c0){j0.navigation=S0;let D2=I2(g0);D2!==void 0&&(j0.actionData=D2)}Z0.length>0&&(j0.fetchers=Gn(Z0)),W0(j0,{flushSync:x0})}Z0.forEach(j0=>{Ie(j0.key),j0.controller&&L.set(j0.key,j0.controller)});let ze=()=>Z0.forEach(j0=>Ie(j0.key));H&&H.signal.addEventListener("abort",ze);let{loaderResults:X2,fetcherResults:U2}=await ya(_0,Z0,M,a0);if(M.signal.aborted)return{shortCircuited:!0};H&&H.signal.removeEventListener("abort",ze),Z0.forEach(j0=>L.delete(j0.key));let ue=Tl(X2);if(ue)return await tt(M,ue.result,!0,{replace:v0}),{shortCircuited:!0};if(ue=Tl(U2),ue)return k.add(ue.key),await tt(M,ue.result,!0,{replace:v0}),{shortCircuited:!0};let{loaderData:Wr,errors:Bt}=hp(E,Z,X2,g0,Z0,U2);F0&&E.errors&&(Bt={...E.errors,...Bt});let nt=or(),ot=ar(X),at=nt||ot||Z0.length>0;return{matches:Z,loaderData:Wr,errors:Bt,...at?{fetchers:new Map(E.fetchers)}:{}}}function I2(M){if(M&&!le(M[1]))return{[M[0]]:M[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function Gn(M){return M.forEach(z=>{let Z=E.fetchers.get(z.key),a0=Go(void 0,Z?Z.data:void 0);E.fetchers.set(z.key,a0)}),new Map(E.fetchers)}async function et(M,z,Z,a0){Ie(M);let c0=(a0&&a0.flushSync)===!0,p0=f||A,y0=ku(E.location,E.matches,p,Z,z,a0==null?void 0:a0.relative),C0=Dt(p0,y0,p),v0=sr(C0,p0,y0);if(v0.active&&v0.matches&&(C0=v0.matches),!C0){i2(M,z,ve(404,{pathname:y0}),{flushSync:c0});return}let{path:F0,submission:x0,error:g0}=lp(!0,y0,a0);if(g0){i2(M,z,g0,{flushSync:c0});return}let S0=new op(t.unstable_getContext?await t.unstable_getContext():void 0),G0=(a0&&a0.preventScrollReset)===!0;if(x0&&Z2(x0.formMethod)){await Ca(M,z,F0,C0,S0,v0.active,c0,G0,x0);return}Q.set(M,{routeId:z,path:F0}),await Ir(M,z,F0,C0,S0,v0.active,c0,G0,x0)}async function Ca(M,z,Z,a0,c0,p0,y0,C0,v0){qn(),Q.delete(M);let F0=E.fetchers.get(M);G2(M,mx(v0,F0),{flushSync:y0});let x0=new AbortController,g0=Nn(t.history,Z,x0.signal,v0);if(p0){let s2=await cr(a0,new URL(g0.url).pathname,g0.signal,M);if(s2.type==="aborted")return;if(s2.type==="error"){i2(M,z,s2.error,{flushSync:y0});return}else if(s2.matches)a0=s2.matches;else{i2(M,z,ve(404,{pathname:Z}),{flushSync:y0});return}}let S0=Zl(a0,Z);if(!S0.route.action&&!S0.route.lazy){let s2=ve(405,{method:v0.formMethod,pathname:Z,routeId:z});i2(M,z,s2,{flushSync:y0});return}L.set(M,x0);let G0=G,A2=Rn(s,c,g0,a0,S0,l,c0),_0=(await Ft(g0,A2,c0,M))[S0.route.id];if(g0.signal.aborted){L.get(M)===x0&&L.delete(M);return}if(r0.has(M)){if(Sr(_0)||le(_0)){G2(M,Kt(void 0));return}}else{if(Sr(_0))if(L.delete(M),X>G0){G2(M,Kt(void 0));return}else return k.add(M),G2(M,Go(v0)),tt(g0,_0,!1,{fetcherSubmission:v0,preventScrollReset:C0});if(le(_0)){i2(M,z,_0.error);return}}let Z0=E.navigation.location||E.location,ze=Nn(t.history,Z0,x0.signal),X2=f||A,U2=E.navigation.state!=="idle"?Dt(X2,E.navigation.location,p):E.matches;L0(U2,"Didn't find any matches after fetcher action");let ue=++G;K.set(M,ue);let Wr=Go(v0,_0.data);E.fetchers.set(M,Wr);let{dsMatches:Bt,revalidatingFetchers:nt}=ip(ze,c0,s,c,t.history,E,U2,v0,Z0,l,!1,q,A0,r0,Q,k,X2,p,t.patchRoutesOnNavigation!=null,[S0.route.id,_0]);nt.filter(s2=>s2.key!==M).forEach(s2=>{let bt=s2.key,wa=E.fetchers.get(bt),Fa=Go(void 0,wa?wa.data:void 0);E.fetchers.set(bt,Fa),Ie(bt),s2.controller&&L.set(bt,s2.controller)}),W0({fetchers:new Map(E.fetchers)});let ot=()=>nt.forEach(s2=>Ie(s2.key));x0.signal.addEventListener("abort",ot);let{loaderResults:at,fetcherResults:j0}=await ya(Bt,nt,ze,c0);if(x0.signal.aborted)return;if(x0.signal.removeEventListener("abort",ot),K.delete(M),L.delete(M),nt.forEach(s2=>L.delete(s2.key)),E.fetchers.has(M)){let s2=Kt(_0.data);E.fetchers.set(M,s2)}let D2=Tl(at);if(D2)return tt(ze,D2.result,!1,{preventScrollReset:C0});if(D2=Tl(j0),D2)return k.add(D2.key),tt(ze,D2.result,!1,{preventScrollReset:C0});let{loaderData:ur,errors:Ae}=hp(E,U2,at,void 0,nt,j0);ar(ue),E.navigation.state==="loading"&&ue>X?(L0(O,"Expected pending action"),H&&H.abort(),u2(E.navigation.location,{matches:U2,loaderData:ur,errors:Ae,fetchers:new Map(E.fetchers)})):(W0({errors:Ae,loaderData:pp(E.loaderData,ur,U2,Ae),fetchers:new Map(E.fetchers)}),q=!1)}async function Ir(M,z,Z,a0,c0,p0,y0,C0,v0){let F0=E.fetchers.get(M);G2(M,Go(v0,F0?F0.data:void 0),{flushSync:y0});let x0=new AbortController,g0=Nn(t.history,Z,x0.signal);if(p0){let Z0=await cr(a0,new URL(g0.url).pathname,g0.signal,M);if(Z0.type==="aborted")return;if(Z0.type==="error"){i2(M,z,Z0.error,{flushSync:y0});return}else if(Z0.matches)a0=Z0.matches;else{i2(M,z,ve(404,{pathname:Z}),{flushSync:y0});return}}let S0=Zl(a0,Z);L.set(M,x0);let G0=G,A2=Rn(s,c,g0,a0,S0,l,c0),_0=(await Ft(g0,A2,c0,M))[S0.route.id];if(L.get(M)===x0&&L.delete(M),!g0.signal.aborted){if(r0.has(M)){G2(M,Kt(void 0));return}if(Sr(_0))if(X>G0){G2(M,Kt(void 0));return}else{k.add(M),await tt(g0,_0,!1,{preventScrollReset:C0});return}if(le(_0)){i2(M,z,_0.error);return}G2(M,Kt(_0.data))}}async function tt(M,z,Z,{submission:a0,fetcherSubmission:c0,preventScrollReset:p0,replace:y0}={}){z.response.headers.has("X-Remix-Revalidate")&&(q=!0);let C0=z.response.headers.get("Location");L0(C0,"Expected a Location header on the redirect Response"),C0=fp(C0,new URL(M.url),p);let v0=Jo(E.location,C0,{_isRedirect:!0});if(a){let A2=!1;if(z.response.headers.has("X-Remix-Reload-Document"))A2=!0;else if(dA(C0)){const f2=Im(C0,!0);A2=f2.origin!==n.location.origin||ce(f2.pathname,p)==null}if(A2){y0?n.location.replace(C0):n.location.assign(C0);return}}H=null;let F0=y0===!0||z.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:x0,formAction:g0,formEncType:S0}=E.navigation;!a0&&!c0&&x0&&g0&&S0&&(a0=gp(E.navigation));let G0=a0||c0;if(X6.has(z.response.status)&&G0&&Z2(G0.formMethod))await V2(F0,v0,{submission:{...G0,formAction:C0},preventScrollReset:p0||U,enableViewTransition:Z?n0:void 0});else{let A2=ru(v0,a0);await V2(F0,v0,{overrideNavigation:A2,fetcherSubmission:c0,preventScrollReset:p0||U,enableViewTransition:Z?n0:void 0})}}async function Ft(M,z,Z,a0){let c0,p0={};try{c0=await ix(h,M,z,a0,Z,!1)}catch(y0){return z.filter(C0=>C0.shouldLoad).forEach(C0=>{p0[C0.route.id]={type:"error",error:y0}}),p0}if(M.signal.aborted)return p0;for(let[y0,C0]of Object.entries(c0))if(dx(C0)){let v0=C0.result;p0[y0]={type:"redirect",response:ux(v0,M,y0,z,p)}}else p0[y0]=await cx(C0);return p0}async function ya(M,z,Z,a0){let c0=Ft(Z,M,a0,null),p0=Promise.all(z.map(async v0=>{if(v0.matches&&v0.match&&v0.request&&v0.controller){let x0=(await Ft(v0.request,v0.matches,a0,v0.key))[v0.match.route.id];return{[v0.key]:x0}}else return Promise.resolve({[v0.key]:{type:"error",error:ve(404,{pathname:v0.path})}})})),y0=await c0,C0=(await p0).reduce((v0,F0)=>Object.assign(v0,F0),{});return{loaderResults:y0,fetcherResults:C0}}function qn(){q=!0,Q.forEach((M,z)=>{L.has(z)&&A0.add(z),Ie(z)})}function G2(M,z,Z={}){E.fetchers.set(M,z),W0({fetchers:new Map(E.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function i2(M,z,Z,a0={}){let c0=Nr(E.matches,z);R2(M),W0({errors:{[c0.route.id]:Z},fetchers:new Map(E.fetchers)},{flushSync:(a0&&a0.flushSync)===!0})}function Ee(M){return J.set(M,(J.get(M)||0)+1),r0.has(M)&&r0.delete(M),E.fetchers.get(M)||Q6}function R2(M){let z=E.fetchers.get(M);L.has(M)&&!(z&&z.state==="loading"&&K.has(M))&&Ie(M),Q.delete(M),K.delete(M),k.delete(M),r0.delete(M),A0.delete(M),E.fetchers.delete(M)}function Hi(M){let z=(J.get(M)||0)-1;z<=0?(J.delete(M),r0.add(M)):J.set(M,z),W0({fetchers:new Map(E.fetchers)})}function Ie(M){let z=L.get(M);z&&(z.abort(),L.delete(M))}function ga(M){for(let z of M){let Z=Ee(z),a0=Kt(Z.data);E.fetchers.set(z,a0)}}function or(){let M=[],z=!1;for(let Z of k){let a0=E.fetchers.get(Z);L0(a0,`Expected fetcher: ${Z}`),a0.state==="loading"&&(k.delete(Z),M.push(Z),z=!0)}return ga(M),z}function ar(M){let z=[];for(let[Z,a0]of K)if(a0<M){let c0=E.fetchers.get(Z);L0(c0,`Expected fetcher: ${Z}`),c0.state==="loading"&&(Ie(Z),K.delete(Z),z.push(Z))}return ga(z),z.length>0}function rt(M,z){let Z=E.blockers.get(M)||Vo;return f0.get(M)!==z&&f0.set(M,z),Z}function lr(M){E.blockers.delete(M),f0.delete(M)}function Ue(M,z){let Z=E.blockers.get(M)||Vo;L0(Z.state==="unblocked"&&z.state==="blocked"||Z.state==="blocked"&&z.state==="blocked"||Z.state==="blocked"&&z.state==="proceeding"||Z.state==="blocked"&&z.state==="unblocked"||Z.state==="proceeding"&&z.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${z.state}`);let a0=new Map(E.blockers);a0.set(M,z),W0({blockers:a0})}function Da({currentLocation:M,nextLocation:z,historyAction:Z}){if(f0.size===0)return;f0.size>1&&p2(!1,"A router only supports one blocker at a time");let a0=Array.from(f0.entries()),[c0,p0]=a0[a0.length-1],y0=E.blockers.get(c0);if(!(y0&&y0.state==="proceeding")&&p0({currentLocation:M,nextLocation:z,historyAction:Z}))return c0}function Ur(M){let z=ve(404,{pathname:M}),Z=f||A,{matches:a0,route:c0}=Cp(Z);return{notFoundMatches:a0,route:c0,error:z}}function va(M,z,Z){if(v=M,x=z,w=Z||null,!B&&E.navigation===tu){B=!0;let a0=xa(E.location,E.matches);a0!=null&&W0({restoreScrollPosition:a0})}return()=>{v=null,x=null,w=null}}function zr(M,z){return w&&w(M,z.map(a0=>Um(a0,E.loaderData)))||M.key}function ir(M,z){if(v&&x){let Z=zr(M,z);v[Z]=x()}}function xa(M,z){if(v){let Z=zr(M,z),a0=v[Z];if(typeof a0=="number")return a0}return null}function sr(M,z,Z){if(t.patchRoutesOnNavigation)if(M){if(Object.keys(M[0].params).length>0)return{active:!0,matches:Kl(z,Z,p,!0)}}else return{active:!0,matches:Kl(z,Z,p,!0)||[]};return{active:!1,matches:null}}async function cr(M,z,Z,a0){if(!t.patchRoutesOnNavigation)return{type:"success",matches:M};let c0=M;for(;;){let p0=f==null,y0=f||A,C0=c;try{await t.patchRoutesOnNavigation({signal:Z,path:z,matches:c0,fetcherKey:a0,patch:(x0,g0)=>{Z.aborted||sp(x0,g0,y0,C0,s,!1)}})}catch(x0){return{type:"error",error:x0,partialMatches:c0}}finally{p0&&!Z.aborted&&(A=[...A])}if(Z.aborted)return{type:"aborted"};let v0=Dt(y0,z,p);if(v0)return{type:"success",matches:v0};let F0=Kl(y0,z,p,!0);if(!F0||c0.length===F0.length&&c0.every((x0,g0)=>x0.route.id===F0[g0].route.id))return{type:"success",matches:null};c0=F0}}function $n(M){c={},f=ea(M,s,void 0,c)}function Yn(M,z,Z=!1){let a0=f==null;sp(M,z,f||A,c,s,Z),a0&&(A=[...A],W0({}))}return T={get basename(){return p},get future(){return y},get state(){return E},get routes(){return A},get window(){return n},initialize:$0,subscribe:T0,enableScrollRestoration:va,navigate:P2,fetch:et,revalidate:Re,createHref:M=>t.history.createHref(M),encodeLocation:M=>t.history.encodeLocation(M),getFetcher:Ee,deleteFetcher:Hi,dispose:b0,getBlocker:rt,deleteBlocker:lr,patchRoutes:Yn,_internalFetchControllers:L,_internalSetRoutes:$n,_internalSetStateDoNotUseOrYouWillBreakYourApp(M){W0(M)}},T}function rx(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function ku(t,n,a,l,s,c){let A,f;if(s){A=[];for(let h of n)if(A.push(h),h.route.id===s){f=h;break}}else A=n,f=n[n.length-1];let p=fA(l||".",AA(A),ce(t.pathname,a)||t.pathname,c==="path");if(l==null&&(p.search=t.search,p.hash=t.hash),(l==null||l===""||l===".")&&f){let h=hA(p.search);if(f.route.index&&!h)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&h){let y=new URLSearchParams(p.search),m=y.getAll("index");y.delete("index"),m.filter(v=>v).forEach(v=>y.append("index",v));let D=y.toString();p.search=D?`?${D}`:""}}return a!=="/"&&(p.pathname=z6({basename:a,pathname:p.pathname})),Xt(p)}function lp(t,n,a){if(!a||!rx(a))return{path:n};if(a.formMethod&&!hx(a.formMethod))return{path:n,error:ve(405,{method:a.formMethod})};let l=()=>({path:n,error:ve(400,{type:"invalid-body"})}),c=(a.formMethod||"get").toUpperCase(),A=Jm(n);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!Z2(c))return l();let m=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((D,[v,w])=>`${D}${v}=${w}
`,""):String(a.body);return{path:n,submission:{formMethod:c,formAction:A,formEncType:a.formEncType,formData:void 0,json:void 0,text:m}}}else if(a.formEncType==="application/json"){if(!Z2(c))return l();try{let m=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:n,submission:{formMethod:c,formAction:A,formEncType:a.formEncType,formData:void 0,json:m,text:void 0}}}catch{return l()}}}L0(typeof FormData=="function","FormData is not available in this environment");let f,p;if(a.formData)f=Mu(a.formData),p=a.formData;else if(a.body instanceof FormData)f=Mu(a.body),p=a.body;else if(a.body instanceof URLSearchParams)f=a.body,p=dp(f);else if(a.body==null)f=new URLSearchParams,p=new FormData;else try{f=new URLSearchParams(a.body),p=dp(f)}catch{return l()}let h={formMethod:c,formAction:A,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Z2(h.formMethod))return{path:n,submission:h};let y=er(n);return t&&y.search&&hA(y.search)&&f.append("index",""),y.search=`?${f}`,{path:Xt(y),submission:h}}function ip(t,n,a,l,s,c,A,f,p,h,y,m,D,v,w,x,B,b,R,N){var i0;let _=N?le(N[1])?N[1].error:N[1].data:void 0,T=s.createURL(c.location),E=s.createURL(p),O;if(y&&c.errors){let q=Object.keys(c.errors)[0];O=A.findIndex(A0=>A0.route.id===q)}else if(N&&le(N[1])){let q=N[0];O=A.findIndex(A0=>A0.route.id===q)-1}let U=N?N[1].statusCode:void 0,H=U&&U>=400,n0={currentUrl:T,currentParams:((i0=c.matches[0])==null?void 0:i0.params)||{},nextUrl:E,nextParams:A[0].params,...f,actionResult:_,actionStatus:U},u0=A.map((q,A0)=>{let{route:L}=q,G=null;if(O!=null&&A0>O?G=!1:L.lazy?G=!0:L.loader==null?G=!1:y?G=Tu(L,c.loaderData,c.errors):nx(c.loaderData,c.matches[A0],q)&&(G=!0),G!==null)return Pu(a,l,t,q,h,n,G);let X=H?!1:m||T.pathname+T.search===E.pathname+E.search||T.search!==E.search||ox(c.matches[A0],q),K={...n0,defaultShouldRevalidate:X},k=ai(q,K);return Pu(a,l,t,q,h,n,k,K)}),l0=[];return w.forEach((q,A0)=>{if(y||!A.some(r0=>r0.route.id===q.routeId)||v.has(A0))return;let L=c.fetchers.get(A0),G=L&&L.state!=="idle"&&L.data===void 0,X=Dt(B,q.path,b);if(!X){if(R&&G)return;l0.push({key:A0,routeId:q.routeId,path:q.path,matches:null,match:null,request:null,controller:null});return}if(x.has(A0))return;let K=Zl(X,q.path),k=new AbortController,Q=Nn(s,q.path,k.signal),J=null;if(D.has(A0))D.delete(A0),J=Rn(a,l,Q,X,K,h,n);else if(G)m&&(J=Rn(a,l,Q,X,K,h,n));else{let r0={...n0,defaultShouldRevalidate:H?!1:m};ai(K,r0)&&(J=Rn(a,l,Q,X,K,h,n,r0))}J&&l0.push({key:A0,routeId:q.routeId,path:q.path,matches:J,match:K,request:Q,controller:k})}),{dsMatches:u0,revalidatingFetchers:l0}}function Tu(t,n,a){if(t.lazy)return!0;if(!t.loader)return!1;let l=n!=null&&t.id in n,s=a!=null&&a[t.id]!==void 0;return!l&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!l&&!s}function nx(t,n,a){let l=!n||a.route.id!==n.route.id,s=!t.hasOwnProperty(a.route.id);return l||s}function ox(t,n){let a=t.route.path;return t.pathname!==n.pathname||a!=null&&a.endsWith("*")&&t.params["*"]!==n.params["*"]}function ai(t,n){if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate(n);if(typeof a=="boolean")return a}return n.defaultShouldRevalidate}function sp(t,n,a,l,s,c){let A;if(t){let h=l[t];L0(h,`No route found to patch children into: routeId = ${t}`),h.children||(h.children=[]),A=h.children}else A=a;let f=[],p=[];if(n.forEach(h=>{let y=A.find(m=>Ym(h,m));y?p.push({existingRoute:y,newRoute:h}):f.push(h)}),f.length>0){let h=ea(f,s,[t||"_","patch",String((A==null?void 0:A.length)||"0")],l);A.push(...h)}if(c&&p.length>0)for(let h=0;h<p.length;h++){let{existingRoute:y,newRoute:m}=p[h],D=y,[v]=ea([m],s,[],{},!0);Object.assign(D,{element:v.element?v.element:D.element,errorElement:v.errorElement?v.errorElement:D.errorElement,hydrateFallbackElement:v.hydrateFallbackElement?v.hydrateFallbackElement:D.hydrateFallbackElement})}}function Ym(t,n){return"id"in t&&"id"in n&&t.id===n.id?!0:t.index===n.index&&t.path===n.path&&t.caseSensitive===n.caseSensitive?(!t.children||t.children.length===0)&&(!n.children||n.children.length===0)?!0:t.children.every((a,l)=>{var s;return(s=n.children)==null?void 0:s.some(c=>Ym(a,c))}):!1}var cp=new WeakMap,Km=({key:t,route:n,manifest:a,mapRouteProperties:l})=>{let s=a[n.id];if(L0(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let c=s.lazy[t];if(!c)return;let A=cp.get(s);A||(A={},cp.set(s,A));let f=A[t];if(f)return f;let p=(async()=>{let h=b6(t),m=s[t]!==void 0&&t!=="hasErrorBoundary";if(h)p2(!h,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),A[t]=Promise.resolve();else if(m)p2(!1,`Route "${s.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let D=await c();D!=null&&(Object.assign(s,{[t]:D}),Object.assign(s,l(s)))}typeof s.lazy=="object"&&(s.lazy[t]=void 0,Object.values(s.lazy).every(D=>D===void 0)&&(s.lazy=void 0))})();return A[t]=p,p},up=new WeakMap;function ax(t,n,a,l,s){let c=a[t.id];if(L0(c,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let y=up.get(c);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let m=(async()=>{L0(typeof t.lazy=="function","No lazy route function found");let D=await t.lazy(),v={};for(let w in D){let x=D[w];if(x===void 0)continue;let B=S6(w),R=c[w]!==void 0&&w!=="hasErrorBoundary";B?p2(!B,"Route property "+w+" is not a supported property to be returned from a lazy route function. This property will be ignored."):R?p2(!R,`Route "${c.id}" has a static property "${w}" defined but its lazy function is also returning a value for this property. The lazy route property "${w}" will be ignored.`):v[w]=x}Object.assign(c,v),Object.assign(c,{...l(c),lazy:void 0})})();return up.set(c,m),m.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:m}}let A=Object.keys(t.lazy),f=[],p;for(let y of A){if(s&&s.includes(y))continue;let m=Km({key:y,route:t,manifest:a,mapRouteProperties:l});m&&(f.push(m),y===n&&(p=m))}let h=f.length>0?Promise.all(f).then(()=>{}):void 0;return h==null||h.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:p}}async function Ap(t){let n=t.matches.filter(s=>s.shouldLoad),a={};return(await Promise.all(n.map(s=>s.resolve()))).forEach((s,c)=>{a[n[c].route.id]=s}),a}async function lx(t){return t.matches.some(n=>n.route.unstable_middleware)?Zm(t,!1,()=>Ap(t),(n,a)=>({[a]:{type:"error",result:n}})):Ap(t)}async function Zm(t,n,a,l){let{matches:s,request:c,params:A,context:f}=t,p={handlerResult:void 0};try{let h=s.flatMap(m=>m.route.unstable_middleware?m.route.unstable_middleware.map(D=>[m.route.id,D]):[]),y=await Xm({request:c,params:A,context:f},h,n,p,a);return n?y:p.handlerResult}catch(h){if(!p.middlewareError)throw h;let y=await l(p.middlewareError.error,p.middlewareError.routeId);return p.handlerResult?Object.assign(p.handlerResult,y):y}}async function Xm(t,n,a,l,s,c=0){let{request:A}=t;if(A.signal.aborted)throw A.signal.reason?A.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${A.method} ${A.url}`);let f=n[c];if(!f)return l.handlerResult=await s(),l.handlerResult;let[p,h]=f,y=!1,m,D=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");y=!0,await Xm(t,n,a,l,s,c+1)};try{let v=await h({request:t.request,params:t.params,context:t.context},D);return y?v===void 0?m:v:D()}catch(v){throw l.middlewareError?l.middlewareError.error!==v&&(l.middlewareError={routeId:p,error:v}):l.middlewareError={routeId:p,error:v},v}}function Qm(t,n,a,l,s){let c=Km({key:"unstable_middleware",route:l.route,manifest:n,mapRouteProperties:t}),A=ax(l.route,Z2(a.method)?"action":"loader",n,t,s);return{middleware:c,route:A.lazyRoutePromise,handler:A.lazyHandlerPromise}}function Pu(t,n,a,l,s,c,A,f=null){let p=!1,h=Qm(t,n,a,l,s);return{...l,_lazyPromises:h,shouldLoad:A,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler(y){return p=!0,f?typeof y=="boolean"?ai(l,{...f,defaultShouldRevalidate:y}):ai(l,f):A},resolve(y){return p||A||y&&!Z2(a.method)&&(l.route.lazy||l.route.loader)?sx({request:a,match:l,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:y,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function Rn(t,n,a,l,s,c,A,f=null){return l.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:f,unstable_shouldCallHandler:()=>!1,_lazyPromises:Qm(t,n,a,p,c),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Pu(t,n,a,p,c,A,!0,f))}async function ix(t,n,a,l,s,c){a.some(h=>{var y;return(y=h._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(a.map(h=>{var y;return(y=h._lazyPromises)==null?void 0:y.middleware}));let A={request:n,params:a[0].params,context:s,matches:a},p=await t({...A,fetcherKey:l,unstable_runClientMiddleware:h=>{let y=A;return Zm(y,!1,()=>h({...y,fetcherKey:l,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(m,D)=>({[D]:{type:"error",result:m}}))}});try{await Promise.all(a.flatMap(h=>{var y,m;return[(y=h._lazyPromises)==null?void 0:y.handler,(m=h._lazyPromises)==null?void 0:m.route]}))}catch{}return p}async function sx({request:t,match:n,lazyHandlerPromise:a,lazyRoutePromise:l,handlerOverride:s,scopedContext:c}){let A,f,p=Z2(t.method),h=p?"action":"loader",y=m=>{let D,v=new Promise((B,b)=>D=b);f=()=>D(),t.signal.addEventListener("abort",f);let w=B=>typeof m!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${h}" [routeId: ${n.route.id}]`)):m({request:t,params:n.params,context:c},...B!==void 0?[B]:[]),x=(async()=>{try{return{type:"data",result:await(s?s(b=>w(b)):w())}}catch(B){return{type:"error",result:B}}})();return Promise.race([x,v])};try{let m=p?n.route.action:n.route.loader;if(a||l)if(m){let D,[v]=await Promise.all([y(m).catch(w=>{D=w}),a,l]);if(D!==void 0)throw D;A=v}else{await a;let D=p?n.route.action:n.route.loader;if(D)[A]=await Promise.all([y(D),l]);else if(h==="action"){let v=new URL(t.url),w=v.pathname+v.search;throw ve(405,{method:t.method,pathname:w,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(m)A=await y(m);else{let D=new URL(t.url),v=D.pathname+D.search;throw ve(404,{pathname:v})}}catch(m){return{type:"error",result:m}}finally{f&&t.signal.removeEventListener("abort",f)}return A}async function cx(t){var l,s,c,A,f,p;let{result:n,type:a}=t;if(eC(n)){let h;try{let y=n.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?n.body==null?h=null:h=await n.json():h=await n.text()}catch(y){return{type:"error",error:y}}return a==="error"?{type:"error",error:new oi(n.status,n.statusText,h),statusCode:n.status,headers:n.headers}:{type:"data",data:h,statusCode:n.status,headers:n.headers}}return a==="error"?yp(n)?n.data instanceof Error?{type:"error",error:n.data,statusCode:(l=n.init)==null?void 0:l.status,headers:(s=n.init)!=null&&s.headers?new Headers(n.init.headers):void 0}:{type:"error",error:new oi(((c=n.init)==null?void 0:c.status)||500,void 0,n.data),statusCode:ta(n)?n.status:void 0,headers:(A=n.init)!=null&&A.headers?new Headers(n.init.headers):void 0}:{type:"error",error:n,statusCode:ta(n)?n.status:void 0}:yp(n)?{type:"data",data:n.data,statusCode:(f=n.init)==null?void 0:f.status,headers:(p=n.init)!=null&&p.headers?new Headers(n.init.headers):void 0}:{type:"data",data:n}}function ux(t,n,a,l,s){let c=t.headers.get("Location");if(L0(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!dA(c)){let A=l.slice(0,l.findIndex(f=>f.route.id===a)+1);c=ku(new URL(n.url),A,s,c),t.headers.set("Location",c)}return t}function fp(t,n,a){if(dA(t)){let l=t,s=l.startsWith("//")?new URL(n.protocol+l):new URL(l),c=ce(s.pathname,a)!=null;if(s.origin===n.origin&&c)return s.pathname+s.search+s.hash}return t}function Nn(t,n,a,l){let s=t.createURL(Jm(n)).toString(),c={signal:a};if(l&&Z2(l.formMethod)){let{formMethod:A,formEncType:f}=l;c.method=A.toUpperCase(),f==="application/json"?(c.headers=new Headers({"Content-Type":f}),c.body=JSON.stringify(l.json)):f==="text/plain"?c.body=l.text:f==="application/x-www-form-urlencoded"&&l.formData?c.body=Mu(l.formData):c.body=l.formData}return new Request(s,c)}function Mu(t){let n=new URLSearchParams;for(let[a,l]of t.entries())n.append(a,typeof l=="string"?l:l.name);return n}function dp(t){let n=new FormData;for(let[a,l]of t.entries())n.append(a,l);return n}function Ax(t,n,a,l=!1,s=!1){let c={},A=null,f,p=!1,h={},y=a&&le(a[1])?a[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in n))return;let D=m.route.id,v=n[D];if(L0(!Sr(v),"Cannot handle redirect results in processLoaderData"),le(v)){let w=v.error;if(y!==void 0&&(w=y,y=void 0),A=A||{},s)A[D]=w;else{let x=Nr(t,D);A[x.route.id]==null&&(A[x.route.id]=w)}l||(c[D]=$m),p||(p=!0,f=ta(v.error)?v.error.status:500),v.headers&&(h[D]=v.headers)}else c[D]=v.data,v.statusCode&&v.statusCode!==200&&!p&&(f=v.statusCode),v.headers&&(h[D]=v.headers)}),y!==void 0&&a&&(A={[a[0]]:y},a[2]&&(c[a[2]]=void 0)),{loaderData:c,errors:A,statusCode:f||200,loaderHeaders:h}}function hp(t,n,a,l,s,c){let{loaderData:A,errors:f}=Ax(n,a,l);return s.filter(p=>!p.matches||p.matches.some(h=>h.shouldLoad)).forEach(p=>{let{key:h,match:y,controller:m}=p,D=c[h];if(L0(D,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(le(D)){let v=Nr(t.matches,y==null?void 0:y.route.id);f&&f[v.route.id]||(f={...f,[v.route.id]:D.error}),t.fetchers.delete(h)}else if(Sr(D))L0(!1,"Unhandled fetcher revalidation redirect");else{let v=Kt(D.data);t.fetchers.set(h,v)}}),{loaderData:A,errors:f}}function pp(t,n,a,l){let s=Object.entries(n).filter(([,c])=>c!==$m).reduce((c,[A,f])=>(c[A]=f,c),{});for(let c of a){let A=c.route.id;if(!n.hasOwnProperty(A)&&t.hasOwnProperty(A)&&c.route.loader&&(s[A]=t[A]),l&&l.hasOwnProperty(A))break}return s}function mp(t){return t?le(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Nr(t,n){return(n?t.slice(0,t.findIndex(l=>l.route.id===n)+1):[...t]).reverse().find(l=>l.route.hasErrorBoundary===!0)||t[0]}function Cp(t){let n=t.length===1?t[0]:t.find(a=>a.index||!a.path||a.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n}}function ve(t,{pathname:n,routeId:a,method:l,type:s,message:c}={}){let A="Unknown Server Error",f="Unknown @remix-run/router error";return t===400?(A="Bad Request",l&&n&&a?f=`You made a ${l} request to "${n}" but did not provide a \`loader\` for route "${a}", so there is no way to handle the request.`:s==="invalid-body"&&(f="Unable to encode submission body")):t===403?(A="Forbidden",f=`Route "${a}" does not match URL "${n}"`):t===404?(A="Not Found",f=`No route matches URL "${n}"`):t===405&&(A="Method Not Allowed",l&&n&&a?f=`You made a ${l.toUpperCase()} request to "${n}" but did not provide an \`action\` for route "${a}", so there is no way to handle the request.`:l&&(f=`Invalid request method "${l.toUpperCase()}"`)),new oi(t||500,A,new Error(f),!0)}function Tl(t){let n=Object.entries(t);for(let a=n.length-1;a>=0;a--){let[l,s]=n[a];if(Sr(s))return{key:l,result:s}}}function Jm(t){let n=typeof t=="string"?er(t):t;return Xt({...n,hash:""})}function fx(t,n){return t.pathname!==n.pathname||t.search!==n.search?!1:t.hash===""?n.hash!=="":t.hash===n.hash?!0:n.hash!==""}function dx(t){return eC(t.result)&&Z6.has(t.result.status)}function le(t){return t.type==="error"}function Sr(t){return(t&&t.type)==="redirect"}function yp(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function eC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function hx(t){return K6.has(t.toUpperCase())}function Z2(t){return $6.has(t.toUpperCase())}function hA(t){return new URLSearchParams(t).getAll("index").some(n=>n==="")}function Zl(t,n){let a=typeof n=="string"?er(n).search:n.search;if(t[t.length-1].route.index&&hA(a||""))return t[t.length-1];let l=Vm(t);return l[l.length-1]}function gp(t){let{formMethod:n,formAction:a,formEncType:l,text:s,formData:c,json:A}=t;if(!(!n||!a||!l)){if(s!=null)return{formMethod:n,formAction:a,formEncType:l,formData:void 0,json:void 0,text:s};if(c!=null)return{formMethod:n,formAction:a,formEncType:l,formData:c,json:void 0,text:void 0};if(A!==void 0)return{formMethod:n,formAction:a,formEncType:l,formData:void 0,json:A,text:void 0}}}function ru(t,n){return n?{state:"loading",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function px(t,n){return{state:"submitting",location:t,formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text}}function Go(t,n){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function mx(t,n){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:n?n.data:void 0}}function Kt(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Cx(t,n){try{let a=t.sessionStorage.getItem(qm);if(a){let l=JSON.parse(a);for(let[s,c]of Object.entries(l||{}))c&&Array.isArray(c)&&n.set(s,new Set(c||[]))}}catch{}}function yx(t,n){if(n.size>0){let a={};for(let[l,s]of n)a[l]=[...s];try{t.sessionStorage.setItem(qm,JSON.stringify(a))}catch(l){p2(!1,`Failed to save applied view transitions in sessionStorage (${l}).`)}}}function gx(){let t,n,a=new Promise((l,s)=>{t=async c=>{l(c);try{await a}catch{}},n=async c=>{s(c);try{await a}catch{}}});return{promise:a,resolve:t,reject:n}}var Pr=g.createContext(null);Pr.displayName="DataRouter";var Ln=g.createContext(null);Ln.displayName="DataRouterState";g.createContext(!1);var pA=g.createContext({isTransitioning:!1});pA.displayName="ViewTransition";var tC=g.createContext(new Map);tC.displayName="Fetchers";var Dx=g.createContext(null);Dx.displayName="Await";var Ne=g.createContext(null);Ne.displayName="Navigation";var Di=g.createContext(null);Di.displayName="Location";var wt=g.createContext({outlet:null,matches:[],isDataRoute:!1});wt.displayName="Route";var mA=g.createContext(null);mA.displayName="RouteError";function vx(t,{relative:n}={}){L0(jn(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:l}=g.useContext(Ne),{hash:s,pathname:c,search:A}=la(t,{relative:n}),f=c;return a!=="/"&&(f=c==="/"?a:Ke([a,c])),l.createHref({pathname:f,search:A,hash:s})}function jn(){return g.useContext(Di)!=null}function a2(){return L0(jn(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Di).location}function xx(t){L0(jn(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:n}=a2();return g.useMemo(()=>Rr(t,Hm(n)),[n,t])}var rC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nC(t){g.useContext(Ne).static||g.useLayoutEffect(t)}function CA(){let{isDataRoute:t}=g.useContext(wt);return t?Mx():wx()}function wx(){L0(jn(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(Pr),{basename:n,navigator:a}=g.useContext(Ne),{matches:l}=g.useContext(wt),{pathname:s}=a2(),c=JSON.stringify(AA(l)),A=g.useRef(!1);return nC(()=>{A.current=!0}),g.useCallback((p,h={})=>{if(p2(A.current,rC),!A.current)return;if(typeof p=="number"){a.go(p);return}let y=fA(p,JSON.parse(c),s,h.relative==="path");t==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:Ke([n,y.pathname])),(h.replace?a.replace:a.push)(y,h.state,h)},[n,a,c,s,t])}g.createContext(null);function la(t,{relative:n}={}){let{matches:a}=g.useContext(wt),{pathname:l}=a2(),s=JSON.stringify(AA(a));return g.useMemo(()=>fA(t,JSON.parse(s),l,n==="path"),[t,s,l,n])}function Fx(t,n,a,l){L0(jn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=g.useContext(Ne),{matches:c}=g.useContext(wt),A=c[c.length-1],f=A?A.params:{},p=A?A.pathname:"/",h=A?A.pathnameBase:"/",y=A&&A.route;{let b=y&&y.path||"";aC(p,!y||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let m=a2(),D;D=m;let v=D.pathname||"/",w=v;if(h!=="/"){let b=h.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Dt(t,{pathname:w});return p2(y||x!=null,`No routes matched location "${D.pathname}${D.search}${D.hash}" `),p2(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${D.pathname}${D.search}${D.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Rx(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},f,b.params),pathname:Ke([h,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Ke([h,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),c,a,l)}function Bx(){let t=Px(),n=ta(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,l="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:l},c={padding:"2px 4px",backgroundColor:l},A=null;return console.error("Error handled by React Router default ErrorBoundary:",t),A=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:c},"ErrorBoundary")," or"," ",g.createElement("code",{style:c},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},n),a?g.createElement("pre",{style:s},a):null,A)}var bx=g.createElement(Bx,null),Nx=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(wt.Provider,{value:this.props.routeContext},g.createElement(mA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Sx({routeContext:t,match:n,children:a}){let l=g.useContext(Pr);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(wt.Provider,{value:t},a)}function Rx(t,n=[],a=null,l=null){if(t==null){if(!a)return null;if(a.errors)t=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let s=t,c=a==null?void 0:a.errors;if(c!=null){let p=s.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);L0(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let A=!1,f=-1;if(a)for(let p=0;p<s.length;p++){let h=s[p];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(f=p),h.route.id){let{loaderData:y,errors:m}=a,D=h.route.loader&&!y.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||D){A=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,h,y)=>{let m,D=!1,v=null,w=null;a&&(m=c&&h.route.id?c[h.route.id]:void 0,v=h.route.errorElement||bx,A&&(f<0&&y===0?(aC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,w=null):f===y&&(D=!0,w=h.route.hydrateFallbackElement||null)));let x=n.concat(s.slice(0,y+1)),B=()=>{let b;return m?b=v:D?b=w:h.route.Component?b=g.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=p,g.createElement(Sx,{match:h,routeContext:{outlet:p,matches:x,isDataRoute:a!=null},children:b})};return a&&(h.route.ErrorBoundary||h.route.errorElement||y===0)?g.createElement(Nx,{location:a.location,revalidation:a.revalidation,component:v,error:m,children:B(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):B()},null)}function yA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ex(t){let n=g.useContext(Pr);return L0(n,yA(t)),n}function gA(t){let n=g.useContext(Ln);return L0(n,yA(t)),n}function _x(t){let n=g.useContext(wt);return L0(n,yA(t)),n}function DA(t){let n=_x(t),a=n.matches[n.matches.length-1];return L0(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function kx(){return DA("useRouteId")}function Tx(){return gA("useNavigation").navigation}function oC(){let{matches:t,loaderData:n}=gA("useMatches");return g.useMemo(()=>t.map(a=>Um(a,n)),[t,n])}function Px(){var l;let t=g.useContext(mA),n=gA("useRouteError"),a=DA("useRouteError");return t!==void 0?t:(l=n.errors)==null?void 0:l[a]}function Mx(){let{router:t}=Ex("useNavigate"),n=DA("useNavigate"),a=g.useRef(!1);return nC(()=>{a.current=!0}),g.useCallback(async(s,c={})=>{p2(a.current,rC),a.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:n,...c}))},[t,n])}var Dp={};function aC(t,n,a){!n&&!Dp[t]&&(Dp[t]=!0,p2(!1,a))}var vp={};function xp(t,n){!t&&!vp[n]&&(vp[n]=!0,console.warn(n))}function Ox(t){let n={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&p2(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(n,{element:g.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&p2(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(n,{hydrateFallbackElement:g.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&p2(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(n,{errorElement:g.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),n}var Lx=["HydrateFallback","hydrateFallbackElement"],jx=class{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",t(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",n(a))}})}};function Ix({router:t,flushSync:n}){let[a,l]=g.useState(t.state),[s,c]=g.useState(),[A,f]=g.useState({isTransitioning:!1}),[p,h]=g.useState(),[y,m]=g.useState(),[D,v]=g.useState(),w=g.useRef(new Map),x=g.useCallback((N,{deletedFetchers:_,flushSync:T,viewTransitionOpts:E})=>{N.fetchers.forEach((U,H)=>{U.data!==void 0&&w.current.set(H,U.data)}),_.forEach(U=>w.current.delete(U)),xp(T===!1||n!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(xp(E==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!E||!O){n&&T?n(()=>l(N)):g.startTransition(()=>l(N));return}if(n&&T){n(()=>{y&&(p&&p.resolve(),y.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:E.currentLocation,nextLocation:E.nextLocation})});let U=t.window.document.startViewTransition(()=>{n(()=>l(N))});U.finished.finally(()=>{n(()=>{h(void 0),m(void 0),c(void 0),f({isTransitioning:!1})})}),n(()=>m(U));return}y?(p&&p.resolve(),y.skipTransition(),v({state:N,currentLocation:E.currentLocation,nextLocation:E.nextLocation})):(c(N),f({isTransitioning:!0,flushSync:!1,currentLocation:E.currentLocation,nextLocation:E.nextLocation}))},[t.window,n,y,p]);g.useLayoutEffect(()=>t.subscribe(x),[t,x]),g.useEffect(()=>{A.isTransitioning&&!A.flushSync&&h(new jx)},[A]),g.useEffect(()=>{if(p&&s&&t.window){let N=s,_=p.promise,T=t.window.document.startViewTransition(async()=>{g.startTransition(()=>l(N)),await _});T.finished.finally(()=>{h(void 0),m(void 0),c(void 0),f({isTransitioning:!1})}),m(T)}},[s,p,t.window]),g.useEffect(()=>{p&&s&&a.location.key===s.location.key&&p.resolve()},[p,y,a.location,s]),g.useEffect(()=>{!A.isTransitioning&&D&&(c(D.state),f({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}),v(void 0))},[A.isTransitioning,D]);let B=g.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:N=>t.navigate(N),push:(N,_,T)=>t.navigate(N,{state:_,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(N,_,T)=>t.navigate(N,{replace:!0,state:_,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[t]),b=t.basename||"/",R=g.useMemo(()=>({router:t,navigator:B,static:!1,basename:b}),[t,B,b]);return g.createElement(g.Fragment,null,g.createElement(Pr.Provider,{value:R},g.createElement(Ln.Provider,{value:a},g.createElement(tC.Provider,{value:w.current},g.createElement(pA.Provider,{value:A},g.createElement(Wx,{basename:b,location:a.location,navigationType:a.historyAction,navigator:B},g.createElement(Ux,{routes:t.routes,future:t.future,state:a})))))),null)}var Ux=g.memo(zx);function zx({routes:t,future:n,state:a}){return Fx(t,void 0,a,n)}function Wx({basename:t="/",children:n=null,location:a,navigationType:l="POP",navigator:s,static:c=!1}){L0(!jn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=t.replace(/^\/*/,"/"),f=g.useMemo(()=>({basename:A,navigator:s,static:c,future:{}}),[A,s,c]);typeof a=="string"&&(a=er(a));let{pathname:p="/",search:h="",hash:y="",state:m=null,key:D="default"}=a,v=g.useMemo(()=>{let w=ce(p,A);return w==null?null:{location:{pathname:w,search:h,hash:y,state:m,key:D},navigationType:l}},[A,p,h,y,m,D,l]);return p2(v!=null,`<Router basename="${A}"> is not able to match the URL "${p}${h}${y}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:g.createElement(Ne.Provider,{value:f},g.createElement(Di.Provider,{children:n,value:v}))}var Xl="get",Ql="application/x-www-form-urlencoded";function vi(t){return t!=null&&typeof t.tagName=="string"}function Hx(t){return vi(t)&&t.tagName.toLowerCase()==="button"}function Vx(t){return vi(t)&&t.tagName.toLowerCase()==="form"}function Gx(t){return vi(t)&&t.tagName.toLowerCase()==="input"}function qx(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $x(t,n){return t.button===0&&(!n||n==="_self")&&!qx(t)}var Pl=null;function Yx(){if(Pl===null)try{new FormData(document.createElement("form"),0),Pl=!1}catch{Pl=!0}return Pl}var Kx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function nu(t){return t!=null&&!Kx.has(t)?(p2(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ql}"`),null):t}function Zx(t,n){let a,l,s,c,A;if(Vx(t)){let f=t.getAttribute("action");l=f?ce(f,n):null,a=t.getAttribute("method")||Xl,s=nu(t.getAttribute("enctype"))||Ql,c=new FormData(t)}else if(Hx(t)||Gx(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||f.getAttribute("action");if(l=p?ce(p,n):null,a=t.getAttribute("formmethod")||f.getAttribute("method")||Xl,s=nu(t.getAttribute("formenctype"))||nu(f.getAttribute("enctype"))||Ql,c=new FormData(f,t),!Yx()){let{name:h,type:y,value:m}=t;if(y==="image"){let D=h?`${h}.`:"";c.append(`${D}x`,"0"),c.append(`${D}y`,"0")}else h&&c.append(h,m)}}else{if(vi(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Xl,l=null,s=Ql,A=t}return c&&s==="text/plain"&&(A=c,c=void 0),{action:l,method:a.toLowerCase(),encType:s,formData:c,body:A}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vA(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function Xx(t,n,a){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return l.pathname==="/"?l.pathname=`_root.${a}`:n&&ce(l.pathname,n)==="/"?l.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${a}`,l}async function Qx(t,n){if(t.id in n)return n[t.id];try{let a=await import(t.module);return n[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jx(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function e1(t,n,a){let l=await Promise.all(t.map(async s=>{let c=n.routes[s.route.id];if(c){let A=await Qx(c,a);return A.links?A.links():[]}return[]}));return o1(l.flat(1).filter(Jx).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function wp(t,n,a,l,s,c){let A=(p,h)=>a[h]?p.route.id!==a[h].route.id:!0,f=(p,h)=>{var y;return a[h].pathname!==p.pathname||((y=a[h].route.path)==null?void 0:y.endsWith("*"))&&a[h].params["*"]!==p.params["*"]};return c==="assets"?n.filter((p,h)=>A(p,h)||f(p,h)):c==="data"?n.filter((p,h)=>{var m;let y=l.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(A(p,h)||f(p,h))return!0;if(p.route.shouldRevalidate){let D=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=a[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof D=="boolean")return D}return!0}):[]}function t1(t,n,{includeHydrateFallback:a}={}){return r1(t.map(l=>{let s=n.routes[l.route.id];if(!s)return[];let c=[s.module];return s.clientActionModule&&(c=c.concat(s.clientActionModule)),s.clientLoaderModule&&(c=c.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(c=c.concat(s.hydrateFallbackModule)),s.imports&&(c=c.concat(s.imports)),c}).flat(1))}function r1(t){return[...new Set(t)]}function n1(t){let n={},a=Object.keys(t).sort();for(let l of a)n[l]=t[l];return n}function o1(t,n){let a=new Set;return new Set(n),t.reduce((l,s)=>{let c=JSON.stringify(n1(s));return a.has(c)||(a.add(c),l.push({key:c,link:s})),l},[])}function lC(){let t=g.useContext(Pr);return vA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function a1(){let t=g.useContext(Ln);return vA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var xi=g.createContext(void 0);xi.displayName="FrameworkContext";function iC(){let t=g.useContext(xi);return vA(t,"You must render this element inside a <HydratedRouter> element"),t}function l1(t,n){let a=g.useContext(xi),[l,s]=g.useState(!1),[c,A]=g.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:h,onMouseLeave:y,onTouchStart:m}=n,D=g.useRef(null);g.useEffect(()=>{if(t==="render"&&A(!0),t==="viewport"){let x=b=>{b.forEach(R=>{A(R.isIntersecting)})},B=new IntersectionObserver(x,{threshold:.5});return D.current&&B.observe(D.current),()=>{B.disconnect()}}},[t]),g.useEffect(()=>{if(l){let x=setTimeout(()=>{A(!0)},100);return()=>{clearTimeout(x)}}},[l]);let v=()=>{s(!0)},w=()=>{s(!1),A(!1)};return a?t!=="intent"?[c,D,{}]:[c,D,{onFocus:qo(f,v),onBlur:qo(p,w),onMouseEnter:qo(h,v),onMouseLeave:qo(y,w),onTouchStart:qo(m,v)}]:[!1,D,{}]}function qo(t,n){return a=>{t&&t(a),a.defaultPrevented||n(a)}}function i1({page:t,...n}){let{router:a}=lC(),l=g.useMemo(()=>Dt(a.routes,t,a.basename),[a.routes,t,a.basename]);return l?g.createElement(c1,{page:t,matches:l,...n}):null}function s1(t){let{manifest:n,routeModules:a}=iC(),[l,s]=g.useState([]);return g.useEffect(()=>{let c=!1;return e1(t,n,a).then(A=>{c||s(A)}),()=>{c=!0}},[t,n,a]),l}function c1({page:t,matches:n,...a}){let l=a2(),{manifest:s,routeModules:c}=iC(),{basename:A}=lC(),{loaderData:f,matches:p}=a1(),h=g.useMemo(()=>wp(t,n,p,s,l,"data"),[t,n,p,s,l]),y=g.useMemo(()=>wp(t,n,p,s,l,"assets"),[t,n,p,s,l]),m=g.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let w=new Set,x=!1;if(n.forEach(b=>{var N;let R=s.routes[b.route.id];!R||!R.hasLoader||(!h.some(_=>_.route.id===b.route.id)&&b.route.id in f&&((N=c[b.route.id])!=null&&N.shouldRevalidate)||R.hasClientLoader?x=!0:w.add(b.route.id))}),w.size===0)return[];let B=Xx(t,A,"data");return x&&w.size>0&&B.searchParams.set("_routes",n.filter(b=>w.has(b.route.id)).map(b=>b.route.id).join(",")),[B.pathname+B.search]},[A,f,l,s,h,n,t,c]),D=g.useMemo(()=>t1(y,s),[y,s]),v=s1(y);return g.createElement(g.Fragment,null,m.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...a})),D.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...a})),v.map(({key:w,link:x})=>g.createElement("link",{key:w,...x})))}function u1(...t){return n=>{t.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var sC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sC&&(window.__reactRouterVersion="7.7.1")}catch{}function A1(t,n){return tx({basename:n==null?void 0:n.basename,unstable_getContext:n==null?void 0:n.unstable_getContext,future:n==null?void 0:n.future,history:x6({window:n==null?void 0:n.window}),hydrationData:(n==null?void 0:n.hydrationData)||f1(),routes:t,mapRouteProperties:Ox,hydrationRouteProperties:Lx,dataStrategy:n==null?void 0:n.dataStrategy,patchRoutesOnNavigation:n==null?void 0:n.patchRoutesOnNavigation,window:n==null?void 0:n.window}).initialize()}function f1(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:d1(t.errors)}),t}function d1(t){if(!t)return null;let n=Object.entries(t),a={};for(let[l,s]of n)if(s&&s.__type==="RouteErrorResponse")a[l]=new oi(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let c=window[s.__subType];if(typeof c=="function")try{let A=new c(s.message);A.stack="",a[l]=A}catch{}}if(a[l]==null){let c=new Error(s.message);c.stack="",a[l]=c}}else a[l]=s;return a}var cC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=g.forwardRef(function({onClick:n,discover:a="render",prefetch:l="none",relative:s,reloadDocument:c,replace:A,state:f,target:p,to:h,preventScrollReset:y,viewTransition:m,...D},v){let{basename:w}=g.useContext(Ne),x=typeof h=="string"&&cC.test(h),B,b=!1;if(typeof h=="string"&&x&&(B=h,sC))try{let H=new URL(window.location.href),n0=h.startsWith("//")?new URL(H.protocol+h):new URL(h),u0=ce(n0.pathname,w);n0.origin===H.origin&&u0!=null?h=u0+n0.search+n0.hash:b=!0}catch{p2(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=vx(h,{relative:s}),[N,_,T]=l1(l,D),E=C1(h,{replace:A,state:f,target:p,preventScrollReset:y,relative:s,viewTransition:m});function O(H){n&&n(H),H.defaultPrevented||E(H)}let U=g.createElement("a",{...D,...T,href:B||R,onClick:b||c?n:O,ref:u1(v,_),target:p,"data-discover":!x&&a==="render"?"true":void 0});return N&&!x?g.createElement(g.Fragment,null,U,g.createElement(i1,{page:R})):U});In.displayName="Link";var h1=g.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:l="",end:s=!1,style:c,to:A,viewTransition:f,children:p,...h},y){let m=la(A,{relative:h.relative}),D=a2(),v=g.useContext(Ln),{navigator:w,basename:x}=g.useContext(Ne),B=v!=null&&F1(m)&&f===!0,b=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,R=D.pathname,N=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;a||(R=R.toLowerCase(),N=N?N.toLowerCase():null,b=b.toLowerCase()),N&&x&&(N=ce(N,x)||N);const _=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let T=R===b||!s&&R.startsWith(b)&&R.charAt(_)==="/",E=N!=null&&(N===b||!s&&N.startsWith(b)&&N.charAt(b.length)==="/"),O={isActive:T,isPending:E,isTransitioning:B},U=T?n:void 0,H;typeof l=="function"?H=l(O):H=[l,T?"active":null,E?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let n0=typeof c=="function"?c(O):c;return g.createElement(In,{...h,"aria-current":U,className:H,ref:y,style:n0,to:A,viewTransition:f},typeof p=="function"?p(O):p)});h1.displayName="NavLink";var p1=g.forwardRef(({discover:t="render",fetcherKey:n,navigate:a,reloadDocument:l,replace:s,state:c,method:A=Xl,action:f,onSubmit:p,relative:h,preventScrollReset:y,viewTransition:m,...D},v)=>{let w=D1(),x=v1(f,{relative:h}),B=A.toLowerCase()==="get"?"get":"post",b=typeof f=="string"&&cC.test(f),R=N=>{if(p&&p(N),N.defaultPrevented)return;N.preventDefault();let _=N.nativeEvent.submitter,T=(_==null?void 0:_.getAttribute("formmethod"))||A;w(_||N.currentTarget,{fetcherKey:n,method:T,navigate:a,replace:s,state:c,relative:h,preventScrollReset:y,viewTransition:m})};return g.createElement("form",{ref:v,method:B,action:x,onSubmit:l?p:R,...D,"data-discover":!b&&t==="render"?"true":void 0})});p1.displayName="Form";function uC({getKey:t,storageKey:n,...a}){let l=g.useContext(xi),{basename:s}=g.useContext(Ne),c=a2(),A=oC();x1({getKey:t,storageKey:n});let f=g.useMemo(()=>{if(!l||!t)return null;let h=Lu(c,A,s,t);return h!==c.key?h:null},[]);if(!l||l.isSpaMode)return null;let p=((h,y)=>{if(!window.history.state||!window.history.state.key){let m=Math.random().toString(32).slice(2);window.history.replaceState({key:m},"")}try{let D=JSON.parse(sessionStorage.getItem(h)||"{}")[y||window.history.state.key];typeof D=="number"&&window.scrollTo(0,D)}catch(m){console.error(m),sessionStorage.removeItem(h)}}).toString();return g.createElement("script",{...a,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${p})(${JSON.stringify(n||Ou)}, ${JSON.stringify(f)})`}})}uC.displayName="ScrollRestoration";function AC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xA(t){let n=g.useContext(Pr);return L0(n,AC(t)),n}function m1(t){let n=g.useContext(Ln);return L0(n,AC(t)),n}function C1(t,{target:n,replace:a,state:l,preventScrollReset:s,relative:c,viewTransition:A}={}){let f=CA(),p=a2(),h=la(t,{relative:c});return g.useCallback(y=>{if($x(y,n)){y.preventDefault();let m=a!==void 0?a:Xt(p)===Xt(h);f(t,{replace:m,state:l,preventScrollReset:s,relative:c,viewTransition:A})}},[p,f,h,a,l,n,t,s,c,A])}var y1=0,g1=()=>`__${String(++y1)}__`;function D1(){let{router:t}=xA("useSubmit"),{basename:n}=g.useContext(Ne),a=kx();return g.useCallback(async(l,s={})=>{let{action:c,method:A,encType:f,formData:p,body:h}=Zx(l,n);if(s.navigate===!1){let y=s.fetcherKey||g1();await t.fetch(y,a,s.action||c,{preventScrollReset:s.preventScrollReset,formData:p,body:h,formMethod:s.method||A,formEncType:s.encType||f,flushSync:s.flushSync})}else await t.navigate(s.action||c,{preventScrollReset:s.preventScrollReset,formData:p,body:h,formMethod:s.method||A,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:a,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,n,a])}function v1(t,{relative:n}={}){let{basename:a}=g.useContext(Ne),l=g.useContext(wt);L0(l,"useFormAction must be used inside a RouteContext");let[s]=l.matches.slice(-1),c={...la(t||".",{relative:n})},A=a2();if(t==null){c.search=A.search;let f=new URLSearchParams(c.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(m=>m).forEach(m=>f.append("index",m));let y=f.toString();c.search=y?`?${y}`:""}}return(!t||t===".")&&s.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(c.pathname=c.pathname==="/"?a:Ke([a,c.pathname])),Xt(c)}var Ou="react-router-scroll-positions",Ml={};function Lu(t,n,a,l){let s=null;return l&&(a!=="/"?s=l({...t,pathname:ce(t.pathname,a)||t.pathname},n):s=l(t,n)),s==null&&(s=t.key),s}function x1({getKey:t,storageKey:n}={}){let{router:a}=xA("useScrollRestoration"),{restoreScrollPosition:l,preventScrollReset:s}=m1("useScrollRestoration"),{basename:c}=g.useContext(Ne),A=a2(),f=oC(),p=Tx();g.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),w1(g.useCallback(()=>{if(p.state==="idle"){let h=Lu(A,f,c,t);Ml[h]=window.scrollY}try{sessionStorage.setItem(n||Ou,JSON.stringify(Ml))}catch(h){p2(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${h}).`)}window.history.scrollRestoration="auto"},[p.state,t,c,A,f,n])),typeof document<"u"&&(g.useLayoutEffect(()=>{try{let h=sessionStorage.getItem(n||Ou);h&&(Ml=JSON.parse(h))}catch{}},[n]),g.useLayoutEffect(()=>{let h=a==null?void 0:a.enableScrollRestoration(Ml,()=>window.scrollY,t?(y,m)=>Lu(y,m,c,t):void 0);return()=>h&&h()},[a,c,t]),g.useLayoutEffect(()=>{if(l!==!1){if(typeof l=="number"){window.scrollTo(0,l);return}try{if(A.hash){let h=document.getElementById(decodeURIComponent(A.hash.slice(1)));if(h){h.scrollIntoView();return}}}catch{p2(!1,`"${A.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}s!==!0&&window.scrollTo(0,0)}},[A,l,s]))}function w1(t,n){let{capture:a}={};g.useEffect(()=>{let l=a!=null?{capture:a}:void 0;return window.addEventListener("pagehide",t,l),()=>{window.removeEventListener("pagehide",t,l)}},[t,a])}function F1(t,{relative:n}={}){let a=g.useContext(pA);L0(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=xA("useViewTransitionState"),s=la(t,{relative:n});if(!a.isTransitioning)return!1;let c=ce(a.currentLocation.pathname,l)||a.currentLocation.pathname,A=ce(a.nextLocation.pathname,l)||a.nextLocation.pathname;return Rr(s.pathname,A)!=null||Rr(s.pathname,c)!=null}var wA=Lm();const fC=yi(wA);function ju(t){return Array.isArray(t)?t.map(ju):typeof t=="object"&&t!==null?Object.keys(t).reduce((n,a)=>(n[a]=ju(t[a]),n),{}):typeof t=="string"&&t.includes("_vocs-fn_")?new Function(`return ${t.slice(9)}`)():t}const dC=ju({aiCta:!0,blogDir:"./pages/blog",rootDir:"docs",title:"Flyt",titleTemplate:"%s  Flyt",description:"A minimalist workflow framework for Go with zero dependencies",baseUrl:"https://go-flyt.dev",basePath:"",logoUrl:"/flyt-logo.png",sidebar:[{text:"Introduction",link:"/"},{text:"Getting Started",items:[{text:"Installation",link:"/getting-started/installation"},{text:"Quick Start",link:"/getting-started/quick-start"},{text:"Project Template",link:"/getting-started/template"}]},{text:"Core Concepts",items:[{text:"Nodes",link:"/concepts/nodes"},{text:"Actions",link:"/concepts/actions"},{text:"Flows",link:"/concepts/flows"},{text:"Shared Store",link:"/concepts/shared-store"}]},{text:"Patterns",items:[{text:"Configuration via Closures",link:"/patterns/closures"},{text:"Error Handling & Retries",link:"/patterns/error-handling"},{text:"Fallback on Failure",link:"/patterns/fallback"},{text:"Conditional Branching",link:"/patterns/branching"}]},{text:"Advanced",items:[{text:"Custom Node Types",link:"/advanced/custom-nodes"},{text:"Batch Processing",link:"/advanced/batch-processing"},{text:"Batch Flows",link:"/advanced/batch-flows"},{text:"Nested Flows",link:"/advanced/nested-flows"},{text:"Flow as Node",link:"/advanced/flow-as-node"},{text:"Worker Pool",link:"/advanced/worker-pool"},{text:"Utilities",link:"/advanced/utilities"}]},{text:"Examples",items:[{text:"Agent",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/agent"},{text:"Chat",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/chat"},{text:"LLM Streaming",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/llm-streaming"},{text:"MCP",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/mcp"},{text:"Slack Bot",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/slack-bot"},{text:"SST Integration",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/sst-integration"},{text:"Summarize",link:"https://github.com/mark3labs/flyt/tree/main/cookbook/summarize"}]},{text:"Best Practices",link:"/best-practices"}],socials:[{icon:"github",link:"https://github.com/mark3labs/flyt",label:"GitHub",type:"github"}],font:{},markdown:{code:{themes:{dark:"github-dark-dimmed",light:"github-light"}}},topNav:[],theme:{},vite:{}}),B1="modulepreload",b1=function(t){return"/"+t},Fp={},M0=function(n,a,l){let s=Promise.resolve();if(a&&a.length>0){let A=function(h){return Promise.all(h.map(y=>Promise.resolve(y).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));s=A(a.map(h=>{if(h=b1(h),h in Fp)return;Fp[h]=!0;const y=h.endsWith(".css"),m=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${m}`))return;const D=document.createElement("link");if(D.rel=y?"stylesheet":B1,y||(D.as="script"),D.crossOrigin="",D.href=h,p&&D.setAttribute("nonce",p),document.head.appendChild(D),y)return new Promise((v,w)=>{D.addEventListener("load",v),D.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(A){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=A,window.dispatchEvent(f),!f.defaultPrevented)throw A}return s.then(A=>{for(const f of A||[])f.status==="rejected"&&c(f.reason);return n().catch(c)})},hC=g.createContext(dC);function pC(){return dC}function N1({children:t,config:n}){const[a,l]=g.useState(()=>n||pC());return g.useEffect(()=>{},[]),g.useEffect(()=>{},[a]),C.jsx(hC.Provider,{value:a,children:t})}function m2(){return g.useContext(hC)}const FA=[{lazy:()=>M0(()=>import("./best-practices-DTmb-ZWt.js"),[]),path:"/best-practices",type:"mdx",filePath:"best-practices.mdx",content:"%23%20Best%20Practices%0A%0AFollow%20these%20guidelines%20to%20build%20robust%2C%20maintainable%20Flyt%20workflows.%0A%0A%23%23%20Node%20Design%0A%0A%23%23%23%20Single%20Responsibility%0A%0AEach%20node%20should%20do%20one%20thing%20well%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Node%20doing%20too%20much%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20data%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20fetchFromAPI()%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%0A%20%20%20%20%20%20%20%20if%20!isValid(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20errors.New(%22invalid%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Transform%0A%20%20%20%20%20%20%20%20transformed%20%3A%3D%20transform(data)%0A%20%20%20%20%20%20%20%20%2F%2F%20Save%0A%20%20%20%20%20%20%20%20saveToDatabase(transformed)%0A%20%20%20%20%20%20%20%20return%20transformed%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Separate%20concerns%0AfetchNode%20%3A%3D%20createFetchNode()%0AvalidateNode%20%3A%3D%20createValidateNode()%0AtransformNode%20%3A%3D%20createTransformNode()%0AsaveNode%20%3A%3D%20createSaveNode()%0A%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%23%20Idempotency%0A%0ADesign%20nodes%20to%20be%20safely%20retryable%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9C%85%20Good%3A%20Idempotent%20operation%0Afunc%20(n%20*SaveNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(Record)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20upsert%20instead%20of%20insert%0A%20%20%20%20_%2C%20err%20%3A%3D%20db.Exec(%60%0A%20%20%20%20%20%20%20%20INSERT%20INTO%20records%20(id%2C%20data)%20VALUES%20(%3F%2C%20%3F)%0A%20%20%20%20%20%20%20%20ON%20CONFLICT%20(id)%20DO%20UPDATE%20SET%20data%20%3D%20%3F%0A%20%20%20%20%60%2C%20data.ID%2C%20data.Data%2C%20data.Data)%0A%20%20%20%20%0A%20%20%20%20return%20data.ID%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0AReturn%20clear%2C%20actionable%20errors%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Generic%20error%0Areturn%20nil%2C%20errors.New(%22failed%22)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Descriptive%20error%0Areturn%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20user%20%25d%3A%20%25w%22%2C%20userID%2C%20err)%0A%60%60%60%0A%0A%23%23%23%20Type-Safe%20SharedStore%20Access%0A%0AUse%20type-safe%20helpers%20to%20avoid%20runtime%20panics%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Manual%20type%20assertion%20can%20panic%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20val%2C%20_%20%3A%3D%20shared.Get(%22count%22)%0A%20%20%20%20count%20%3A%3D%20val.(int)%20%20%2F%2F%20Panics%20if%20val%20is%20nil%20or%20not%20int%0A%20%20%20%20return%20count%2C%20nil%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Type-safe%20getter%20with%20default%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20count%20%3A%3D%20shared.GetInt(%22count%22)%20%20%2F%2F%20Returns%200%20if%20not%20found%0A%20%20%20%20%2F%2F%20Or%20with%20custom%20default%0A%20%20%20%20count%20%3A%3D%20shared.GetIntOr(%22count%22%2C%20-1)%0A%20%20%20%20return%20count%2C%20nil%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Bind%20complex%20types%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20config%20Config%0A%20%20%20%20if%20err%20%3A%3D%20shared.Bind(%22config%22%2C%20%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20config%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Flow%20Design%0A%0A%23%23%23%20Modular%20Flows%0A%0ACreate%20reusable%20sub-flows%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20validation%20flow%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaValidator()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessValidator()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0AapiFlow.Connect(parseNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0A%60%60%60%0A%0A%23%23%23%20Error%20Boundaries%0A%0ACentralize%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createFlowWithErrorHandling()%20*flyt.Flow%20%7B%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandler()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20all%20error%20paths%20to%20handler%0A%20%20%20%20for%20_%2C%20node%20%3A%3D%20range%20%5B%5Dflyt.Node%7BstartNode%2C%20processNode%2C%20saveNode%7D%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(node%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Context%20Handling%0A%0A%23%23%23%20Respect%20Cancellation%0A%0AAlways%20check%20context%20in%20long-running%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20%5B%5DResult%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20context%20before%20each%20iteration%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(ctx%2C%20item)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Management%0A%0ASet%20appropriate%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20(n%20*APINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20return%20callAPI(ctx%2C%20prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%20Concurrency%20Safety%0A%0A%23%23%23%20Thread-Safe%20Nodes%0A%0AProtect%20shared%20state%20in%20nodes%3A%0A%0A%60%60%60go%0Atype%20CounterNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20sync.Mutex%0A%20%20%20%20count%20int%0A%7D%0A%0Afunc%20(n%20*CounterNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.count%2B%2B%0A%20%20%20%20current%20%3A%3D%20n.count%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20current%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Avoid%20Shared%20Node%20Instances%0A%0ACreate%20new%20instances%20for%20concurrent%20use%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Sharing%20node%20instance%0Anode%20%3A%3D%20createProcessNode()%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20node%2C%20shared)%20%2F%2F%20Race%20condition!%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Create%20new%20instances%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20createProcessNode()%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0A%23%23%23%20Clean%20Up%20Resources%0A%0AUse%20defer%20for%20cleanup%3A%0A%0A%60%60%60go%0Afunc%20(n%20*FileNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(prepResult.(string))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%20%2F%2F%20Always%20cleanup%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20file...%0A%20%20%20%20return%20processFile(file)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Pooling%0A%0AReuse%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseFlow%20struct%20%7B%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseFlow(db%20*sql.DB)%20*DatabaseFlow%20%7B%0A%20%20%20%20return%20%26DatabaseFlow%7Bdb%3A%20db%7D%0A%7D%0A%0Afunc%20(f%20*DatabaseFlow)%20CreateNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20f.db%2C%20%2F%2F%20Reuse%20connection%20pool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%0A%0A%23%23%23%20Unit%20Test%20Nodes%0A%0ATest%20nodes%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestProcessNode(t%20*testing.T)%20%7B%0A%20%20%20%20node%20%3A%3D%20createProcessNode()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20successful%20case%0A%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20%22test%20input%22)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22expected%20output%22%2C%20result)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20error%20case%0A%20%20%20%20result%2C%20err%20%3D%20node.Exec(ctx%2C%20nil)%0A%20%20%20%20assert.Error(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Integration%20Test%20Flows%0A%0ATest%20complete%20workflows%3A%0A%0A%60%60%60go%0Afunc%20TestCompleteFlow(t%20*testing.T)%20%7B%0A%20%20%20%20flow%20%3A%3D%20createMainFlow()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22input%22%2C%20testData)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20type-safe%20getter%20or%20Bind%20for%20results%0A%20%20%20%20var%20result%20OutputData%0A%20%20%20%20err%20%3D%20shared.Bind(%22output%22%2C%20%26result)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20expectedResult%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Documentation%0A%0A%23%23%23%20Document%20Node%20Behavior%0A%0A%60%60%60go%0A%2F%2F%20FetchUserNode%20fetches%20user%20data%20from%20the%20API.%0A%2F%2F%20%0A%2F%2F%20Prep%3A%20Reads%20%22user_id%22%20from%20SharedStore%0A%2F%2F%20Exec%3A%20Fetches%20user%20from%20API%2C%20retries%20on%20network%20errors%0A%2F%2F%20Post%3A%20Stores%20user%20data%20in%20%22user_data%22%20key%0A%2F%2F%20Actions%3A%0A%2F%2F%20%20%20-%20%22success%22%3A%20User%20fetched%20successfully%0A%2F%2F%20%20%20-%20%22not_found%22%3A%20User%20does%20not%20exist%0A%2F%2F%20%20%20-%20%22error%22%3A%20Unrecoverable%20error%20occurred%0Atype%20FetchUserNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20apiClient%20*APIClient%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Document%20Flow%20Structure%0A%0A%60%60%60go%0A%2F%2F%20CreateOrderFlow%20processes%20new%20orders%3A%0A%2F%2F%201.%20Validates%20order%20data%0A%2F%2F%202.%20Checks%20inventory%0A%2F%2F%203.%20Processes%20payment%0A%2F%2F%204.%20Creates%20shipment%0A%2F%2F%205.%20Sends%20confirmation%0A%2F%2F%0A%2F%2F%20Required%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_data%22%3A%20OrderData%20struct%0A%2F%2F%20%20%20-%20%22customer_id%22%3A%20string%0A%2F%2F%0A%2F%2F%20Sets%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_id%22%3A%20string%0A%2F%2F%20%20%20-%20%22tracking_number%22%3A%20string%0Afunc%20CreateOrderFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20...%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%0A%0A%23%23%23%20Batch%20Operations%0A%0AProcess%20items%20in%20batches%20when%20possible%3A%0A%0A%60%60%60go%0A%2F%2F%20Instead%20of%20processing%20one%20at%20a%20time%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20process(item)%0A%7D%0A%0A%2F%2F%20Use%20BatchNode%20for%20efficient%20batch%20processing%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(process(item.Value()))%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20results%0A%20%20%20%20%20%20%20%20var%20processed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20for%20_%2C%20r%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!r.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%20%3D%20append(processed%2C%20r.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22processed%22%2C%20processed)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(10)%20%20%2F%2F%20Process%20concurrently%0A%60%60%60%0A%0A%23%23%23%20Lazy%20Loading%0A%0ALoad%20data%20only%20when%20needed%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Only%20load%20the%20data%20this%20node%20needs%0A%20%20%20%20if%20needsUserData(shared)%20%7B%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20loadUserData()%0A%20%20%20%20%20%20%20%20return%20userData%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%0A%0A%23%23%23%20Add%20Observability%0A%0ALog%20important%20events%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20took%20%25v%22%2C%20time.Since(start))%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20process(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22ProcessNode%20success%3A%20processed%20%25d%20items%22%2C%20len(result))%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20best%20practices%20in%20action%0A-%20%5BAdvanced%20Usage%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20patterns%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Review%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./best-practices-DTmb-ZWt.js"),[]),path:"/best-practices.html",type:"mdx",filePath:"best-practices.mdx",content:"%23%20Best%20Practices%0A%0AFollow%20these%20guidelines%20to%20build%20robust%2C%20maintainable%20Flyt%20workflows.%0A%0A%23%23%20Node%20Design%0A%0A%23%23%23%20Single%20Responsibility%0A%0AEach%20node%20should%20do%20one%20thing%20well%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Node%20doing%20too%20much%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20data%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20fetchFromAPI()%0A%20%20%20%20%20%20%20%20%2F%2F%20Validate%0A%20%20%20%20%20%20%20%20if%20!isValid(data)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20errors.New(%22invalid%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Transform%0A%20%20%20%20%20%20%20%20transformed%20%3A%3D%20transform(data)%0A%20%20%20%20%20%20%20%20%2F%2F%20Save%0A%20%20%20%20%20%20%20%20saveToDatabase(transformed)%0A%20%20%20%20%20%20%20%20return%20transformed%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Separate%20concerns%0AfetchNode%20%3A%3D%20createFetchNode()%0AvalidateNode%20%3A%3D%20createValidateNode()%0AtransformNode%20%3A%3D%20createTransformNode()%0AsaveNode%20%3A%3D%20createSaveNode()%0A%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%23%20Idempotency%0A%0ADesign%20nodes%20to%20be%20safely%20retryable%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9C%85%20Good%3A%20Idempotent%20operation%0Afunc%20(n%20*SaveNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(Record)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20upsert%20instead%20of%20insert%0A%20%20%20%20_%2C%20err%20%3A%3D%20db.Exec(%60%0A%20%20%20%20%20%20%20%20INSERT%20INTO%20records%20(id%2C%20data)%20VALUES%20(%3F%2C%20%3F)%0A%20%20%20%20%20%20%20%20ON%20CONFLICT%20(id)%20DO%20UPDATE%20SET%20data%20%3D%20%3F%0A%20%20%20%20%60%2C%20data.ID%2C%20data.Data%2C%20data.Data)%0A%20%20%20%20%0A%20%20%20%20return%20data.ID%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%0A%0AReturn%20clear%2C%20actionable%20errors%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Generic%20error%0Areturn%20nil%2C%20errors.New(%22failed%22)%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Descriptive%20error%0Areturn%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20user%20%25d%3A%20%25w%22%2C%20userID%2C%20err)%0A%60%60%60%0A%0A%23%23%23%20Type-Safe%20SharedStore%20Access%0A%0AUse%20type-safe%20helpers%20to%20avoid%20runtime%20panics%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Manual%20type%20assertion%20can%20panic%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20val%2C%20_%20%3A%3D%20shared.Get(%22count%22)%0A%20%20%20%20count%20%3A%3D%20val.(int)%20%20%2F%2F%20Panics%20if%20val%20is%20nil%20or%20not%20int%0A%20%20%20%20return%20count%2C%20nil%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Type-safe%20getter%20with%20default%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20count%20%3A%3D%20shared.GetInt(%22count%22)%20%20%2F%2F%20Returns%200%20if%20not%20found%0A%20%20%20%20%2F%2F%20Or%20with%20custom%20default%0A%20%20%20%20count%20%3A%3D%20shared.GetIntOr(%22count%22%2C%20-1)%0A%20%20%20%20return%20count%2C%20nil%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Bind%20complex%20types%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20config%20Config%0A%20%20%20%20if%20err%20%3A%3D%20shared.Bind(%22config%22%2C%20%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20config%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Flow%20Design%0A%0A%23%23%23%20Modular%20Flows%0A%0ACreate%20reusable%20sub-flows%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20validation%20flow%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaValidator()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessValidator()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0AapiFlow.Connect(parseNode%2C%20flyt.DefaultAction%2C%20createValidationFlow())%0A%60%60%60%0A%0A%23%23%23%20Error%20Boundaries%0A%0ACentralize%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createFlowWithErrorHandling()%20*flyt.Flow%20%7B%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandler()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20all%20error%20paths%20to%20handler%0A%20%20%20%20for%20_%2C%20node%20%3A%3D%20range%20%5B%5Dflyt.Node%7BstartNode%2C%20processNode%2C%20saveNode%7D%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(node%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Context%20Handling%0A%0A%23%23%23%20Respect%20Cancellation%0A%0AAlways%20check%20context%20in%20long-running%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20%5B%5DResult%7B%7D%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20context%20before%20each%20iteration%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(ctx%2C%20item)%0A%20%20%20%20%20%20%20%20results%20%3D%20append(results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Management%0A%0ASet%20appropriate%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20(n%20*APINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20return%20callAPI(ctx%2C%20prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%20Concurrency%20Safety%0A%0A%23%23%23%20Thread-Safe%20Nodes%0A%0AProtect%20shared%20state%20in%20nodes%3A%0A%0A%60%60%60go%0Atype%20CounterNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20sync.Mutex%0A%20%20%20%20count%20int%0A%7D%0A%0Afunc%20(n%20*CounterNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.count%2B%2B%0A%20%20%20%20current%20%3A%3D%20n.count%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20current%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Avoid%20Shared%20Node%20Instances%0A%0ACreate%20new%20instances%20for%20concurrent%20use%3A%0A%0A%60%60%60go%0A%2F%2F%20%E2%9D%8C%20Bad%3A%20Sharing%20node%20instance%0Anode%20%3A%3D%20createProcessNode()%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20node%2C%20shared)%20%2F%2F%20Race%20condition!%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Good%3A%20Create%20new%20instances%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20go%20flyt.Run(ctx%2C%20createProcessNode()%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0A%23%23%23%20Clean%20Up%20Resources%0A%0AUse%20defer%20for%20cleanup%3A%0A%0A%60%60%60go%0Afunc%20(n%20*FileNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(prepResult.(string))%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20file.Close()%20%2F%2F%20Always%20cleanup%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20file...%0A%20%20%20%20return%20processFile(file)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Connection%20Pooling%0A%0AReuse%20expensive%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseFlow%20struct%20%7B%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseFlow(db%20*sql.DB)%20*DatabaseFlow%20%7B%0A%20%20%20%20return%20%26DatabaseFlow%7Bdb%3A%20db%7D%0A%7D%0A%0Afunc%20(f%20*DatabaseFlow)%20CreateNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20f.db%2C%20%2F%2F%20Reuse%20connection%20pool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%0A%0A%23%23%23%20Unit%20Test%20Nodes%0A%0ATest%20nodes%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestProcessNode(t%20*testing.T)%20%7B%0A%20%20%20%20node%20%3A%3D%20createProcessNode()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20successful%20case%0A%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20%22test%20input%22)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20%22expected%20output%22%2C%20result)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20error%20case%0A%20%20%20%20result%2C%20err%20%3D%20node.Exec(ctx%2C%20nil)%0A%20%20%20%20assert.Error(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Integration%20Test%20Flows%0A%0ATest%20complete%20workflows%3A%0A%0A%60%60%60go%0Afunc%20TestCompleteFlow(t%20*testing.T)%20%7B%0A%20%20%20%20flow%20%3A%3D%20createMainFlow()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22input%22%2C%20testData)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20type-safe%20getter%20or%20Bind%20for%20results%0A%20%20%20%20var%20result%20OutputData%0A%20%20%20%20err%20%3D%20shared.Bind(%22output%22%2C%20%26result)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20expectedResult%2C%20result)%0A%7D%0A%60%60%60%0A%0A%23%23%20Documentation%0A%0A%23%23%23%20Document%20Node%20Behavior%0A%0A%60%60%60go%0A%2F%2F%20FetchUserNode%20fetches%20user%20data%20from%20the%20API.%0A%2F%2F%20%0A%2F%2F%20Prep%3A%20Reads%20%22user_id%22%20from%20SharedStore%0A%2F%2F%20Exec%3A%20Fetches%20user%20from%20API%2C%20retries%20on%20network%20errors%0A%2F%2F%20Post%3A%20Stores%20user%20data%20in%20%22user_data%22%20key%0A%2F%2F%20Actions%3A%0A%2F%2F%20%20%20-%20%22success%22%3A%20User%20fetched%20successfully%0A%2F%2F%20%20%20-%20%22not_found%22%3A%20User%20does%20not%20exist%0A%2F%2F%20%20%20-%20%22error%22%3A%20Unrecoverable%20error%20occurred%0Atype%20FetchUserNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20apiClient%20*APIClient%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Document%20Flow%20Structure%0A%0A%60%60%60go%0A%2F%2F%20CreateOrderFlow%20processes%20new%20orders%3A%0A%2F%2F%201.%20Validates%20order%20data%0A%2F%2F%202.%20Checks%20inventory%0A%2F%2F%203.%20Processes%20payment%0A%2F%2F%204.%20Creates%20shipment%0A%2F%2F%205.%20Sends%20confirmation%0A%2F%2F%0A%2F%2F%20Required%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_data%22%3A%20OrderData%20struct%0A%2F%2F%20%20%20-%20%22customer_id%22%3A%20string%0A%2F%2F%0A%2F%2F%20Sets%20SharedStore%20keys%3A%0A%2F%2F%20%20%20-%20%22order_id%22%3A%20string%0A%2F%2F%20%20%20-%20%22tracking_number%22%3A%20string%0Afunc%20CreateOrderFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20...%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%0A%0A%23%23%23%20Batch%20Operations%0A%0AProcess%20items%20in%20batches%20when%20possible%3A%0A%0A%60%60%60go%0A%2F%2F%20Instead%20of%20processing%20one%20at%20a%20time%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20process(item)%0A%7D%0A%0A%2F%2F%20Use%20BatchNode%20for%20efficient%20batch%20processing%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(process(item.Value()))%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20results%0A%20%20%20%20%20%20%20%20var%20processed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20for%20_%2C%20r%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!r.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%20%3D%20append(processed%2C%20r.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22processed%22%2C%20processed)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(10)%20%20%2F%2F%20Process%20concurrently%0A%60%60%60%0A%0A%23%23%23%20Lazy%20Loading%0A%0ALoad%20data%20only%20when%20needed%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Only%20load%20the%20data%20this%20node%20needs%0A%20%20%20%20if%20needsUserData(shared)%20%7B%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20loadUserData()%0A%20%20%20%20%20%20%20%20return%20userData%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%0A%0A%23%23%23%20Add%20Observability%0A%0ALog%20important%20events%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ProcessNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20defer%20func()%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20took%20%25v%22%2C%20time.Since(start))%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20process(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22ProcessNode%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22ProcessNode%20success%3A%20processed%20%25d%20items%22%2C%20len(result))%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20best%20practices%20in%20action%0A-%20%5BAdvanced%20Usage%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20patterns%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Review%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./index-UjGmbnIM.js"),[]),path:"/",type:"mdx",filePath:"index.mdx",content:"---%0Alayout%3A%20landing%0A---%0A%0Aimport%20%7B%20HomePage%20%7D%20from%20'vocs%2Fcomponents'%0A%0A%3CHomePage.Root%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20display%3A%20'flex'%2C%20flexDirection%3A%20'column'%2C%20alignItems%3A%20'center'%2C%20marginBottom%3A%20'1rem'%20%7D%7D%3E%0A%20%20%20%20%3Cimg%20src%3D%22%2Fflyt-logo.png%22%20alt%3D%22Flyt%20Logo%22%20style%3D%7B%7B%20width%3A%20'280px'%2C%20height%3A%20'auto'%20%7D%7D%20%2F%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20fontStyle%3A%20'italic'%2C%20color%3A%20'var(--vocs-color_text2)'%2C%20marginTop%3A%20'0.5rem'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Norwegian%20for%20%22flow%22%20%E2%80%A2%20Pronounced%20%22fleet%22%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3CHomePage.Tagline%3EA%20minimalist%20workflow%20framework%20for%20Go%3C%2FHomePage.Tagline%3E%0A%20%20%0A%20%20%60%60%60bash%0A%20%20go%20get%20github.com%2Fmark3labs%2Fflyt%0A%20%20%60%60%60%0A%20%20%0A%20%20%3CHomePage.Description%3E%0A%20%20%20%20Build%20powerful%2C%20composable%20workflows%20with%20zero%20dependencies.%20Flyt%20provides%20a%20simple%20yet%20flexible%20%0A%20%20%20%20graph-based%20abstraction%20for%20orchestrating%20tasks%20in%20Go.%0A%20%20%3C%2FHomePage.Description%3E%0A%20%20%0A%20%20%3CHomePage.Buttons%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22%2Fgetting-started%2Fquick-start%22%20variant%3D%22accent%22%3EGet%20Started%3C%2FHomePage.Button%3E%0A%20%20%20%20%3CHomePage.Button%20href%3D%22https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%22%3EGitHub%3C%2FHomePage.Button%3E%0A%20%20%3C%2FHomePage.Buttons%3E%0A%3C%2FHomePage.Root%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'4rem'%20%7D%7D%3E%0A%0A%23%23%20Features%0A%0A%3Cdiv%20style%3D%7B%7B%20%0A%20%20display%3A%20'grid'%2C%20%0A%20%20gridTemplateColumns%3A%20'repeat(auto-fit%2C%20minmax(300px%2C%201fr))'%2C%0A%20%20gap%3A%20'1.5rem'%2C%0A%20%20marginTop%3A%20'2rem'%0A%7D%7D%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%9A%80%20Zero%20Dependencies%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EPure%20Go%20standard%20library%20-%20no%20external%20dependencies%20required%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%94%84%20Composable%20Workflows%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EBuild%20complex%20flows%20from%20simple%2C%20reusable%20nodes%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%8E%AF%20Action-Based%20Routing%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EDynamic%20flow%20control%20based%20on%20runtime%20results%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%94%81%20Built-in%20Retry%20Logic%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EHandle%20transient%20failures%20with%20configurable%20retries%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%94%92%20Thread-Safe%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EConcurrent%20batch%20processing%20with%20safe%20shared%20state%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%3E%0A%20%20%20%20%3Ch3%20style%3D%7B%7B%20fontSize%3A%20'1.1rem'%2C%20marginBottom%3A%20'0.5rem'%20%7D%7D%3E%F0%9F%93%A6%20Batch%20Processing%3C%2Fh3%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.95rem'%20%7D%7D%3EProcess%20collections%20efficiently%20with%20built-in%20patterns%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%3C%2Fdiv%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'3rem'%20%7D%7D%3E%0A%0A%23%23%20Quick%20Example%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'1.5rem'%20%7D%7D%3E%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20using%20fluent%20API%0A%20%20%20%20fetchNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20_%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Fetching%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dint%7B%22value%22%3A%2042%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20_%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22data%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20access%20to%20data%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20shared.GetMap(%22data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20data%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20val%20%3A%3D%20data.(map%5Bstring%5Dany)%5B%22value%22%5D.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Processing%3A%20%25d%5Cn%22%2C%20val)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20val%20*%202%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20_%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22result%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20saveNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20getter%20for%20integer%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20shared.GetInt(%22result%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20result%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Saving%20result%3A%20%25d%5Cn%22%2C%20result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20and%20run%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20flow.Run(context.Background()%2C%20flyt.NewSharedStore())%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20marginTop%3A%20'3rem'%20%7D%7D%3E%0A%0A%23%23%20Why%20Flyt%3F%0A%0A%3Cp%20style%3D%7B%7B%20fontSize%3A%20'1.05rem'%2C%20lineHeight%3A%20'1.7'%2C%20color%3A%20'var(--vocs-color_text2)'%2C%20marginTop%3A%20'1rem'%20%7D%7D%3E%0AFlyt%20was%20inspired%20by%20%3Ca%20href%3D%22https%3A%2F%2Fgithub.com%2FThe-Pocket%2FPocketFlow%22%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_link)'%20%7D%7D%3EPocket%20Flow%3C%2Fa%3E%20and%20%0Adesigned%20to%20provide%20a%20simple%2C%20dependency-free%20solution%20for%20workflow%20orchestration%20in%20Go.%20Whether%20you're%20building%20%0Adata%20pipelines%2C%20API%20orchestration%2C%20or%20complex%20business%20logic%2C%20Flyt%20gives%20you%20the%20tools%20to%20create%20maintainable%2C%20%0Atestable%20workflows.%0A%3C%2Fp%3E%0A%0A%3Ch3%20style%3D%7B%7B%20marginTop%3A%20'2rem'%2C%20marginBottom%3A%20'1.5rem'%20%7D%7D%3EPerfect%20for%3C%2Fh3%3E%0A%0A%3Cdiv%20style%3D%7B%7B%20%0A%20%20display%3A%20'grid'%2C%20%0A%20%20gridTemplateColumns%3A%20'repeat(auto-fit%2C%20minmax(280px%2C%201fr))'%2C%0A%20%20gap%3A%20'1rem'%0A%7D%7D%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EData%20Processing%20Pipelines%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20ETL%20workflows%20with%20built-in%20error%20handling%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EAPI%20Orchestration%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Chain%20multiple%20API%20calls%20with%20automatic%20retries%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EBusiness%20Logic%20Flows%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Complex%20decision%20trees%20and%20state%20machines%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EBatch%20Operations%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Process%20large%20datasets%20concurrently%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%20%20%3Cdiv%20style%3D%7B%7B%20%0A%20%20%20%20padding%3A%20'1rem'%2C%0A%20%20%20%20backgroundColor%3A%20'var(--vocs-color_backgroundDark)'%2C%0A%20%20%20%20borderRadius%3A%20'6px'%2C%0A%20%20%20%20border%3A%20'1px%20solid%20var(--vocs-color_border)'%0A%20%20%7D%7D%3E%0A%20%20%20%20%3Cstrong%3EAI%2FLLM%20Workflows%3C%2Fstrong%3E%0A%20%20%20%20%3Cp%20style%3D%7B%7B%20color%3A%20'var(--vocs-color_text2)'%2C%20fontSize%3A%20'0.9rem'%2C%20marginTop%3A%20'0.5rem'%20%7D%7D%3E%0A%20%20%20%20%20%20Build%20agent%20systems%20and%20conversation%20flows%0A%20%20%20%20%3C%2Fp%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%3C%2Fdiv%3E",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./batch-flows-DgL2E4Tr.js"),[]),path:"/advanced/batch-flows",type:"mdx",filePath:"advanced/batch-flows.mdx",content:"%23%20Batch%20Flows%0A%0AProcess%20multiple%20parameter%20sets%20through%20flows%20using%20BatchNode%2C%20perfect%20for%20handling%20multiple%20entities%20or%20parallel%20workflows.%0A%0A%23%23%20Basic%20Batch%20Flow%0A%0AUse%20BatchNode%20to%20process%20multiple%20parameter%20sets%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20batch%20node%20that%20processes%20multiple%20user%20parameters%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Prepare%20multiple%20parameter%20sets%0A%20%20%20%20%20%20%20%20return%20%5B%5Dflyt.Result%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22user_id%22%3A%201%2C%20%22email%22%3A%20%22user1%40example.com%22%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22user_id%22%3A%202%2C%20%22email%22%3A%20%22user2%40example.com%22%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22user_id%22%3A%203%2C%20%22email%22%3A%20%22user3%40example.com%22%7D)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20params%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20each%20parameter%20set%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20params.MustMap()%0A%20%20%20%20%20%20%20%20userID%20%3A%3D%20data%5B%22user_id%22%5D.(int)%0A%20%20%20%20%20%20%20%20email%20%3A%3D%20data%5B%22email%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Run%20your%20processing%20logic%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processUser(userID%2C%20email)%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20params%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20results%20from%20all%20parameter%20sets%0A%20%20%20%20%20%20%20%20var%20allResults%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20errors%20%5B%5Derror%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20r%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20r.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20process%20user%20%25v%3A%20%25v%22%2C%20params%5Bi%5D.Value()%2C%20r.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20r.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20allResults%20%3D%20append(allResults%2C%20r.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22all_results%22%2C%20allResults)%0A%20%20%20%20%20%20%20%20shared.Set(%22error_count%22%2C%20len(errors))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22partial_success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%0A%2F%2F%20Create%20a%20flow%20starting%20with%20the%20batch%20node%0Aflow%20%3A%3D%20flyt.NewFlow(batchNode)%0Aflow.Connect(batchNode%2C%20flyt.DefaultAction%2C%20aggregateNode)%0Aflow.Connect(batchNode%2C%20%22partial_success%22%2C%20errorHandlerNode)%0A%0A%2F%2F%20Run%20the%20flow%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Aerr%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%20Execution%0A%0AControl%20how%20parameter%20sets%20are%20processed%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20-%20process%20one%20at%20a%20time%2C%20maintains%20order%0AsequentialBatch%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(0)%20%20%2F%2F%200%20%3D%20sequential%0A%0A%2F%2F%20Concurrent%20-%20process%20multiple%20in%20parallel%0AconcurrentBatch%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(10)%20%20%2F%2F%20Process%20up%20to%2010%20concurrently%0A%60%60%60%0A%0A%23%23%20Dynamic%20Input%20Generation%0A%0AGenerate%20inputs%20based%20on%20runtime%20data%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20configuration%20from%20shared%20store%0A%20%20%20%20%20%20%20%20config%20%3A%3D%20shared.GetMap(%22batch_config%22)%0A%20%20%20%20%20%20%20%20batchSize%20%3A%3D%20config%5B%22size%22%5D.(int)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20data%20from%20database%0A%20%20%20%20%20%20%20%20users%2C%20err%20%3A%3D%20fetchUsers(batchSize)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20users%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Convert%20to%20Results%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(users))%0A%20%20%20%20%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22user_id%22%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22user_name%22%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22user_data%22%3A%20user%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20userResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20userResult.MustMap()%0A%20%20%20%20%20%20%20%20user%20%3A%3D%20userData%5B%22user_data%22%5D.(User)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20individual%20user%0A%20%20%20%20%20%20%20%20processed%2C%20err%20%3A%3D%20processUserData(user)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22failed%20to%20process%20user%20%25d%3A%20%25w%22%2C%20user.ID%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20users%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20successCount%20%3A%3D%200%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successCount%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Processed%20%25d%2F%25d%20users%20successfully%22%2C%20successCount%2C%20len(users))%0A%20%20%20%20%20%20%20%20shared.Set(%22success_rate%22%2C%20float64(successCount)%2Ffloat64(len(users)))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Complex%20Processing%20Pipeline%0A%0ACreate%20sophisticated%20processing%20for%20each%20batch%20item%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20batch%20node%20that%20runs%20a%20multi-step%20pipeline%20for%20each%20item%0ApipelineBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20orders%20%3A%3D%20shared.GetSlice(%22orders%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(orders))%0A%20%20%20%20%20%20%20%20for%20i%2C%20order%20%3A%3D%20range%20orders%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(order)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20orderResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20order%20Order%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20orderResult.Bind(%26order)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Multi-step%20processing%20pipeline%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%201%3A%20Validate%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validateOrder(order)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22validation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%202%3A%20Enrich%0A%20%20%20%20%20%20%20%20enrichedOrder%2C%20err%20%3A%3D%20enrichOrderData(order)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22enrichment%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%203%3A%20Process%0A%20%20%20%20%20%20%20%20processedOrder%2C%20err%20%3A%3D%20processOrder(enrichedOrder)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22processing%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%204%3A%20Save%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20saveOrder(processedOrder)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22save%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processedOrder)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20orders%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20processed%20%5B%5DOrder%0A%20%20%20%20%20%20%20%20var%20failed%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20original%20%3A%3D%20orders%5Bi%5D.Value()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%20%3D%20append(failed%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22order%22%3A%20original%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20result.Error().Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20order%20Order%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Bind(%26order)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%20%3D%20append(processed%2C%20order)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22processed_orders%22%2C%20processed)%0A%20%20%20%20%20%20%20%20shared.Set(%22failed_orders%22%2C%20failed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(failed)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22has_failures%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22all_success%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5).%0A%20%20%20%20WithBatchErrorHandling(true)%20%20%2F%2F%20Continue%20processing%20despite%20failures%0A%60%60%60%0A%0A%23%23%20Batch%20with%20Configuration%0A%0APass%20configuration%20to%20batch%20processing%3A%0A%0A%60%60%60go%0Afunc%20createConfiguredBatchNode(config%20ProcessConfig)%20*flyt.BatchNodeBuilder%20%7B%0A%20%20%20%20return%20flyt.NewBatchNode().%0A%20%20%20%20%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20config%20to%20determine%20what%20to%20process%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20items%20%5B%5Dflyt.Result%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20config.Source%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22database%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromDB(config.DBConfig)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%20%3D%20append(items%2C%20flyt.NewResult(item))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22api%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(config.APIConfig)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%20%3D%20append(items%2C%20flyt.NewResult(item))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20source%3A%20%25s%22%2C%20config.Source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20items%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20configuration%20to%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20config.ValidateEnabled%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validate(item.Value())%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20process(item.Value()%2C%20config.ProcessOptions)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20config.TransformEnabled%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20transform(result%2C%20config.TransformOptions)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Save%20based%20on%20configuration%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20config.SaveEnabled%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20saveResults(successful%2C%20config.SaveOptions)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22save%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22results%22%2C%20successful)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithBatchConcurrency(config.Concurrency).%0A%20%20%20%20%20%20%20%20WithMaxRetries(config.MaxRetries)%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Aggregation%0A%0ACollect%20and%20aggregate%20results%20from%20batch%20processing%3A%0A%0A%60%60%60go%0AaggregatingBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20metrics%20%3A%3D%20shared.GetSlice(%22metrics%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(metrics))%0A%20%20%20%20%20%20%20%20for%20i%2C%20metric%20%3A%3D%20range%20metrics%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(metric)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20metric%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20m%20Metric%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20metric.Bind(%26m)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20metric%20value%0A%20%20%20%20%20%20%20%20value%2C%20err%20%3A%3D%20calculateMetric(m)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%20m.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22value%22%3A%20value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20metrics%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20all%20metric%20results%0A%20%20%20%20%20%20%20%20aggregated%20%3A%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%22%3A%20%20%20%5B%5Dmap%5Bstring%5Dany%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22summary%22%3A%20%20%20map%5Bstring%5Dany%7B%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20total%20float64%0A%20%20%20%20%20%20%20%20var%20count%20int%0A%20%20%20%20%20%20%20%20var%20min%2C%20max%20float64%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20metricData%20%3A%3D%20result.MustMap()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aggregated%5B%22metrics%22%5D%20%3D%20append(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aggregated%5B%22metrics%22%5D.(%5B%5Dmap%5Bstring%5Dany)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20metricData%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3A%3D%20metricData%5B%22value%22%5D.(float64)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20total%20%2B%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20count%20%3D%3D%201%20%7C%7C%20value%20%3C%20min%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20min%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20value%20%3E%20max%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20max%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20count%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20aggregated%5B%22summary%22%5D%20%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20count%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20total%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22average%22%3A%20total%20%2F%20float64(count)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22min%22%3A%20%20%20%20%20min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22max%22%3A%20%20%20%20%20max%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22aggregated_metrics%22%2C%20aggregated)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Progress%20Tracking%0A%0ATrack%20progress%20across%20batch%20execution%3A%0A%0A%60%60%60go%0AprogressBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20tasks%20%3A%3D%20shared.GetSlice(%22tasks%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Starting%20batch%20processing%20of%20%25d%20tasks%22%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20shared.Set(%22total_tasks%22%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20shared.Set(%22start_time%22%2C%20time.Now())%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20task%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20task%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processTask(task.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20tasks%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20startTime%20%3A%3D%20shared.Get(%22start_time%22).(time.Time)%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(startTime)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20successful%20%3A%3D%200%0A%20%20%20%20%20%20%20%20failed%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Batch%20completed%20in%20%25v%3A%20%25d%20successful%2C%20%25d%20failed%20out%20of%20%25d%20total%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20duration%2C%20successful%2C%20failed%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22batch_stats%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20%20%20len(tasks)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22successful%22%3A%20successful%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20failed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%20%20%20duration.Seconds()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22rate%22%3A%20%20%20%20%20%20%20float64(len(tasks))%20%2F%20duration.Seconds()%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(10)%0A%60%60%60%0A%0A%23%23%20Conditional%20Batch%20Processing%0A%0AProcess%20batches%20based%20on%20conditions%3A%0A%0A%60%60%60go%0AconditionalBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20allItems%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20processingMode%20%3A%3D%20shared.GetString(%22mode%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20itemsToProcess%20%5B%5Dflyt.Result%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20allItems%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20itemMap%20%3A%3D%20item.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20conditional%20logic%0A%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3A%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20processingMode%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22priority%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20itemMap%5B%22priority%22%5D.(string)%20%3D%3D%20%22high%22%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22recent%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp%20%3A%3D%20itemMap%5B%22timestamp%22%5D.(time.Time)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20time.Since(timestamp)%20%3C%2024*time.Hour%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22pending%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20itemMap%5B%22status%22%5D.(string)%20%3D%3D%20%22pending%22%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20shouldProcess%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20itemsToProcess%20%3D%20append(itemsToProcess%2C%20flyt.NewResult(item))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Processing%20%25d%20out%20of%20%25d%20items%20based%20on%20%25s%20mode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20len(itemsToProcess)%2C%20len(allItems)%2C%20processingMode)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20itemsToProcess%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20selected%20item%0A%20%20%20%20%20%20%20%20processed%2C%20err%20%3A%3D%20processItem(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20processed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%20%3D%20append(processed%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22processed_items%22%2C%20processed)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Error%20Recovery%0A%0AHandle%20and%20recover%20from%20batch%20failures%3A%0A%0A%60%60%60go%0ArecoverableBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20processing%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20riskyOperation(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20recovery%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20recoverable%2C%20ok%20%3A%3D%20err.(RecoverableError)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Attempting%20recovery%20for%3A%20%25v%22%2C%20recoverable)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20recoverOperation(item.Value()%2C%20recoverable)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22recovery%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22recovered%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22recovered%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20recovered%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20failed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%20%3D%20append(failed%2C%20items%5Bi%5D.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20result.MustMap()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20data%5B%22recovered%22%5D.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20recovered%20%3D%20append(recovered%2C%20data%5B%22result%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20data%5B%22result%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22successful%22%2C%20successful)%0A%20%20%20%20%20%20%20%20shared.Set(%22recovered%22%2C%20recovered)%0A%20%20%20%20%20%20%20%20shared.Set(%22failed%22%2C%20failed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Results%3A%20%25d%20successful%2C%20%25d%20recovered%2C%20%25d%20failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20len(successful)%2C%20len(recovered)%2C%20len(failed))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(failed)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22has_failures%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchErrorHandling(true).%20%20%2F%2F%20Continue%20despite%20failures%0A%20%20%20%20WithMaxRetries(3)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20failed%20items%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Use%20Results%20Properly**%3A%20Always%20check%20%60Result.IsError()%60%20before%20accessing%20values%0A2.%20**Log%20Progress**%3A%20Add%20logging%20in%20Post%20to%20track%20batch%20completion%0A3.%20**Handle%20Failures**%3A%20Decide%20whether%20one%20failure%20should%20affect%20others%0A4.%20**Track%20Progress**%3A%20Implement%20progress%20tracking%20for%20long-running%20batches%0A5.%20**Configure%20Concurrency**%3A%20Set%20appropriate%20concurrency%20based%20on%20resource%20constraints%0A6.%20**Clean%20Error%20Handling**%3A%20Use%20Result%20error%20tracking%20for%20clean%20error%20propagation%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20Core%20batch%20processing%20concepts%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Handle%20errors%20effectively%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Custom%20concurrent%20processing",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./batch-flows-DgL2E4Tr.js"),[]),path:"/advanced/batch-flows.html",type:"mdx",filePath:"advanced/batch-flows.mdx",content:"%23%20Batch%20Flows%0A%0AProcess%20multiple%20parameter%20sets%20through%20flows%20using%20BatchNode%2C%20perfect%20for%20handling%20multiple%20entities%20or%20parallel%20workflows.%0A%0A%23%23%20Basic%20Batch%20Flow%0A%0AUse%20BatchNode%20to%20process%20multiple%20parameter%20sets%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20batch%20node%20that%20processes%20multiple%20user%20parameters%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Prepare%20multiple%20parameter%20sets%0A%20%20%20%20%20%20%20%20return%20%5B%5Dflyt.Result%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22user_id%22%3A%201%2C%20%22email%22%3A%20%22user1%40example.com%22%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22user_id%22%3A%202%2C%20%22email%22%3A%20%22user2%40example.com%22%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22user_id%22%3A%203%2C%20%22email%22%3A%20%22user3%40example.com%22%7D)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20params%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20each%20parameter%20set%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20params.MustMap()%0A%20%20%20%20%20%20%20%20userID%20%3A%3D%20data%5B%22user_id%22%5D.(int)%0A%20%20%20%20%20%20%20%20email%20%3A%3D%20data%5B%22email%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Run%20your%20processing%20logic%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processUser(userID%2C%20email)%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20params%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20results%20from%20all%20parameter%20sets%0A%20%20%20%20%20%20%20%20var%20allResults%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20errors%20%5B%5Derror%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20r%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20r.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Failed%20to%20process%20user%20%25v%3A%20%25v%22%2C%20params%5Bi%5D.Value()%2C%20r.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20r.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20allResults%20%3D%20append(allResults%2C%20r.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22all_results%22%2C%20allResults)%0A%20%20%20%20%20%20%20%20shared.Set(%22error_count%22%2C%20len(errors))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22partial_success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%0A%2F%2F%20Create%20a%20flow%20starting%20with%20the%20batch%20node%0Aflow%20%3A%3D%20flyt.NewFlow(batchNode)%0Aflow.Connect(batchNode%2C%20flyt.DefaultAction%2C%20aggregateNode)%0Aflow.Connect(batchNode%2C%20%22partial_success%22%2C%20errorHandlerNode)%0A%0A%2F%2F%20Run%20the%20flow%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Aerr%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%20Execution%0A%0AControl%20how%20parameter%20sets%20are%20processed%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20-%20process%20one%20at%20a%20time%2C%20maintains%20order%0AsequentialBatch%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(0)%20%20%2F%2F%200%20%3D%20sequential%0A%0A%2F%2F%20Concurrent%20-%20process%20multiple%20in%20parallel%0AconcurrentBatch%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(10)%20%20%2F%2F%20Process%20up%20to%2010%20concurrently%0A%60%60%60%0A%0A%23%23%20Dynamic%20Input%20Generation%0A%0AGenerate%20inputs%20based%20on%20runtime%20data%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Get%20configuration%20from%20shared%20store%0A%20%20%20%20%20%20%20%20config%20%3A%3D%20shared.GetMap(%22batch_config%22)%0A%20%20%20%20%20%20%20%20batchSize%20%3A%3D%20config%5B%22size%22%5D.(int)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Fetch%20data%20from%20database%0A%20%20%20%20%20%20%20%20users%2C%20err%20%3A%3D%20fetchUsers(batchSize)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22failed%20to%20fetch%20users%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Convert%20to%20Results%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(users))%0A%20%20%20%20%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22user_id%22%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22user_name%22%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22user_data%22%3A%20user%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20userResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20userResult.MustMap()%0A%20%20%20%20%20%20%20%20user%20%3A%3D%20userData%5B%22user_data%22%5D.(User)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20individual%20user%0A%20%20%20%20%20%20%20%20processed%2C%20err%20%3A%3D%20processUserData(user)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22failed%20to%20process%20user%20%25d%3A%20%25w%22%2C%20user.ID%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20users%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20successCount%20%3A%3D%200%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successCount%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Processed%20%25d%2F%25d%20users%20successfully%22%2C%20successCount%2C%20len(users))%0A%20%20%20%20%20%20%20%20shared.Set(%22success_rate%22%2C%20float64(successCount)%2Ffloat64(len(users)))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Complex%20Processing%20Pipeline%0A%0ACreate%20sophisticated%20processing%20for%20each%20batch%20item%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20batch%20node%20that%20runs%20a%20multi-step%20pipeline%20for%20each%20item%0ApipelineBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20orders%20%3A%3D%20shared.GetSlice(%22orders%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(orders))%0A%20%20%20%20%20%20%20%20for%20i%2C%20order%20%3A%3D%20range%20orders%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(order)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20orderResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20order%20Order%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20orderResult.Bind(%26order)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Multi-step%20processing%20pipeline%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%201%3A%20Validate%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validateOrder(order)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22validation%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%202%3A%20Enrich%0A%20%20%20%20%20%20%20%20enrichedOrder%2C%20err%20%3A%3D%20enrichOrderData(order)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22enrichment%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%203%3A%20Process%0A%20%20%20%20%20%20%20%20processedOrder%2C%20err%20%3A%3D%20processOrder(enrichedOrder)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22processing%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Step%204%3A%20Save%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20saveOrder(processedOrder)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22save%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processedOrder)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20orders%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20processed%20%5B%5DOrder%0A%20%20%20%20%20%20%20%20var%20failed%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20original%20%3A%3D%20orders%5Bi%5D.Value()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%20%3D%20append(failed%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22order%22%3A%20original%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20result.Error().Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20order%20Order%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Bind(%26order)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%20%3D%20append(processed%2C%20order)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22processed_orders%22%2C%20processed)%0A%20%20%20%20%20%20%20%20shared.Set(%22failed_orders%22%2C%20failed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(failed)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22has_failures%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22all_success%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5).%0A%20%20%20%20WithBatchErrorHandling(true)%20%20%2F%2F%20Continue%20processing%20despite%20failures%0A%60%60%60%0A%0A%23%23%20Batch%20with%20Configuration%0A%0APass%20configuration%20to%20batch%20processing%3A%0A%0A%60%60%60go%0Afunc%20createConfiguredBatchNode(config%20ProcessConfig)%20*flyt.BatchNodeBuilder%20%7B%0A%20%20%20%20return%20flyt.NewBatchNode().%0A%20%20%20%20%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20config%20to%20determine%20what%20to%20process%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20items%20%5B%5Dflyt.Result%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20config.Source%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22database%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromDB(config.DBConfig)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%20%3D%20append(items%2C%20flyt.NewResult(item))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22api%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(config.APIConfig)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20items%20%3D%20append(items%2C%20flyt.NewResult(item))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22unknown%20source%3A%20%25s%22%2C%20config.Source)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20items%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20configuration%20to%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20config.ValidateEnabled%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20validate(item.Value())%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20process(item.Value()%2C%20config.ProcessOptions)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20config.TransformEnabled%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20transform(result%2C%20config.TransformOptions)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Save%20based%20on%20configuration%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20config.SaveEnabled%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20saveResults(successful%2C%20config.SaveOptions)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%22%2C%20fmt.Errorf(%22save%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22results%22%2C%20successful)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithBatchConcurrency(config.Concurrency).%0A%20%20%20%20%20%20%20%20WithMaxRetries(config.MaxRetries)%0A%7D%0A%60%60%60%0A%0A%23%23%20Result%20Aggregation%0A%0ACollect%20and%20aggregate%20results%20from%20batch%20processing%3A%0A%0A%60%60%60go%0AaggregatingBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20metrics%20%3A%3D%20shared.GetSlice(%22metrics%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(metrics))%0A%20%20%20%20%20%20%20%20for%20i%2C%20metric%20%3A%3D%20range%20metrics%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(metric)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20metric%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20m%20Metric%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20metric.Bind(%26m)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Calculate%20metric%20value%0A%20%20%20%20%20%20%20%20value%2C%20err%20%3A%3D%20calculateMetric(m)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22name%22%3A%20%20m.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22value%22%3A%20value%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20metrics%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20all%20metric%20results%0A%20%20%20%20%20%20%20%20aggregated%20%3A%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22metrics%22%3A%20%20%20%5B%5Dmap%5Bstring%5Dany%7B%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22summary%22%3A%20%20%20map%5Bstring%5Dany%7B%7D%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20total%20float64%0A%20%20%20%20%20%20%20%20var%20count%20int%0A%20%20%20%20%20%20%20%20var%20min%2C%20max%20float64%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20metricData%20%3A%3D%20result.MustMap()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aggregated%5B%22metrics%22%5D%20%3D%20append(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20aggregated%5B%22metrics%22%5D.(%5B%5Dmap%5Bstring%5Dany)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20metricData%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20value%20%3A%3D%20metricData%5B%22value%22%5D.(float64)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20total%20%2B%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20count%20%3D%3D%201%20%7C%7C%20value%20%3C%20min%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20min%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20value%20%3E%20max%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20max%20%3D%20value%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20count%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20aggregated%5B%22summary%22%5D%20%3D%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22count%22%3A%20%20%20count%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20total%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22average%22%3A%20total%20%2F%20float64(count)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22min%22%3A%20%20%20%20%20min%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22max%22%3A%20%20%20%20%20max%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22aggregated_metrics%22%2C%20aggregated)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Progress%20Tracking%0A%0ATrack%20progress%20across%20batch%20execution%3A%0A%0A%60%60%60go%0AprogressBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20tasks%20%3A%3D%20shared.GetSlice(%22tasks%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Starting%20batch%20processing%20of%20%25d%20tasks%22%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20shared.Set(%22total_tasks%22%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20shared.Set(%22start_time%22%2C%20time.Now())%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20task%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20task%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processTask(task.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20tasks%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20startTime%20%3A%3D%20shared.Get(%22start_time%22).(time.Time)%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(startTime)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20successful%20%3A%3D%200%0A%20%20%20%20%20%20%20%20failed%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Batch%20completed%20in%20%25v%3A%20%25d%20successful%2C%20%25d%20failed%20out%20of%20%25d%20total%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20duration%2C%20successful%2C%20failed%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22batch_stats%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20%20%20len(tasks)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22successful%22%3A%20successful%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20failed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22duration%22%3A%20%20%20duration.Seconds()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22rate%22%3A%20%20%20%20%20%20%20float64(len(tasks))%20%2F%20duration.Seconds()%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(10)%0A%60%60%60%0A%0A%23%23%20Conditional%20Batch%20Processing%0A%0AProcess%20batches%20based%20on%20conditions%3A%0A%0A%60%60%60go%0AconditionalBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20allItems%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20processingMode%20%3A%3D%20shared.GetString(%22mode%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20itemsToProcess%20%5B%5Dflyt.Result%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20allItems%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20itemMap%20%3A%3D%20item.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20conditional%20logic%0A%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3A%3D%20false%0A%20%20%20%20%20%20%20%20%20%20%20%20switch%20processingMode%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22priority%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20itemMap%5B%22priority%22%5D.(string)%20%3D%3D%20%22high%22%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22recent%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timestamp%20%3A%3D%20itemMap%5B%22timestamp%22%5D.(time.Time)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20time.Since(timestamp)%20%3C%2024*time.Hour%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20%22pending%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20itemMap%5B%22status%22%5D.(string)%20%3D%3D%20%22pending%22%0A%20%20%20%20%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shouldProcess%20%3D%20true%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20shouldProcess%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20itemsToProcess%20%3D%20append(itemsToProcess%2C%20flyt.NewResult(item))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Processing%20%25d%20out%20of%20%25d%20items%20based%20on%20%25s%20mode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20len(itemsToProcess)%2C%20len(allItems)%2C%20processingMode)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20itemsToProcess%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20selected%20item%0A%20%20%20%20%20%20%20%20processed%2C%20err%20%3A%3D%20processItem(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20processed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%20%3D%20append(processed%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22processed_items%22%2C%20processed)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Error%20Recovery%0A%0AHandle%20and%20recover%20from%20batch%20failures%3A%0A%0A%60%60%60go%0ArecoverableBatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20processing%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20riskyOperation(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Try%20recovery%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20recoverable%2C%20ok%20%3A%3D%20err.(RecoverableError)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Attempting%20recovery%20for%3A%20%25v%22%2C%20recoverable)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20recoverOperation(item.Value()%2C%20recoverable)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22recovery%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22recovered%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22recovered%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20recovered%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20failed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%20%3D%20append(failed%2C%20items%5Bi%5D.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20result.MustMap()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20data%5B%22recovered%22%5D.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20recovered%20%3D%20append(recovered%2C%20data%5B%22result%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20data%5B%22result%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22successful%22%2C%20successful)%0A%20%20%20%20%20%20%20%20shared.Set(%22recovered%22%2C%20recovered)%0A%20%20%20%20%20%20%20%20shared.Set(%22failed%22%2C%20failed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Results%3A%20%25d%20successful%2C%20%25d%20recovered%2C%20%25d%20failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20len(successful)%2C%20len(recovered)%2C%20len(failed))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(failed)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22has_failures%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchErrorHandling(true).%20%20%2F%2F%20Continue%20despite%20failures%0A%20%20%20%20WithMaxRetries(3)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20failed%20items%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Use%20Results%20Properly**%3A%20Always%20check%20%60Result.IsError()%60%20before%20accessing%20values%0A2.%20**Log%20Progress**%3A%20Add%20logging%20in%20Post%20to%20track%20batch%20completion%0A3.%20**Handle%20Failures**%3A%20Decide%20whether%20one%20failure%20should%20affect%20others%0A4.%20**Track%20Progress**%3A%20Implement%20progress%20tracking%20for%20long-running%20batches%0A5.%20**Configure%20Concurrency**%3A%20Set%20appropriate%20concurrency%20based%20on%20resource%20constraints%0A6.%20**Clean%20Error%20Handling**%3A%20Use%20Result%20error%20tracking%20for%20clean%20error%20propagation%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20Core%20batch%20processing%20concepts%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Handle%20errors%20effectively%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Custom%20concurrent%20processing",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./batch-processing-CJOUWWkr.js"),[]),path:"/advanced/batch-processing",type:"mdx",filePath:"advanced/batch-processing.mdx",content:"%23%20Batch%20Processing%0A%0AProcess%20collections%20of%20items%20efficiently%20with%20concurrent%20or%20sequential%20execution%20using%20BatchNode.%0A%0A%23%23%20Basic%20Batch%20Processing%0A%0ABatchNode%20simplifies%20batch%20processing%20by%20working%20almost%20exactly%20like%20regular%20nodes.%20The%20framework%20automatically%20handles%20iteration%20when%20Prep%20returns%20%60%5B%5DResult%60%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20batch%20node%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20%5B%5DResult%20to%20trigger%20batch%20processing%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20individual%20item%20-%20called%20automatically%20for%20each%20item%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item.Value().(string)%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20fmt.Sprintf(%22processed%3A%20%25v%22%2C%20data)%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Called%20once%20with%20all%20results%20aggregated%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22results%22%2C%20successful)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%0A%2F%2F%20Set%20items%20and%20run%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0Actx%20%3A%3D%20context.Background()%0Aaction%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20batchNode%2C%20shared)%0A%0A%2F%2F%20Get%20results%0Aresults%20%3A%3D%20shared.GetSlice(%22results%22)%0Afmt.Println(results)%20%2F%2F%20%5B%22processed%3A%20item1%22%2C%20%22processed%3A%20item2%22%2C%20%22processed%3A%20item3%22%5D%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%0A%0AConfigure%20concurrency%20for%20your%20needs%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20processing%20-%20maintains%20order%0AsequentialNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(0)%20%20%2F%2F%200%20%3D%20sequential%0A%0A%2F%2F%20Concurrent%20processing%20-%20faster%20but%20unordered%0AconcurrentNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(10)%20%20%2F%2F%20Process%20up%20to%2010%20items%20concurrently%0A%60%60%60%0A%0A%23%23%20Advanced%20Configuration%0A%0AConfigure%20batch%20processing%20behavior%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20users%20%3A%3D%20shared.GetSlice(%22users%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(users))%0A%20%20%20%20%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(user)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20user%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Heavy%20processing%20for%20each%20user%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20user.AsMapOr(nil)%0A%20%20%20%20%20%20%20%20if%20userData%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22invalid%20user%20data%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%20%20%2F%2F%20Simulate%20work%0A%20%20%20%20%20%20%20%20processed%2C%20err%20%3A%3D%20processUser(userData)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20users%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20successCount%20%3A%3D%200%0A%20%20%20%20%20%20%20%20errorCount%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errorCount%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successCount%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22success_count%22%2C%20successCount)%0A%20%20%20%20%20%20%20%20shared.Set(%22error_count%22%2C%20errorCount)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Processed%20%25d%20successfully%2C%20%25d%20failed%22%2C%20successCount%2C%20errorCount)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5).%20%20%20%20%20%20%20%2F%2F%20Use%205%20concurrent%20workers%0A%20%20%20%20WithBatchErrorHandling(true).%20%20%2F%2F%20Continue%20processing%20even%20if%20some%20items%20fail%0A%20%20%20%20WithMaxRetries(3).%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20each%20item%20up%20to%203%20times%0A%20%20%20%20WithWait(time.Second)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20between%20retries%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AThe%20BatchNode%20API%20provides%20clean%20per-item%20error%20handling%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Some%20items%20might%20already%20be%20invalid%0A%20%20%20%20%20%20%20%20return%20%5B%5Dflyt.Result%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(-2)%2C%20%20%2F%2F%20Will%20cause%20error%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(3)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewErrorResult(errors.New(%22pre-existing%20error%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(5)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20pre-existing%20errors%0A%20%20%20%20%20%20%20%20if%20item.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20item%2C%20nil%20%20%2F%2F%20Pass%20through%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20item.AsIntOr(0)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22negative%20value%3A%20%25d%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(value%20*%202)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dint%0A%20%20%20%20%20%20%20%20var%20errors%20%5B%5Derror%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20result.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Item%20%25d%20failed%3A%20%25v%22%2C%20i%2C%20result.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.AsIntOr(0))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22successful%22%2C%20successful)%0A%20%20%20%20%20%20%20%20shared.Set(%22error_count%22%2C%20len(errors))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20different%20actions%20based%20on%20results%0A%20%20%20%20%20%20%20%20if%20len(errors)%20%3D%3D%20len(results)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22all_failed%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22partial_success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22all_success%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchErrorHandling(true)%20%20%2F%2F%20Continue%20processing%20despite%20errors%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20Patterns%0A%0A%23%23%23%20Map%20Pattern%0A%0ATransform%20each%20item%3A%0A%0A%60%60%60go%0AmapNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20users%20%3A%3D%20shared.GetSlice(%22users%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(users))%0A%20%20%20%20%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(user)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20user%20User%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20item.Bind(%26user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Transform%20to%20DTO%0A%20%20%20%20%20%20%20%20dto%20%3A%3D%20UserDTO%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Age%3A%20%20user.Age%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(dto)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20dtos%20%5B%5DUserDTO%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20dto%20UserDTO%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Bind(%26dto)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dtos%20%3D%20append(dtos%2C%20dto)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22user_dtos%22%2C%20dtos)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Pattern%0A%0AProcess%20only%20matching%20items%3A%0A%0A%60%60%60go%0AfilterNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20numbers%20%3A%3D%20shared.GetSlice(%22numbers%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(numbers))%0A%20%20%20%20%20%20%20%20for%20i%2C%20num%20%3A%3D%20range%20numbers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(num)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20item.AsIntOr(0)%0A%20%20%20%20%20%20%20%20if%20value%20%3E%2010%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20item%2C%20nil%20%20%2F%2F%20Keep%20this%20item%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewErrorResult(fmt.Errorf(%22filtered%20out%3A%20%25d%22%2C%20value))%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20filtered%20%5B%5Dint%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20result.AsIntOr(0))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22filtered%22%2C%20filtered)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%20Aggregation%20Pattern%0A%0AAggregate%20results%20in%20Post%3A%0A%0A%60%60%60go%0AsumNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20numbers%20%3A%3D%20shared.GetSlice(%22numbers%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(numbers))%0A%20%20%20%20%20%20%20%20for%20i%2C%20num%20%3A%3D%20range%20numbers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(num)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Just%20validate%20and%20pass%20through%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20item.AsIntOr(0)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22negative%20number%20not%20allowed%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20item%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20total%20%3A%3D%200%0A%20%20%20%20%20%20%20%20count%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20total%20%2B%3D%20result.AsIntOr(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22sum%22%2C%20total)%0A%20%20%20%20%20%20%20%20shared.Set(%22count%22%2C%20count)%0A%20%20%20%20%20%20%20%20if%20count%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22average%22%2C%20float64(total)%2Ffloat64(count))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Progress%20Tracking%0A%0AMonitor%20batch%20processing%20progress%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20log.Printf(%22Starting%20batch%20processing%20of%20%25d%20items%22%2C%20len(results))%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20item%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%200%0A%20%20%20%20%20%20%20%20failed%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Batch%20complete%3A%20%25d%2F%25d%20successful%2C%20%25d%20failed%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%2C%20len(items)%2C%20failed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22stats%22%2C%20map%5Bstring%5Dint%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20%20%20len(items)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22processed%22%3A%20%20processed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20failed%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5)%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Batch%20Processing%0A%0AControl%20processing%20rate%20with%20external%20limiters%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedBatchNode(limiter%20*rate.Limiter)%20*flyt.BatchNodeBuilder%20%7B%0A%20%20%20%20return%20flyt.NewBatchNode().%0A%20%20%20%20%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22api_requests%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20for%20rate%20limiter%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22rate%20limit%20wait%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20API%20call%0A%20%20%20%20%20%20%20%20%20%20%20%20request%20%3A%3D%20item.Value().(APIRequest)%0A%20%20%20%20%20%20%20%20%20%20%20%20response%2C%20err%20%3A%3D%20callAPI(request)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(response)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20responses%20%5B%5DAPIResponse%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20resp%20APIResponse%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Bind(%26resp)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20responses%20%3D%20append(responses%2C%20resp)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22api_responses%22%2C%20responses)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithBatchConcurrency(3)%20%20%2F%2F%20Limit%20concurrent%20API%20calls%0A%7D%0A%0A%2F%2F%20Usage%0Alimiter%20%3A%3D%20rate.NewLimiter(rate.Limit(10)%2C%201)%20%20%2F%2F%2010%20requests%20per%20second%0AbatchNode%20%3A%3D%20createRateLimitedBatchNode(limiter)%0A%60%60%60%0A%0A%23%23%20Batch%20with%20Timeout%0A%0ASet%20timeouts%20for%20batch%20operations%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20tasks%20%3A%3D%20shared.GetSlice(%22tasks%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20timeout%20context%20for%20this%20item%0A%20%20%20%20%20%20%20%20itemCtx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%205*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20resultChan%20%3A%3D%20make(chan%20flyt.Result)%0A%20%20%20%20%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processTaskWithContext(itemCtx%2C%20item.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20flyt.NewResult(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20case%20%3C-itemCtx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22task%20timeout%3A%20%25v%22%2C%20item.Value())%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20completed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20timedOut%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%26%26%20strings.Contains(result.Error().Error()%2C%20%22timeout%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timedOut%20%3D%20append(timedOut%2C%20items%5Bi%5D.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20completed%20%3D%20append(completed%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22completed%22%2C%20completed)%0A%20%20%20%20%20%20%20%20shared.Set(%22timed_out%22%2C%20timedOut)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(timedOut)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22has_timeouts%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Choose%20Concurrency%20Wisely**%3A%20Use%20concurrent%20for%20I%2FO-bound%2C%20sequential%20for%20order-dependent%20operations%0A2.%20**Handle%20Errors%20Gracefully**%3A%20Use%20%60WithBatchErrorHandling(true)%60%20to%20continue%20despite%20failures%0A3.%20**Monitor%20Progress**%3A%20Log%20in%20Post%20to%20track%20batch%20completion%0A4.%20**Set%20Reasonable%20Limits**%3A%20Configure%20concurrency%20based%20on%20resources%0A5.%20**Test%20with%20Real%20Data**%3A%20Test%20with%20production-like%20data%20volumes%0A6.%20**Use%20Result%20Error%20Tracking**%3A%20Leverage%20%60Result.IsError()%60%20and%20%60Result.Error()%60%20for%20clean%20error%20handling%0A%0A%23%23%20Key%20Benefits%0A%0A1.%20**Simplicity**%3A%20BatchNode%20works%20almost%20exactly%20like%20regular%20nodes%0A2.%20**Automatic%20Handling**%3A%20Framework%20detects%20%60%5B%5DResult%60%20and%20handles%20iteration%0A3.%20**Clean%20Error%20Tracking**%3A%20Each%20Result%20can%20carry%20its%20own%20error%20state%0A4.%20**Flexible%20Configuration**%3A%20Concurrency%20and%20error%20handling%20are%20configurable%0A5.%20**Type%20Safety**%3A%20Strong%20typing%20with%20Result%20type%20throughout%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Custom%20concurrent%20processing%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Handle%20errors%20effectively%0A-%20%5BFlow%20Patterns%5D(%2Fpatterns%2Fbranching)%20-%20Complex%20flow%20control",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./batch-processing-CJOUWWkr.js"),[]),path:"/advanced/batch-processing.html",type:"mdx",filePath:"advanced/batch-processing.mdx",content:"%23%20Batch%20Processing%0A%0AProcess%20collections%20of%20items%20efficiently%20with%20concurrent%20or%20sequential%20execution%20using%20BatchNode.%0A%0A%23%23%20Basic%20Batch%20Processing%0A%0ABatchNode%20simplifies%20batch%20processing%20by%20working%20almost%20exactly%20like%20regular%20nodes.%20The%20framework%20automatically%20handles%20iteration%20when%20Prep%20returns%20%60%5B%5DResult%60%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20batch%20node%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20%5B%5DResult%20to%20trigger%20batch%20processing%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20individual%20item%20-%20called%20automatically%20for%20each%20item%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item.Value().(string)%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20fmt.Sprintf(%22processed%3A%20%25v%22%2C%20data)%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Called%20once%20with%20all%20results%20aggregated%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22results%22%2C%20successful)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%0A%2F%2F%20Set%20items%20and%20run%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0Actx%20%3A%3D%20context.Background()%0Aaction%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20batchNode%2C%20shared)%0A%0A%2F%2F%20Get%20results%0Aresults%20%3A%3D%20shared.GetSlice(%22results%22)%0Afmt.Println(results)%20%2F%2F%20%5B%22processed%3A%20item1%22%2C%20%22processed%3A%20item2%22%2C%20%22processed%3A%20item3%22%5D%0A%60%60%60%0A%0A%23%23%20Sequential%20vs%20Concurrent%0A%0AConfigure%20concurrency%20for%20your%20needs%3A%0A%0A%60%60%60go%0A%2F%2F%20Sequential%20processing%20-%20maintains%20order%0AsequentialNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(0)%20%20%2F%2F%200%20%3D%20sequential%0A%0A%2F%2F%20Concurrent%20processing%20-%20faster%20but%20unordered%0AconcurrentNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(prepFunc).%0A%20%20%20%20WithExecFunc(execFunc).%0A%20%20%20%20WithPostFunc(postFunc).%0A%20%20%20%20WithBatchConcurrency(10)%20%20%2F%2F%20Process%20up%20to%2010%20items%20concurrently%0A%60%60%60%0A%0A%23%23%20Advanced%20Configuration%0A%0AConfigure%20batch%20processing%20behavior%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20users%20%3A%3D%20shared.GetSlice(%22users%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(users))%0A%20%20%20%20%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(user)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20user%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Heavy%20processing%20for%20each%20user%0A%20%20%20%20%20%20%20%20userData%20%3A%3D%20user.AsMapOr(nil)%0A%20%20%20%20%20%20%20%20if%20userData%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22invalid%20user%20data%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20time.Sleep(100%20*%20time.Millisecond)%20%20%2F%2F%20Simulate%20work%0A%20%20%20%20%20%20%20%20processed%2C%20err%20%3A%3D%20processUser(userData)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20users%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20successCount%20%3A%3D%200%0A%20%20%20%20%20%20%20%20errorCount%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errorCount%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successCount%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22success_count%22%2C%20successCount)%0A%20%20%20%20%20%20%20%20shared.Set(%22error_count%22%2C%20errorCount)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Processed%20%25d%20successfully%2C%20%25d%20failed%22%2C%20successCount%2C%20errorCount)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5).%20%20%20%20%20%20%20%2F%2F%20Use%205%20concurrent%20workers%0A%20%20%20%20WithBatchErrorHandling(true).%20%20%2F%2F%20Continue%20processing%20even%20if%20some%20items%20fail%0A%20%20%20%20WithMaxRetries(3).%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Retry%20each%20item%20up%20to%203%20times%0A%20%20%20%20WithWait(time.Second)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20between%20retries%0A%60%60%60%0A%0A%23%23%20Error%20Handling%0A%0AThe%20BatchNode%20API%20provides%20clean%20per-item%20error%20handling%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Some%20items%20might%20already%20be%20invalid%0A%20%20%20%20%20%20%20%20return%20%5B%5Dflyt.Result%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(-2)%2C%20%20%2F%2F%20Will%20cause%20error%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(3)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewErrorResult(errors.New(%22pre-existing%20error%22))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(5)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20pre-existing%20errors%0A%20%20%20%20%20%20%20%20if%20item.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20item%2C%20nil%20%20%2F%2F%20Pass%20through%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20item.AsIntOr(0)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22negative%20value%3A%20%25d%22%2C%20value)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(value%20*%202)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dint%0A%20%20%20%20%20%20%20%20var%20errors%20%5B%5Derror%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20result.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22Item%20%25d%20failed%3A%20%25v%22%2C%20i%2C%20result.Error())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.AsIntOr(0))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22successful%22%2C%20successful)%0A%20%20%20%20%20%20%20%20shared.Set(%22error_count%22%2C%20len(errors))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20different%20actions%20based%20on%20results%0A%20%20%20%20%20%20%20%20if%20len(errors)%20%3D%3D%20len(results)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22all_failed%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22partial_success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22all_success%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchErrorHandling(true)%20%20%2F%2F%20Continue%20processing%20despite%20errors%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20Patterns%0A%0A%23%23%23%20Map%20Pattern%0A%0ATransform%20each%20item%3A%0A%0A%60%60%60go%0AmapNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20users%20%3A%3D%20shared.GetSlice(%22users%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(users))%0A%20%20%20%20%20%20%20%20for%20i%2C%20user%20%3A%3D%20range%20users%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(user)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20user%20User%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20item.Bind(%26user)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Transform%20to%20DTO%0A%20%20%20%20%20%20%20%20dto%20%3A%3D%20UserDTO%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ID%3A%20%20%20user.ID%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Name%3A%20user.Name%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Age%3A%20%20user.Age%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(dto)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20dtos%20%5B%5DUserDTO%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20dto%20UserDTO%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Bind(%26dto)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dtos%20%3D%20append(dtos%2C%20dto)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22user_dtos%22%2C%20dtos)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Pattern%0A%0AProcess%20only%20matching%20items%3A%0A%0A%60%60%60go%0AfilterNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20numbers%20%3A%3D%20shared.GetSlice(%22numbers%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(numbers))%0A%20%20%20%20%20%20%20%20for%20i%2C%20num%20%3A%3D%20range%20numbers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(num)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20item.AsIntOr(0)%0A%20%20%20%20%20%20%20%20if%20value%20%3E%2010%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20item%2C%20nil%20%20%2F%2F%20Keep%20this%20item%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewErrorResult(fmt.Errorf(%22filtered%20out%3A%20%25d%22%2C%20value))%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20filtered%20%5B%5Dint%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20filtered%20%3D%20append(filtered%2C%20result.AsIntOr(0))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20shared.Set(%22filtered%22%2C%20filtered)%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%20Aggregation%20Pattern%0A%0AAggregate%20results%20in%20Post%3A%0A%0A%60%60%60go%0AsumNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20numbers%20%3A%3D%20shared.GetSlice(%22numbers%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(numbers))%0A%20%20%20%20%20%20%20%20for%20i%2C%20num%20%3A%3D%20range%20numbers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(num)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Just%20validate%20and%20pass%20through%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20item.AsIntOr(0)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22negative%20number%20not%20allowed%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20item%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20total%20%3A%3D%200%0A%20%20%20%20%20%20%20%20count%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20total%20%2B%3D%20result.AsIntOr(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22sum%22%2C%20total)%0A%20%20%20%20%20%20%20%20shared.Set(%22count%22%2C%20count)%0A%20%20%20%20%20%20%20%20if%20count%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22average%22%2C%20float64(total)%2Ffloat64(count))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Progress%20Tracking%0A%0AMonitor%20batch%20processing%20progress%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20log.Printf(%22Starting%20batch%20processing%20of%20%25d%20items%22%2C%20len(results))%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20item%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%200%0A%20%20%20%20%20%20%20%20failed%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20failed%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20log.Printf(%22Batch%20complete%3A%20%25d%2F%25d%20successful%2C%20%25d%20failed%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20processed%2C%20len(items)%2C%20failed)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22stats%22%2C%20map%5Bstring%5Dint%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22total%22%3A%20%20%20%20%20%20len(items)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22processed%22%3A%20%20processed%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20failed%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5)%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Batch%20Processing%0A%0AControl%20processing%20rate%20with%20external%20limiters%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedBatchNode(limiter%20*rate.Limiter)%20*flyt.BatchNodeBuilder%20%7B%0A%20%20%20%20return%20flyt.NewBatchNode().%0A%20%20%20%20%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22api_requests%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Wait%20for%20rate%20limiter%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22rate%20limit%20wait%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Make%20API%20call%0A%20%20%20%20%20%20%20%20%20%20%20%20request%20%3A%3D%20item.Value().(APIRequest)%0A%20%20%20%20%20%20%20%20%20%20%20%20response%2C%20err%20%3A%3D%20callAPI(request)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(response)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20responses%20%5B%5DAPIResponse%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20_%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20var%20resp%20APIResponse%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20result.Bind(%26resp)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20responses%20%3D%20append(responses%2C%20resp)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22api_responses%22%2C%20responses)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithBatchConcurrency(3)%20%20%2F%2F%20Limit%20concurrent%20API%20calls%0A%7D%0A%0A%2F%2F%20Usage%0Alimiter%20%3A%3D%20rate.NewLimiter(rate.Limit(10)%2C%201)%20%20%2F%2F%2010%20requests%20per%20second%0AbatchNode%20%3A%3D%20createRateLimitedBatchNode(limiter)%0A%60%60%60%0A%0A%23%23%20Batch%20with%20Timeout%0A%0ASet%20timeouts%20for%20batch%20operations%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20tasks%20%3A%3D%20shared.GetSlice(%22tasks%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(tasks))%0A%20%20%20%20%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20timeout%20context%20for%20this%20item%0A%20%20%20%20%20%20%20%20itemCtx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%205*time.Second)%0A%20%20%20%20%20%20%20%20defer%20cancel()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20resultChan%20%3A%3D%20make(chan%20flyt.Result)%0A%20%20%20%20%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processTaskWithContext(itemCtx%2C%20item.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20flyt.NewResult(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%0A%20%20%20%20%20%20%20%20case%20%3C-itemCtx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20fmt.Errorf(%22task%20timeout%3A%20%25v%22%2C%20item.Value())%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20completed%20%5B%5Dany%0A%20%20%20%20%20%20%20%20var%20timedOut%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%26%26%20strings.Contains(result.Error().Error()%2C%20%22timeout%22)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timedOut%20%3D%20append(timedOut%2C%20items%5Bi%5D.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20!result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20completed%20%3D%20append(completed%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22completed%22%2C%20completed)%0A%20%20%20%20%20%20%20%20shared.Set(%22timed_out%22%2C%20timedOut)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20len(timedOut)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22has_timeouts%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchConcurrency(5)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Choose%20Concurrency%20Wisely**%3A%20Use%20concurrent%20for%20I%2FO-bound%2C%20sequential%20for%20order-dependent%20operations%0A2.%20**Handle%20Errors%20Gracefully**%3A%20Use%20%60WithBatchErrorHandling(true)%60%20to%20continue%20despite%20failures%0A3.%20**Monitor%20Progress**%3A%20Log%20in%20Post%20to%20track%20batch%20completion%0A4.%20**Set%20Reasonable%20Limits**%3A%20Configure%20concurrency%20based%20on%20resources%0A5.%20**Test%20with%20Real%20Data**%3A%20Test%20with%20production-like%20data%20volumes%0A6.%20**Use%20Result%20Error%20Tracking**%3A%20Leverage%20%60Result.IsError()%60%20and%20%60Result.Error()%60%20for%20clean%20error%20handling%0A%0A%23%23%20Key%20Benefits%0A%0A1.%20**Simplicity**%3A%20BatchNode%20works%20almost%20exactly%20like%20regular%20nodes%0A2.%20**Automatic%20Handling**%3A%20Framework%20detects%20%60%5B%5DResult%60%20and%20handles%20iteration%0A3.%20**Clean%20Error%20Tracking**%3A%20Each%20Result%20can%20carry%20its%20own%20error%20state%0A4.%20**Flexible%20Configuration**%3A%20Concurrency%20and%20error%20handling%20are%20configurable%0A5.%20**Type%20Safety**%3A%20Strong%20typing%20with%20Result%20type%20throughout%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Custom%20concurrent%20processing%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Handle%20errors%20effectively%0A-%20%5BFlow%20Patterns%5D(%2Fpatterns%2Fbranching)%20-%20Complex%20flow%20control",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./custom-nodes-DwHQVJoG.js"),[]),path:"/advanced/custom-nodes",type:"mdx",filePath:"advanced/custom-nodes.mdx",content:"%23%20Custom%20Node%20Types%0A%0ACreate%20sophisticated%20nodes%20with%20custom%20behavior%2C%20state%20management%2C%20and%20advanced%20features.%0A%0A%23%23%20Basic%20Custom%20Node%0A%0AExtend%20BaseNode%20for%20custom%20functionality%3A%0A%0A%60%60%60go%0Atype%20CustomNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20config%20Config%0A%20%20%20%20state%20%20State%0A%7D%0A%0Afunc%20NewCustomNode(config%20Config)%20*CustomNode%20%7B%0A%20%20%20%20return%20%26CustomNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20config%3A%20%20%20config%2C%0A%20%20%20%20%20%20%20%20state%3A%20%20%20%20NewState()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20preparation%20logic%0A%20%20%20%20input%20%3A%3D%20shared.GetString(%22input%22)%0A%20%20%20%20n.state.Prepare(input)%0A%20%20%20%20return%20input%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20execution%20logic%0A%20%20%20%20result%20%3A%3D%20n.processWithConfig(prepResult%2C%20n.config)%0A%20%20%20%20n.state.Update(result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20post-processing%0A%20%20%20%20shared.Set(%22state%22%2C%20n.state)%0A%20%20%20%20%0A%20%20%20%20if%20n.state.IsComplete()%20%7B%0A%20%20%20%20%20%20%20%20return%20%22complete%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Atype%20AccumulatorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20values%20%20%20%5B%5Dany%0A%20%20%20%20maxSize%20%20int%0A%7D%0A%0Afunc%20NewAccumulatorNode(maxSize%20int)%20*AccumulatorNode%20%7B%0A%20%20%20%20return%20%26AccumulatorNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20values%3A%20%20%20make(%5B%5Dany%2C%200%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20%20maxSize%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20to%20accumulator%0A%20%20%20%20n.values%20%3D%20append(n.values%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20buffer%20is%20full%0A%20%20%20%20if%20len(n.values)%20%3E%3D%20n.maxSize%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20batch%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20n.processBatch(n.values)%0A%20%20%20%20%20%20%20%20n.values%20%3D%20n.values%5B%3A0%5D%20%2F%2F%20Clear%20buffer%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20processBatch(values%20%5B%5Dany)%20any%20%7B%0A%20%20%20%20%2F%2F%20Process%20accumulated%20values%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22count%22%3A%20len(values)%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%20values%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource-Managing%20Nodes%0A%0AHandle%20external%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20%20%20%20%20*sql.DB%0A%20%20%20%20prepared%20map%5Bstring%5D*sql.Stmt%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDatabaseNode(dsn%20string)%20(*DatabaseNode%2C%20error)%20%7B%0A%20%20%20%20db%2C%20err%20%3A%3D%20sql.Open(%22postgres%22%2C%20dsn)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20db.SetMaxOpenConns(25)%0A%20%20%20%20db.SetMaxIdleConns(5)%0A%20%20%20%20%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20db%2C%0A%20%20%20%20%20%20%20%20prepared%3A%20make(map%5Bstring%5D*sql.Stmt)%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(QueryRequest)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20prepared%20statement%20if%20available%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.getOrPrepare(query.SQL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20stmt.QueryContext(ctx%2C%20query.Args...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20return%20n.scanResults(rows)%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20getOrPrepare(sql%20string)%20(*sql.Stmt%2C%20error)%20%7B%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.pool.Prepare(sql)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.prepared%5Bsql%5D%20%3D%20stmt%0A%20%20%20%20return%20stmt%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Close()%20error%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20stmt%20%3A%3D%20range%20n.prepared%20%7B%0A%20%20%20%20%20%20%20%20stmt.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20RetryableNode%20Implementation%0A%0ACustom%20retry%20logic%3A%0A%0A%60%60%60go%0Atype%20SmartRetryNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempts%20%20%20%20%20%20int%0A%20%20%20%20lastError%20%20%20%20%20error%0A%20%20%20%20backoffFactor%20float64%0A%7D%0A%0Afunc%20NewSmartRetryNode()%20*SmartRetryNode%20%7B%0A%20%20%20%20return%20%26SmartRetryNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20%20%20%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20backoffFactor%3A%201.5%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Dynamic%20retry%20count%20based%20on%20error%20type%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20isNetworkError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%205%20%20%2F%2F%20More%20retries%20for%20network%20issues%0A%20%20%20%20%20%20%20%20case%20isRateLimitError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%203%20%20%2F%2F%20Fewer%20retries%20for%20rate%20limits%0A%20%20%20%20%20%20%20%20case%20isAuthError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%20%20%2F%2F%20No%20retries%20for%20auth%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%202%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20isRateLimitError(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20retry-after%20from%20error%20if%20available%0A%20%20%20%20%20%20%20%20if%20retryAfter%20%3A%3D%20extractRetryAfter(n.lastError)%3B%20retryAfter%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20retryAfter%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Exponential%20backoff%20with%20jitter%0A%20%20%20%20base%20%3A%3D%20math.Pow(n.backoffFactor%2C%20float64(n.attempts))%0A%20%20%20%20jitter%20%3A%3D%20rand.Float64()%20*%200.3%20*%20base%20%20%2F%2F%2030%25%20jitter%0A%20%20%20%20return%20time.Duration((base%20%2B%20jitter)%20*%20float64(time.Second))%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempts%2B%2B%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.performOperation(ctx%2C%20prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.lastError%20%3D%20err%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20n.attempts%20%3D%200%0A%20%20%20%20n.lastError%20%3D%20nil%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Composite%20Nodes%0A%0ACombine%20multiple%20operations%3A%0A%0A%60%60%60go%0Atype%20PipelineNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20stages%20%5B%5Dfunc(context.Context%2C%20any)%20(any%2C%20error)%0A%7D%0A%0Afunc%20NewPipelineNode(stages%20...func(context.Context%2C%20any)%20(any%2C%20error))%20*PipelineNode%20%7B%0A%20%20%20%20return%20%26PipelineNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20stages%3A%20%20%20stages%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*PipelineNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20prepResult%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20stage%20%3A%3D%20range%20n.stages%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20stage(ctx%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stage%20%25d%20failed%3A%20%25w%22%2C%20i%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%20Nodes%0A%0AAdd%20observability%3A%0A%0A%60%60%60go%0Atype%20MonitoredNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20name%20%20%20%20string%0A%20%20%20%20metrics%20*Metrics%0A%7D%0A%0Atype%20Metrics%20struct%20%7B%0A%20%20%20%20executions%20%20%20int64%0A%20%20%20%20successes%20%20%20%20int64%0A%20%20%20%20failures%20%20%20%20%20int64%0A%20%20%20%20totalLatency%20int64%0A%7D%0A%0Afunc%20NewMonitoredNode(name%20string%2C%20baseNode%20flyt.Node)%20*MonitoredNode%20%7B%0A%20%20%20%20return%20%26MonitoredNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20baseNode.(*flyt.BaseNode)%2C%0A%20%20%20%20%20%20%20%20name%3A%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20metrics%3A%20%20%26Metrics%7B%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.executions%2C%201)%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.BaseNode.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20latency%20%3A%3D%20time.Since(start).Milliseconds()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.totalLatency%2C%20latency)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.failures%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20failed%3A%20%25v%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20err%2C%20latency)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.successes%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20succeeded%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20latency)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20GetMetrics()%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22executions%22%3A%20%20%20%20atomic.LoadInt64(%26n.metrics.executions)%2C%0A%20%20%20%20%20%20%20%20%22successes%22%3A%20%20%20%20%20atomic.LoadInt64(%26n.metrics.successes)%2C%0A%20%20%20%20%20%20%20%20%22failures%22%3A%20%20%20%20%20%20atomic.LoadInt64(%26n.metrics.failures)%2C%0A%20%20%20%20%20%20%20%20%22avg_latency%22%3A%20%20%20n.getAverageLatency()%2C%0A%20%20%20%20%20%20%20%20%22success_rate%22%3A%20%20n.getSuccessRate()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Async%20Nodes%0A%0AHandle%20asynchronous%20operations%3A%0A%0A%60%60%60go%0Atype%20AsyncNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20chan%20Task%0A%20%20%20%20wg%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewAsyncNode(workers%20int)%20*AsyncNode%20%7B%0A%20%20%20%20n%20%3A%3D%20%26AsyncNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20workers%3A%20%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20%20make(chan%20Task%2C%20workers*2)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20workers%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20workers%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20go%20n.worker()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20worker()%20%7B%0A%20%20%20%20for%20task%20%3A%3D%20range%20n.queue%20%7B%0A%20%20%20%20%20%20%20%20n.processTask(task)%0A%20%20%20%20%20%20%20%20n.wg.Done()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20tasks%20%3A%3D%20prepResult.(%5B%5DTask)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(tasks))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Submit%20all%20tasks%0A%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Add(1)%0A%20%20%20%20%20%20%20%20task.Index%20%3D%20i%0A%20%20%20%20%20%20%20%20task.Results%20%3D%20%26results%0A%20%20%20%20%20%20%20%20n.queue%20%3C-%20task%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20completion%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Close()%20%7B%0A%20%20%20%20close(n.queue)%0A%7D%0A%60%60%60%0A%0A%23%23%20Validation%20Nodes%0A%0AEnsure%20data%20integrity%3A%0A%0A%60%60%60go%0Atype%20ValidationNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20rules%20%5B%5DValidationRule%0A%7D%0A%0Atype%20ValidationRule%20interface%20%7B%0A%20%20%20%20Validate(any)%20error%0A%20%20%20%20Name()%20string%0A%7D%0A%0Afunc%20NewValidationNode(rules%20...ValidationRule)%20*ValidationNode%20%7B%0A%20%20%20%20return%20%26ValidationNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20rules%3A%20%20%20%20rules%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20errors%20%5B%5Dstring%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20rule%20%3A%3D%20range%20n.rules%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rule.Validate(prepResult)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20fmt.Sprintf(%22%25s%3A%20%25v%22%2C%20rule.Name()%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22validation%20failed%3A%20%25s%22%2C%20strings.Join(errors%2C%20%22%3B%20%22))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20prepResult%2C%20nil%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22valid%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Result%20Type%20with%20Custom%20Nodes%0A%0AWhen%20implementing%20custom%20nodes%2C%20you%20can%20leverage%20the%20Result%20type%20for%20better%20type%20safety%3A%0A%0A%60%60%60go%0Atype%20TypeSafeNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*TypeSafeNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Return%20Result%20wrapped%20value%0A%20%20%20%20data%20%3A%3D%20shared.GetMap(%22config%22)%0A%20%20%20%20return%20flyt.NewResult(data).Value()%2C%20nil%0A%7D%0A%0Afunc%20(n%20*TypeSafeNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Wrap%20input%20in%20Result%20for%20type-safe%20access%0A%20%20%20%20input%20%3A%3D%20flyt.NewResult(prepResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20Result's%20convenience%20methods%0A%20%20%20%20if%20config%20%3A%3D%20input.AsMapOr(nil)%3B%20config%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20timeout%20%3A%3D%20flyt.NewResult(config%5B%22timeout%22%5D).AsIntOr(30)%0A%20%20%20%20%20%20%20%20retries%20%3A%3D%20flyt.NewResult(config%5B%22retries%22%5D).AsIntOr(3)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20n.processWithConfig(timeout%2C%20retries)%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20configuration%22)%0A%7D%0A%0Afunc%20(n%20*TypeSafeNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Use%20Result%20for%20safe%20type%20conversion%0A%20%20%20%20result%20%3A%3D%20flyt.NewResult(execResult)%0A%20%20%20%20%0A%20%20%20%20if%20result.IsNil()%20%7B%0A%20%20%20%20%20%20%20%20return%20%22failed%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Bind%20to%20struct%20for%20complex%20types%0A%20%20%20%20var%20output%20ProcessedData%0A%20%20%20%20if%20err%20%3A%3D%20result.Bind(%26output)%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22processed%22%2C%20output)%0A%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Helper%20Functions%20vs%20Custom%20Nodes%0A%0A**Use%20helper%20functions%20(WithExecFunc%2C%20etc.)%20when%3A**%0A-%20Building%20simple%2C%20stateless%20operations%0A-%20Prototyping%20workflows%20quickly%0A-%20Creating%20one-off%20transformations%0A%0A**Implement%20custom%20nodes%20when%3A**%0A-%20Managing%20state%20or%20resources%0A-%20Need%20complex%20initialization%0A-%20Building%20reusable%20components%0A-%20Require%20custom%20retry%20logic%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Interfaces**%3A%20Define%20clear%20interfaces%20for%20custom%20nodes%0A2.%20**Thread%20Safety**%3A%20Ensure%20nodes%20are%20thread-safe%20for%20concurrent%20use%0A3.%20**Resource%20Management**%3A%20Properly%20manage%20external%20resources%0A4.%20**Error%20Handling**%3A%20Provide%20detailed%20error%20information%0A5.%20**Testing**%3A%20Write%20comprehensive%20tests%20for%20custom%20logic%0A6.%20**Documentation**%3A%20Document%20node%20behavior%20and%20requirements%0A7.%20**Monitoring**%3A%20Add%20metrics%20and%20logging%20for%20observability%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BRetryableNode%20Interface%5D(%2Fconcepts%2Fnodes%23retryablenode-interface)%20-%20Custom%20retry%20logic%0A-%20%5BFallbackNode%20Interface%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Concurrent%20task%20management",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./custom-nodes-DwHQVJoG.js"),[]),path:"/advanced/custom-nodes.html",type:"mdx",filePath:"advanced/custom-nodes.mdx",content:"%23%20Custom%20Node%20Types%0A%0ACreate%20sophisticated%20nodes%20with%20custom%20behavior%2C%20state%20management%2C%20and%20advanced%20features.%0A%0A%23%23%20Basic%20Custom%20Node%0A%0AExtend%20BaseNode%20for%20custom%20functionality%3A%0A%0A%60%60%60go%0Atype%20CustomNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20config%20Config%0A%20%20%20%20state%20%20State%0A%7D%0A%0Afunc%20NewCustomNode(config%20Config)%20*CustomNode%20%7B%0A%20%20%20%20return%20%26CustomNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20config%3A%20%20%20config%2C%0A%20%20%20%20%20%20%20%20state%3A%20%20%20%20NewState()%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20preparation%20logic%0A%20%20%20%20input%20%3A%3D%20shared.GetString(%22input%22)%0A%20%20%20%20n.state.Prepare(input)%0A%20%20%20%20return%20input%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20execution%20logic%0A%20%20%20%20result%20%3A%3D%20n.processWithConfig(prepResult%2C%20n.config)%0A%20%20%20%20n.state.Update(result)%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CustomNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20post-processing%0A%20%20%20%20shared.Set(%22state%22%2C%20n.state)%0A%20%20%20%20%0A%20%20%20%20if%20n.state.IsComplete()%20%7B%0A%20%20%20%20%20%20%20%20return%20%22complete%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Atype%20AccumulatorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20values%20%20%20%5B%5Dany%0A%20%20%20%20maxSize%20%20int%0A%7D%0A%0Afunc%20NewAccumulatorNode(maxSize%20int)%20*AccumulatorNode%20%7B%0A%20%20%20%20return%20%26AccumulatorNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20values%3A%20%20%20make(%5B%5Dany%2C%200%2C%20maxSize)%2C%0A%20%20%20%20%20%20%20%20maxSize%3A%20%20maxSize%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Add%20to%20accumulator%0A%20%20%20%20n.values%20%3D%20append(n.values%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20buffer%20is%20full%0A%20%20%20%20if%20len(n.values)%20%3E%3D%20n.maxSize%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20batch%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20n.processBatch(n.values)%0A%20%20%20%20%20%20%20%20n.values%20%3D%20n.values%5B%3A0%5D%20%2F%2F%20Clear%20buffer%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20nil%0A%7D%0A%0Afunc%20(n%20*AccumulatorNode)%20processBatch(values%20%5B%5Dany)%20any%20%7B%0A%20%20%20%20%2F%2F%20Process%20accumulated%20values%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22count%22%3A%20len(values)%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%20values%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Resource-Managing%20Nodes%0A%0AHandle%20external%20resources%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20%20%20%20%20*sql.DB%0A%20%20%20%20prepared%20map%5Bstring%5D*sql.Stmt%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDatabaseNode(dsn%20string)%20(*DatabaseNode%2C%20error)%20%7B%0A%20%20%20%20db%2C%20err%20%3A%3D%20sql.Open(%22postgres%22%2C%20dsn)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20db.SetMaxOpenConns(25)%0A%20%20%20%20db.SetMaxIdleConns(5)%0A%20%20%20%20%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20db%2C%0A%20%20%20%20%20%20%20%20prepared%3A%20make(map%5Bstring%5D*sql.Stmt)%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(QueryRequest)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20prepared%20statement%20if%20available%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.getOrPrepare(query.SQL)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rows%2C%20err%20%3A%3D%20stmt.QueryContext(ctx%2C%20query.Args...)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20return%20n.scanResults(rows)%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20getOrPrepare(sql%20string)%20(*sql.Stmt%2C%20error)%20%7B%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Double-check%20after%20acquiring%20write%20lock%0A%20%20%20%20if%20stmt%2C%20exists%20%3A%3D%20n.prepared%5Bsql%5D%3B%20exists%20%7B%0A%20%20%20%20%20%20%20%20return%20stmt%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20stmt%2C%20err%20%3A%3D%20n.pool.Prepare(sql)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.prepared%5Bsql%5D%20%3D%20stmt%0A%20%20%20%20return%20stmt%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Close()%20error%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20stmt%20%3A%3D%20range%20n.prepared%20%7B%0A%20%20%20%20%20%20%20%20stmt.Close()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20RetryableNode%20Implementation%0A%0ACustom%20retry%20logic%3A%0A%0A%60%60%60go%0Atype%20SmartRetryNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempts%20%20%20%20%20%20int%0A%20%20%20%20lastError%20%20%20%20%20error%0A%20%20%20%20backoffFactor%20float64%0A%7D%0A%0Afunc%20NewSmartRetryNode()%20*SmartRetryNode%20%7B%0A%20%20%20%20return%20%26SmartRetryNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20%20%20%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20backoffFactor%3A%201.5%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Dynamic%20retry%20count%20based%20on%20error%20type%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20isNetworkError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%205%20%20%2F%2F%20More%20retries%20for%20network%20issues%0A%20%20%20%20%20%20%20%20case%20isRateLimitError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%203%20%20%2F%2F%20Fewer%20retries%20for%20rate%20limits%0A%20%20%20%20%20%20%20%20case%20isAuthError(n.lastError)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%20%20%2F%2F%20No%20retries%20for%20auth%20errors%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%202%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20isRateLimitError(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Extract%20retry-after%20from%20error%20if%20available%0A%20%20%20%20%20%20%20%20if%20retryAfter%20%3A%3D%20extractRetryAfter(n.lastError)%3B%20retryAfter%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20retryAfter%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Exponential%20backoff%20with%20jitter%0A%20%20%20%20base%20%3A%3D%20math.Pow(n.backoffFactor%2C%20float64(n.attempts))%0A%20%20%20%20jitter%20%3A%3D%20rand.Float64()%20*%200.3%20*%20base%20%20%2F%2F%2030%25%20jitter%0A%20%20%20%20return%20time.Duration((base%20%2B%20jitter)%20*%20float64(time.Second))%0A%7D%0A%0Afunc%20(n%20*SmartRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempts%2B%2B%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.performOperation(ctx%2C%20prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.lastError%20%3D%20err%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20n.attempts%20%3D%200%0A%20%20%20%20n.lastError%20%3D%20nil%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Composite%20Nodes%0A%0ACombine%20multiple%20operations%3A%0A%0A%60%60%60go%0Atype%20PipelineNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20stages%20%5B%5Dfunc(context.Context%2C%20any)%20(any%2C%20error)%0A%7D%0A%0Afunc%20NewPipelineNode(stages%20...func(context.Context%2C%20any)%20(any%2C%20error))%20*PipelineNode%20%7B%0A%20%20%20%20return%20%26PipelineNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20stages%3A%20%20%20stages%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*PipelineNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20prepResult%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20stage%20%3A%3D%20range%20n.stages%20%7B%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20stage(ctx%2C%20result)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22stage%20%25d%20failed%3A%20%25w%22%2C%20i%2C%20err)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Monitoring%20Nodes%0A%0AAdd%20observability%3A%0A%0A%60%60%60go%0Atype%20MonitoredNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20name%20%20%20%20string%0A%20%20%20%20metrics%20*Metrics%0A%7D%0A%0Atype%20Metrics%20struct%20%7B%0A%20%20%20%20executions%20%20%20int64%0A%20%20%20%20successes%20%20%20%20int64%0A%20%20%20%20failures%20%20%20%20%20int64%0A%20%20%20%20totalLatency%20int64%0A%7D%0A%0Afunc%20NewMonitoredNode(name%20string%2C%20baseNode%20flyt.Node)%20*MonitoredNode%20%7B%0A%20%20%20%20return%20%26MonitoredNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20baseNode.(*flyt.BaseNode)%2C%0A%20%20%20%20%20%20%20%20name%3A%20%20%20%20%20name%2C%0A%20%20%20%20%20%20%20%20metrics%3A%20%20%26Metrics%7B%7D%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.executions%2C%201)%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20n.BaseNode.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20latency%20%3A%3D%20time.Since(start).Milliseconds()%0A%20%20%20%20atomic.AddInt64(%26n.metrics.totalLatency%2C%20latency)%0A%20%20%20%20%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.failures%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20failed%3A%20%25v%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20err%2C%20latency)%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26n.metrics.successes%2C%201)%0A%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Execution%20succeeded%20(latency%3A%20%25dms)%22%2C%20n.name%2C%20latency)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%0Afunc%20(n%20*MonitoredNode)%20GetMetrics()%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22executions%22%3A%20%20%20%20atomic.LoadInt64(%26n.metrics.executions)%2C%0A%20%20%20%20%20%20%20%20%22successes%22%3A%20%20%20%20%20atomic.LoadInt64(%26n.metrics.successes)%2C%0A%20%20%20%20%20%20%20%20%22failures%22%3A%20%20%20%20%20%20atomic.LoadInt64(%26n.metrics.failures)%2C%0A%20%20%20%20%20%20%20%20%22avg_latency%22%3A%20%20%20n.getAverageLatency()%2C%0A%20%20%20%20%20%20%20%20%22success_rate%22%3A%20%20n.getSuccessRate()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Async%20Nodes%0A%0AHandle%20asynchronous%20operations%3A%0A%0A%60%60%60go%0Atype%20AsyncNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20chan%20Task%0A%20%20%20%20wg%20%20%20%20%20%20sync.WaitGroup%0A%7D%0A%0Afunc%20NewAsyncNode(workers%20int)%20*AsyncNode%20%7B%0A%20%20%20%20n%20%3A%3D%20%26AsyncNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20workers%3A%20%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20%20make(chan%20Task%2C%20workers*2)%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20workers%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20workers%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20go%20n.worker()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20worker()%20%7B%0A%20%20%20%20for%20task%20%3A%3D%20range%20n.queue%20%7B%0A%20%20%20%20%20%20%20%20n.processTask(task)%0A%20%20%20%20%20%20%20%20n.wg.Done()%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20tasks%20%3A%3D%20prepResult.(%5B%5DTask)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(tasks))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Submit%20all%20tasks%0A%20%20%20%20for%20i%2C%20task%20%3A%3D%20range%20tasks%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Add(1)%0A%20%20%20%20%20%20%20%20task.Index%20%3D%20i%0A%20%20%20%20%20%20%20%20task.Results%20%3D%20%26results%0A%20%20%20%20%20%20%20%20n.queue%20%3C-%20task%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20for%20completion%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20n.wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*AsyncNode)%20Close()%20%7B%0A%20%20%20%20close(n.queue)%0A%7D%0A%60%60%60%0A%0A%23%23%20Validation%20Nodes%0A%0AEnsure%20data%20integrity%3A%0A%0A%60%60%60go%0Atype%20ValidationNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20rules%20%5B%5DValidationRule%0A%7D%0A%0Atype%20ValidationRule%20interface%20%7B%0A%20%20%20%20Validate(any)%20error%0A%20%20%20%20Name()%20string%0A%7D%0A%0Afunc%20NewValidationNode(rules%20...ValidationRule)%20*ValidationNode%20%7B%0A%20%20%20%20return%20%26ValidationNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20rules%3A%20%20%20%20rules%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20errors%20%5B%5Dstring%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20rule%20%3A%3D%20range%20n.rules%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20rule.Validate(prepResult)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20fmt.Sprintf(%22%25s%3A%20%25v%22%2C%20rule.Name()%2C%20err))%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22validation%20failed%3A%20%25s%22%2C%20strings.Join(errors%2C%20%22%3B%20%22))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20prepResult%2C%20nil%0A%7D%0A%0Afunc%20(n%20*ValidationNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22valid%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Result%20Type%20with%20Custom%20Nodes%0A%0AWhen%20implementing%20custom%20nodes%2C%20you%20can%20leverage%20the%20Result%20type%20for%20better%20type%20safety%3A%0A%0A%60%60%60go%0Atype%20TypeSafeNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*TypeSafeNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Return%20Result%20wrapped%20value%0A%20%20%20%20data%20%3A%3D%20shared.GetMap(%22config%22)%0A%20%20%20%20return%20flyt.NewResult(data).Value()%2C%20nil%0A%7D%0A%0Afunc%20(n%20*TypeSafeNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Wrap%20input%20in%20Result%20for%20type-safe%20access%0A%20%20%20%20input%20%3A%3D%20flyt.NewResult(prepResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Use%20Result's%20convenience%20methods%0A%20%20%20%20if%20config%20%3A%3D%20input.AsMapOr(nil)%3B%20config%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20timeout%20%3A%3D%20flyt.NewResult(config%5B%22timeout%22%5D).AsIntOr(30)%0A%20%20%20%20%20%20%20%20retries%20%3A%3D%20flyt.NewResult(config%5B%22retries%22%5D).AsIntOr(3)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20n.processWithConfig(timeout%2C%20retries)%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22invalid%20configuration%22)%0A%7D%0A%0Afunc%20(n%20*TypeSafeNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Use%20Result%20for%20safe%20type%20conversion%0A%20%20%20%20result%20%3A%3D%20flyt.NewResult(execResult)%0A%20%20%20%20%0A%20%20%20%20if%20result.IsNil()%20%7B%0A%20%20%20%20%20%20%20%20return%20%22failed%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Bind%20to%20struct%20for%20complex%20types%0A%20%20%20%20var%20output%20ProcessedData%0A%20%20%20%20if%20err%20%3A%3D%20result.Bind(%26output)%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22processed%22%2C%20output)%0A%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Helper%20Functions%20vs%20Custom%20Nodes%0A%0A**Use%20helper%20functions%20(WithExecFunc%2C%20etc.)%20when%3A**%0A-%20Building%20simple%2C%20stateless%20operations%0A-%20Prototyping%20workflows%20quickly%0A-%20Creating%20one-off%20transformations%0A%0A**Implement%20custom%20nodes%20when%3A**%0A-%20Managing%20state%20or%20resources%0A-%20Need%20complex%20initialization%0A-%20Building%20reusable%20components%0A-%20Require%20custom%20retry%20logic%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Interfaces**%3A%20Define%20clear%20interfaces%20for%20custom%20nodes%0A2.%20**Thread%20Safety**%3A%20Ensure%20nodes%20are%20thread-safe%20for%20concurrent%20use%0A3.%20**Resource%20Management**%3A%20Properly%20manage%20external%20resources%0A4.%20**Error%20Handling**%3A%20Provide%20detailed%20error%20information%0A5.%20**Testing**%3A%20Write%20comprehensive%20tests%20for%20custom%20logic%0A6.%20**Documentation**%3A%20Document%20node%20behavior%20and%20requirements%0A7.%20**Monitoring**%3A%20Add%20metrics%20and%20logging%20for%20observability%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BRetryableNode%20Interface%5D(%2Fconcepts%2Fnodes%23retryablenode-interface)%20-%20Custom%20retry%20logic%0A-%20%5BFallbackNode%20Interface%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BWorker%20Pool%5D(%2Fadvanced%2Fworker-pool)%20-%20Concurrent%20task%20management",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./flow-as-node-wbaZ4Yf8.js"),[]),path:"/advanced/flow-as-node",type:"mdx",filePath:"advanced/flow-as-node.mdx",content:"%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%2C%20allowing%20them%20to%20be%20used%20anywhere%20a%20node%20is%20expected.%20This%20enables%20powerful%20composition%20patterns.%0A%0A%23%23%20The%20Node%20Interface%0A%0AFlows%20implement%20all%20Node%20methods%3A%0A%0A%60%60%60go%0Atype%20Node%20interface%20%7B%0A%20%20%20%20Prep(ctx%20context.Context%2C%20shared%20*SharedStore)%20(any%2C%20error)%0A%20%20%20%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%0A%20%20%20%20Post(ctx%20context.Context%2C%20shared%20*SharedStore%2C%20prepResult%2C%20execResult%20any)%20(Action%2C%20error)%0A%7D%0A%0A%2F%2F%20Flow%20implements%20Node%0Avar%20_%20Node%20%3D%20(*Flow)(nil)%0A%60%60%60%0A%0A%23%23%20Basic%20Usage%0A%0AUse%20a%20flow%20wherever%20a%20node%20is%20expected%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20reusable%20flow%0AprocessingFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AprocessingFlow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0AprocessingFlow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0A%0A%2F%2F%20Use%20the%20flow%20as%20a%20node%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processingFlow)%20%2F%2F%20Flow%20used%20as%20node%0AmainFlow.Connect(processingFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Lifecycle%20as%20Node%0A%0AUnderstanding%20how%20flows%20behave%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20When%20a%20flow%20is%20used%20as%20a%20node%3A%0A%2F%2F%201.%20Prep%3A%20Prepares%20the%20flow's%20start%20node%0A%2F%2F%202.%20Exec%3A%20Runs%20the%20entire%20flow%0A%2F%2F%203.%20Post%3A%20Returns%20the%20final%20action%20from%20the%20flow%0A%0Afunc%20demonstrateFlowLifecycle()%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20subFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20When%20mainFlow%20executes%20subFlow%3A%0A%20%20%20%20%2F%2F%20-%20subFlow.Prep()%20calls%20startNode.Prep()%0A%20%20%20%20%2F%2F%20-%20subFlow.Exec()%20runs%20the%20entire%20sub-flow%0A%20%20%20%20%2F%2F%20-%20subFlow.Post()%20returns%20the%20final%20action%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(initNode)%0A%20%20%20%20mainFlow.Connect(initNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%7D%0A%60%60%60%0A%0A%23%23%20Composable%20Workflows%0A%0ABuild%20complex%20workflows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%201%3A%20Basic%20operations%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaNode%20%3A%3D%20createSchemaValidationNode()%0A%20%20%20%20businessNode%20%3A%3D%20createBusinessValidationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaNode)%0A%20%20%20%20flow.Connect(schemaNode%2C%20%22valid%22%2C%20businessNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createEnrichmentFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetchNode%20%3A%3D%20createDataFetchNode()%0A%20%20%20%20mergeNode%20%3A%3D%20createDataMergeNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Combine%20basic%20flows%0Afunc%20createProcessingPipeline()%20*flyt.Flow%20%7B%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20enrichment%20%3A%3D%20createEnrichmentFlow()%0A%20%20%20%20%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(validation)%0A%20%20%20%20pipeline.Connect(validation%2C%20flyt.DefaultAction%2C%20enrichment)%0A%20%20%20%20return%20pipeline%0A%7D%0A%0A%2F%2F%20Level%203%3A%20Use%20in%20application%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20pipeline%20%3A%3D%20createProcessingPipeline()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20app%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20app.Connect(auth%2C%20flyt.DefaultAction%2C%20pipeline)%0A%20%20%20%20app.Connect(pipeline%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20return%20app%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Selection%0A%0AChoose%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Atype%20FlowSelector%20struct%20%7B%0A%20%20%20%20flows%20map%5Bstring%5D*flyt.Flow%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20CreateSelectorNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flowType%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flowType%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20BuildDynamicFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20selector%20%3A%3D%20fs.CreateSelectorNode()%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(selector)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20different%20flows%20based%20on%20selection%0A%20%20%20%20for%20name%2C%20flow%20%3A%3D%20range%20fs.flows%20%7B%0A%20%20%20%20%20%20%20%20mainFlow.Connect(selector%2C%20flyt.Action(name)%2C%20flow)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%0A%2F%2F%20Usage%0Aselector%20%3A%3D%20%26FlowSelector%7B%0A%20%20%20%20flows%3A%20map%5Bstring%5D*flyt.Flow%7B%0A%20%20%20%20%20%20%20%20%22simple%22%3A%20%20createSimpleFlow()%2C%0A%20%20%20%20%20%20%20%20%22complex%22%3A%20createComplexFlow()%2C%0A%20%20%20%20%20%20%20%20%22custom%22%3A%20%20createCustomFlow()%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0AdynamicFlow%20%3A%3D%20selector.BuildDynamicFlow()%0A%60%60%60%0A%0A%23%23%20Flow%20Factories%0A%0ACreate%20flows%20on%20demand%3A%0A%0A%60%60%60go%0Atype%20FlowFactory%20interface%20%7B%0A%20%20%20%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%0A%7D%0A%0Atype%20ProcessingFlowFactory%20struct%7B%7D%0A%0Afunc%20(f%20*ProcessingFlowFactory)%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20based%20on%20configuration%0A%20%20%20%20var%20nodes%20%5B%5Dflyt.Node%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20nodeConfig%20%3A%3D%20range%20config.Nodes%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20createNodeFromConfig(nodeConfig)%0A%20%20%20%20%20%20%20%20nodes%20%3D%20append(nodes%2C%20node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(nodes%5B0%5D)%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(nodes)-1%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(nodes%5Bi%5D%2C%20flyt.DefaultAction%2C%20nodes%5Bi%2B1%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20factory-created%20flows%20as%20nodes%0Afunc%20createDynamicPipeline(factory%20FlowFactory%2C%20configs%20%5B%5DFlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20previous%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20config%20%3A%3D%20range%20configs%20%7B%0A%20%20%20%20%20%20%20%20flow%20%3A%3D%20factory.CreateFlow(config)%0A%20%20%20%20%20%20%20%20pipeline.Connect(previous%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20%20%20%20%20previous%20%3D%20flow%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20pipeline%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flow%20Patterns%0A%0AFlows%20containing%20themselves%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveProcessingFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20var%20flow%20*flyt.Flow%0A%20%20%20%20%0A%20%20%20%20depthCheck%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20shared.GetInt(%22recursion_depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22terminate%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22recurse%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22recurse%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22recursion_depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3D%20flyt.NewFlow(depthCheck)%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22recurse%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20reference%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22terminate%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Flow%20Middleware%0A%0AWrap%20flows%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20flow%20*flyt.Flow)%20*flyt.Flow%20%7B%0A%20%20%20%20logStart%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20starting%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20logEnd%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20completed%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20wrapped%20%3A%3D%20flyt.NewFlow(logStart)%0A%20%20%20%20wrapped.Connect(logStart%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20wrapped.Connect(flow%2C%20flyt.DefaultAction%2C%20logEnd)%0A%20%20%20%20%0A%20%20%20%20return%20wrapped%0A%7D%0A%0A%2F%2F%20Usage%0AprocessFlow%20%3A%3D%20createProcessingFlow()%0AloggedFlow%20%3A%3D%20withLogging(%22ProcessingPipeline%22%2C%20processFlow)%0A%60%60%60%0A%0A%23%23%20Testing%20Flows%20as%20Nodes%0A%0ATest%20flow%20behavior%20when%20used%20as%20nodes%3A%0A%0A%60%60%60go%0Afunc%20TestFlowAsNode(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20simple%20flow%0A%20%20%20%20innerFlow%20%3A%3D%20flyt.NewFlow(%0A%20%20%20%20%20%20%20%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22inner_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20the%20flow%20directly%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20flow%20methods%20as%20if%20it%20were%20a%20node%0A%20%20%20%20prepResult%2C%20err%20%3A%3D%20innerFlow.Prep(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20execResult%2C%20err%20%3A%3D%20innerFlow.Exec(ctx%2C%20prepResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20action%2C%20err%20%3A%3D%20innerFlow.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20flyt.DefaultAction%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0AUsing%20flows%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Lightweight%20flow%20-%20good%20as%20node%0Afunc%20createLightweightFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simple%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20transform(prepResult)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%0A%2F%2F%20Heavy%20flow%20-%20consider%20alternatives%0Afunc%20createHeavyFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Many%20nodes%2C%20complex%20logic%0A%20%20%20%20%2F%2F%20Consider%20breaking%20into%20smaller%20flows%0A%20%20%20%20%2F%2F%20or%20using%20batch%20processing%0A%7D%0A%0A%2F%2F%20Alternative%3A%20Use%20node%20with%20embedded%20logic%0Afunc%20createOptimizedNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20the%20flow%20logic%20for%20performance%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20step1(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step2(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step3(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Flows%20used%20as%20nodes%20should%20have%20clear%2C%20single%20purposes%0A2.%20**Document%20Behavior**%3A%20Clearly%20document%20what%20the%20flow%20expects%20and%20returns%0A3.%20**Test%20Thoroughly**%3A%20Test%20flows%20both%20standalone%20and%20as%20nodes%0A4.%20**Consider%20Performance**%3A%20Be%20mindful%20of%20overhead%20when%20nesting%20many%20flows%0A5.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20to%20indicate%20they're%20used%20as%20nodes%0A6.%20**Handle%20Errors**%3A%20Ensure%20proper%20error%20propagation%20through%20nested%20flows%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Complex%20flow%20composition%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Node%20interface%20details%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./flow-as-node-wbaZ4Yf8.js"),[]),path:"/advanced/flow-as-node.html",type:"mdx",filePath:"advanced/flow-as-node.mdx",content:"%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%2C%20allowing%20them%20to%20be%20used%20anywhere%20a%20node%20is%20expected.%20This%20enables%20powerful%20composition%20patterns.%0A%0A%23%23%20The%20Node%20Interface%0A%0AFlows%20implement%20all%20Node%20methods%3A%0A%0A%60%60%60go%0Atype%20Node%20interface%20%7B%0A%20%20%20%20Prep(ctx%20context.Context%2C%20shared%20*SharedStore)%20(any%2C%20error)%0A%20%20%20%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%0A%20%20%20%20Post(ctx%20context.Context%2C%20shared%20*SharedStore%2C%20prepResult%2C%20execResult%20any)%20(Action%2C%20error)%0A%7D%0A%0A%2F%2F%20Flow%20implements%20Node%0Avar%20_%20Node%20%3D%20(*Flow)(nil)%0A%60%60%60%0A%0A%23%23%20Basic%20Usage%0A%0AUse%20a%20flow%20wherever%20a%20node%20is%20expected%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20reusable%20flow%0AprocessingFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AprocessingFlow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0AprocessingFlow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0A%0A%2F%2F%20Use%20the%20flow%20as%20a%20node%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processingFlow)%20%2F%2F%20Flow%20used%20as%20node%0AmainFlow.Connect(processingFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Lifecycle%20as%20Node%0A%0AUnderstanding%20how%20flows%20behave%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20When%20a%20flow%20is%20used%20as%20a%20node%3A%0A%2F%2F%201.%20Prep%3A%20Prepares%20the%20flow's%20start%20node%0A%2F%2F%202.%20Exec%3A%20Runs%20the%20entire%20flow%0A%2F%2F%203.%20Post%3A%20Returns%20the%20final%20action%20from%20the%20flow%0A%0Afunc%20demonstrateFlowLifecycle()%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20subFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20When%20mainFlow%20executes%20subFlow%3A%0A%20%20%20%20%2F%2F%20-%20subFlow.Prep()%20calls%20startNode.Prep()%0A%20%20%20%20%2F%2F%20-%20subFlow.Exec()%20runs%20the%20entire%20sub-flow%0A%20%20%20%20%2F%2F%20-%20subFlow.Post()%20returns%20the%20final%20action%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(initNode)%0A%20%20%20%20mainFlow.Connect(initNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%7D%0A%60%60%60%0A%0A%23%23%20Composable%20Workflows%0A%0ABuild%20complex%20workflows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%201%3A%20Basic%20operations%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaNode%20%3A%3D%20createSchemaValidationNode()%0A%20%20%20%20businessNode%20%3A%3D%20createBusinessValidationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaNode)%0A%20%20%20%20flow.Connect(schemaNode%2C%20%22valid%22%2C%20businessNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createEnrichmentFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetchNode%20%3A%3D%20createDataFetchNode()%0A%20%20%20%20mergeNode%20%3A%3D%20createDataMergeNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Combine%20basic%20flows%0Afunc%20createProcessingPipeline()%20*flyt.Flow%20%7B%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20enrichment%20%3A%3D%20createEnrichmentFlow()%0A%20%20%20%20%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(validation)%0A%20%20%20%20pipeline.Connect(validation%2C%20flyt.DefaultAction%2C%20enrichment)%0A%20%20%20%20return%20pipeline%0A%7D%0A%0A%2F%2F%20Level%203%3A%20Use%20in%20application%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20pipeline%20%3A%3D%20createProcessingPipeline()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20app%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20app.Connect(auth%2C%20flyt.DefaultAction%2C%20pipeline)%0A%20%20%20%20app.Connect(pipeline%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20return%20app%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Selection%0A%0AChoose%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Atype%20FlowSelector%20struct%20%7B%0A%20%20%20%20flows%20map%5Bstring%5D*flyt.Flow%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20CreateSelectorNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flowType%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flowType%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0Afunc%20(fs%20*FlowSelector)%20BuildDynamicFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20selector%20%3A%3D%20fs.CreateSelectorNode()%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(selector)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20different%20flows%20based%20on%20selection%0A%20%20%20%20for%20name%2C%20flow%20%3A%3D%20range%20fs.flows%20%7B%0A%20%20%20%20%20%20%20%20mainFlow.Connect(selector%2C%20flyt.Action(name)%2C%20flow)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%0A%2F%2F%20Usage%0Aselector%20%3A%3D%20%26FlowSelector%7B%0A%20%20%20%20flows%3A%20map%5Bstring%5D*flyt.Flow%7B%0A%20%20%20%20%20%20%20%20%22simple%22%3A%20%20createSimpleFlow()%2C%0A%20%20%20%20%20%20%20%20%22complex%22%3A%20createComplexFlow()%2C%0A%20%20%20%20%20%20%20%20%22custom%22%3A%20%20createCustomFlow()%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0AdynamicFlow%20%3A%3D%20selector.BuildDynamicFlow()%0A%60%60%60%0A%0A%23%23%20Flow%20Factories%0A%0ACreate%20flows%20on%20demand%3A%0A%0A%60%60%60go%0Atype%20FlowFactory%20interface%20%7B%0A%20%20%20%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%0A%7D%0A%0Atype%20ProcessingFlowFactory%20struct%7B%7D%0A%0Afunc%20(f%20*ProcessingFlowFactory)%20CreateFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20based%20on%20configuration%0A%20%20%20%20var%20nodes%20%5B%5Dflyt.Node%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20nodeConfig%20%3A%3D%20range%20config.Nodes%20%7B%0A%20%20%20%20%20%20%20%20node%20%3A%3D%20createNodeFromConfig(nodeConfig)%0A%20%20%20%20%20%20%20%20nodes%20%3D%20append(nodes%2C%20node)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(nodes%5B0%5D)%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(nodes)-1%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20flow.Connect(nodes%5Bi%5D%2C%20flyt.DefaultAction%2C%20nodes%5Bi%2B1%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20factory-created%20flows%20as%20nodes%0Afunc%20createDynamicPipeline(factory%20FlowFactory%2C%20configs%20%5B%5DFlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20pipeline%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20previous%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20config%20%3A%3D%20range%20configs%20%7B%0A%20%20%20%20%20%20%20%20flow%20%3A%3D%20factory.CreateFlow(config)%0A%20%20%20%20%20%20%20%20pipeline.Connect(previous%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20%20%20%20%20previous%20%3D%20flow%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20pipeline%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flow%20Patterns%0A%0AFlows%20containing%20themselves%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveProcessingFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20var%20flow%20*flyt.Flow%0A%20%20%20%20%0A%20%20%20%20depthCheck%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20shared.GetInt(%22recursion_depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22terminate%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22recurse%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22recurse%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22recursion_depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3D%20flyt.NewFlow(depthCheck)%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22recurse%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20reference%0A%20%20%20%20flow.Connect(depthCheck%2C%20%22terminate%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Flow%20Middleware%0A%0AWrap%20flows%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20flow%20*flyt.Flow)%20*flyt.Flow%20%7B%0A%20%20%20%20logStart%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20starting%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20logEnd%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Flow%20completed%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20wrapped%20%3A%3D%20flyt.NewFlow(logStart)%0A%20%20%20%20wrapped.Connect(logStart%2C%20flyt.DefaultAction%2C%20flow)%0A%20%20%20%20wrapped.Connect(flow%2C%20flyt.DefaultAction%2C%20logEnd)%0A%20%20%20%20%0A%20%20%20%20return%20wrapped%0A%7D%0A%0A%2F%2F%20Usage%0AprocessFlow%20%3A%3D%20createProcessingFlow()%0AloggedFlow%20%3A%3D%20withLogging(%22ProcessingPipeline%22%2C%20processFlow)%0A%60%60%60%0A%0A%23%23%20Testing%20Flows%20as%20Nodes%0A%0ATest%20flow%20behavior%20when%20used%20as%20nodes%3A%0A%0A%60%60%60go%0Afunc%20TestFlowAsNode(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20simple%20flow%0A%20%20%20%20innerFlow%20%3A%3D%20flyt.NewFlow(%0A%20%20%20%20%20%20%20%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22inner_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20the%20flow%20directly%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Call%20flow%20methods%20as%20if%20it%20were%20a%20node%0A%20%20%20%20prepResult%2C%20err%20%3A%3D%20innerFlow.Prep(ctx%2C%20shared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20execResult%2C%20err%20%3A%3D%20innerFlow.Exec(ctx%2C%20prepResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20action%2C%20err%20%3A%3D%20innerFlow.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20assert.Equal(t%2C%20flyt.DefaultAction%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Performance%20Considerations%0A%0AUsing%20flows%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Lightweight%20flow%20-%20good%20as%20node%0Afunc%20createLightweightFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simple%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20transform(prepResult)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%0A%2F%2F%20Heavy%20flow%20-%20consider%20alternatives%0Afunc%20createHeavyFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Many%20nodes%2C%20complex%20logic%0A%20%20%20%20%2F%2F%20Consider%20breaking%20into%20smaller%20flows%0A%20%20%20%20%2F%2F%20or%20using%20batch%20processing%0A%7D%0A%0A%2F%2F%20Alternative%3A%20Use%20node%20with%20embedded%20logic%0Afunc%20createOptimizedNode()%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Inline%20the%20flow%20logic%20for%20performance%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20step1(prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step2(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20step3(result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Flows%20used%20as%20nodes%20should%20have%20clear%2C%20single%20purposes%0A2.%20**Document%20Behavior**%3A%20Clearly%20document%20what%20the%20flow%20expects%20and%20returns%0A3.%20**Test%20Thoroughly**%3A%20Test%20flows%20both%20standalone%20and%20as%20nodes%0A4.%20**Consider%20Performance**%3A%20Be%20mindful%20of%20overhead%20when%20nesting%20many%20flows%0A5.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20to%20indicate%20they're%20used%20as%20nodes%0A6.%20**Handle%20Errors**%3A%20Ensure%20proper%20error%20propagation%20through%20nested%20flows%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Complex%20flow%20composition%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Node%20interface%20details%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./nested-flows-CRWeUsmy.js"),[]),path:"/advanced/nested-flows",type:"mdx",filePath:"advanced/nested-flows.mdx",content:"%23%20Nested%20Flows%0A%0ACompose%20complex%20workflows%20by%20nesting%20flows%20within%20flows%2C%20creating%20modular%20and%20reusable%20workflow%20components.%0A%0A%23%23%20Basic%20Nested%20Flow%0A%0AUse%20a%20flow%20as%20a%20node%20in%20another%20flow%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%20for%20validation%0AvalidationFlow%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaCheckNode()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessRulesNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22invalid%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D()%0A%0A%2F%2F%20Use%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validationFlow)%0AmainFlow.Connect(validationFlow%2C%20flyt.DefaultAction%2C%20processNode)%0A%60%60%60%0A%0A%23%23%20Reusable%20Flow%20Components%0A%0ACreate%20modular%20flow%20components%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20authentication%20flow%0Afunc%20createAuthFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20validateToken(token)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20refreshToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20refreshAuthToken()%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22expired%22%2C%20refreshToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22valid%22%2C%20nil)%0A%20%20%20%20flow.Connect(refreshToken%2C%20flyt.DefaultAction%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AapiFlow%20%3A%3D%20flyt.NewFlow(startNode)%0AapiFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%0AadminFlow%20%3A%3D%20flyt.NewFlow(adminNode)%0AadminFlow.Connect(adminNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%60%60%60%0A%0A%23%23%20Hierarchical%20Workflows%0A%0ABuild%20multi-level%20workflow%20hierarchies%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%203%3A%20Atomic%20operations%0Afunc%20createDatabaseOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20connect%20%3A%3D%20createConnectNode()%0A%20%20%20%20query%20%3A%3D%20createQueryNode()%0A%20%20%20%20disconnect%20%3A%3D%20createDisconnectNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(connect)%0A%20%20%20%20flow.Connect(connect%2C%20flyt.DefaultAction%2C%20query)%0A%20%20%20%20flow.Connect(query%2C%20flyt.DefaultAction%2C%20disconnect)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Business%20operations%0Afunc%20createUserOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20validate%20%3A%3D%20createValidateUserNode()%0A%20%20%20%20dbOp%20%3A%3D%20createDatabaseOperation()%0A%20%20%20%20notify%20%3A%3D%20createNotificationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(validate)%0A%20%20%20%20flow.Connect(validate%2C%20%22valid%22%2C%20dbOp)%0A%20%20%20%20flow.Connect(dbOp%2C%20flyt.DefaultAction%2C%20notify)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%201%3A%20Application%20flow%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20userOp%20%3A%3D%20createUserOperation()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20flow.Connect(auth%2C%20flyt.DefaultAction%2C%20userOp)%0A%20%20%20%20flow.Connect(userOp%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Nesting%0A%0ADynamically%20choose%20nested%20flows%3A%0A%0A%60%60%60go%0ArouterNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20request%20%3A%3D%20prepResult.(Request)%0A%20%20%20%20%20%20%20%20return%20request.Type%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0AmainFlow%20%3A%3D%20flyt.NewFlow(routerNode)%0AmainFlow.Connect(routerNode%2C%20%22user%22%2C%20createUserFlow())%0AmainFlow.Connect(routerNode%2C%20%22admin%22%2C%20createAdminFlow())%0AmainFlow.Connect(routerNode%2C%20%22api%22%2C%20createAPIFlow())%0A%60%60%60%0A%0A%23%23%20Shared%20Context%20in%20Nested%20Flows%0A%0APass%20context%20through%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createNestedFlowWithContext(parentContext%20map%5Bstring%5Dany)%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Access%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20parentContext%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(k%2C%20v)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20data%20from%20parent%20flow%0A%20%20%20%20%20%20%20%20%20%20%20%20parentData%20%3A%3D%20shared.GetMap(%22parent_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20parentData%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20with%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithContext(prepResult%2C%20parentContext)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Propagation%0A%0AHandle%20errors%20across%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createErrorHandlingFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandlerNode()%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20successNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Error%20handler%20can%20retry%20or%20recover%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22retry%22%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22abort%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flows%0A%0ACreate%20recursive%20workflow%20patterns%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20checkDepth%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20shared.GetInt(%22depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_depth%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22continue%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkDepth)%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22continue%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20connection%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22max_depth%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Parallel%20Nested%20Flows%0A%0AExecute%20nested%20flows%20in%20parallel%3A%0A%0A%60%60%60go%0Afunc%20createParallelNestedFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20splitNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Split%20data%20for%20parallel%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(Data)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part1%22%2C%20data.Part1)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part2%22%2C%20data.Part2)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20parallel%20sub-flows%0A%20%20%20%20flow1%20%3A%3D%20createProcessingFlow1()%0A%20%20%20%20flow2%20%3A%3D%20createProcessingFlow2()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Merge%20results%0A%20%20%20%20mergeNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result1%20%3A%3D%20shared.GetMap(%22result1%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20result2%20%3A%3D%20shared.GetMap(%22result2%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result1%22%3A%20result1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result2%22%3A%20result2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20with%20parallel%20execution%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20flows%20execute%20after%20split%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow1%22%2C%20flow1)%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow2%22%2C%20flow2)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20must%20complete%20before%20merge%0A%20%20%20%20mainFlow.Connect(flow1%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20mainFlow.Connect(flow2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Composition%0A%0ABuild%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createDynamicFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20startNode%20%3A%3D%20createStartNode()%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20%0A%20%20%20%20previousNode%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20step%20%3A%3D%20range%20config.Steps%20%7B%0A%20%20%20%20%20%20%20%20var%20stepFlow%20*flyt.Flow%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20step.Type%20%7B%0A%20%20%20%20%20%20%20%20case%20%22validate%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createValidationFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22process%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createProcessingFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22save%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createSaveFlow(step.Config)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20stepFlow%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flow.Connect(previousNode%2C%20flyt.DefaultAction%2C%20stepFlow)%0A%20%20%20%20%20%20%20%20%20%20%20%20previousNode%20%3D%20stepFlow%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%20Nested%20Flows%0A%0ATest%20nested%20flows%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestNestedFlow(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Test%20sub-flow%20independently%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20subShared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20subShared.Set(%22test_input%22%2C%20%22data%22)%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20subFlow.Run(context.Background()%2C%20subShared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20main%20flow%20with%20mocked%20sub-flow%0A%20%20%20%20mockSubFlow%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22mocked_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20mockSubFlow)%0A%20%20%20%20%0A%20%20%20%20err%20%3D%20mainFlow.Run(context.Background()%2C%20flyt.NewSharedStore())%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Each%20flow%20should%20have%20a%20single%2C%20clear%20purpose%0A2.%20**Minimize%20Coupling**%3A%20Flows%20should%20communicate%20through%20well-defined%20interfaces%0A3.%20**Document%20Dependencies**%3A%20Clearly%20document%20what%20each%20nested%20flow%20expects%0A4.%20**Test%20in%20Isolation**%3A%20Test%20nested%20flows%20independently%0A5.%20**Avoid%20Deep%20Nesting**%3A%20Too%20many%20levels%20make%20debugging%20difficult%0A6.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20based%20on%20their%20business%20function%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlow%20as%20Node%5D(%2Fadvanced%2Fflow-as-node)%20-%20Flows%20implementing%20Node%20interface%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Running%20flows%20in%20batches%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./nested-flows-CRWeUsmy.js"),[]),path:"/advanced/nested-flows.html",type:"mdx",filePath:"advanced/nested-flows.mdx",content:"%23%20Nested%20Flows%0A%0ACompose%20complex%20workflows%20by%20nesting%20flows%20within%20flows%2C%20creating%20modular%20and%20reusable%20workflow%20components.%0A%0A%23%23%20Basic%20Nested%20Flow%0A%0AUse%20a%20flow%20as%20a%20node%20in%20another%20flow%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%20for%20validation%0AvalidationFlow%20%3A%3D%20func()%20*flyt.Flow%20%7B%0A%20%20%20%20schemaCheck%20%3A%3D%20createSchemaCheckNode()%0A%20%20%20%20businessRules%20%3A%3D%20createBusinessRulesNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(schemaCheck)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22valid%22%2C%20businessRules)%0A%20%20%20%20flow.Connect(schemaCheck%2C%20%22invalid%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D()%0A%0A%2F%2F%20Use%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validationFlow)%0AmainFlow.Connect(validationFlow%2C%20flyt.DefaultAction%2C%20processNode)%0A%60%60%60%0A%0A%23%23%20Reusable%20Flow%20Components%0A%0ACreate%20modular%20flow%20components%3A%0A%0A%60%60%60go%0A%2F%2F%20Reusable%20authentication%20flow%0Afunc%20createAuthFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20token%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20validateToken(token)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20refreshToken%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20refreshAuthToken()%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22expired%22%2C%20refreshToken)%0A%20%20%20%20flow.Connect(checkToken%2C%20%22valid%22%2C%20nil)%0A%20%20%20%20flow.Connect(refreshToken%2C%20flyt.DefaultAction%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Use%20in%20multiple%20places%0AapiFlow%20%3A%3D%20flyt.NewFlow(startNode)%0AapiFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%0AadminFlow%20%3A%3D%20flyt.NewFlow(adminNode)%0AadminFlow.Connect(adminNode%2C%20flyt.DefaultAction%2C%20createAuthFlow())%0A%60%60%60%0A%0A%23%23%20Hierarchical%20Workflows%0A%0ABuild%20multi-level%20workflow%20hierarchies%3A%0A%0A%60%60%60go%0A%2F%2F%20Level%203%3A%20Atomic%20operations%0Afunc%20createDatabaseOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20connect%20%3A%3D%20createConnectNode()%0A%20%20%20%20query%20%3A%3D%20createQueryNode()%0A%20%20%20%20disconnect%20%3A%3D%20createDisconnectNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(connect)%0A%20%20%20%20flow.Connect(connect%2C%20flyt.DefaultAction%2C%20query)%0A%20%20%20%20flow.Connect(query%2C%20flyt.DefaultAction%2C%20disconnect)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%202%3A%20Business%20operations%0Afunc%20createUserOperation()%20*flyt.Flow%20%7B%0A%20%20%20%20validate%20%3A%3D%20createValidateUserNode()%0A%20%20%20%20dbOp%20%3A%3D%20createDatabaseOperation()%0A%20%20%20%20notify%20%3A%3D%20createNotificationNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(validate)%0A%20%20%20%20flow.Connect(validate%2C%20%22valid%22%2C%20dbOp)%0A%20%20%20%20flow.Connect(dbOp%2C%20flyt.DefaultAction%2C%20notify)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%0A%2F%2F%20Level%201%3A%20Application%20flow%0Afunc%20createApplicationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20auth%20%3A%3D%20createAuthFlow()%0A%20%20%20%20userOp%20%3A%3D%20createUserOperation()%0A%20%20%20%20audit%20%3A%3D%20createAuditFlow()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(auth)%0A%20%20%20%20flow.Connect(auth%2C%20flyt.DefaultAction%2C%20userOp)%0A%20%20%20%20flow.Connect(userOp%2C%20flyt.DefaultAction%2C%20audit)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Nesting%0A%0ADynamically%20choose%20nested%20flows%3A%0A%0A%60%60%60go%0ArouterNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20request%20%3A%3D%20prepResult.(Request)%0A%20%20%20%20%20%20%20%20return%20request.Type%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%2C%0A)%0A%0AmainFlow%20%3A%3D%20flyt.NewFlow(routerNode)%0AmainFlow.Connect(routerNode%2C%20%22user%22%2C%20createUserFlow())%0AmainFlow.Connect(routerNode%2C%20%22admin%22%2C%20createAdminFlow())%0AmainFlow.Connect(routerNode%2C%20%22api%22%2C%20createAPIFlow())%0A%60%60%60%0A%0A%23%23%20Shared%20Context%20in%20Nested%20Flows%0A%0APass%20context%20through%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createNestedFlowWithContext(parentContext%20map%5Bstring%5Dany)%20*flyt.Flow%20%7B%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Access%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20parentContext%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(k%2C%20v)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Get%20data%20from%20parent%20flow%0A%20%20%20%20%20%20%20%20%20%20%20%20parentData%20%3A%3D%20shared.GetMap(%22parent_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20parentData%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20with%20parent%20context%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithContext(prepResult%2C%20parentContext)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.NewFlow(node)%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Propagation%0A%0AHandle%20errors%20across%20nested%20flows%3A%0A%0A%60%60%60go%0Afunc%20createErrorHandlingFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20errorHandler%20%3A%3D%20createErrorHandlerNode()%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20%22error%22%2C%20errorHandler)%0A%20%20%20%20mainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20successNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Error%20handler%20can%20retry%20or%20recover%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22retry%22%2C%20subFlow)%0A%20%20%20%20mainFlow.Connect(errorHandler%2C%20%22abort%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Recursive%20Flows%0A%0ACreate%20recursive%20workflow%20patterns%3A%0A%0A%60%60%60go%0Afunc%20createRecursiveFlow(maxDepth%20int)%20*flyt.Flow%20%7B%0A%20%20%20%20checkDepth%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20shared.GetInt(%22depth%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20depth%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20depth%20%3E%3D%20maxDepth%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_depth%22%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20execResult.(string)%20%3D%3D%20%22continue%22%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20depth%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22depth%22%2C%20depth%2B1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20processNode%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkDepth)%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22continue%22%2C%20processNode)%0A%20%20%20%20flow.Connect(processNode%2C%20flyt.DefaultAction%2C%20flow)%20%2F%2F%20Recursive%20connection%0A%20%20%20%20flow.Connect(checkDepth%2C%20%22max_depth%22%2C%20nil)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Parallel%20Nested%20Flows%0A%0AExecute%20nested%20flows%20in%20parallel%3A%0A%0A%60%60%60go%0Afunc%20createParallelNestedFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20splitNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Split%20data%20for%20parallel%20processing%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(Data)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part1%22%2C%20data.Part1)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22part2%22%2C%20data.Part2)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20parallel%20sub-flows%0A%20%20%20%20flow1%20%3A%3D%20createProcessingFlow1()%0A%20%20%20%20flow2%20%3A%3D%20createProcessingFlow2()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Merge%20results%0A%20%20%20%20mergeNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result1%20%3A%3D%20shared.GetMap(%22result1%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20result2%20%3A%3D%20shared.GetMap(%22result2%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result1%22%3A%20result1%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22result2%22%3A%20result2%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Connect%20with%20parallel%20execution%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20flows%20execute%20after%20split%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow1%22%2C%20flow1)%0A%20%20%20%20mainFlow.Connect(splitNode%2C%20%22flow2%22%2C%20flow2)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Both%20must%20complete%20before%20merge%0A%20%20%20%20mainFlow.Connect(flow1%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20mainFlow.Connect(flow2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%20%20%20%20%0A%20%20%20%20return%20mainFlow%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Flow%20Composition%0A%0ABuild%20flows%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createDynamicFlow(config%20FlowConfig)%20*flyt.Flow%20%7B%0A%20%20%20%20startNode%20%3A%3D%20createStartNode()%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20%0A%20%20%20%20previousNode%20%3A%3D%20flyt.Node(startNode)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20step%20%3A%3D%20range%20config.Steps%20%7B%0A%20%20%20%20%20%20%20%20var%20stepFlow%20*flyt.Flow%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20step.Type%20%7B%0A%20%20%20%20%20%20%20%20case%20%22validate%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createValidationFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22process%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createProcessingFlow(step.Config)%0A%20%20%20%20%20%20%20%20case%20%22save%22%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20stepFlow%20%3D%20createSaveFlow(step.Config)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20stepFlow%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flow.Connect(previousNode%2C%20flyt.DefaultAction%2C%20stepFlow)%0A%20%20%20%20%20%20%20%20%20%20%20%20previousNode%20%3D%20stepFlow%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Testing%20Nested%20Flows%0A%0ATest%20nested%20flows%20in%20isolation%3A%0A%0A%60%60%60go%0Afunc%20TestNestedFlow(t%20*testing.T)%20%7B%0A%20%20%20%20%2F%2F%20Test%20sub-flow%20independently%0A%20%20%20%20subFlow%20%3A%3D%20createSubFlow()%0A%20%20%20%20subShared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20subShared.Set(%22test_input%22%2C%20%22data%22)%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20subFlow.Run(context.Background()%2C%20subShared)%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Test%20main%20flow%20with%20mocked%20sub-flow%0A%20%20%20%20mockSubFlow%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22mocked_result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20mainFlow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20mainFlow.Connect(startNode%2C%20flyt.DefaultAction%2C%20mockSubFlow)%0A%20%20%20%20%0A%20%20%20%20err%20%3D%20mainFlow.Run(context.Background()%2C%20flyt.NewSharedStore())%0A%20%20%20%20assert.NoError(t%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Flows%20Focused**%3A%20Each%20flow%20should%20have%20a%20single%2C%20clear%20purpose%0A2.%20**Minimize%20Coupling**%3A%20Flows%20should%20communicate%20through%20well-defined%20interfaces%0A3.%20**Document%20Dependencies**%3A%20Clearly%20document%20what%20each%20nested%20flow%20expects%0A4.%20**Test%20in%20Isolation**%3A%20Test%20nested%20flows%20independently%0A5.%20**Avoid%20Deep%20Nesting**%3A%20Too%20many%20levels%20make%20debugging%20difficult%0A6.%20**Use%20Meaningful%20Names**%3A%20Name%20flows%20based%20on%20their%20business%20function%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlow%20as%20Node%5D(%2Fadvanced%2Fflow-as-node)%20-%20Flows%20implementing%20Node%20interface%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Running%20flows%20in%20batches%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Flow%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./utilities-avqiVZPj.js"),[]),path:"/advanced/utilities",type:"mdx",filePath:"advanced/utilities.mdx",content:"%23%20Utilities%0A%0AHelper%20functions%20and%20utilities%20to%20simplify%20common%20tasks%20in%20Flyt%20workflows.%0A%0A%23%23%20ToSlice%0A%0AConvert%20various%20types%20to%20slices%20for%20batch%20processing%3A%0A%0A%60%60%60go%0A%2F%2F%20Convert%20different%20types%20to%20%5B%5Dany%0AstringSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dstring%7B%22a%22%2C%20%22b%22%2C%20%22c%22%7D)%0AintSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dint%7B1%2C%202%2C%203%7D)%0AsingleItem%20%3A%3D%20flyt.ToSlice(%22single%20item%22)%20%2F%2F%20Returns%20%5B%5Dany%7B%22single%20item%22%7D%0AnilValue%20%3A%3D%20flyt.ToSlice(nil)%20%2F%2F%20Returns%20empty%20%5B%5Dany%7B%7D%0A%0A%2F%2F%20Useful%20for%20batch%20processing%0Ashared.Set(%22items%22%2C%20flyt.ToSlice(data))%0A%60%60%60%0A%0A%23%23%23%20Implementation%20Details%0A%0A%60%60%60go%0Afunc%20ToSlice(v%20any)%20%5B%5Dany%20%7B%0A%20%20%20%20if%20v%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rv%20%3A%3D%20reflect.ValueOf(v)%0A%20%20%20%20if%20rv.Kind()%20%3D%3D%20reflect.Slice%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dany%2C%20rv.Len())%0A%20%20%20%20%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20rv.Len()%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20rv.Index(i).Interface()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Single%20item%0A%20%20%20%20return%20%5B%5Dany%7Bv%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Custom%20Utility%20Functions%0A%0ACreate%20your%20own%20utilities%3A%0A%0A%23%23%23%20Retry%20Helper%0A%0A%60%60%60go%0Afunc%20RetryOperation(operation%20func()%20error%2C%20maxRetries%20int%2C%20backoff%20time.Duration)%20error%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxRetries%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20operation()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20i%20%3C%20maxRetries-1%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(backoff%20*%20time.Duration(i%2B1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22operation%20failed%20after%20%25d%20retries%3A%20%25w%22%2C%20maxRetries%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20in%20node%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20result%20any%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20RetryOperation(func()%20error%20%7B%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20callAPI(prepResult)%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%2C%203%2C%20time.Second)%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Parallel%20Map%0A%0A%60%60%60go%0Afunc%20ParallelMap%5BT%20any%2C%20R%20any%5D(items%20%5B%5DT%2C%20fn%20func(T)%20R%2C%20workers%20int)%20%5B%5DR%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DR%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20semaphore%20%3A%3D%20make(chan%20struct%7B%7D%2C%20workers)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20data%20T)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20semaphore%20%3C-%20struct%7B%7D%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20func()%20%7B%20%3C-semaphore%20%7D()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20fn(data)%0A%20%20%20%20%20%20%20%20%7D(i%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0A%2F%2F%20Usage%0Aresults%20%3A%3D%20ParallelMap(items%2C%20processItem%2C%2010)%0A%60%60%60%0A%0A%23%23%23%20Type-Safe%20Getters%0A%0AFlyt%20provides%20built-in%20type-safe%20getters%3A%0A%0A%60%60%60go%0A%2F%2F%20Built-in%20type-safe%20getters%0AuserID%20%3A%3D%20shared.GetInt(%22user_id%22)%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%200%20if%20not%20found%0Aname%20%3A%3D%20shared.GetString(%22name%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20%22%22%20if%20not%20found%0Aenabled%20%3A%3D%20shared.GetBool(%22enabled%22)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20false%20if%20not%20found%0A%0A%2F%2F%20With%20custom%20defaults%0AuserID%20%3D%20shared.GetIntOr(%22user_id%22%2C%20-1)%0Aname%20%3D%20shared.GetStringOr(%22name%22%2C%20%22anonymous%22)%0Aenabled%20%3D%20shared.GetBoolOr(%22enabled%22%2C%20true)%0A%0A%2F%2F%20For%20complex%20types%2C%20use%20Bind%0Avar%20config%20Config%0Aerr%20%3A%3D%20shared.Bind(%22config%22%2C%20%26config)%0A%60%60%60%0A%0A%23%23%23%20Chunk%20Slice%0A%0A%60%60%60go%0Afunc%20ChunkSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20chunkSize%20int)%20%5B%5D%5B%5DT%20%7B%0A%20%20%20%20var%20chunks%20%5B%5D%5B%5DT%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(slice)%3B%20i%20%2B%3D%20chunkSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20i%20%2B%20chunkSize%0A%20%20%20%20%20%20%20%20if%20end%20%3E%20len(slice)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20len(slice)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20chunks%20%3D%20append(chunks%2C%20slice%5Bi%3Aend%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20chunks%0A%7D%0A%0A%2F%2F%20Usage%20in%20batch%20processing%0Achunks%20%3A%3D%20ChunkSlice(items%2C%20100)%0Afor%20_%2C%20chunk%20%3A%3D%20range%20chunks%20%7B%0A%20%20%20%20processChunk(chunk)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%20Maps%0A%0A%60%60%60go%0Afunc%20MergeMaps(maps%20...map%5Bstring%5Dany)%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20result%20%3A%3D%20make(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20m%20%3A%3D%20range%20maps%20%7B%0A%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20m%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Aconfig%20%3A%3D%20MergeMaps(defaultConfig%2C%20userConfig%2C%20overrides)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Slice%0A%0A%60%60%60go%0Afunc%20FilterSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20predicate%20func(T)%20bool)%20%5B%5DT%20%7B%0A%20%20%20%20result%20%3A%3D%20make(%5B%5DT%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20if%20predicate(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20append(result%2C%20item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0AvalidItems%20%3A%3D%20FilterSlice(items%2C%20func(item%20Item)%20bool%20%7B%0A%20%20%20%20return%20item.IsValid()%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Wrapper%0A%0A%60%60%60go%0Afunc%20WithTimeout%5BT%20any%5D(ctx%20context.Context%2C%20timeout%20time.Duration%2C%20fn%20func(context.Context)%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20timeout)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20type%20result%20struct%20%7B%0A%20%20%20%20%20%20%20%20value%20T%0A%20%20%20%20%20%20%20%20err%20%20%20error%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20done%20%3A%3D%20make(chan%20result%2C%201)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20value%2C%20err%20%3A%3D%20fn(ctx)%0A%20%20%20%20%20%20%20%20done%20%3C-%20result%7Bvalue%2C%20err%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20res%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20res.value%2C%20res.err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20var%20zero%20T%0A%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aresult%2C%20err%20%3A%3D%20WithTimeout(ctx%2C%205*time.Second%2C%20func(ctx%20context.Context)%20(string%2C%20error)%20%7B%0A%20%20%20%20return%20fetchData(ctx)%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Builder%0A%0A%60%60%60go%0Atype%20Pipeline%5BT%20any%5D%20struct%20%7B%0A%20%20%20%20stages%20%5B%5Dfunc(T)%20T%0A%7D%0A%0Afunc%20NewPipeline%5BT%20any%5D()%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20return%20%26Pipeline%5BT%5D%7B%0A%20%20%20%20%20%20%20%20stages%3A%20make(%5B%5Dfunc(T)%20T%2C%200)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Add(stage%20func(T)%20T)%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20p.stages%20%3D%20append(p.stages%2C%20stage)%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Execute(input%20T)%20T%20%7B%0A%20%20%20%20result%20%3A%3D%20input%0A%20%20%20%20for%20_%2C%20stage%20%3A%3D%20range%20p.stages%20%7B%0A%20%20%20%20%20%20%20%20result%20%3D%20stage(result)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Apipeline%20%3A%3D%20NewPipeline%5Bstring%5D().%0A%20%20%20%20Add(strings.TrimSpace).%0A%20%20%20%20Add(strings.ToLower).%0A%20%20%20%20Add(func(s%20string)%20string%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.ReplaceAll(s%2C%20%22%20%22%2C%20%22_%22)%0A%20%20%20%20%7D)%0A%0Aresult%20%3A%3D%20pipeline.Execute(%22%20%20Hello%20World%20%20%22)%0A%2F%2F%20Result%3A%20%22hello_world%22%0A%60%60%60%0A%0A%23%23%23%20Error%20Aggregator%0A%0A%60%60%60go%0Atype%20ErrorAggregator%20struct%20%7B%0A%20%20%20%20errors%20%5B%5Derror%0A%20%20%20%20mu%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Add(err%20error)%20%7B%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20e.errors%20%3D%20append(e.errors%2C%20err)%0A%20%20%20%20e.mu.Unlock()%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Error()%20error%20%7B%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20defer%20e.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%201%20%7B%0A%20%20%20%20%20%20%20%20return%20e.errors%5B0%5D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22multiple%20errors%20(%25d)%3A%20%25v%22%2C%20len(e.errors)%2C%20e.errors)%0A%7D%0A%0A%2F%2F%20Usage%0Aaggregator%20%3A%3D%20%26ErrorAggregator%7B%7D%0A%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20processItem(item)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20aggregator.Add(err)%0A%20%20%20%20%7D%0A%7D%0A%0Aif%20err%20%3A%3D%20aggregator.Error()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20Values%20Helper%0A%0A%60%60%60go%0Atype%20ContextKey%20string%0A%0Aconst%20(%0A%20%20%20%20RequestIDKey%20ContextKey%20%3D%20%22request_id%22%0A%20%20%20%20UserIDKey%20%20%20%20ContextKey%20%3D%20%22user_id%22%0A)%0A%0Afunc%20WithRequestID(ctx%20context.Context%2C%20requestID%20string)%20context.Context%20%7B%0A%20%20%20%20return%20context.WithValue(ctx%2C%20RequestIDKey%2C%20requestID)%0A%7D%0A%0Afunc%20GetRequestID(ctx%20context.Context)%20(string%2C%20bool)%20%7B%0A%20%20%20%20id%2C%20ok%20%3A%3D%20ctx.Value(RequestIDKey).(string)%0A%20%20%20%20return%20id%2C%20ok%0A%7D%0A%0A%2F%2F%20Usage%20in%20nodes%0Afunc%20(n%20*LoggingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20requestID%2C%20_%20%3A%3D%20GetRequestID(ctx)%0A%20%20%20%20log.Printf(%22%5B%25s%5D%20Processing%3A%20%25v%22%2C%20requestID%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20return%20process(prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Debounce%20Function%0A%0A%60%60%60go%0Afunc%20Debounce(fn%20func()%2C%20delay%20time.Duration)%20func()%20%7B%0A%20%20%20%20var%20timer%20*time.Timer%0A%20%20%20%20var%20mu%20sync.Mutex%0A%20%20%20%20%0A%20%20%20%20return%20func()%20%7B%0A%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20defer%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20timer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20timer.Stop()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20timer%20%3D%20time.AfterFunc(delay%2C%20fn)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0AsaveDebounced%20%3A%3D%20Debounce(func()%20%7B%0A%20%20%20%20saveToDatabase()%0A%7D%2C%205*time.Second)%0A%0A%2F%2F%20Call%20multiple%20times%2C%20only%20last%20one%20executes%0AsaveDebounced()%0AsaveDebounced()%0AsaveDebounced()%0A%60%60%60%0A%0A%23%23%20Testing%20Utilities%0A%0A%23%23%23%20Mock%20SharedStore%0A%0A%60%60%60go%0Atype%20MockSharedStore%20struct%20%7B%0A%20%20%20%20data%20map%5Bstring%5Dany%0A%20%20%20%20mu%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMockSharedStore(initial%20map%5Bstring%5Dany)%20*MockSharedStore%20%7B%0A%20%20%20%20return%20%26MockSharedStore%7B%0A%20%20%20%20%20%20%20%20data%3A%20initial%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Get(key%20string)%20(any%2C%20bool)%20%7B%0A%20%20%20%20m.mu.RLock()%0A%20%20%20%20defer%20m.mu.RUnlock()%0A%20%20%20%20val%2C%20ok%20%3A%3D%20m.data%5Bkey%5D%0A%20%20%20%20return%20val%2C%20ok%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Set(key%20string%2C%20value%20any)%20%7B%0A%20%20%20%20m.mu.Lock()%0A%20%20%20%20defer%20m.mu.Unlock()%0A%20%20%20%20m.data%5Bkey%5D%20%3D%20value%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Test%20Node%20Builder%0A%0A%60%60%60go%0Afunc%20TestNode(execFn%20func(context.Context%2C%20any)%20(any%2C%20error))%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(execFn)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Anode%20%3A%3D%20TestNode(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20return%20%22test_result%22%2C%20nil%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Utilities%20Generic**%3A%20Make%20them%20reusable%20across%20projects%0A2.%20**Document%20Usage**%3A%20Provide%20clear%20examples%0A3.%20**Test%20Thoroughly**%3A%20Utilities%20should%20be%20well-tested%0A4.%20**Handle%20Edge%20Cases**%3A%20Consider%20nil%20values%20and%20empty%20inputs%0A5.%20**Use%20Type%20Parameters**%3A%20Leverage%20Go%20generics%20where%20appropriate%0A6.%20**Thread%20Safety**%3A%20Ensure%20utilities%20are%20safe%20for%20concurrent%20use%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20sophisticated%20nodes%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20utilities%20in%20action",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./utilities-avqiVZPj.js"),[]),path:"/advanced/utilities.html",type:"mdx",filePath:"advanced/utilities.mdx",content:"%23%20Utilities%0A%0AHelper%20functions%20and%20utilities%20to%20simplify%20common%20tasks%20in%20Flyt%20workflows.%0A%0A%23%23%20ToSlice%0A%0AConvert%20various%20types%20to%20slices%20for%20batch%20processing%3A%0A%0A%60%60%60go%0A%2F%2F%20Convert%20different%20types%20to%20%5B%5Dany%0AstringSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dstring%7B%22a%22%2C%20%22b%22%2C%20%22c%22%7D)%0AintSlice%20%3A%3D%20flyt.ToSlice(%5B%5Dint%7B1%2C%202%2C%203%7D)%0AsingleItem%20%3A%3D%20flyt.ToSlice(%22single%20item%22)%20%2F%2F%20Returns%20%5B%5Dany%7B%22single%20item%22%7D%0AnilValue%20%3A%3D%20flyt.ToSlice(nil)%20%2F%2F%20Returns%20empty%20%5B%5Dany%7B%7D%0A%0A%2F%2F%20Useful%20for%20batch%20processing%0Ashared.Set(%22items%22%2C%20flyt.ToSlice(data))%0A%60%60%60%0A%0A%23%23%23%20Implementation%20Details%0A%0A%60%60%60go%0Afunc%20ToSlice(v%20any)%20%5B%5Dany%20%7B%0A%20%20%20%20if%20v%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20rv%20%3A%3D%20reflect.ValueOf(v)%0A%20%20%20%20if%20rv.Kind()%20%3D%3D%20reflect.Slice%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20make(%5B%5Dany%2C%20rv.Len())%0A%20%20%20%20%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20rv.Len()%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bi%5D%20%3D%20rv.Index(i).Interface()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20result%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Single%20item%0A%20%20%20%20return%20%5B%5Dany%7Bv%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Custom%20Utility%20Functions%0A%0ACreate%20your%20own%20utilities%3A%0A%0A%23%23%23%20Retry%20Helper%0A%0A%60%60%60go%0Afunc%20RetryOperation(operation%20func()%20error%2C%20maxRetries%20int%2C%20backoff%20time.Duration)%20error%20%7B%0A%20%20%20%20var%20lastErr%20error%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20maxRetries%3B%20i%2B%2B%20%7B%0A%20%20%20%20%20%20%20%20if%20err%20%3A%3D%20operation()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lastErr%20%3D%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20i%20%3C%20maxRetries-1%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20time.Sleep(backoff%20*%20time.Duration(i%2B1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22operation%20failed%20after%20%25d%20retries%3A%20%25w%22%2C%20maxRetries%2C%20lastErr)%0A%7D%0A%0A%2F%2F%20Usage%20in%20node%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20result%20any%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20RetryOperation(func()%20error%20%7B%0A%20%20%20%20%20%20%20%20var%20err%20error%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3D%20callAPI(prepResult)%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%2C%203%2C%20time.Second)%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Parallel%20Map%0A%0A%60%60%60go%0Afunc%20ParallelMap%5BT%20any%2C%20R%20any%5D(items%20%5B%5DT%2C%20fn%20func(T)%20R%2C%20workers%20int)%20%5B%5DR%20%7B%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DR%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20semaphore%20%3A%3D%20make(chan%20struct%7B%7D%2C%20workers)%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20go%20func(index%20int%2C%20data%20T)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20semaphore%20%3C-%20struct%7B%7D%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20func()%20%7B%20%3C-semaphore%20%7D()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20fn(data)%0A%20%20%20%20%20%20%20%20%7D(i%2C%20item)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20wg.Wait()%0A%20%20%20%20return%20results%0A%7D%0A%0A%2F%2F%20Usage%0Aresults%20%3A%3D%20ParallelMap(items%2C%20processItem%2C%2010)%0A%60%60%60%0A%0A%23%23%23%20Type-Safe%20Getters%0A%0AFlyt%20provides%20built-in%20type-safe%20getters%3A%0A%0A%60%60%60go%0A%2F%2F%20Built-in%20type-safe%20getters%0AuserID%20%3A%3D%20shared.GetInt(%22user_id%22)%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%200%20if%20not%20found%0Aname%20%3A%3D%20shared.GetString(%22name%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20%22%22%20if%20not%20found%0Aenabled%20%3A%3D%20shared.GetBool(%22enabled%22)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20false%20if%20not%20found%0A%0A%2F%2F%20With%20custom%20defaults%0AuserID%20%3D%20shared.GetIntOr(%22user_id%22%2C%20-1)%0Aname%20%3D%20shared.GetStringOr(%22name%22%2C%20%22anonymous%22)%0Aenabled%20%3D%20shared.GetBoolOr(%22enabled%22%2C%20true)%0A%0A%2F%2F%20For%20complex%20types%2C%20use%20Bind%0Avar%20config%20Config%0Aerr%20%3A%3D%20shared.Bind(%22config%22%2C%20%26config)%0A%60%60%60%0A%0A%23%23%23%20Chunk%20Slice%0A%0A%60%60%60go%0Afunc%20ChunkSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20chunkSize%20int)%20%5B%5D%5B%5DT%20%7B%0A%20%20%20%20var%20chunks%20%5B%5D%5B%5DT%0A%20%20%20%20%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(slice)%3B%20i%20%2B%3D%20chunkSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20i%20%2B%20chunkSize%0A%20%20%20%20%20%20%20%20if%20end%20%3E%20len(slice)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20end%20%3D%20len(slice)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20chunks%20%3D%20append(chunks%2C%20slice%5Bi%3Aend%5D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20chunks%0A%7D%0A%0A%2F%2F%20Usage%20in%20batch%20processing%0Achunks%20%3A%3D%20ChunkSlice(items%2C%20100)%0Afor%20_%2C%20chunk%20%3A%3D%20range%20chunks%20%7B%0A%20%20%20%20processChunk(chunk)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%20Maps%0A%0A%60%60%60go%0Afunc%20MergeMaps(maps%20...map%5Bstring%5Dany)%20map%5Bstring%5Dany%20%7B%0A%20%20%20%20result%20%3A%3D%20make(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20m%20%3A%3D%20range%20maps%20%7B%0A%20%20%20%20%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20m%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%5Bk%5D%20%3D%20v%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Aconfig%20%3A%3D%20MergeMaps(defaultConfig%2C%20userConfig%2C%20overrides)%0A%60%60%60%0A%0A%23%23%23%20Filter%20Slice%0A%0A%60%60%60go%0Afunc%20FilterSlice%5BT%20any%5D(slice%20%5B%5DT%2C%20predicate%20func(T)%20bool)%20%5B%5DT%20%7B%0A%20%20%20%20result%20%3A%3D%20make(%5B%5DT%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20slice%20%7B%0A%20%20%20%20%20%20%20%20if%20predicate(item)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20append(result%2C%20item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0AvalidItems%20%3A%3D%20FilterSlice(items%2C%20func(item%20Item)%20bool%20%7B%0A%20%20%20%20return%20item.IsValid()%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Timeout%20Wrapper%0A%0A%60%60%60go%0Afunc%20WithTimeout%5BT%20any%5D(ctx%20context.Context%2C%20timeout%20time.Duration%2C%20fn%20func(context.Context)%20(T%2C%20error))%20(T%2C%20error)%20%7B%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%20timeout)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20type%20result%20struct%20%7B%0A%20%20%20%20%20%20%20%20value%20T%0A%20%20%20%20%20%20%20%20err%20%20%20error%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20done%20%3A%3D%20make(chan%20result%2C%201)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20value%2C%20err%20%3A%3D%20fn(ctx)%0A%20%20%20%20%20%20%20%20done%20%3C-%20result%7Bvalue%2C%20err%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20res%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20return%20res.value%2C%20res.err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20var%20zero%20T%0A%20%20%20%20%20%20%20%20return%20zero%2C%20ctx.Err()%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aresult%2C%20err%20%3A%3D%20WithTimeout(ctx%2C%205*time.Second%2C%20func(ctx%20context.Context)%20(string%2C%20error)%20%7B%0A%20%20%20%20return%20fetchData(ctx)%0A%7D)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Builder%0A%0A%60%60%60go%0Atype%20Pipeline%5BT%20any%5D%20struct%20%7B%0A%20%20%20%20stages%20%5B%5Dfunc(T)%20T%0A%7D%0A%0Afunc%20NewPipeline%5BT%20any%5D()%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20return%20%26Pipeline%5BT%5D%7B%0A%20%20%20%20%20%20%20%20stages%3A%20make(%5B%5Dfunc(T)%20T%2C%200)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Add(stage%20func(T)%20T)%20*Pipeline%5BT%5D%20%7B%0A%20%20%20%20p.stages%20%3D%20append(p.stages%2C%20stage)%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*Pipeline%5BT%5D)%20Execute(input%20T)%20T%20%7B%0A%20%20%20%20result%20%3A%3D%20input%0A%20%20%20%20for%20_%2C%20stage%20%3A%3D%20range%20p.stages%20%7B%0A%20%20%20%20%20%20%20%20result%20%3D%20stage(result)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%0A%7D%0A%0A%2F%2F%20Usage%0Apipeline%20%3A%3D%20NewPipeline%5Bstring%5D().%0A%20%20%20%20Add(strings.TrimSpace).%0A%20%20%20%20Add(strings.ToLower).%0A%20%20%20%20Add(func(s%20string)%20string%20%7B%0A%20%20%20%20%20%20%20%20return%20strings.ReplaceAll(s%2C%20%22%20%22%2C%20%22_%22)%0A%20%20%20%20%7D)%0A%0Aresult%20%3A%3D%20pipeline.Execute(%22%20%20Hello%20World%20%20%22)%0A%2F%2F%20Result%3A%20%22hello_world%22%0A%60%60%60%0A%0A%23%23%23%20Error%20Aggregator%0A%0A%60%60%60go%0Atype%20ErrorAggregator%20struct%20%7B%0A%20%20%20%20errors%20%5B%5Derror%0A%20%20%20%20mu%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Add(err%20error)%20%7B%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20e.errors%20%3D%20append(e.errors%2C%20err)%0A%20%20%20%20e.mu.Unlock()%0A%7D%0A%0Afunc%20(e%20*ErrorAggregator)%20Error()%20error%20%7B%0A%20%20%20%20e.mu.Lock()%0A%20%20%20%20defer%20e.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(e.errors)%20%3D%3D%201%20%7B%0A%20%20%20%20%20%20%20%20return%20e.errors%5B0%5D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Errorf(%22multiple%20errors%20(%25d)%3A%20%25v%22%2C%20len(e.errors)%2C%20e.errors)%0A%7D%0A%0A%2F%2F%20Usage%0Aaggregator%20%3A%3D%20%26ErrorAggregator%7B%7D%0A%0Afor%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20processItem(item)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20aggregator.Add(err)%0A%20%20%20%20%7D%0A%7D%0A%0Aif%20err%20%3A%3D%20aggregator.Error()%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Context%20Values%20Helper%0A%0A%60%60%60go%0Atype%20ContextKey%20string%0A%0Aconst%20(%0A%20%20%20%20RequestIDKey%20ContextKey%20%3D%20%22request_id%22%0A%20%20%20%20UserIDKey%20%20%20%20ContextKey%20%3D%20%22user_id%22%0A)%0A%0Afunc%20WithRequestID(ctx%20context.Context%2C%20requestID%20string)%20context.Context%20%7B%0A%20%20%20%20return%20context.WithValue(ctx%2C%20RequestIDKey%2C%20requestID)%0A%7D%0A%0Afunc%20GetRequestID(ctx%20context.Context)%20(string%2C%20bool)%20%7B%0A%20%20%20%20id%2C%20ok%20%3A%3D%20ctx.Value(RequestIDKey).(string)%0A%20%20%20%20return%20id%2C%20ok%0A%7D%0A%0A%2F%2F%20Usage%20in%20nodes%0Afunc%20(n%20*LoggingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20requestID%2C%20_%20%3A%3D%20GetRequestID(ctx)%0A%20%20%20%20log.Printf(%22%5B%25s%5D%20Processing%3A%20%25v%22%2C%20requestID%2C%20prepResult)%0A%20%20%20%20%0A%20%20%20%20return%20process(prepResult)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Debounce%20Function%0A%0A%60%60%60go%0Afunc%20Debounce(fn%20func()%2C%20delay%20time.Duration)%20func()%20%7B%0A%20%20%20%20var%20timer%20*time.Timer%0A%20%20%20%20var%20mu%20sync.Mutex%0A%20%20%20%20%0A%20%20%20%20return%20func()%20%7B%0A%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20defer%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20timer%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20timer.Stop()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20timer%20%3D%20time.AfterFunc(delay%2C%20fn)%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0AsaveDebounced%20%3A%3D%20Debounce(func()%20%7B%0A%20%20%20%20saveToDatabase()%0A%7D%2C%205*time.Second)%0A%0A%2F%2F%20Call%20multiple%20times%2C%20only%20last%20one%20executes%0AsaveDebounced()%0AsaveDebounced()%0AsaveDebounced()%0A%60%60%60%0A%0A%23%23%20Testing%20Utilities%0A%0A%23%23%23%20Mock%20SharedStore%0A%0A%60%60%60go%0Atype%20MockSharedStore%20struct%20%7B%0A%20%20%20%20data%20map%5Bstring%5Dany%0A%20%20%20%20mu%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewMockSharedStore(initial%20map%5Bstring%5Dany)%20*MockSharedStore%20%7B%0A%20%20%20%20return%20%26MockSharedStore%7B%0A%20%20%20%20%20%20%20%20data%3A%20initial%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Get(key%20string)%20(any%2C%20bool)%20%7B%0A%20%20%20%20m.mu.RLock()%0A%20%20%20%20defer%20m.mu.RUnlock()%0A%20%20%20%20val%2C%20ok%20%3A%3D%20m.data%5Bkey%5D%0A%20%20%20%20return%20val%2C%20ok%0A%7D%0A%0Afunc%20(m%20*MockSharedStore)%20Set(key%20string%2C%20value%20any)%20%7B%0A%20%20%20%20m.mu.Lock()%0A%20%20%20%20defer%20m.mu.Unlock()%0A%20%20%20%20m.data%5Bkey%5D%20%3D%20value%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Test%20Node%20Builder%0A%0A%60%60%60go%0Afunc%20TestNode(execFn%20func(context.Context%2C%20any)%20(any%2C%20error))%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(execFn)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%20in%20tests%0Anode%20%3A%3D%20TestNode(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20return%20%22test_result%22%2C%20nil%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Keep%20Utilities%20Generic**%3A%20Make%20them%20reusable%20across%20projects%0A2.%20**Document%20Usage**%3A%20Provide%20clear%20examples%0A3.%20**Test%20Thoroughly**%3A%20Utilities%20should%20be%20well-tested%0A4.%20**Handle%20Edge%20Cases**%3A%20Consider%20nil%20values%20and%20empty%20inputs%0A5.%20**Use%20Type%20Parameters**%3A%20Leverage%20Go%20generics%20where%20appropriate%0A6.%20**Thread%20Safety**%3A%20Ensure%20utilities%20are%20safe%20for%20concurrent%20use%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20sophisticated%20nodes%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20utilities%20in%20action",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./worker-pool-kp2_6v3E.js"),[]),path:"/advanced/worker-pool",type:"mdx",filePath:"advanced/worker-pool.mdx",content:"%23%20Worker%20Pool%0A%0AManage%20concurrent%20task%20execution%20with%20fine-grained%20control%20using%20the%20WorkerPool%20utility.%0A%0A%3E%20**Note%3A**%20BatchNode%20internally%20uses%20WorkerPool%20for%20concurrent%20batch%20processing.%20For%20most%20batch%20processing%20scenarios%2C%20use%20%60BatchNode%60%20with%20%60WithBatchConcurrency(n)%60%20for%20a%20simpler%20API.%20Use%20WorkerPool%20directly%20when%20you%20need%20custom%20concurrent%20task%20management%20outside%20of%20the%20batch%20processing%20pattern.%0A%0A%23%23%20Basic%20Worker%20Pool%0A%0ACreate%20and%20use%20a%20worker%20pool%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20pool%20with%2010%20workers%0Apool%20%3A%3D%20flyt.NewWorkerPool(10)%0A%0A%2F%2F%20Submit%20tasks%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20taskID%20%3A%3D%20i%0A%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20task%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processTask(taskID)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Task%20%25d%20completed%3A%20%25v%5Cn%22%2C%20taskID%2C%20result)%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Wait%20for%20all%20tasks%20to%20complete%0Apool.Wait()%0A%0A%2F%2F%20Clean%20up%0Apool.Close()%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Results%0A%0ACollect%20results%20from%20worker%20pool%3A%0A%0A%60%60%60go%0Atype%20ResultCollector%20struct%20%7B%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20results%20%5B%5DResult%0A%7D%0A%0Afunc%20processWithWorkerPool(items%20%5B%5DItem)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(5)%0A%20%20%20%20collector%20%3A%3D%20%26ResultCollector%7B%0A%20%20%20%20%20%20%20%20results%3A%20make(%5B%5DResult%2C%20len(items))%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Unlock()%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20collector.results%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Worker%20Scaling%0A%0AAdjust%20worker%20count%20based%20on%20load%3A%0A%0A%60%60%60go%0Atype%20DynamicWorkerPool%20struct%20%7B%0A%20%20%20%20minWorkers%20int%0A%20%20%20%20maxWorkers%20int%0A%20%20%20%20pool%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20load%20%20%20%20%20%20%20int32%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDynamicWorkerPool(min%2C%20max%20int)%20*DynamicWorkerPool%20%7B%0A%20%20%20%20return%20%26DynamicWorkerPool%7B%0A%20%20%20%20%20%20%20%20minWorkers%3A%20min%2C%0A%20%20%20%20%20%20%20%20maxWorkers%3A%20max%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20%20%20flyt.NewWorkerPool(min)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20Submit(task%20func())%20%7B%0A%20%20%20%20currentLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%201)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Scale%20up%20if%20needed%0A%20%20%20%20if%20currentLoad%20%3E%20int32(p.getCurrentWorkers()*2)%20%7B%0A%20%20%20%20%20%20%20%20p.scaleUp()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%20-1)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Scale%20down%20if%20idle%0A%20%20%20%20%20%20%20%20if%20newLoad%20%3C%20int32(p.getCurrentWorkers()%2F2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.scaleDown()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20scaleUp()%20%7B%0A%20%20%20%20p.mu.Lock()%0A%20%20%20%20defer%20p.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20current%20%3A%3D%20p.getCurrentWorkers()%0A%20%20%20%20if%20current%20%3C%20p.maxWorkers%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20new%20pool%20with%20more%20workers%0A%20%20%20%20%20%20%20%20newPool%20%3A%3D%20flyt.NewWorkerPool(min(current*2%2C%20p.maxWorkers))%0A%20%20%20%20%20%20%20%20p.pool.Close()%0A%20%20%20%20%20%20%20%20p.pool%20%3D%20newPool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Worker%20Pool%0A%0AControl%20processing%20rate%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedPool(workers%20int%2C%20rps%20int)%20*RateLimitedPool%20%7B%0A%20%20%20%20limiter%20%3A%3D%20rate.NewLimiter(rate.Limit(rps)%2C%201)%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20%0A%20%20%20%20return%20%26RateLimitedPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20pool%2C%0A%20%20%20%20%20%20%20%20limiter%3A%20limiter%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20RateLimitedPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20limiter%20*rate.Limiter%0A%7D%0A%0Afunc%20(p%20*RateLimitedPool)%20Submit(ctx%20context.Context%2C%20task%20func())%20error%20%7B%0A%20%20%20%20%2F%2F%20Wait%20for%20rate%20limit%0A%20%20%20%20if%20err%20%3A%3D%20p.limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(task)%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Priority%20Queue%20Worker%20Pool%0A%0AProcess%20tasks%20by%20priority%3A%0A%0A%60%60%60go%0Atype%20PriorityTask%20struct%20%7B%0A%20%20%20%20Priority%20int%0A%20%20%20%20Task%20%20%20%20%20func()%0A%20%20%20%20ID%20%20%20%20%20%20%20string%0A%7D%0A%0Atype%20PriorityWorkerPool%20struct%20%7B%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20*PriorityQueue%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20running%20bool%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewPriorityWorkerPool(workers%20int)%20*PriorityWorkerPool%20%7B%0A%20%20%20%20p%20%3A%3D%20%26PriorityWorkerPool%7B%0A%20%20%20%20%20%20%20%20workers%3A%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20NewPriorityQueue()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20running%3A%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20dispatcher%0A%20%20%20%20go%20p.dispatch()%0A%20%20%20%20%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20Submit(priority%20int%2C%20task%20func())%20%7B%0A%20%20%20%20p.queue.Push(PriorityTask%7B%0A%20%20%20%20%20%20%20%20Priority%3A%20priority%2C%0A%20%20%20%20%20%20%20%20Task%3A%20%20%20%20%20task%2C%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20dispatch()%20%7B%0A%20%20%20%20for%20p.running%20%7B%0A%20%20%20%20%20%20%20%20task%20%3A%3D%20p.queue.Pop()%20%2F%2F%20Blocks%20until%20task%20available%0A%20%20%20%20%20%20%20%20if%20task%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.pool.Submit(task.Task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Timeout%0A%0AHandle%20task%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20createTimeoutPool(workers%20int%2C%20timeout%20time.Duration)%20*TimeoutPool%20%7B%0A%20%20%20%20return%20%26TimeoutPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20timeout%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20TimeoutPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20timeout%20time.Duration%0A%7D%0A%0Afunc%20(p%20*TimeoutPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20done%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20done%20%3C-%20task()%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(p.timeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22task%20timeout%20after%20%25v%22%2C%20p.timeout)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20%3C-errChan%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20in%20Nodes%0A%0AUse%20worker%20pools%20within%20nodes%3A%0A%0A%60%60%60go%0Atype%20ParallelProcessingNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20*flyt.WorkerPool%0A%7D%0A%0Afunc%20NewParallelProcessingNode(workers%20int)%20*ParallelProcessingNode%20%7B%0A%20%20%20%20return%20%26ParallelProcessingNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20errors%20%3A%3D%20make(%5B%5Derror%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20n.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%5Bindex%5D%20%3D%20err%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20with%20context%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20errors%0A%20%20%20%20%20%20%20%20for%20_%2C%20err%20%3A%3D%20range%20errors%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20fmt.Errorf(%22processing%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Close()%20%7B%0A%20%20%20%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20with%20Worker%20Pool%0A%0ABatchNode%20uses%20WorkerPool%20internally%20for%20concurrent%20processing.%20You%20can%20also%20use%20WorkerPool%20directly%20for%20custom%20batch%20operations%3A%0A%0A%60%60%60go%0Afunc%20processBatchesWithPool(items%20%5B%5DItem%2C%20batchSize%20int%2C%20workers%20int)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20in%20batches%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(items)%3B%20i%20%2B%3D%20batchSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20min(i%2BbatchSize%2C%20len(items))%0A%20%20%20%20%20%20%20%20batch%20%3A%3D%20items%5Bi%3Aend%5D%0A%20%20%20%20%20%20%20%20batchStart%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20batchResults%20%3A%3D%20processBatch(batch)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20j%2C%20result%20%3A%3D%20range%20batchResults%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5BbatchStart%2Bj%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20results%0A%7D%0A%60%60%60%0A%0A**Note%3A**%20For%20most%20batch%20processing%20needs%2C%20consider%20using%20%60BatchNode%60%20which%20provides%20a%20simpler%20API%20and%20handles%20worker%20pool%20management%20automatically%20with%20%60WithBatchConcurrency(n)%60.%0A%0A%23%23%20Monitoring%20Worker%20Pool%0A%0ATrack%20pool%20performance%3A%0A%0A%60%60%60go%0Atype%20MonitoredPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20submitted%20int64%0A%20%20%20%20completed%20int64%0A%20%20%20%20failed%20%20%20%20int64%0A%20%20%20%20totalTime%20int64%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20Submit(task%20func()%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26p.submitted%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.totalTime%2C%20int64(duration))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.failed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.completed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20GetStats()%20map%5Bstring%5Dint64%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dint64%7B%0A%20%20%20%20%20%20%20%20%22submitted%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.submitted)%2C%0A%20%20%20%20%20%20%20%20%22completed%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.completed)%2C%0A%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20%20%20%20atomic.LoadInt64(%26p.failed)%2C%0A%20%20%20%20%20%20%20%20%22avg_time_ms%22%3A%20%20%20p.getAverageTime()%2C%0A%20%20%20%20%20%20%20%20%22pending%22%3A%20%20%20%20%20%20%20p.getPendingCount()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pool%0A%0APrevent%20overload%20with%20circuit%20breaker%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20failures%20%20%20%20int32%0A%20%20%20%20threshold%20%20%20int32%0A%20%20%20%20resetTime%20%20%20time.Duration%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20if%20p.isOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20failures%20%3A%3D%20atomic.AddInt32(%26p.failures%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20failures%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20isOpen()%20bool%20%7B%0A%20%20%20%20p.mu.RLock()%0A%20%20%20%20defer%20p.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20atomic.LoadInt32(%26p.failures)%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(p.lastFailure)%20%3C%20p.resetTime%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Size%20Appropriately**%3A%20Set%20worker%20count%20based%20on%20workload%20and%20resources%0A2.%20**Handle%20Panics**%3A%20Recover%20from%20panics%20in%20worker%20goroutines%0A3.%20**Clean%20Up**%3A%20Always%20close%20pools%20when%20done%0A4.%20**Monitor%20Performance**%3A%20Track%20metrics%20for%20optimization%0A5.%20**Avoid%20Blocking**%3A%20Don't%20block%20workers%20with%20long%20waits%0A6.%20**Test%20Concurrency**%3A%20Test%20with%20various%20worker%20counts%20and%20loads%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20High-level%20batch%20operations%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20nodes%20with%20worker%20pools%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./worker-pool-kp2_6v3E.js"),[]),path:"/advanced/worker-pool.html",type:"mdx",filePath:"advanced/worker-pool.mdx",content:"%23%20Worker%20Pool%0A%0AManage%20concurrent%20task%20execution%20with%20fine-grained%20control%20using%20the%20WorkerPool%20utility.%0A%0A%3E%20**Note%3A**%20BatchNode%20internally%20uses%20WorkerPool%20for%20concurrent%20batch%20processing.%20For%20most%20batch%20processing%20scenarios%2C%20use%20%60BatchNode%60%20with%20%60WithBatchConcurrency(n)%60%20for%20a%20simpler%20API.%20Use%20WorkerPool%20directly%20when%20you%20need%20custom%20concurrent%20task%20management%20outside%20of%20the%20batch%20processing%20pattern.%0A%0A%23%23%20Basic%20Worker%20Pool%0A%0ACreate%20and%20use%20a%20worker%20pool%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20pool%20with%2010%20workers%0Apool%20%3A%3D%20flyt.NewWorkerPool(10)%0A%0A%2F%2F%20Submit%20tasks%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%20100%3B%20i%2B%2B%20%7B%0A%20%20%20%20taskID%20%3A%3D%20i%0A%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20task%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20processTask(taskID)%0A%20%20%20%20%20%20%20%20fmt.Printf(%22Task%20%25d%20completed%3A%20%25v%5Cn%22%2C%20taskID%2C%20result)%0A%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Wait%20for%20all%20tasks%20to%20complete%0Apool.Wait()%0A%0A%2F%2F%20Clean%20up%0Apool.Close()%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Results%0A%0ACollect%20results%20from%20worker%20pool%3A%0A%0A%60%60%60go%0Atype%20ResultCollector%20struct%20%7B%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20results%20%5B%5DResult%0A%7D%0A%0Afunc%20processWithWorkerPool(items%20%5B%5DItem)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(5)%0A%20%20%20%20collector%20%3A%3D%20%26ResultCollector%7B%0A%20%20%20%20%20%20%20%20results%3A%20make(%5B%5DResult%2C%20len(items))%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20collector.mu.Unlock()%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20collector.results%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Worker%20Scaling%0A%0AAdjust%20worker%20count%20based%20on%20load%3A%0A%0A%60%60%60go%0Atype%20DynamicWorkerPool%20struct%20%7B%0A%20%20%20%20minWorkers%20int%0A%20%20%20%20maxWorkers%20int%0A%20%20%20%20pool%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20load%20%20%20%20%20%20%20int32%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20NewDynamicWorkerPool(min%2C%20max%20int)%20*DynamicWorkerPool%20%7B%0A%20%20%20%20return%20%26DynamicWorkerPool%7B%0A%20%20%20%20%20%20%20%20minWorkers%3A%20min%2C%0A%20%20%20%20%20%20%20%20maxWorkers%3A%20max%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20%20%20flyt.NewWorkerPool(min)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20Submit(task%20func())%20%7B%0A%20%20%20%20currentLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%201)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Scale%20up%20if%20needed%0A%20%20%20%20if%20currentLoad%20%3E%20int32(p.getCurrentWorkers()*2)%20%7B%0A%20%20%20%20%20%20%20%20p.scaleUp()%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20newLoad%20%3A%3D%20atomic.AddInt32(%26p.load%2C%20-1)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Scale%20down%20if%20idle%0A%20%20%20%20%20%20%20%20if%20newLoad%20%3C%20int32(p.getCurrentWorkers()%2F2)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.scaleDown()%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*DynamicWorkerPool)%20scaleUp()%20%7B%0A%20%20%20%20p.mu.Lock()%0A%20%20%20%20defer%20p.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20current%20%3A%3D%20p.getCurrentWorkers()%0A%20%20%20%20if%20current%20%3C%20p.maxWorkers%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Create%20new%20pool%20with%20more%20workers%0A%20%20%20%20%20%20%20%20newPool%20%3A%3D%20flyt.NewWorkerPool(min(current*2%2C%20p.maxWorkers))%0A%20%20%20%20%20%20%20%20p.pool.Close()%0A%20%20%20%20%20%20%20%20p.pool%20%3D%20newPool%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Rate-Limited%20Worker%20Pool%0A%0AControl%20processing%20rate%3A%0A%0A%60%60%60go%0Afunc%20createRateLimitedPool(workers%20int%2C%20rps%20int)%20*RateLimitedPool%20%7B%0A%20%20%20%20limiter%20%3A%3D%20rate.NewLimiter(rate.Limit(rps)%2C%201)%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20%0A%20%20%20%20return%20%26RateLimitedPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20pool%2C%0A%20%20%20%20%20%20%20%20limiter%3A%20limiter%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20RateLimitedPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20limiter%20*rate.Limiter%0A%7D%0A%0Afunc%20(p%20*RateLimitedPool)%20Submit(ctx%20context.Context%2C%20task%20func())%20error%20%7B%0A%20%20%20%20%2F%2F%20Wait%20for%20rate%20limit%0A%20%20%20%20if%20err%20%3A%3D%20p.limiter.Wait(ctx)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(task)%0A%20%20%20%20return%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Priority%20Queue%20Worker%20Pool%0A%0AProcess%20tasks%20by%20priority%3A%0A%0A%60%60%60go%0Atype%20PriorityTask%20struct%20%7B%0A%20%20%20%20Priority%20int%0A%20%20%20%20Task%20%20%20%20%20func()%0A%20%20%20%20ID%20%20%20%20%20%20%20string%0A%7D%0A%0Atype%20PriorityWorkerPool%20struct%20%7B%0A%20%20%20%20workers%20int%0A%20%20%20%20queue%20%20%20*PriorityQueue%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20running%20bool%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewPriorityWorkerPool(workers%20int)%20*PriorityWorkerPool%20%7B%0A%20%20%20%20p%20%3A%3D%20%26PriorityWorkerPool%7B%0A%20%20%20%20%20%20%20%20workers%3A%20workers%2C%0A%20%20%20%20%20%20%20%20queue%3A%20%20%20NewPriorityQueue()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20running%3A%20true%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Start%20dispatcher%0A%20%20%20%20go%20p.dispatch()%0A%20%20%20%20%0A%20%20%20%20return%20p%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20Submit(priority%20int%2C%20task%20func())%20%7B%0A%20%20%20%20p.queue.Push(PriorityTask%7B%0A%20%20%20%20%20%20%20%20Priority%3A%20priority%2C%0A%20%20%20%20%20%20%20%20Task%3A%20%20%20%20%20task%2C%0A%20%20%20%20%20%20%20%20ID%3A%20%20%20%20%20%20%20generateID()%2C%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*PriorityWorkerPool)%20dispatch()%20%7B%0A%20%20%20%20for%20p.running%20%7B%0A%20%20%20%20%20%20%20%20task%20%3A%3D%20p.queue.Pop()%20%2F%2F%20Blocks%20until%20task%20available%0A%20%20%20%20%20%20%20%20if%20task%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20p.pool.Submit(task.Task)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20with%20Timeout%0A%0AHandle%20task%20timeouts%3A%0A%0A%60%60%60go%0Afunc%20createTimeoutPool(workers%20int%2C%20timeout%20time.Duration)%20*TimeoutPool%20%7B%0A%20%20%20%20return%20%26TimeoutPool%7B%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20timeout%2C%0A%20%20%20%20%7D%0A%7D%0A%0Atype%20TimeoutPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20timeout%20time.Duration%0A%7D%0A%0Afunc%20(p%20*TimeoutPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20done%20%3A%3D%20make(chan%20error%2C%201)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20done%20%3C-%20task()%0A%20%20%20%20%20%20%20%20%7D()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20select%20%7B%0A%20%20%20%20%20%20%20%20case%20err%20%3A%3D%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20case%20%3C-time.After(p.timeout)%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20fmt.Errorf(%22task%20timeout%20after%20%25v%22%2C%20p.timeout)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20%3C-errChan%0A%7D%0A%60%60%60%0A%0A%23%23%20Worker%20Pool%20in%20Nodes%0A%0AUse%20worker%20pools%20within%20nodes%3A%0A%0A%60%60%60go%0Atype%20ParallelProcessingNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20pool%20*flyt.WorkerPool%0A%7D%0A%0Afunc%20NewParallelProcessingNode(workers%20int)%20*ParallelProcessingNode%20%7B%0A%20%20%20%20return%20%26ParallelProcessingNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20pool%3A%20%20%20%20%20flyt.NewWorkerPool(workers)%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20errors%20%3A%3D%20make(%5B%5Derror%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20var%20wg%20sync.WaitGroup%0A%20%20%20%20%0A%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20wg.Add(1)%0A%20%20%20%20%20%20%20%20index%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20item%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20n.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(data)%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bindex%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20errors%5Bindex%5D%20%3D%20err%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Wait%20with%20context%0A%20%20%20%20done%20%3A%3D%20make(chan%20struct%7B%7D)%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20wg.Wait()%0A%20%20%20%20%20%20%20%20close(done)%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20ctx.Err()%0A%20%20%20%20case%20%3C-done%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Check%20for%20errors%0A%20%20%20%20%20%20%20%20for%20_%2C%20err%20%3A%3D%20range%20errors%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20fmt.Errorf(%22processing%20failed%3A%20%25w%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*ParallelProcessingNode)%20Close()%20%7B%0A%20%20%20%20n.pool.Close()%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%20with%20Worker%20Pool%0A%0ABatchNode%20uses%20WorkerPool%20internally%20for%20concurrent%20processing.%20You%20can%20also%20use%20WorkerPool%20directly%20for%20custom%20batch%20operations%3A%0A%0A%60%60%60go%0Afunc%20processBatchesWithPool(items%20%5B%5DItem%2C%20batchSize%20int%2C%20workers%20int)%20%5B%5DResult%20%7B%0A%20%20%20%20pool%20%3A%3D%20flyt.NewWorkerPool(workers)%0A%20%20%20%20results%20%3A%3D%20make(%5B%5DResult%2C%20len(items))%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20in%20batches%0A%20%20%20%20for%20i%20%3A%3D%200%3B%20i%20%3C%20len(items)%3B%20i%20%2B%3D%20batchSize%20%7B%0A%20%20%20%20%20%20%20%20end%20%3A%3D%20min(i%2BbatchSize%2C%20len(items))%0A%20%20%20%20%20%20%20%20batch%20%3A%3D%20items%5Bi%3Aend%5D%0A%20%20%20%20%20%20%20%20batchStart%20%3A%3D%20i%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20batchResults%20%3A%3D%20processBatch(batch)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20j%2C%20result%20%3A%3D%20range%20batchResults%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20results%5BbatchStart%2Bj%5D%20%3D%20result%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20pool.Wait()%0A%20%20%20%20pool.Close()%0A%20%20%20%20%0A%20%20%20%20return%20results%0A%7D%0A%60%60%60%0A%0A**Note%3A**%20For%20most%20batch%20processing%20needs%2C%20consider%20using%20%60BatchNode%60%20which%20provides%20a%20simpler%20API%20and%20handles%20worker%20pool%20management%20automatically%20with%20%60WithBatchConcurrency(n)%60.%0A%0A%23%23%20Monitoring%20Worker%20Pool%0A%0ATrack%20pool%20performance%3A%0A%0A%60%60%60go%0Atype%20MonitoredPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20submitted%20int64%0A%20%20%20%20completed%20int64%0A%20%20%20%20failed%20%20%20%20int64%0A%20%20%20%20totalTime%20int64%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20Submit(task%20func()%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26p.submitted%2C%201)%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20duration%20%3A%3D%20time.Since(start)%0A%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.totalTime%2C%20int64(duration))%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.failed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.AddInt64(%26p.completed%2C%201)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%7D%0A%0Afunc%20(p%20*MonitoredPool)%20GetStats()%20map%5Bstring%5Dint64%20%7B%0A%20%20%20%20return%20map%5Bstring%5Dint64%7B%0A%20%20%20%20%20%20%20%20%22submitted%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.submitted)%2C%0A%20%20%20%20%20%20%20%20%22completed%22%3A%20%20%20%20%20atomic.LoadInt64(%26p.completed)%2C%0A%20%20%20%20%20%20%20%20%22failed%22%3A%20%20%20%20%20%20%20%20atomic.LoadInt64(%26p.failed)%2C%0A%20%20%20%20%20%20%20%20%22avg_time_ms%22%3A%20%20%20p.getAverageTime()%2C%0A%20%20%20%20%20%20%20%20%22pending%22%3A%20%20%20%20%20%20%20p.getPendingCount()%2C%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pool%0A%0APrevent%20overload%20with%20circuit%20breaker%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerPool%20struct%20%7B%0A%20%20%20%20pool%20%20%20%20%20%20%20%20*flyt.WorkerPool%0A%20%20%20%20failures%20%20%20%20int32%0A%20%20%20%20threshold%20%20%20int32%0A%20%20%20%20resetTime%20%20%20time.Duration%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20mu%20%20%20%20%20%20%20%20%20%20sync.RWMutex%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20Submit(task%20func()%20error)%20error%20%7B%0A%20%20%20%20if%20p.isOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20p.pool.Submit(func()%20%7B%0A%20%20%20%20%20%20%20%20err%20%3A%3D%20task()%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20failures%20%3A%3D%20atomic.AddInt32(%26p.failures%2C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20failures%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20return%20nil%0A%7D%0A%0Afunc%20(p%20*CircuitBreakerPool)%20isOpen()%20bool%20%7B%0A%20%20%20%20p.mu.RLock()%0A%20%20%20%20defer%20p.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20atomic.LoadInt32(%26p.failures)%20%3E%3D%20p.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(p.lastFailure)%20%3C%20p.resetTime%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20true%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20atomic.StoreInt32(%26p.failures%2C%200)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20false%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Size%20Appropriately**%3A%20Set%20worker%20count%20based%20on%20workload%20and%20resources%0A2.%20**Handle%20Panics**%3A%20Recover%20from%20panics%20in%20worker%20goroutines%0A3.%20**Clean%20Up**%3A%20Always%20close%20pools%20when%20done%0A4.%20**Monitor%20Performance**%3A%20Track%20metrics%20for%20optimization%0A5.%20**Avoid%20Blocking**%3A%20Don't%20block%20workers%20with%20long%20waits%0A6.%20**Test%20Concurrency**%3A%20Test%20with%20various%20worker%20counts%20and%20loads%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20High-level%20batch%20operations%0A-%20%5BCustom%20Nodes%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Build%20nodes%20with%20worker%20pools%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./actions-C7YRfKdc.js"),[]),path:"/concepts/actions",type:"mdx",filePath:"concepts/actions.mdx",content:"%23%20Actions%0A%0AActions%20are%20strings%20returned%20by%20a%20node's%20Post%20phase%20that%20determine%20the%20next%20step%20in%20a%20workflow.%20They%20provide%20dynamic%2C%20runtime%20control%20over%20flow%20execution.%0A%0A%23%23%20How%20Actions%20Work%0A%0AWhen%20a%20node%20completes%2C%20its%20Post%20phase%20returns%20an%20action%3A%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20success%20%7B%0A%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22retry%22%2C%20nil%0A%7D%0A%60%60%60%0A%0AThe%20flow%20then%20routes%20to%20the%20node%20connected%20with%20that%20action%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22continue%22%2C%20processNode)%0Aflow.Connect(startNode%2C%20%22retry%22%2C%20retryNode)%0A%60%60%60%0A%0A%23%23%20Default%20Action%0A%0AThe%20most%20common%20action%20is%20%60flyt.DefaultAction%60%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20the%20constant%0Areturn%20flyt.DefaultAction%2C%20nil%20%20%2F%2F%20Returns%20%22default%22%0A%0A%2F%2F%20In%20flow%20connections%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Action-Based%20Routing%0A%0A%23%23%23%20Simple%20Branching%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20cleaner%20code%0AvalidationNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20return%20len(data)%20%3E%200%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%23%20Multi-Way%20Branching%0A%0A%60%60%60go%0A%2F%2F%20Fluent%20API%20for%20multi-way%20branching%0AcategoryNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%2010%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20value%20%3C%20100%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0A%60%60%60%0A%0A%23%23%20Flow%20Termination%0A%0AIf%20no%20connection%20exists%20for%20an%20action%2C%20the%20flow%20terminates%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20%22continue%22%2C%20node2)%0A%2F%2F%20If%20node1%20returns%20%22stop%22%2C%20flow%20ends%20(no%20connection%20for%20%22stop%22)%0A%60%60%60%0A%0AExplicitly%20terminate%20by%20connecting%20to%20nil%3A%0A%0A%60%60%60go%0Aflow.Connect(finalNode%2C%20%22done%22%2C%20nil)%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Success%2FFailure%20Pattern%0A%0A%60%60%60go%0Afunc%20makeDecisionPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22failure%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22success%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Pattern%0A%0A%60%60%60go%0Afunc%20retryablePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20count%20%3A%3D%20shared.GetInt(%22attempts%22)%0A%20%20%20%20%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%26%26%20count%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20count%20%2B%201)%0A%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Machine%20Pattern%0A%0A%60%60%60go%0Afunc%20statePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20currentState%20%3A%3D%20shared.GetString(%22state%22)%0A%20%20%20%20%0A%20%20%20%20switch%20currentState%20%7B%0A%20%20%20%20case%20%22init%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22processing%22)%0A%20%20%20%20%20%20%20%20return%20%22process%22%2C%20nil%0A%20%20%20%20case%20%22processing%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22complete%22)%0A%20%20%20%20%20%20%20%20return%20%22finalize%22%2C%20nil%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22done%22%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Actions%0A%0AActions%20can%20be%20computed%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20dynamicPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20nextAction%20%3A%3D%20result%5B%22next_action%22%5D.(string)%0A%20%20%20%20return%20flyt.Action(nextAction)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Use%20Descriptive%20Names**%3A%20Actions%20should%20clearly%20indicate%20their%20purpose%0A2.%20**Document%20Actions**%3A%20List%20all%20possible%20actions%20a%20node%20can%20return%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%20or%20intentionally%20terminate%0A4.%20**Consistent%20Naming**%3A%20Use%20a%20consistent%20naming%20scheme%20across%20your%20application%0A5.%20**Avoid%20Magic%20Strings**%3A%20Define%20action%20constants%20for%20reusability%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20ActionValidate%20%3D%20flyt.Action(%22validate%22)%0A%20%20%20%20ActionProcess%20%20%3D%20flyt.Action(%22process%22)%0A%20%20%20%20ActionComplete%20%3D%20flyt.Action(%22complete%22)%0A%20%20%20%20ActionError%20%20%20%20%3D%20flyt.Action(%22error%22)%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20with%20actions%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Advanced%20routing%20patterns%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Compose%20complex%20workflows",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./actions-C7YRfKdc.js"),[]),path:"/concepts/actions.html",type:"mdx",filePath:"concepts/actions.mdx",content:"%23%20Actions%0A%0AActions%20are%20strings%20returned%20by%20a%20node's%20Post%20phase%20that%20determine%20the%20next%20step%20in%20a%20workflow.%20They%20provide%20dynamic%2C%20runtime%20control%20over%20flow%20execution.%0A%0A%23%23%20How%20Actions%20Work%0A%0AWhen%20a%20node%20completes%2C%20its%20Post%20phase%20returns%20an%20action%3A%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20success%20%7B%0A%20%20%20%20%20%20%20%20return%20%22continue%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22retry%22%2C%20nil%0A%7D%0A%60%60%60%0A%0AThe%20flow%20then%20routes%20to%20the%20node%20connected%20with%20that%20action%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22continue%22%2C%20processNode)%0Aflow.Connect(startNode%2C%20%22retry%22%2C%20retryNode)%0A%60%60%60%0A%0A%23%23%20Default%20Action%0A%0AThe%20most%20common%20action%20is%20%60flyt.DefaultAction%60%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20the%20constant%0Areturn%20flyt.DefaultAction%2C%20nil%20%20%2F%2F%20Returns%20%22default%22%0A%0A%2F%2F%20In%20flow%20connections%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Action-Based%20Routing%0A%0A%23%23%23%20Simple%20Branching%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20cleaner%20code%0AvalidationNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20return%20len(data)%20%3E%200%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%23%20Multi-Way%20Branching%0A%0A%60%60%60go%0A%2F%2F%20Fluent%20API%20for%20multi-way%20branching%0AcategoryNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20if%20value%20%3C%2010%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20value%20%3C%20100%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0A%60%60%60%0A%0A%23%23%20Flow%20Termination%0A%0AIf%20no%20connection%20exists%20for%20an%20action%2C%20the%20flow%20terminates%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20%22continue%22%2C%20node2)%0A%2F%2F%20If%20node1%20returns%20%22stop%22%2C%20flow%20ends%20(no%20connection%20for%20%22stop%22)%0A%60%60%60%0A%0AExplicitly%20terminate%20by%20connecting%20to%20nil%3A%0A%0A%60%60%60go%0Aflow.Connect(finalNode%2C%20%22done%22%2C%20nil)%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Success%2FFailure%20Pattern%0A%0A%60%60%60go%0Afunc%20makeDecisionPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20%22failure%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22success%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Retry%20Pattern%0A%0A%60%60%60go%0Afunc%20retryablePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20count%20%3A%3D%20shared.GetInt(%22attempts%22)%0A%20%20%20%20%0A%20%20%20%20if%20execResult%20%3D%3D%20nil%20%26%26%20count%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20count%20%2B%201)%0A%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22continue%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Machine%20Pattern%0A%0A%60%60%60go%0Afunc%20statePost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20currentState%20%3A%3D%20shared.GetString(%22state%22)%0A%20%20%20%20%0A%20%20%20%20switch%20currentState%20%7B%0A%20%20%20%20case%20%22init%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22processing%22)%0A%20%20%20%20%20%20%20%20return%20%22process%22%2C%20nil%0A%20%20%20%20case%20%22processing%22%3A%0A%20%20%20%20%20%20%20%20shared.Set(%22state%22%2C%20%22complete%22)%0A%20%20%20%20%20%20%20%20return%20%22finalize%22%2C%20nil%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20return%20%22done%22%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Actions%0A%0AActions%20can%20be%20computed%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20dynamicPost(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20nextAction%20%3A%3D%20result%5B%22next_action%22%5D.(string)%0A%20%20%20%20return%20flyt.Action(nextAction)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Use%20Descriptive%20Names**%3A%20Actions%20should%20clearly%20indicate%20their%20purpose%0A2.%20**Document%20Actions**%3A%20List%20all%20possible%20actions%20a%20node%20can%20return%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%20or%20intentionally%20terminate%0A4.%20**Consistent%20Naming**%3A%20Use%20a%20consistent%20naming%20scheme%20across%20your%20application%0A5.%20**Avoid%20Magic%20Strings**%3A%20Define%20action%20constants%20for%20reusability%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20ActionValidate%20%3D%20flyt.Action(%22validate%22)%0A%20%20%20%20ActionProcess%20%20%3D%20flyt.Action(%22process%22)%0A%20%20%20%20ActionComplete%20%3D%20flyt.Action(%22complete%22)%0A%20%20%20%20ActionError%20%20%20%20%3D%20flyt.Action(%22error%22)%0A)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20with%20actions%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Advanced%20routing%20patterns%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Compose%20complex%20workflows",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./flows-D2wDuH4o.js"),[]),path:"/concepts/flows",type:"mdx",filePath:"concepts/flows.mdx",content:"%23%20Flows%0A%0AFlows%20connect%20nodes%20together%20to%20create%20workflows.%20They%20define%20the%20execution%20path%20based%20on%20actions%20returned%20by%20nodes.%0A%0A%23%23%20Creating%20Flows%0A%0AStart%20with%20a%20single%20node%20and%20build%20connections%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20nodes%0AstartNode%20%3A%3D%20createStartNode()%0AprocessNode%20%3A%3D%20createProcessNode()%0AendNode%20%3A%3D%20createEndNode()%0A%0A%2F%2F%20Build%20flow%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Running%20Flows%0A%0AExecute%20a%20flow%20with%20a%20context%20and%20SharedStore%3A%0A%0A%60%60%60go%0Actx%20%3A%3D%20context.Background()%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%0A%2F%2F%20Add%20initial%20data%0Ashared.Set(%22input%22%2C%20%22data%20to%20process%22)%0A%0A%2F%2F%20Run%20the%20flow%0Aerr%20%3A%3D%20flow.Run(ctx%2C%20shared)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20Get%20results%0Aresult%20%3A%3D%20shared.GetString(%22output%22)%0A%60%60%60%0A%0A%23%23%20Flow%20Connections%0A%0A%23%23%23%20Linear%20Flow%0A%0ASimple%20sequential%20execution%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0Aflow.Connect(node2%2C%20flyt.DefaultAction%2C%20node3)%0Aflow.Connect(node3%2C%20flyt.DefaultAction%2C%20nil)%20%2F%2F%20Terminate%0A%60%60%60%0A%0A%23%23%23%20Branching%20Flow%0A%0AMultiple%20paths%20based%20on%20actions%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(decisionNode)%0Aflow.Connect(decisionNode%2C%20%22path_a%22%2C%20nodeA)%0Aflow.Connect(decisionNode%2C%20%22path_b%22%2C%20nodeB)%0Aflow.Connect(nodeA%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(nodeB%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Loop%20Flow%0A%0ACreate%20cycles%20for%20retry%20or%20iteration%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22retry%22%2C%20startNode)%20%20%20%20%2F%2F%20Loop%20back%0Aflow.Connect(processNode%2C%20%22success%22%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%20and%20can%20be%20used%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%0AsubFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AsubFlow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20transformNode)%0A%0A%2F%2F%20Use%20sub-flow%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20subFlow)%0AmainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Complex%20Flow%20Patterns%0A%0A%23%23%23%20Diamond%20Pattern%0A%0ASplit%20and%20merge%20execution%20paths%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0Aflow.Connect(splitNode%2C%20%22path1%22%2C%20process1)%0Aflow.Connect(splitNode%2C%20%22path2%22%2C%20process2)%0Aflow.Connect(process1%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(process2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%20Flow%0A%0ACentralized%20error%20handling%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0Aflow.Connect(saveNode%2C%20%22error%22%2C%20errorHandler)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Pattern%0A%0AData%20transformation%20pipeline%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20rejectNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Composition%0A%0ABuild%20complex%20flows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkFormat%20%3A%3D%20createFormatChecker()%0A%20%20%20%20checkBusiness%20%3A%3D%20createBusinessRules()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkFormat)%0A%20%20%20%20flow.Connect(checkFormat%2C%20%22valid%22%2C%20checkBusiness)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createMainFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetch%20%3A%3D%20createFetchNode()%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20process%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetch)%0A%20%20%20%20flow.Connect(fetch%2C%20flyt.DefaultAction%2C%20validation)%0A%20%20%20%20flow.Connect(validation%2C%20flyt.DefaultAction%2C%20process)%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Debugging%20Flows%0A%0AAdd%20logging%20nodes%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20createLoggingNode(name%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Prep%3A%20SharedStore%20keys%3A%20%25v%22%2C%20name%2C%20shared.GetAll())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Post%3A%20Result%3A%20%25v%22%2C%20name%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Insert%20between%20nodes%20for%20debugging%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20createLoggingNode(%22debug%22))%0Aflow.Connect(createLoggingNode(%22debug%22)%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Start%20Simple**%3A%20Build%20flows%20incrementally%2C%20testing%20as%20you%20go%0A2.%20**Name%20Nodes**%3A%20Give%20nodes%20descriptive%20names%20for%20easier%20debugging%0A3.%20**Document%20Flows**%3A%20Create%20diagrams%20or%20comments%20explaining%20flow%20logic%0A4.%20**Reuse%20Flows**%3A%20Extract%20common%20patterns%20into%20reusable%20sub-flows%0A5.%20**Test%20Flows**%3A%20Write%20tests%20for%20different%20execution%20paths%0A%0A%23%23%20Visualizing%20Flows%0A%0ADocument%20your%20flows%20with%20clear%20structure%3A%0A%0A%60%60%60go%0A%2F%2F%20Flow%20structure%3A%0A%2F%2F%20Start%20-%3E%20Validate%20-%3E%20Process%20-%3E%20Save%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%94%94%E2%94%80%3E%20Error%20(on%20invalid)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20errorNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BShared%20Store%5D(%2Fconcepts%2Fshared-store)%20-%20Share%20data%20between%20nodes%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Advanced%20composition%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Process%20multiple%20inputs",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./flows-D2wDuH4o.js"),[]),path:"/concepts/flows.html",type:"mdx",filePath:"concepts/flows.mdx",content:"%23%20Flows%0A%0AFlows%20connect%20nodes%20together%20to%20create%20workflows.%20They%20define%20the%20execution%20path%20based%20on%20actions%20returned%20by%20nodes.%0A%0A%23%23%20Creating%20Flows%0A%0AStart%20with%20a%20single%20node%20and%20build%20connections%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20nodes%0AstartNode%20%3A%3D%20createStartNode()%0AprocessNode%20%3A%3D%20createProcessNode()%0AendNode%20%3A%3D%20createEndNode()%0A%0A%2F%2F%20Build%20flow%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Running%20Flows%0A%0AExecute%20a%20flow%20with%20a%20context%20and%20SharedStore%3A%0A%0A%60%60%60go%0Actx%20%3A%3D%20context.Background()%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%0A%2F%2F%20Add%20initial%20data%0Ashared.Set(%22input%22%2C%20%22data%20to%20process%22)%0A%0A%2F%2F%20Run%20the%20flow%0Aerr%20%3A%3D%20flow.Run(ctx%2C%20shared)%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20log.Fatal(err)%0A%7D%0A%0A%2F%2F%20Get%20results%0Aresult%20%3A%3D%20shared.GetString(%22output%22)%0A%60%60%60%0A%0A%23%23%20Flow%20Connections%0A%0A%23%23%23%20Linear%20Flow%0A%0ASimple%20sequential%20execution%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(node1)%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20node2)%0Aflow.Connect(node2%2C%20flyt.DefaultAction%2C%20node3)%0Aflow.Connect(node3%2C%20flyt.DefaultAction%2C%20nil)%20%2F%2F%20Terminate%0A%60%60%60%0A%0A%23%23%23%20Branching%20Flow%0A%0AMultiple%20paths%20based%20on%20actions%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(decisionNode)%0Aflow.Connect(decisionNode%2C%20%22path_a%22%2C%20nodeA)%0Aflow.Connect(decisionNode%2C%20%22path_b%22%2C%20nodeB)%0Aflow.Connect(nodeA%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(nodeB%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Loop%20Flow%0A%0ACreate%20cycles%20for%20retry%20or%20iteration%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22retry%22%2C%20startNode)%20%20%20%20%2F%2F%20Loop%20back%0Aflow.Connect(processNode%2C%20%22success%22%2C%20endNode)%0A%60%60%60%0A%0A%23%23%20Flow%20as%20Node%0A%0AFlows%20implement%20the%20Node%20interface%20and%20can%20be%20used%20as%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Create%20a%20sub-flow%0AsubFlow%20%3A%3D%20flyt.NewFlow(validateNode)%0AsubFlow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20transformNode)%0A%0A%2F%2F%20Use%20sub-flow%20in%20main%20flow%0AmainFlow%20%3A%3D%20flyt.NewFlow(fetchNode)%0AmainFlow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20subFlow)%0AmainFlow.Connect(subFlow%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Complex%20Flow%20Patterns%0A%0A%23%23%23%20Diamond%20Pattern%0A%0ASplit%20and%20merge%20execution%20paths%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0Aflow.Connect(splitNode%2C%20%22path1%22%2C%20process1)%0Aflow.Connect(splitNode%2C%20%22path2%22%2C%20process2)%0Aflow.Connect(process1%2C%20flyt.DefaultAction%2C%20mergeNode)%0Aflow.Connect(process2%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%23%20Error%20Handling%20Flow%0A%0ACentralized%20error%20handling%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0Aflow.Connect(processNode%2C%20%22error%22%2C%20errorHandler)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0Aflow.Connect(saveNode%2C%20%22error%22%2C%20errorHandler)%0A%60%60%60%0A%0A%23%23%23%20Pipeline%20Pattern%0A%0AData%20transformation%20pipeline%3A%0A%0A%60%60%60go%0Aflow%20%3A%3D%20flyt.NewFlow(fetchNode)%0Aflow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20transformNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20rejectNode)%0Aflow.Connect(transformNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Flow%20Composition%0A%0ABuild%20complex%20flows%20from%20simpler%20ones%3A%0A%0A%60%60%60go%0Afunc%20createValidationFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20checkFormat%20%3A%3D%20createFormatChecker()%0A%20%20%20%20checkBusiness%20%3A%3D%20createBusinessRules()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(checkFormat)%0A%20%20%20%20flow.Connect(checkFormat%2C%20%22valid%22%2C%20checkBusiness)%0A%20%20%20%20return%20flow%0A%7D%0A%0Afunc%20createMainFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20fetch%20%3A%3D%20createFetchNode()%0A%20%20%20%20validation%20%3A%3D%20createValidationFlow()%0A%20%20%20%20process%20%3A%3D%20createProcessNode()%0A%20%20%20%20%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetch)%0A%20%20%20%20flow.Connect(fetch%2C%20flyt.DefaultAction%2C%20validation)%0A%20%20%20%20flow.Connect(validation%2C%20flyt.DefaultAction%2C%20process)%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Debugging%20Flows%0A%0AAdd%20logging%20nodes%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20createLoggingNode(name%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Prep%3A%20SharedStore%20keys%3A%20%25v%22%2C%20name%2C%20shared.GetAll())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20prepResult%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Post%3A%20Result%3A%20%25v%22%2C%20name%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Insert%20between%20nodes%20for%20debugging%0Aflow.Connect(node1%2C%20flyt.DefaultAction%2C%20createLoggingNode(%22debug%22))%0Aflow.Connect(createLoggingNode(%22debug%22)%2C%20flyt.DefaultAction%2C%20node2)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Start%20Simple**%3A%20Build%20flows%20incrementally%2C%20testing%20as%20you%20go%0A2.%20**Name%20Nodes**%3A%20Give%20nodes%20descriptive%20names%20for%20easier%20debugging%0A3.%20**Document%20Flows**%3A%20Create%20diagrams%20or%20comments%20explaining%20flow%20logic%0A4.%20**Reuse%20Flows**%3A%20Extract%20common%20patterns%20into%20reusable%20sub-flows%0A5.%20**Test%20Flows**%3A%20Write%20tests%20for%20different%20execution%20paths%0A%0A%23%23%20Visualizing%20Flows%0A%0ADocument%20your%20flows%20with%20clear%20structure%3A%0A%0A%60%60%60go%0A%2F%2F%20Flow%20structure%3A%0A%2F%2F%20Start%20-%3E%20Validate%20-%3E%20Process%20-%3E%20Save%0A%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%94%94%E2%94%80%3E%20Error%20(on%20invalid)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(startNode)%0Aflow.Connect(startNode%2C%20flyt.DefaultAction%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validateNode%2C%20%22invalid%22%2C%20errorNode)%0Aflow.Connect(processNode%2C%20flyt.DefaultAction%2C%20saveNode)%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BShared%20Store%5D(%2Fconcepts%2Fshared-store)%20-%20Share%20data%20between%20nodes%0A-%20%5BNested%20Flows%5D(%2Fadvanced%2Fnested-flows)%20-%20Advanced%20composition%0A-%20%5BBatch%20Flows%5D(%2Fadvanced%2Fbatch-flows)%20-%20Process%20multiple%20inputs",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./nodes-DGez6Wgk.js"),[]),path:"/concepts/nodes",type:"mdx",filePath:"concepts/nodes.mdx",content:"%23%20Nodes%0A%0ANodes%20are%20the%20fundamental%20building%20blocks%20of%20Flyt%20workflows.%20Each%20node%20represents%20a%20single%20unit%20of%20work%20with%20a%20well-defined%20lifecycle.%0A%0A%23%23%20Node%20Lifecycle%0A%0AEvery%20node%20has%20three%20phases%20that%20execute%20in%20order%3A%0A%0A%23%23%23%201.%20Prep%20Phase%0A%0AThe%20preparation%20phase%20reads%20from%20the%20SharedStore%20and%20prepares%20data%20for%20execution.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Read%20data%20using%20type-safe%20getters%0A%20%20%20%20userID%20%3A%3D%20shared.GetInt(%22user_id%22)%0A%20%20%20%20apiKey%20%3A%3D%20shared.GetString(%22api_key%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Or%20bind%20complex%20types%0A%20%20%20%20var%20config%20Config%0A%20%20%20%20if%20err%20%3A%3D%20shared.Bind(%22config%22%2C%20%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prepare%20and%20return%20data%20for%20Exec%20phase%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22userID%22%3A%20userID%2C%0A%20%20%20%20%20%20%20%20%22apiKey%22%3A%20apiKey%2C%0A%20%20%20%20%20%20%20%20%22config%22%3A%20config%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Exec%20Phase%0A%0AThe%20execution%20phase%20performs%20the%20main%20work.%20This%20phase%20can%20be%20retried%20on%20failure.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20the%20main%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20processData(data%5B%22input%22%5D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20retry%20if%20configured%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%203.%20Post%20Phase%0A%0AThe%20post-processing%20phase%20handles%20results%20and%20determines%20the%20next%20action.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20shared.Set(%22output%22%2C%20execResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20next%20action%20based%20on%20results%0A%20%20%20%20if%20isValid(execResult)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22failure%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Creating%20Nodes%0A%0A%23%23%23%20Using%20Helper%20Functions%0A%0AFlyt%20provides%20two%20styles%20of%20helper%20functions%20for%20creating%20nodes%3A%0A%0A%23%23%23%23%20Result-based%20Functions%20(Type-Safe)%0A%0AUse%20%60WithPrepFunc%60%2C%20%60WithExecFunc%60%2C%20and%20%60WithPostFunc%60%20for%20type-safe%20operations%20with%20the%20Result%20type%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20cleaner%20chaining%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20type-safe%20getters%0A%20%20%20%20%20%20%20%20message%20%3A%3D%20shared.GetString(%22message%22)%0A%20%20%20%20%20%20%20%20retryCount%20%3A%3D%20shared.GetIntOr(%22retry_count%22%2C%200)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry%22%3A%20retryCount%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20access%20to%20data%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.AsMapOr(nil)%0A%20%20%20%20%20%20%20%20message%20%3A%3D%20data%5B%22message%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20and%20return%20Result%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20processMessage(message)%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20flyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20result%20handling%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20execResult.Value()%0A%20%20%20%20%20%20%20%20shared.Set(%22result%22%2C%20result)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20shared.GetInt(%22retry_count%22)%20%3E%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_retries%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%23%20Any-based%20Functions%20(Simple)%0A%0AUse%20%60WithPrepFuncAny%60%2C%20%60WithExecFuncAny%60%2C%20and%20%60WithPostFuncAny%60%20for%20simpler%20cases%20or%20backward%20compatibility%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20with%20any-based%20functions%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Direct%20any%20types%0A%20%20%20%20%20%20%20%20message%20%3A%3D%20shared.GetString(%22message%22)%0A%20%20%20%20%20%20%20%20retryCount%20%3A%3D%20shared.GetIntOr(%22retry_count%22%2C%200)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry%22%3A%20retryCount%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20the%20data%0A%20%20%20%20%20%20%20%20return%20processMessage(data%5B%22message%22%5D.(string))%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20result%20and%20determine%20action%0A%20%20%20%20%20%20%20%20shared.Set(%22result%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20shared.GetInt(%22retry_count%22)%20%3E%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_retries%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%20Choosing%20Between%20Result%20and%20Any%0A%0A**Use%20Result-based%20functions%20when%3A**%0A-%20You%20need%20type-safe%20access%20to%20data%20with%20convenience%20methods%0A-%20Working%20with%20complex%20data%20transformations%0A-%20You%20want%20better%20IDE%20support%20and%20type%20checking%0A-%20Building%20reusable%20components%20that%20handle%20various%20data%20types%0A%0A**Use%20Any-based%20functions%20when%3A**%0A-%20Building%20simple%20nodes%20with%20straightforward%20logic%0A-%20Migrating%20existing%20code%20that%20uses%20%60any%60%20types%0A-%20The%20overhead%20of%20Result%20wrapping%20isn't%20justified%0A-%20Working%20with%20known%2C%20simple%20data%20types%0A%0A%23%23%23%20Custom%20Node%20Types%0A%0AFor%20complex%20nodes%20with%20state%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseNode(db%20*sql.DB)%20*DatabaseNode%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20db%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20rows%2C%20err%20%3A%3D%20n.db.QueryContext(ctx%2C%20query)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Node%20Options%0A%0AConfigure%20node%20behavior%20with%20options%3A%0A%0A%60%60%60go%0A%2F%2F%20With%20Result%20type%20using%20fluent%20API%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20input%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20operations%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processData(input.Value()))%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithMaxRetries(3).%20%20%20%20%20%20%20%20%2F%2F%20Retry%20up%20to%203%20times%0A%20%20%20%20WithWait(time.Second%20*%202)%20%2F%2F%20Wait%202%20seconds%20between%20retries%0A%0A%2F%2F%20With%20any%20type%20using%20fluent%20API%20%20%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Direct%20any%20handling%0A%20%20%20%20%20%20%20%20return%20processData(input)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithMaxRetries(3).%20%20%20%20%20%20%20%20%2F%2F%20Retry%20up%20to%203%20times%0A%20%20%20%20WithWait(time.Second%20*%202)%20%2F%2F%20Wait%202%20seconds%20between%20retries%0A%0A%2F%2F%20Traditional%20style%20still%20supported%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20processData(input)%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithMaxRetries(3)%2C%0A%20%20%20%20flyt.WithWait(time.Second%20*%202)%2C%0A)%0A%60%60%60%0A%0A%23%23%20BaseNode%0A%0AThe%20%60BaseNode%60%20provides%20default%20implementations%3A%0A%0A%60%60%60go%0Atype%20MyNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20%2F%2F%20Add%20custom%20fields%0A%7D%0A%0Afunc%20NewMyNode()%20*MyNode%20%7B%0A%20%20%20%20return%20%26MyNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithMaxRetries(5)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithWait(time.Second)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Override%20only%20the%20methods%20you%20need%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20exec%20logic%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ANodes%20should%20be%20thread-safe%20if%20used%20in%20concurrent%20batch%20operations%3A%0A%0A%60%60%60go%0Atype%20SafeNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20counter%20int%0A%7D%0A%0Afunc%20(n%20*SafeNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20count%20%3A%3D%20n.counter%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20count)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Single%20Responsibility**%3A%20Each%20node%20should%20do%20one%20thing%20well%0A2.%20**Idempotency**%3A%20Design%20nodes%20to%20be%20safely%20retryable%0A3.%20**Context%20Handling**%3A%20Always%20respect%20context%20cancellation%0A4.%20**Error%20Handling**%3A%20Return%20clear%2C%20actionable%20errors%0A5.%20**Resource%20Management**%3A%20Clean%20up%20resources%20in%20defer%20blocks%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20into%20workflows%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./nodes-DGez6Wgk.js"),[]),path:"/concepts/nodes.html",type:"mdx",filePath:"concepts/nodes.mdx",content:"%23%20Nodes%0A%0ANodes%20are%20the%20fundamental%20building%20blocks%20of%20Flyt%20workflows.%20Each%20node%20represents%20a%20single%20unit%20of%20work%20with%20a%20well-defined%20lifecycle.%0A%0A%23%23%20Node%20Lifecycle%0A%0AEvery%20node%20has%20three%20phases%20that%20execute%20in%20order%3A%0A%0A%23%23%23%201.%20Prep%20Phase%0A%0AThe%20preparation%20phase%20reads%20from%20the%20SharedStore%20and%20prepares%20data%20for%20execution.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Read%20data%20using%20type-safe%20getters%0A%20%20%20%20userID%20%3A%3D%20shared.GetInt(%22user_id%22)%0A%20%20%20%20apiKey%20%3A%3D%20shared.GetString(%22api_key%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Or%20bind%20complex%20types%0A%20%20%20%20var%20config%20Config%0A%20%20%20%20if%20err%20%3A%3D%20shared.Bind(%22config%22%2C%20%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Prepare%20and%20return%20data%20for%20Exec%20phase%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22userID%22%3A%20userID%2C%0A%20%20%20%20%20%20%20%20%22apiKey%22%3A%20apiKey%2C%0A%20%20%20%20%20%20%20%20%22config%22%3A%20config%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Exec%20Phase%0A%0AThe%20execution%20phase%20performs%20the%20main%20work.%20This%20phase%20can%20be%20retried%20on%20failure.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Perform%20the%20main%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20processData(data%5B%22input%22%5D)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20retry%20if%20configured%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%203.%20Post%20Phase%0A%0AThe%20post-processing%20phase%20handles%20results%20and%20determines%20the%20next%20action.%0A%0A%60%60%60go%0Afunc%20(n%20*MyNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20shared.Set(%22output%22%2C%20execResult)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20next%20action%20based%20on%20results%0A%20%20%20%20if%20isValid(execResult)%20%7B%0A%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20%22failure%22%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Creating%20Nodes%0A%0A%23%23%23%20Using%20Helper%20Functions%0A%0AFlyt%20provides%20two%20styles%20of%20helper%20functions%20for%20creating%20nodes%3A%0A%0A%23%23%23%23%20Result-based%20Functions%20(Type-Safe)%0A%0AUse%20%60WithPrepFunc%60%2C%20%60WithExecFunc%60%2C%20and%20%60WithPostFunc%60%20for%20type-safe%20operations%20with%20the%20Result%20type%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20cleaner%20chaining%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Use%20type-safe%20getters%0A%20%20%20%20%20%20%20%20message%20%3A%3D%20shared.GetString(%22message%22)%0A%20%20%20%20%20%20%20%20retryCount%20%3A%3D%20shared.GetIntOr(%22retry_count%22%2C%200)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry%22%3A%20retryCount%2C%0A%20%20%20%20%20%20%20%20%7D)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20access%20to%20data%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.AsMapOr(nil)%0A%20%20%20%20%20%20%20%20message%20%3A%3D%20data%5B%22message%22%5D.(string)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20and%20return%20Result%0A%20%20%20%20%20%20%20%20processed%20%3A%3D%20processMessage(message)%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processed)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20flyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20result%20handling%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20execResult.Value()%0A%20%20%20%20%20%20%20%20shared.Set(%22result%22%2C%20result)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20shared.GetInt(%22retry_count%22)%20%3E%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_retries%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%23%20Any-based%20Functions%20(Simple)%0A%0AUse%20%60WithPrepFuncAny%60%2C%20%60WithExecFuncAny%60%2C%20and%20%60WithPostFuncAny%60%20for%20simpler%20cases%20or%20backward%20compatibility%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20with%20any-based%20functions%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Direct%20any%20types%0A%20%20%20%20%20%20%20%20message%20%3A%3D%20shared.GetString(%22message%22)%0A%20%20%20%20%20%20%20%20retryCount%20%3A%3D%20shared.GetIntOr(%22retry_count%22%2C%200)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20message%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry%22%3A%20retryCount%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20the%20data%0A%20%20%20%20%20%20%20%20return%20processMessage(data%5B%22message%22%5D.(string))%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20result%20and%20determine%20action%0A%20%20%20%20%20%20%20%20shared.Set(%22result%22%2C%20execResult)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20shared.GetInt(%22retry_count%22)%20%3E%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22max_retries%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%23%20Choosing%20Between%20Result%20and%20Any%0A%0A**Use%20Result-based%20functions%20when%3A**%0A-%20You%20need%20type-safe%20access%20to%20data%20with%20convenience%20methods%0A-%20Working%20with%20complex%20data%20transformations%0A-%20You%20want%20better%20IDE%20support%20and%20type%20checking%0A-%20Building%20reusable%20components%20that%20handle%20various%20data%20types%0A%0A**Use%20Any-based%20functions%20when%3A**%0A-%20Building%20simple%20nodes%20with%20straightforward%20logic%0A-%20Migrating%20existing%20code%20that%20uses%20%60any%60%20types%0A-%20The%20overhead%20of%20Result%20wrapping%20isn't%20justified%0A-%20Working%20with%20known%2C%20simple%20data%20types%0A%0A%23%23%23%20Custom%20Node%20Types%0A%0AFor%20complex%20nodes%20with%20state%3A%0A%0A%60%60%60go%0Atype%20DatabaseNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20db%20*sql.DB%0A%7D%0A%0Afunc%20NewDatabaseNode(db%20*sql.DB)%20*DatabaseNode%20%7B%0A%20%20%20%20return%20%26DatabaseNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20db%3A%20db%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DatabaseNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20rows%2C%20err%20%3A%3D%20n.db.QueryContext(ctx%2C%20query)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20return%20results%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Node%20Options%0A%0AConfigure%20node%20behavior%20with%20options%3A%0A%0A%60%60%60go%0A%2F%2F%20With%20Result%20type%20using%20fluent%20API%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20input%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20operations%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(processData(input.Value()))%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithMaxRetries(3).%20%20%20%20%20%20%20%20%2F%2F%20Retry%20up%20to%203%20times%0A%20%20%20%20WithWait(time.Second%20*%202)%20%2F%2F%20Wait%202%20seconds%20between%20retries%0A%0A%2F%2F%20With%20any%20type%20using%20fluent%20API%20%20%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Direct%20any%20handling%0A%20%20%20%20%20%20%20%20return%20processData(input)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithMaxRetries(3).%20%20%20%20%20%20%20%20%2F%2F%20Retry%20up%20to%203%20times%0A%20%20%20%20WithWait(time.Second%20*%202)%20%2F%2F%20Wait%202%20seconds%20between%20retries%0A%0A%2F%2F%20Traditional%20style%20still%20supported%0Anode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20input%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20processData(input)%2C%20nil%0A%20%20%20%20%7D)%2C%0A%20%20%20%20flyt.WithMaxRetries(3)%2C%0A%20%20%20%20flyt.WithWait(time.Second%20*%202)%2C%0A)%0A%60%60%60%0A%0A%23%23%20BaseNode%0A%0AThe%20%60BaseNode%60%20provides%20default%20implementations%3A%0A%0A%60%60%60go%0Atype%20MyNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20%2F%2F%20Add%20custom%20fields%0A%7D%0A%0Afunc%20NewMyNode()%20*MyNode%20%7B%0A%20%20%20%20return%20%26MyNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode(%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithMaxRetries(5)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.WithWait(time.Second)%2C%0A%20%20%20%20%20%20%20%20)%2C%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Override%20only%20the%20methods%20you%20need%0Afunc%20(n%20*MyNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Custom%20exec%20logic%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ANodes%20should%20be%20thread-safe%20if%20used%20in%20concurrent%20batch%20operations%3A%0A%0A%60%60%60go%0Atype%20SafeNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20mu%20%20%20%20%20%20sync.Mutex%0A%20%20%20%20counter%20int%0A%7D%0A%0Afunc%20(n%20*SafeNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20count%20%3A%3D%20n.counter%0A%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20count)%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Single%20Responsibility**%3A%20Each%20node%20should%20do%20one%20thing%20well%0A2.%20**Idempotency**%3A%20Design%20nodes%20to%20be%20safely%20retryable%0A3.%20**Context%20Handling**%3A%20Always%20respect%20context%20cancellation%0A4.%20**Error%20Handling**%3A%20Return%20clear%2C%20actionable%20errors%0A5.%20**Resource%20Management**%3A%20Clean%20up%20resources%20in%20defer%20blocks%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Connect%20nodes%20into%20workflows%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./shared-store-CKfpfdBt.js"),[]),path:"/concepts/shared-store",type:"mdx",filePath:"concepts/shared-store.mdx",content:"%23%20Shared%20Store%0A%0AThe%20SharedStore%20provides%20thread-safe%20data%20sharing%20between%20nodes%20in%20a%20flow.%20It%20acts%20as%20a%20key-value%20store%20that%20persists%20throughout%20flow%20execution%20with%20type-safe%20helpers%20for%20common%20operations.%0A%0A%23%23%20Creating%20a%20SharedStore%0A%0A%60%60%60go%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%60%60%60%0A%0A%23%23%20Basic%20Operations%0A%0A%23%23%23%20Set%20and%20Get%0A%0AStore%20and%20retrieve%20individual%20values%20with%20the%20original%20API%3A%0A%0A%60%60%60go%0A%2F%2F%20Set%20a%20value%0Ashared.Set(%22user_id%22%2C%20123)%0Ashared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%22timeout%22%3A%2030%7D)%0A%0A%2F%2F%20Type-safe%20getter%20(recommended)%0AuserID%20%3A%3D%20shared.GetInt(%22user_id%22)%0Afmt.Printf(%22User%20ID%3A%20%25d%5Cn%22%2C%20userID)%0A%60%60%60%0A%0A%23%23%23%20Type-Safe%20Getters%0A%0AUse%20type-specific%20getters%20to%20avoid%20manual%20type%20assertions%3A%0A%0A%60%60%60go%0A%2F%2F%20Type-safe%20getters%20(return%20zero%20values%20if%20not%20found%20or%20wrong%20type)%0AuserID%20%3A%3D%20shared.GetInt(%22user_id%22)%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%200%20if%20not%20found%0Aname%20%3A%3D%20shared.GetString(%22name%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20%22%22%20if%20not%20found%0Aprice%20%3A%3D%20shared.GetFloat64(%22price%22)%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%200.0%20if%20not%20found%0Aenabled%20%3A%3D%20shared.GetBool(%22enabled%22)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20false%20if%20not%20found%0Aitems%20%3A%3D%20shared.GetSlice(%22items%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20nil%20if%20not%20found%0Aconfig%20%3A%3D%20shared.GetMap(%22config%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20nil%20if%20not%20found%0A%0A%2F%2F%20Type-safe%20getters%20with%20custom%20defaults%0AuserID%20%3D%20shared.GetIntOr(%22user_id%22%2C%20-1)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20-1%20if%20not%20found%0Aname%20%3D%20shared.GetStringOr(%22name%22%2C%20%22anonymous%22)%20%20%20%20%20%20%20%2F%2F%20Returns%20%22anonymous%22%20if%20not%20found%0Aprice%20%3D%20shared.GetFloat64Or(%22price%22%2C%2099.99)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%2099.99%20if%20not%20found%0Aenabled%20%3D%20shared.GetBoolOr(%22enabled%22%2C%20true)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20true%20if%20not%20found%0A%60%60%60%0A%0AThe%20type-safe%20getters%20handle%20numeric%20conversions%20automatically%3A%0A-%20%60GetInt()%60%20converts%20from%20int8%2C%20int16%2C%20int32%2C%20int64%2C%20uint%20variants%2C%20and%20float%20types%0A-%20%60GetFloat64()%60%20converts%20from%20all%20numeric%20types%20including%20int%20and%20float32%0A%0A%23%23%23%20Bind%20Method%0A%0ABind%20complex%20types%20directly%20to%20structs%20(similar%20to%20Echo%20framework)%3A%0A%0A%60%60%60go%0A%2F%2F%20Define%20your%20struct%0Atype%20User%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20int%20%20%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20string%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20string%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20Tags%20%20%20%20%20%5B%5Dstring%20%60json%3A%22tags%22%60%0A%7D%0A%0A%2F%2F%20Store%20as%20map%0Ashared.Set(%22user%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%22id%22%3A%20%20%20%20123%2C%0A%20%20%20%20%22name%22%3A%20%20%22Alice%22%2C%0A%20%20%20%20%22email%22%3A%20%22alice%40example.com%22%2C%0A%20%20%20%20%22tags%22%3A%20%20%5B%5Dstring%7B%22admin%22%2C%20%22developer%22%7D%2C%0A%7D)%0A%0A%2F%2F%20Bind%20to%20struct%0Avar%20user%20User%0Aerr%20%3A%3D%20shared.Bind(%22user%22%2C%20%26user)%20%20%2F%2F%20Automatically%20converts%20map%20to%20struct%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%2F%2F%20Handle%20error%0A%7D%0A%0A%2F%2F%20Or%20use%20MustBind%20(panics%20on%20failure%20-%20use%20for%20required%20data)%0Avar%20config%20Config%0Ashared.MustBind(%22config%22%2C%20%26config)%0A%60%60%60%0A%0A%23%23%23%20Utility%20Methods%0A%0AAdditional%20helper%20methods%20for%20store%20management%3A%0A%0A%60%60%60go%0A%2F%2F%20Check%20if%20key%20exists%0Aif%20shared.Has(%22user_id%22)%20%7B%0A%20%20%20%20%2F%2F%20Key%20exists%0A%7D%0A%0A%2F%2F%20Delete%20a%20key%0Ashared.Delete(%22temp_data%22)%0A%0A%2F%2F%20Get%20all%20keys%0Akeys%20%3A%3D%20shared.Keys()%20%20%2F%2F%20Returns%20%5B%5Dstring%0A%0A%2F%2F%20Get%20number%20of%20items%0Acount%20%3A%3D%20shared.Len()%0A%0A%2F%2F%20Clear%20all%20items%0Ashared.Clear()%0A%60%60%60%0A%0A%23%23%23%20GetAll%0A%0AGet%20a%20copy%20of%20all%20stored%20data%3A%0A%0A%60%60%60go%0AallData%20%3A%3D%20shared.GetAll()%0Afor%20key%2C%20value%20%3A%3D%20range%20allData%20%7B%0A%20%20%20%20fmt.Printf(%22%25s%3A%20%25v%5Cn%22%2C%20key%2C%20value)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%0A%0AMerge%20multiple%20values%20at%20once%3A%0A%0A%60%60%60go%0Ashared.Merge(map%5Bstring%5Dany%7B%0A%20%20%20%20%22status%22%3A%20%22active%22%2C%0A%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%22metadata%22%3A%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0%22%2C%0A%20%20%20%20%20%20%20%20%22env%22%3A%20%22production%22%2C%0A%20%20%20%20%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ASharedStore%20is%20safe%20for%20concurrent%20access%3A%0A%0A%60%60%60go%0Avar%20wg%20sync.WaitGroup%0A%0A%2F%2F%20Multiple%20goroutines%20can%20safely%20access%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20wg.Add(1)%0A%20%20%20%20go%20func(id%20int)%20%7B%0A%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20shared.Set(fmt.Sprintf(%22worker_%25d%22%2C%20id)%2C%20%22done%22)%0A%20%20%20%20%7D(i)%0A%7D%0A%0Awg.Wait()%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Configuration%20Storage%0A%0AStore%20configuration%20that%20multiple%20nodes%20need%3A%0A%0A%60%60%60go%0A%2F%2F%20Define%20configuration%20struct%0Atype%20APIConfig%20struct%20%7B%0A%20%20%20%20BaseURL%20string%20%60json%3A%22base_url%22%60%0A%20%20%20%20APIKey%20%20string%20%60json%3A%22api_key%22%60%0A%20%20%20%20Timeout%20string%20%60json%3A%22timeout%22%60%0A%7D%0A%0A%2F%2F%20In%20main%20or%20initial%20node%0Ashared.Set(%22api_config%22%2C%20APIConfig%7B%0A%20%20%20%20BaseURL%3A%20%22https%3A%2F%2Fapi.example.com%22%2C%0A%20%20%20%20APIKey%3A%20%20os.Getenv(%22API_KEY%22)%2C%0A%20%20%20%20Timeout%3A%20%2230s%22%2C%0A%7D)%0A%0A%2F%2F%20In%20any%20node%20-%20using%20Bind%0Afunc%20(n%20*APINode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20config%20APIConfig%0A%20%20%20%20if%20err%20%3A%3D%20shared.Bind(%22api_config%22%2C%20%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%0A%2F%2F%20Or%20using%20GetMap%20for%20simple%20access%0Afunc%20(n%20*APINode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20shared.GetMap(%22api_config%22)%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Accumulating%20Results%0A%0ACollect%20results%20from%20multiple%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Node%201%20-%20Using%20type-safe%20getters%0Afunc%20(n%20*Node1)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20GetSlice%20returns%20nil%20if%20not%20found%2C%20perfect%20for%20initialization%0A%20%20%20%20results%20%3A%3D%20shared.GetSlice(%22results%22)%0A%20%20%20%20if%20results%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20results%20%3D%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20results%20%3D%20append(results%2C%20execResult)%0A%20%20%20%20shared.Set(%22results%22%2C%20results)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Management%0A%0ATrack%20workflow%20state%20with%20type%20safety%3A%0A%0A%60%60%60go%0A%2F%2F%20Initialize%20state%0Ashared.Set(%22workflow_state%22%2C%20%22initialized%22)%0Ashared.Set(%22retry_count%22%2C%200)%0Ashared.Set(%22start_time%22%2C%20time.Now())%0A%0A%2F%2F%20Update%20state%20in%20nodes%20with%20increment%0Afunc%20incrementRetry(shared%20*flyt.SharedStore)%20int%20%7B%0A%20%20%20%20count%20%3A%3D%20shared.GetInt(%22retry_count%22)%0A%20%20%20%20count%2B%2B%0A%20%20%20%20shared.Set(%22retry_count%22%2C%20count)%0A%20%20%20%20shared.Set(%22last_retry%22%2C%20time.Now())%0A%20%20%20%20return%20count%0A%7D%0A%0A%2F%2F%20Check%20state%0Afunc%20checkState(shared%20*flyt.SharedStore)%20string%20%7B%0A%20%20%20%20return%20shared.GetStringOr(%22workflow_state%22%2C%20%22unknown%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Context%0A%0AStore%20error%20information%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ErrorHandler)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22node%22%3A%20%22ProcessNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20prepResult%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%0A%0ASharedStore%20in%20batch%20operations%3A%0A%0A%60%60%60go%0A%2F%2F%20Store%20items%20to%20process%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0A%2F%2F%20Store%20batch%20configuration%0Ashared.Set(%22batch_config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%22batch_size%22%3A%2010%2C%0A%20%20%20%20%22concurrent%22%3A%20true%2C%0A%20%20%20%20%22timeout%22%3A%2060%2C%0A%7D)%0A%0A%2F%2F%20After%20batch%20processing%0Aresults%20%3A%3D%20shared.GetSlice(%22results%22)%0Aerrors%20%3A%3D%20shared.GetSlice(%22errors%22)%0A%60%60%60%0A%0A%23%23%20Isolation%20in%20Batch%20Flows%0A%0AEach%20flow%20in%20a%20batch%20has%20its%20own%20SharedStore%3A%0A%0A%60%60%60go%0A%2F%2F%20Use%20BatchNode%20to%20process%20multiple%20parameter%20sets%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20baseConfig%20%3A%3D%20shared.GetMap(%22base_config%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Each%20Result%20represents%20a%20parameter%20set%0A%20%20%20%20%20%20%20%20return%20%5B%5Dflyt.Result%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22id%22%3A%201%2C%20%22config%22%3A%20baseConfig%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22id%22%3A%202%2C%20%22config%22%3A%20baseConfig%7D)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20params%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20params.MustMap()%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20with%20parameters%0A%20%20%20%20%20%20%20%20return%20processWithConfig(data%5B%22id%22%5D.(int)%2C%20data%5B%22config%22%5D)%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A%23%23%23%201.%20Type%20Safety%0A%0AUse%20type-safe%20getters%20to%20avoid%20manual%20assertions%3A%0A%0A%60%60%60go%0A%2F%2F%20Type-safe%20getter%20(recommended)%0Acount%20%3A%3D%20shared.GetInt(%22count%22)%20%20%2F%2F%20Returns%200%20if%20not%20found%20or%20wrong%20type%0A%0A%2F%2F%20Or%20with%20custom%20default%0Acount%20%3A%3D%20shared.GetIntOr(%22count%22%2C%20-1)%20%20%2F%2F%20Returns%20-1%20if%20not%20found%0A%0A%2F%2F%20For%20complex%20types%2C%20use%20Bind%0Avar%20userData%20UserData%0Aif%20err%20%3A%3D%20shared.Bind(%22user_data%22%2C%20%26userData)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%2F%2F%20Handle%20error%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Key%20Naming%0A%0AUse%20consistent%2C%20descriptive%20keys%3A%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20KeyUserID%20%20%20%20%20%3D%20%22user_id%22%0A%20%20%20%20KeyAuthToken%20%20%3D%20%22auth_token%22%0A%20%20%20%20KeyResults%20%20%20%20%3D%20%22processing_results%22%0A%20%20%20%20KeyErrorCount%20%3D%20%22error_count%22%0A)%0A%60%60%60%0A%0A%23%23%23%203.%20Data%20Structure%0A%0AStore%20structured%20data%20for%20clarity%3A%0A%0A%60%60%60go%0Atype%20WorkflowContext%20struct%20%7B%0A%20%20%20%20RequestID%20string%0A%20%20%20%20UserID%20%20%20%20int%0A%20%20%20%20StartTime%20time.Time%0A%20%20%20%20Metadata%20%20map%5Bstring%5Dstring%0A%7D%0A%0Ashared.Set(%22context%22%2C%20WorkflowContext%7B%0A%20%20%20%20RequestID%3A%20%22req-123%22%2C%0A%20%20%20%20UserID%3A%20%20%20%20456%2C%0A%20%20%20%20StartTime%3A%20time.Now()%2C%0A%20%20%20%20Metadata%3A%20%20map%5Bstring%5Dstring%7B%22source%22%3A%20%22api%22%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%23%204.%20Cleanup%0A%0AClear%20sensitive%20data%20when%20done%3A%0A%0A%60%60%60go%0Adefer%20func()%20%7B%0A%20%20%20%20%2F%2F%20Clear%20sensitive%20data%0A%20%20%20%20shared.Set(%22auth_token%22%2C%20nil)%0A%20%20%20%20shared.Set(%22api_key%22%2C%20nil)%0A%7D()%0A%60%60%60%0A%0A%23%23%23%205.%20Documentation%0A%0ADocument%20expected%20keys%3A%0A%0A%60%60%60go%0A%2F%2F%20SharedStore%20keys%20used%20by%20this%20flow%3A%0A%2F%2F%20-%20%22input_file%22%3A%20string%20-%20Path%20to%20input%20file%0A%2F%2F%20-%20%22output_dir%22%3A%20string%20-%20Output%20directory%20path%0A%2F%2F%20-%20%22processed_count%22%3A%20int%20-%20Number%20of%20processed%20items%0A%2F%2F%20-%20%22errors%22%3A%20%5B%5Derror%20-%20Collection%20of%20errors%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0AUse%20GetAll%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20debugSharedStore(shared%20*flyt.SharedStore)%20%7B%0A%20%20%20%20data%20%3A%3D%20shared.GetAll()%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%20SharedStore%20Contents%20%3D%3D%3D%22)%0A%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%25s%3A%20%25T%20%3D%20%25v%5Cn%22%2C%20k%2C%20v%2C%20v)%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Use%20SharedStore%20in%20node%20lifecycle%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20SharedStore%20in%20batch%20operations%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20Flyt%20best%20practices",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./shared-store-CKfpfdBt.js"),[]),path:"/concepts/shared-store.html",type:"mdx",filePath:"concepts/shared-store.mdx",content:"%23%20Shared%20Store%0A%0AThe%20SharedStore%20provides%20thread-safe%20data%20sharing%20between%20nodes%20in%20a%20flow.%20It%20acts%20as%20a%20key-value%20store%20that%20persists%20throughout%20flow%20execution%20with%20type-safe%20helpers%20for%20common%20operations.%0A%0A%23%23%20Creating%20a%20SharedStore%0A%0A%60%60%60go%0Ashared%20%3A%3D%20flyt.NewSharedStore()%0A%60%60%60%0A%0A%23%23%20Basic%20Operations%0A%0A%23%23%23%20Set%20and%20Get%0A%0AStore%20and%20retrieve%20individual%20values%20with%20the%20original%20API%3A%0A%0A%60%60%60go%0A%2F%2F%20Set%20a%20value%0Ashared.Set(%22user_id%22%2C%20123)%0Ashared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%22timeout%22%3A%2030%7D)%0A%0A%2F%2F%20Type-safe%20getter%20(recommended)%0AuserID%20%3A%3D%20shared.GetInt(%22user_id%22)%0Afmt.Printf(%22User%20ID%3A%20%25d%5Cn%22%2C%20userID)%0A%60%60%60%0A%0A%23%23%23%20Type-Safe%20Getters%0A%0AUse%20type-specific%20getters%20to%20avoid%20manual%20type%20assertions%3A%0A%0A%60%60%60go%0A%2F%2F%20Type-safe%20getters%20(return%20zero%20values%20if%20not%20found%20or%20wrong%20type)%0AuserID%20%3A%3D%20shared.GetInt(%22user_id%22)%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%200%20if%20not%20found%0Aname%20%3A%3D%20shared.GetString(%22name%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20%22%22%20if%20not%20found%0Aprice%20%3A%3D%20shared.GetFloat64(%22price%22)%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%200.0%20if%20not%20found%0Aenabled%20%3A%3D%20shared.GetBool(%22enabled%22)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20false%20if%20not%20found%0Aitems%20%3A%3D%20shared.GetSlice(%22items%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20nil%20if%20not%20found%0Aconfig%20%3A%3D%20shared.GetMap(%22config%22)%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20nil%20if%20not%20found%0A%0A%2F%2F%20Type-safe%20getters%20with%20custom%20defaults%0AuserID%20%3D%20shared.GetIntOr(%22user_id%22%2C%20-1)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20-1%20if%20not%20found%0Aname%20%3D%20shared.GetStringOr(%22name%22%2C%20%22anonymous%22)%20%20%20%20%20%20%20%2F%2F%20Returns%20%22anonymous%22%20if%20not%20found%0Aprice%20%3D%20shared.GetFloat64Or(%22price%22%2C%2099.99)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%2099.99%20if%20not%20found%0Aenabled%20%3D%20shared.GetBoolOr(%22enabled%22%2C%20true)%20%20%20%20%20%20%20%20%20%20%2F%2F%20Returns%20true%20if%20not%20found%0A%60%60%60%0A%0AThe%20type-safe%20getters%20handle%20numeric%20conversions%20automatically%3A%0A-%20%60GetInt()%60%20converts%20from%20int8%2C%20int16%2C%20int32%2C%20int64%2C%20uint%20variants%2C%20and%20float%20types%0A-%20%60GetFloat64()%60%20converts%20from%20all%20numeric%20types%20including%20int%20and%20float32%0A%0A%23%23%23%20Bind%20Method%0A%0ABind%20complex%20types%20directly%20to%20structs%20(similar%20to%20Echo%20framework)%3A%0A%0A%60%60%60go%0A%2F%2F%20Define%20your%20struct%0Atype%20User%20struct%20%7B%0A%20%20%20%20ID%20%20%20%20%20%20%20int%20%20%20%20%20%20%60json%3A%22id%22%60%0A%20%20%20%20Name%20%20%20%20%20string%20%20%20%60json%3A%22name%22%60%0A%20%20%20%20Email%20%20%20%20string%20%20%20%60json%3A%22email%22%60%0A%20%20%20%20Tags%20%20%20%20%20%5B%5Dstring%20%60json%3A%22tags%22%60%0A%7D%0A%0A%2F%2F%20Store%20as%20map%0Ashared.Set(%22user%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%22id%22%3A%20%20%20%20123%2C%0A%20%20%20%20%22name%22%3A%20%20%22Alice%22%2C%0A%20%20%20%20%22email%22%3A%20%22alice%40example.com%22%2C%0A%20%20%20%20%22tags%22%3A%20%20%5B%5Dstring%7B%22admin%22%2C%20%22developer%22%7D%2C%0A%7D)%0A%0A%2F%2F%20Bind%20to%20struct%0Avar%20user%20User%0Aerr%20%3A%3D%20shared.Bind(%22user%22%2C%20%26user)%20%20%2F%2F%20Automatically%20converts%20map%20to%20struct%0Aif%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%2F%2F%20Handle%20error%0A%7D%0A%0A%2F%2F%20Or%20use%20MustBind%20(panics%20on%20failure%20-%20use%20for%20required%20data)%0Avar%20config%20Config%0Ashared.MustBind(%22config%22%2C%20%26config)%0A%60%60%60%0A%0A%23%23%23%20Utility%20Methods%0A%0AAdditional%20helper%20methods%20for%20store%20management%3A%0A%0A%60%60%60go%0A%2F%2F%20Check%20if%20key%20exists%0Aif%20shared.Has(%22user_id%22)%20%7B%0A%20%20%20%20%2F%2F%20Key%20exists%0A%7D%0A%0A%2F%2F%20Delete%20a%20key%0Ashared.Delete(%22temp_data%22)%0A%0A%2F%2F%20Get%20all%20keys%0Akeys%20%3A%3D%20shared.Keys()%20%20%2F%2F%20Returns%20%5B%5Dstring%0A%0A%2F%2F%20Get%20number%20of%20items%0Acount%20%3A%3D%20shared.Len()%0A%0A%2F%2F%20Clear%20all%20items%0Ashared.Clear()%0A%60%60%60%0A%0A%23%23%23%20GetAll%0A%0AGet%20a%20copy%20of%20all%20stored%20data%3A%0A%0A%60%60%60go%0AallData%20%3A%3D%20shared.GetAll()%0Afor%20key%2C%20value%20%3A%3D%20range%20allData%20%7B%0A%20%20%20%20fmt.Printf(%22%25s%3A%20%25v%5Cn%22%2C%20key%2C%20value)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Merge%0A%0AMerge%20multiple%20values%20at%20once%3A%0A%0A%60%60%60go%0Ashared.Merge(map%5Bstring%5Dany%7B%0A%20%20%20%20%22status%22%3A%20%22active%22%2C%0A%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%22metadata%22%3A%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22version%22%3A%20%221.0%22%2C%0A%20%20%20%20%20%20%20%20%22env%22%3A%20%22production%22%2C%0A%20%20%20%20%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Thread%20Safety%0A%0ASharedStore%20is%20safe%20for%20concurrent%20access%3A%0A%0A%60%60%60go%0Avar%20wg%20sync.WaitGroup%0A%0A%2F%2F%20Multiple%20goroutines%20can%20safely%20access%0Afor%20i%20%3A%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B%20%7B%0A%20%20%20%20wg.Add(1)%0A%20%20%20%20go%20func(id%20int)%20%7B%0A%20%20%20%20%20%20%20%20defer%20wg.Done()%0A%20%20%20%20%20%20%20%20shared.Set(fmt.Sprintf(%22worker_%25d%22%2C%20id)%2C%20%22done%22)%0A%20%20%20%20%7D(i)%0A%7D%0A%0Awg.Wait()%0A%60%60%60%0A%0A%23%23%20Common%20Patterns%0A%0A%23%23%23%20Configuration%20Storage%0A%0AStore%20configuration%20that%20multiple%20nodes%20need%3A%0A%0A%60%60%60go%0A%2F%2F%20Define%20configuration%20struct%0Atype%20APIConfig%20struct%20%7B%0A%20%20%20%20BaseURL%20string%20%60json%3A%22base_url%22%60%0A%20%20%20%20APIKey%20%20string%20%60json%3A%22api_key%22%60%0A%20%20%20%20Timeout%20string%20%60json%3A%22timeout%22%60%0A%7D%0A%0A%2F%2F%20In%20main%20or%20initial%20node%0Ashared.Set(%22api_config%22%2C%20APIConfig%7B%0A%20%20%20%20BaseURL%3A%20%22https%3A%2F%2Fapi.example.com%22%2C%0A%20%20%20%20APIKey%3A%20%20os.Getenv(%22API_KEY%22)%2C%0A%20%20%20%20Timeout%3A%20%2230s%22%2C%0A%7D)%0A%0A%2F%2F%20In%20any%20node%20-%20using%20Bind%0Afunc%20(n%20*APINode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20var%20config%20APIConfig%0A%20%20%20%20if%20err%20%3A%3D%20shared.Bind(%22api_config%22%2C%20%26config)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%0A%2F%2F%20Or%20using%20GetMap%20for%20simple%20access%0Afunc%20(n%20*APINode)%20Prep(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20config%20%3A%3D%20shared.GetMap(%22api_config%22)%0A%20%20%20%20return%20config%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Accumulating%20Results%0A%0ACollect%20results%20from%20multiple%20nodes%3A%0A%0A%60%60%60go%0A%2F%2F%20Node%201%20-%20Using%20type-safe%20getters%0Afunc%20(n%20*Node1)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20GetSlice%20returns%20nil%20if%20not%20found%2C%20perfect%20for%20initialization%0A%20%20%20%20results%20%3A%3D%20shared.GetSlice(%22results%22)%0A%20%20%20%20if%20results%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20results%20%3D%20%5B%5Dany%7B%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20results%20%3D%20append(results%2C%20execResult)%0A%20%20%20%20shared.Set(%22results%22%2C%20results)%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%23%20State%20Management%0A%0ATrack%20workflow%20state%20with%20type%20safety%3A%0A%0A%60%60%60go%0A%2F%2F%20Initialize%20state%0Ashared.Set(%22workflow_state%22%2C%20%22initialized%22)%0Ashared.Set(%22retry_count%22%2C%200)%0Ashared.Set(%22start_time%22%2C%20time.Now())%0A%0A%2F%2F%20Update%20state%20in%20nodes%20with%20increment%0Afunc%20incrementRetry(shared%20*flyt.SharedStore)%20int%20%7B%0A%20%20%20%20count%20%3A%3D%20shared.GetInt(%22retry_count%22)%0A%20%20%20%20count%2B%2B%0A%20%20%20%20shared.Set(%22retry_count%22%2C%20count)%0A%20%20%20%20shared.Set(%22last_retry%22%2C%20time.Now())%0A%20%20%20%20return%20count%0A%7D%0A%0A%2F%2F%20Check%20state%0Afunc%20checkState(shared%20*flyt.SharedStore)%20string%20%7B%0A%20%20%20%20return%20shared.GetStringOr(%22workflow_state%22%2C%20%22unknown%22)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Error%20Context%0A%0AStore%20error%20information%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ErrorHandler)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%20%3A%3D%20execResult.(error)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22node%22%3A%20%22ProcessNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22timestamp%22%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22input%22%3A%20prepResult%2C%0A%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Batch%20Processing%0A%0ASharedStore%20in%20batch%20operations%3A%0A%0A%60%60%60go%0A%2F%2F%20Store%20items%20to%20process%0Ashared.Set(%22items%22%2C%20%5B%5Dstring%7B%22item1%22%2C%20%22item2%22%2C%20%22item3%22%7D)%0A%0A%2F%2F%20Store%20batch%20configuration%0Ashared.Set(%22batch_config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%22batch_size%22%3A%2010%2C%0A%20%20%20%20%22concurrent%22%3A%20true%2C%0A%20%20%20%20%22timeout%22%3A%2060%2C%0A%7D)%0A%0A%2F%2F%20After%20batch%20processing%0Aresults%20%3A%3D%20shared.GetSlice(%22results%22)%0Aerrors%20%3A%3D%20shared.GetSlice(%22errors%22)%0A%60%60%60%0A%0A%23%23%20Isolation%20in%20Batch%20Flows%0A%0AEach%20flow%20in%20a%20batch%20has%20its%20own%20SharedStore%3A%0A%0A%60%60%60go%0A%2F%2F%20Use%20BatchNode%20to%20process%20multiple%20parameter%20sets%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20baseConfig%20%3A%3D%20shared.GetMap(%22base_config%22)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Each%20Result%20represents%20a%20parameter%20set%0A%20%20%20%20%20%20%20%20return%20%5B%5Dflyt.Result%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22id%22%3A%201%2C%20%22config%22%3A%20baseConfig%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20flyt.NewResult(map%5Bstring%5Dany%7B%22id%22%3A%202%2C%20%22config%22%3A%20baseConfig%7D)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20params%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20params.MustMap()%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20with%20parameters%0A%20%20%20%20%20%20%20%20return%20processWithConfig(data%5B%22id%22%5D.(int)%2C%20data%5B%22config%22%5D)%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A%23%23%23%201.%20Type%20Safety%0A%0AUse%20type-safe%20getters%20to%20avoid%20manual%20assertions%3A%0A%0A%60%60%60go%0A%2F%2F%20Type-safe%20getter%20(recommended)%0Acount%20%3A%3D%20shared.GetInt(%22count%22)%20%20%2F%2F%20Returns%200%20if%20not%20found%20or%20wrong%20type%0A%0A%2F%2F%20Or%20with%20custom%20default%0Acount%20%3A%3D%20shared.GetIntOr(%22count%22%2C%20-1)%20%20%2F%2F%20Returns%20-1%20if%20not%20found%0A%0A%2F%2F%20For%20complex%20types%2C%20use%20Bind%0Avar%20userData%20UserData%0Aif%20err%20%3A%3D%20shared.Bind(%22user_data%22%2C%20%26userData)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%2F%2F%20Handle%20error%0A%7D%0A%60%60%60%0A%0A%23%23%23%202.%20Key%20Naming%0A%0AUse%20consistent%2C%20descriptive%20keys%3A%0A%0A%60%60%60go%0Aconst%20(%0A%20%20%20%20KeyUserID%20%20%20%20%20%3D%20%22user_id%22%0A%20%20%20%20KeyAuthToken%20%20%3D%20%22auth_token%22%0A%20%20%20%20KeyResults%20%20%20%20%3D%20%22processing_results%22%0A%20%20%20%20KeyErrorCount%20%3D%20%22error_count%22%0A)%0A%60%60%60%0A%0A%23%23%23%203.%20Data%20Structure%0A%0AStore%20structured%20data%20for%20clarity%3A%0A%0A%60%60%60go%0Atype%20WorkflowContext%20struct%20%7B%0A%20%20%20%20RequestID%20string%0A%20%20%20%20UserID%20%20%20%20int%0A%20%20%20%20StartTime%20time.Time%0A%20%20%20%20Metadata%20%20map%5Bstring%5Dstring%0A%7D%0A%0Ashared.Set(%22context%22%2C%20WorkflowContext%7B%0A%20%20%20%20RequestID%3A%20%22req-123%22%2C%0A%20%20%20%20UserID%3A%20%20%20%20456%2C%0A%20%20%20%20StartTime%3A%20time.Now()%2C%0A%20%20%20%20Metadata%3A%20%20map%5Bstring%5Dstring%7B%22source%22%3A%20%22api%22%7D%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%23%204.%20Cleanup%0A%0AClear%20sensitive%20data%20when%20done%3A%0A%0A%60%60%60go%0Adefer%20func()%20%7B%0A%20%20%20%20%2F%2F%20Clear%20sensitive%20data%0A%20%20%20%20shared.Set(%22auth_token%22%2C%20nil)%0A%20%20%20%20shared.Set(%22api_key%22%2C%20nil)%0A%7D()%0A%60%60%60%0A%0A%23%23%23%205.%20Documentation%0A%0ADocument%20expected%20keys%3A%0A%0A%60%60%60go%0A%2F%2F%20SharedStore%20keys%20used%20by%20this%20flow%3A%0A%2F%2F%20-%20%22input_file%22%3A%20string%20-%20Path%20to%20input%20file%0A%2F%2F%20-%20%22output_dir%22%3A%20string%20-%20Output%20directory%20path%0A%2F%2F%20-%20%22processed_count%22%3A%20int%20-%20Number%20of%20processed%20items%0A%2F%2F%20-%20%22errors%22%3A%20%5B%5Derror%20-%20Collection%20of%20errors%0A%60%60%60%0A%0A%23%23%20Debugging%0A%0AUse%20GetAll%20for%20debugging%3A%0A%0A%60%60%60go%0Afunc%20debugSharedStore(shared%20*flyt.SharedStore)%20%7B%0A%20%20%20%20data%20%3A%3D%20shared.GetAll()%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%20SharedStore%20Contents%20%3D%3D%3D%22)%0A%20%20%20%20for%20k%2C%20v%20%3A%3D%20range%20data%20%7B%0A%20%20%20%20%20%20%20%20fmt.Printf(%22%25s%3A%20%25T%20%3D%20%25v%5Cn%22%2C%20k%2C%20v%2C%20v)%0A%20%20%20%20%7D%0A%20%20%20%20fmt.Println(%22%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%3D%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Use%20SharedStore%20in%20node%20lifecycle%0A-%20%5BBatch%20Processing%5D(%2Fadvanced%2Fbatch-processing)%20-%20SharedStore%20in%20batch%20operations%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20Flyt%20best%20practices",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./installation-ZsACaxRV.js"),[]),path:"/getting-started/installation",type:"mdx",filePath:"getting-started/installation.mdx",content:"%23%20Installation%0A%0AFlyt%20requires%20Go%201.21%20or%20later.%0A%0A%23%23%20Install%20with%20go%20get%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fflyt%0A%60%60%60%0A%0A%23%23%20Import%20in%20your%20code%0A%0A%60%60%60go%0Aimport%20%22github.com%2Fmark3labs%2Fflyt%22%0A%60%60%60%0A%0A%23%23%20Verify%20installation%0A%0ACreate%20a%20simple%20test%20file%20to%20verify%20the%20installation%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22test%22%2C%20%22success%22)%0A%20%20%20%20%0A%20%20%20%20val%20%3A%3D%20shared.GetString(%22test%22)%0A%20%20%20%20fmt.Printf(%22Flyt%20installed%20successfully!%20Value%3A%20%25s%5Cn%22%2C%20val)%0A%7D%0A%60%60%60%0A%0ARun%20it%3A%0A%0A%60%60%60bash%0Ago%20run%20main.go%0A%60%60%60%0A%0AYou%20should%20see%3A%0A%60%60%60%0AFlyt%20installed%20successfully!%20Value%3A%20success%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BQuick%20Start%20Guide%5D(%2Fgetting-started%2Fquick-start)%20-%20Build%20your%20first%20workflow%0A-%20%5BProject%20Template%5D(%2Fgetting-started%2Ftemplate)%20-%20Start%20with%20a%20pre-configured%20project%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20the%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./installation-ZsACaxRV.js"),[]),path:"/getting-started/installation.html",type:"mdx",filePath:"getting-started/installation.mdx",content:"%23%20Installation%0A%0AFlyt%20requires%20Go%201.21%20or%20later.%0A%0A%23%23%20Install%20with%20go%20get%0A%0A%60%60%60bash%0Ago%20get%20github.com%2Fmark3labs%2Fflyt%0A%60%60%60%0A%0A%23%23%20Import%20in%20your%20code%0A%0A%60%60%60go%0Aimport%20%22github.com%2Fmark3labs%2Fflyt%22%0A%60%60%60%0A%0A%23%23%20Verify%20installation%0A%0ACreate%20a%20simple%20test%20file%20to%20verify%20the%20installation%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22test%22%2C%20%22success%22)%0A%20%20%20%20%0A%20%20%20%20val%20%3A%3D%20shared.GetString(%22test%22)%0A%20%20%20%20fmt.Printf(%22Flyt%20installed%20successfully!%20Value%3A%20%25s%5Cn%22%2C%20val)%0A%7D%0A%60%60%60%0A%0ARun%20it%3A%0A%0A%60%60%60bash%0Ago%20run%20main.go%0A%60%60%60%0A%0AYou%20should%20see%3A%0A%60%60%60%0AFlyt%20installed%20successfully!%20Value%3A%20success%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BQuick%20Start%20Guide%5D(%2Fgetting-started%2Fquick-start)%20-%20Build%20your%20first%20workflow%0A-%20%5BProject%20Template%5D(%2Fgetting-started%2Ftemplate)%20-%20Start%20with%20a%20pre-configured%20project%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20the%20fundamentals",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./quick-start-BfzCH8Op.js"),[]),path:"/getting-started/quick-start",type:"mdx",filePath:"getting-started/quick-start.mdx",content:"%23%20Quick%20Start%0A%0AThis%20guide%20will%20help%20you%20build%20your%20first%20Flyt%20workflow%20in%205%20minutes.%0A%0A%23%23%20Your%20First%20Node%0A%0ALet's%20start%20with%20a%20simple%20node%20that%20processes%20data.%20You%20can%20choose%20between%20two%20approaches%3A%0A%0A%23%23%23%20Using%20Result%20Type%20(Recommended%20for%20Type%20Safety)%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20node%20with%20Result%20type%20using%20fluent%20API%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(%22Hello%2C%20Flyt!%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Or%20using%20traditional%20style%20with%20options%0A%20%20%20%20node%20%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(%22Hello%2C%20Flyt!%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20and%20context%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Run%20the%20node%0A%20%20%20%20action%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Completed%20with%20action%3A%20%25s%5Cn%22%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Using%20Any%20Type%20(Simple%20Approach)%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20node%20with%20any%20type%20using%20fluent%20API%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Hello%2C%20Flyt!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20and%20context%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Run%20the%20node%0A%20%20%20%20action%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Completed%20with%20action%3A%20%25s%5Cn%22%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Building%20a%20Flow%0A%0ANow%20let's%20create%20a%20simple%20workflow%20with%20multiple%20nodes%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20using%20Result%20type%20for%20type%20safety%0A%20%20%20%20fetchNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Fetching%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dstring%7B%22data%22%3A%20%22important%20info%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(data)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20flyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22fetched_data%22%2C%20execResult.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20processNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20GetMap%20for%20type-safe%20access%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20shared.GetMap(%22fetched_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(data)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20map%20access%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.AsMapOr(nil)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Processing%3A%20%25v%5Cn%22%2C%20data%5B%22data%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20%22processed%3A%20%22%20%2B%20fmt.Sprint(data%5B%22data%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%0A%20%20%20%20%2F%2F%20Run%20the%20flow%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Println(%22Flow%20completed%20successfully!%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Adding%20Error%20Handling%0A%0ALet's%20add%20retry%20logic%20and%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createRobustNode()%20flyt.Node%20%7B%0A%20%20%20%20attempts%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%20for%20configuration%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attempts%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Attempt%20%25d...%5Cn%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20flaky%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3C%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22temporary%20failure%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Success!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithMaxRetries(3).%0A%20%20%20%20%20%20%20%20WithWait(time.Second)%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Shared%20Store%0A%0AThe%20SharedStore%20allows%20nodes%20to%20communicate%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20initial%20data%0A%20%20%20%20shared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%2030%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%203%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20shared.GetMap(%22config%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Using%20config%3A%20%25v%5Cn%22%2C%20config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22configured%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you've%20built%20your%20first%20workflow%2C%20explore%3A%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Deep%20dive%20into%20node%20lifecycle%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20workflows%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20Real-world%20use%20cases",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./quick-start-BfzCH8Op.js"),[]),path:"/getting-started/quick-start.html",type:"mdx",filePath:"getting-started/quick-start.mdx",content:"%23%20Quick%20Start%0A%0AThis%20guide%20will%20help%20you%20build%20your%20first%20Flyt%20workflow%20in%205%20minutes.%0A%0A%23%23%20Your%20First%20Node%0A%0ALet's%20start%20with%20a%20simple%20node%20that%20processes%20data.%20You%20can%20choose%20between%20two%20approaches%3A%0A%0A%23%23%23%20Using%20Result%20Type%20(Recommended%20for%20Type%20Safety)%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20node%20with%20Result%20type%20using%20fluent%20API%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(%22Hello%2C%20Flyt!%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Or%20using%20traditional%20style%20with%20options%0A%20%20%20%20node%20%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(%22Hello%2C%20Flyt!%22)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20and%20context%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Run%20the%20node%0A%20%20%20%20action%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Completed%20with%20action%3A%20%25s%5Cn%22%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Using%20Any%20Type%20(Simple%20Approach)%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20a%20node%20with%20any%20type%20using%20fluent%20API%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Processing%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Hello%2C%20Flyt!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20and%20context%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%0A%20%20%20%20%2F%2F%20Run%20the%20node%0A%20%20%20%20action%2C%20err%20%3A%3D%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Printf(%22Completed%20with%20action%3A%20%25s%5Cn%22%2C%20action)%0A%7D%0A%60%60%60%0A%0A%23%23%20Building%20a%20Flow%0A%0ANow%20let's%20create%20a%20simple%20workflow%20with%20multiple%20nodes%3A%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22fmt%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%20using%20Result%20type%20for%20type%20safety%0A%20%20%20%20fetchNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Println(%22Fetching%20data...%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20map%5Bstring%5Dstring%7B%22data%22%3A%20%22important%20info%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(data)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20flyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22fetched_data%22%2C%20execResult.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20processNode%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20GetMap%20for%20type-safe%20access%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20shared.GetMap(%22fetched_data%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(data)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFunc(func(ctx%20context.Context%2C%20prepResult%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Type-safe%20map%20access%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.AsMapOr(nil)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Processing%3A%20%25v%5Cn%22%2C%20data%5B%22data%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3A%3D%20%22processed%3A%20%22%20%2B%20fmt.Sprint(data%5B%22data%22%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%0A%20%20%20%20%2F%2F%20Build%20the%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(fetchNode)%0A%20%20%20%20flow.Connect(fetchNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%0A%20%20%20%20%2F%2F%20Run%20the%20flow%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20%0A%20%20%20%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20panic(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20fmt.Println(%22Flow%20completed%20successfully!%22)%0A%7D%0A%60%60%60%0A%0A%23%23%20Adding%20Error%20Handling%0A%0ALet's%20add%20retry%20logic%20and%20error%20handling%3A%0A%0A%60%60%60go%0Afunc%20createRobustNode()%20flyt.Node%20%7B%0A%20%20%20%20attempts%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%20for%20configuration%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20attempts%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Attempt%20%25d...%5Cn%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Simulate%20flaky%20operation%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20attempts%20%3C%202%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22temporary%20failure%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22Success!%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithMaxRetries(3).%0A%20%20%20%20%20%20%20%20WithWait(time.Second)%0A%7D%0A%60%60%60%0A%0A%23%23%20Using%20Shared%20Store%0A%0AThe%20SharedStore%20allows%20nodes%20to%20communicate%3A%0A%0A%60%60%60go%0Afunc%20main()%20%7B%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20initial%20data%0A%20%20%20%20shared.Set(%22config%22%2C%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22timeout%22%3A%2030%2C%0A%20%20%20%20%20%20%20%20%22retries%22%3A%203%2C%0A%20%20%20%20%7D)%0A%20%20%20%20%0A%20%20%20%20node%20%3A%3D%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20shared.GetMap(%22config%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20fmt.Printf(%22Using%20config%3A%20%25v%5Cn%22%2C%20config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22configured%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20flyt.Run(ctx%2C%20node%2C%20shared)%0A%7D%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0ANow%20that%20you've%20built%20your%20first%20workflow%2C%20explore%3A%0A%0A-%20%5BNodes%5D(%2Fconcepts%2Fnodes)%20-%20Deep%20dive%20into%20node%20lifecycle%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Control%20flow%20with%20actions%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20workflows%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20Real-world%20use%20cases",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./template-gXCe7MP7.js"),[]),path:"/getting-started/template",type:"mdx",filePath:"getting-started/template.mdx",content:"%23%20Project%20Template%0A%0AThe%20fastest%20way%20to%20start%20a%20new%20Flyt%20project%20is%20using%20the%20official%20template.%0A%0A%23%23%20Quick%20Setup%0A%0A%60%60%60bash%0A%23%20Clone%20the%20template%0Agit%20clone%20https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt-project-template%20my-flyt-project%0Acd%20my-flyt-project%0A%0A%23%20Remove%20template%20git%20history%0Arm%20-rf%20.git%0Agit%20init%0A%0A%23%20Install%20dependencies%0Ago%20mod%20tidy%0A%0A%23%20Run%20the%20example%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20What's%20Included%0A%0AThe%20template%20provides%3A%0A%0A%23%23%23%20Project%20Structure%0A%0A%60%60%60%0Amy-flyt-project%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20main.go%20%20%20%20%20%20%20%20%20%20%20%23%20Entry%20point%20with%20example%20workflow%0A%E2%94%9C%E2%94%80%E2%94%80%20nodes%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Custom%20node%20implementations%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20fetch.go%20%20%20%20%20%20%23%20Example%20fetch%20node%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20process.go%20%20%20%20%23%20Example%20processing%20node%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20validate.go%20%20%20%23%20Example%20validation%20node%0A%E2%94%9C%E2%94%80%E2%94%80%20flows%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reusable%20flow%20definitions%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20example.go%20%20%20%20%23%20Example%20flow%20composition%0A%E2%94%9C%E2%94%80%E2%94%80%20go.mod%20%20%20%20%20%20%20%20%20%20%20%20%23%20Go%20module%20file%0A%E2%94%94%E2%94%80%E2%94%80%20README.md%20%20%20%20%20%20%20%20%20%23%20Project%20documentation%0A%60%60%60%0A%0A%23%23%23%20Example%20Code%0A%0AThe%20template%20includes%20a%20working%20example%20that%20demonstrates%3A%0A%0A-%20Creating%20custom%20nodes%0A-%20Building%20flows%0A-%20Using%20the%20SharedStore%0A-%20Error%20handling%20with%20retries%0A-%20Action-based%20routing%0A%0A%23%23%23%20main.go%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fflows%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20with%20initial%20data%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22api_key%22%2C%20%22your-api-key%22)%0A%20%20%20%20shared.Set(%22base_url%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20and%20run%20the%20example%20flow%0A%20%20%20%20flow%20%3A%3D%20flows.CreateExampleFlow()%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Get%20results%0A%20%20%20%20result%20%3A%3D%20shared.GetString(%22final_result%22)%0A%20%20%20%20if%20result%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Success!%20Result%3A%20%25s%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Customizing%20the%20Template%0A%0A%23%23%23%20Adding%20New%20Nodes%0A%0ACreate%20a%20new%20file%20in%20the%20%60nodes%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20nodes%2Fcustom.go%0Apackage%20nodes%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20CreateCustomNode()%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Your%20custom%20logic%20here%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22custom%20result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Creating%20New%20Flows%0A%0AAdd%20flows%20to%20the%20%60flows%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20flows%2Fcustom.go%0Apackage%20flows%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fnodes%22%0A)%0A%0Afunc%20CreateCustomFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20startNode%20%3A%3D%20nodes.CreateCustomNode()%0A%20%20%20%20processNode%20%3A%3D%20nodes.CreateProcessNode()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20flow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0AWhen%20using%20the%20template%3A%0A%0A1.%20**Organize%20by%20Feature**%3A%20Group%20related%20nodes%20and%20flows%20together%0A2.%20**Use%20Configuration**%3A%20Store%20config%20in%20SharedStore%20or%20environment%20variables%0A3.%20**Add%20Tests**%3A%20Create%20%60*_test.go%60%20files%20for%20your%20nodes%20and%20flows%0A4.%20**Document%20Your%20Nodes**%3A%20Add%20comments%20explaining%20what%20each%20node%20does%0A5.%20**Version%20Control**%3A%20Initialize%20git%20and%20commit%20regularly%0A%0A%23%23%20Deployment%0A%0AThe%20template%20is%20ready%20for%20deployment%3A%0A%0A%60%60%60bash%0A%23%20Build%20the%20binary%0Ago%20build%20-o%20myapp%0A%0A%23%20Run%20in%20production%0A.%2Fmyapp%0A%0A%23%20Or%20use%20Docker%0Adocker%20build%20-t%20myapp%20.%0Adocker%20run%20myapp%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20Flyt%20fundamentals%0A-%20%5BPatterns%5D(%2Fpatterns%2Fclosures)%20-%20Learn%20common%20patterns%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20real-world%20implementations",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./template-gXCe7MP7.js"),[]),path:"/getting-started/template.html",type:"mdx",filePath:"getting-started/template.mdx",content:"%23%20Project%20Template%0A%0AThe%20fastest%20way%20to%20start%20a%20new%20Flyt%20project%20is%20using%20the%20official%20template.%0A%0A%23%23%20Quick%20Setup%0A%0A%60%60%60bash%0A%23%20Clone%20the%20template%0Agit%20clone%20https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt-project-template%20my-flyt-project%0Acd%20my-flyt-project%0A%0A%23%20Remove%20template%20git%20history%0Arm%20-rf%20.git%0Agit%20init%0A%0A%23%20Install%20dependencies%0Ago%20mod%20tidy%0A%0A%23%20Run%20the%20example%0Ago%20run%20main.go%0A%60%60%60%0A%0A%23%23%20What's%20Included%0A%0AThe%20template%20provides%3A%0A%0A%23%23%23%20Project%20Structure%0A%0A%60%60%60%0Amy-flyt-project%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20main.go%20%20%20%20%20%20%20%20%20%20%20%23%20Entry%20point%20with%20example%20workflow%0A%E2%94%9C%E2%94%80%E2%94%80%20nodes%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Custom%20node%20implementations%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20fetch.go%20%20%20%20%20%20%23%20Example%20fetch%20node%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20process.go%20%20%20%20%23%20Example%20processing%20node%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20validate.go%20%20%20%23%20Example%20validation%20node%0A%E2%94%9C%E2%94%80%E2%94%80%20flows%2F%20%20%20%20%20%20%20%20%20%20%20%20%23%20Reusable%20flow%20definitions%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20example.go%20%20%20%20%23%20Example%20flow%20composition%0A%E2%94%9C%E2%94%80%E2%94%80%20go.mod%20%20%20%20%20%20%20%20%20%20%20%20%23%20Go%20module%20file%0A%E2%94%94%E2%94%80%E2%94%80%20README.md%20%20%20%20%20%20%20%20%20%23%20Project%20documentation%0A%60%60%60%0A%0A%23%23%23%20Example%20Code%0A%0AThe%20template%20includes%20a%20working%20example%20that%20demonstrates%3A%0A%0A-%20Creating%20custom%20nodes%0A-%20Building%20flows%0A-%20Using%20the%20SharedStore%0A-%20Error%20handling%20with%20retries%0A-%20Action-based%20routing%0A%0A%23%23%23%20main.go%0A%0A%60%60%60go%0Apackage%20main%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22log%22%0A%20%20%20%20%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fflows%22%0A)%0A%0Afunc%20main()%20%7B%0A%20%20%20%20%2F%2F%20Create%20shared%20store%20with%20initial%20data%0A%20%20%20%20shared%20%3A%3D%20flyt.NewSharedStore()%0A%20%20%20%20shared.Set(%22api_key%22%2C%20%22your-api-key%22)%0A%20%20%20%20shared.Set(%22base_url%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Create%20and%20run%20the%20example%20flow%0A%20%20%20%20flow%20%3A%3D%20flows.CreateExampleFlow()%0A%20%20%20%20%0A%20%20%20%20ctx%20%3A%3D%20context.Background()%0A%20%20%20%20if%20err%20%3A%3D%20flow.Run(ctx%2C%20shared)%3B%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Fatal(err)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Get%20results%0A%20%20%20%20result%20%3A%3D%20shared.GetString(%22final_result%22)%0A%20%20%20%20if%20result%20!%3D%20%22%22%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Success!%20Result%3A%20%25s%5Cn%22%2C%20result)%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Customizing%20the%20Template%0A%0A%23%23%23%20Adding%20New%20Nodes%0A%0ACreate%20a%20new%20file%20in%20the%20%60nodes%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20nodes%2Fcustom.go%0Apackage%20nodes%0A%0Aimport%20(%0A%20%20%20%20%22context%22%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A)%0A%0Afunc%20CreateCustomNode()%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Your%20custom%20logic%20here%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22custom%20result%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%23%20Creating%20New%20Flows%0A%0AAdd%20flows%20to%20the%20%60flows%2F%60%20directory%3A%0A%0A%60%60%60go%0A%2F%2F%20flows%2Fcustom.go%0Apackage%20flows%0A%0Aimport%20(%0A%20%20%20%20%22github.com%2Fmark3labs%2Fflyt%22%0A%20%20%20%20%22myproject%2Fnodes%22%0A)%0A%0Afunc%20CreateCustomFlow()%20*flyt.Flow%20%7B%0A%20%20%20%20%2F%2F%20Create%20nodes%0A%20%20%20%20startNode%20%3A%3D%20nodes.CreateCustomNode()%0A%20%20%20%20processNode%20%3A%3D%20nodes.CreateProcessNode()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Build%20flow%0A%20%20%20%20flow%20%3A%3D%20flyt.NewFlow(startNode)%0A%20%20%20%20flow.Connect(startNode%2C%20flyt.DefaultAction%2C%20processNode)%0A%20%20%20%20%0A%20%20%20%20return%20flow%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0AWhen%20using%20the%20template%3A%0A%0A1.%20**Organize%20by%20Feature**%3A%20Group%20related%20nodes%20and%20flows%20together%0A2.%20**Use%20Configuration**%3A%20Store%20config%20in%20SharedStore%20or%20environment%20variables%0A3.%20**Add%20Tests**%3A%20Create%20%60*_test.go%60%20files%20for%20your%20nodes%20and%20flows%0A4.%20**Document%20Your%20Nodes**%3A%20Add%20comments%20explaining%20what%20each%20node%20does%0A5.%20**Version%20Control**%3A%20Initialize%20git%20and%20commit%20regularly%0A%0A%23%23%20Deployment%0A%0AThe%20template%20is%20ready%20for%20deployment%3A%0A%0A%60%60%60bash%0A%23%20Build%20the%20binary%0Ago%20build%20-o%20myapp%0A%0A%23%20Run%20in%20production%0A.%2Fmyapp%0A%0A%23%20Or%20use%20Docker%0Adocker%20build%20-t%20myapp%20.%0Adocker%20run%20myapp%0A%60%60%60%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BCore%20Concepts%5D(%2Fconcepts%2Fnodes)%20-%20Understand%20Flyt%20fundamentals%0A-%20%5BPatterns%5D(%2Fpatterns%2Fclosures)%20-%20Learn%20common%20patterns%0A-%20%5BExamples%5D(https%3A%2F%2Fgithub.com%2Fmark3labs%2Fflyt%2Ftree%2Fmain%2Fcookbook)%20-%20See%20real-world%20implementations",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./branching-BVqx7a3F.js"),[]),path:"/patterns/branching",type:"mdx",filePath:"patterns/branching.mdx",content:"%23%20Conditional%20Branching%0A%0AControl%20flow%20execution%20dynamically%20based%20on%20runtime%20conditions%20using%20action-based%20routing.%0A%0A%23%23%20Simple%20Binary%20Branching%0A%0AMake%20yes%2Fno%20decisions%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20clear%20node%20configuration%0AvalidationNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20isValid%20%3A%3D%20len(data)%20%3E%200%20%26%26%20len(data)%20%3C%20100%0A%20%20%20%20%20%20%20%20return%20isValid%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%20Multi-Way%20Branching%0A%0ARoute%20to%20multiple%20paths%3A%0A%0A%60%60%60go%0A%2F%2F%20Fluent%20API%20for%20multi-way%20branching%0AcategoryNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(float64)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20value%20%3C%2010%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%20100%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%201000%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22xlarge%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0Aflow.Connect(categoryNode%2C%20%22xlarge%22%2C%20xlargeHandler)%0A%60%60%60%0A%0A%23%23%20State%20Machine%20Pattern%0A%0AImplement%20state%20transitions%3A%0A%0A%60%60%60go%0Atype%20StateMachine%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20state%20%3A%3D%20shared.GetStringOr(%22state%22%2C%20%22init%22)%0A%20%20%20%20event%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20State%20transition%20logic%0A%20%20%20%20nextState%20%3A%3D%20n.transition(state%2C%20event)%0A%20%20%20%20shared.Set(%22state%22%2C%20nextState)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20action%20based%20on%20new%20state%0A%20%20%20%20return%20flyt.Action(nextState)%2C%20nil%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20transition(state%2C%20event%20string)%20string%20%7B%0A%20%20%20%20transitions%20%3A%3D%20map%5Bstring%5Dmap%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22init%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22start%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22processing%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22complete%22%3A%20%22done%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22pause%22%3A%20%22paused%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22paused%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22resume%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20stateTransitions%2C%20ok%20%3A%3D%20transitions%5Bstate%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20if%20nextState%2C%20ok%20%3A%3D%20stateTransitions%5Bevent%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nextState%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20state%20%2F%2F%20No%20transition%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Routing%0A%0ARoute%20based%20on%20external%20configuration%3A%0A%0A%60%60%60go%0Atype%20DynamicRouter%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20routes%20map%5Bstring%5Dstring%0A%7D%0A%0Afunc%20NewDynamicRouter(configPath%20string)%20*DynamicRouter%20%7B%0A%20%20%20%20%2F%2F%20Load%20routing%20configuration%0A%20%20%20%20data%2C%20_%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20var%20routes%20map%5Bstring%5Dstring%0A%20%20%20%20json.Unmarshal(data%2C%20%26routes)%0A%20%20%20%20%0A%20%20%20%20return%20%26DynamicRouter%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20routes%3A%20%20%20routes%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DynamicRouter)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Look%20up%20route%20in%20configuration%0A%20%20%20%20if%20action%2C%20ok%20%3A%3D%20n.routes%5Bresult%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Default%20route%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Weighted%20Routing%0A%0ADistribute%20load%20across%20paths%3A%0A%0A%60%60%60go%0Atype%20LoadBalancer%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20weights%20%20map%5Bstring%5Dint%0A%20%20%20%20counter%20%20int%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewLoadBalancer(weights%20map%5Bstring%5Dint)%20*LoadBalancer%20%7B%0A%20%20%20%20return%20%26LoadBalancer%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20weights%3A%20%20weights%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*LoadBalancer)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Calculate%20total%20weight%0A%20%20%20%20totalWeight%20%3A%3D%200%0A%20%20%20%20for%20_%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20totalWeight%20%2B%3D%20weight%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20which%20path%20based%20on%20counter%0A%20%20%20%20position%20%3A%3D%20n.counter%20%25%20totalWeight%0A%20%20%20%20currentWeight%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20for%20action%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20currentWeight%20%2B%3D%20weight%0A%20%20%20%20%20%20%20%20if%20position%20%3C%20currentWeight%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0Abalancer%20%3A%3D%20NewLoadBalancer(map%5Bstring%5Dint%7B%0A%20%20%20%20%22server1%22%3A%203%2C%20%20%2F%2F%2030%25%20of%20traffic%0A%20%20%20%20%22server2%22%3A%205%2C%20%20%2F%2F%2050%25%20of%20traffic%0A%20%20%20%20%22server3%22%3A%202%2C%20%20%2F%2F%2020%25%20of%20traffic%0A%7D)%0A%60%60%60%0A%0A%23%23%20Conditional%20Loops%0A%0ACreate%20loops%20with%20exit%20conditions%3A%0A%0A%60%60%60go%0A%2F%2F%20Clean%20fluent%20API%20for%20conditional%20loops%0AretryNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20shared.GetInt(%22attempts%22)%0A%20%20%20%20%20%20%20%20return%20attempts%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20operation%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20performOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22attempts%22%3A%20attempts%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20result%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20result%5B%22success%22%5D.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20result%5B%22attempts%22%5D.(int)%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20attempts%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%20%20%2F%2F%20Loop%20back%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%22failed%22%2C%20nil%20%20%2F%2F%20Exit%20loop%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(retryNode)%0Aflow.Connect(retryNode%2C%20%22retry%22%2C%20retryNode)%20%20%2F%2F%20Loop%20back%20to%20self%0Aflow.Connect(retryNode%2C%20%22success%22%2C%20successNode)%0Aflow.Connect(retryNode%2C%20%22failed%22%2C%20failureNode)%0A%60%60%60%0A%0A%23%23%20Pipeline%20Branching%0A%0ABranch%20and%20merge%20pipelines%3A%0A%0A%60%60%60go%0A%2F%2F%20Split%20node%20decides%20which%20pipeline(s)%20to%20execute%0AsplitNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20needsValidation%20%3A%3D%20data%5B%22validate%22%5D.(bool)%0A%20%20%20%20%20%20%20%20needsEnrichment%20%3A%3D%20data%5B%22enrich%22%5D.(bool)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20needsValidation%20%26%26%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22both%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsValidation%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22validate_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22enrich_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22skip%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%0A%0A%2F%2F%20Build%20flow%20with%20different%20pipelines%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%0A%2F%2F%20Both%20pipelines%0Aflow.Connect(splitNode%2C%20%22both%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%0A%2F%2F%20Validation%20only%0Aflow.Connect(splitNode%2C%20%22validate_only%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22skip_enrich%22%2C%20mergeNode)%0A%0A%2F%2F%20Enrichment%20only%0Aflow.Connect(splitNode%2C%20%22enrich_only%22%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20%22skip_validate%22%2C%20mergeNode)%0A%0A%2F%2F%20Skip%20both%0Aflow.Connect(splitNode%2C%20%22skip%22%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%20Feature%20Flags%0A%0AControl%20flow%20with%20feature%20toggles%3A%0A%0A%60%60%60go%0Atype%20FeatureFlagNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20flags%20map%5Bstring%5Dbool%0A%7D%0A%0Afunc%20(n%20*FeatureFlagNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20feature%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20feature%20is%20enabled%0A%20%20%20%20if%20enabled%2C%20ok%20%3A%3D%20n.flags%5Bfeature%5D%3B%20ok%20%26%26%20enabled%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_enabled%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_disabled%22)%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0AflagNode%20%3A%3D%20%26FeatureFlagNode%7B%0A%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20flags%3A%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22new_algorithm%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22beta_feature%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%22experimental%22%3A%20true%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Aflow%20%3A%3D%20flyt.NewFlow(flagNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_enabled%22%2C%20newAlgorithmNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_disabled%22%2C%20oldAlgorithmNode)%0A%60%60%60%0A%0A%23%23%20A%2FB%20Testing%0A%0ARoute%20based%20on%20experiment%20groups%3A%0A%0A%60%60%60go%0Afunc%20createABTestNode(testName%20string%2C%20distribution%20map%5Bstring%5Dint)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%20with%20chained%20configuration%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%20%3A%3D%20shared.GetString(%22user_id%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20userID%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Hash%20user%20ID%20for%20consistent%20assignment%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20%3A%3D%20fnv.New32a()%0A%20%20%20%20%20%20%20%20%20%20%20%20h.Write(%5B%5Dbyte(userID%20%2B%20testName))%0A%20%20%20%20%20%20%20%20%20%20%20%20hash%20%3A%3D%20h.Sum32()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Determine%20variant%20based%20on%20distribution%0A%20%20%20%20%20%20%20%20%20%20%20%20bucket%20%3A%3D%20int(hash%20%25%20100)%0A%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20variant%2C%20percentage%20%3A%3D%20range%20distribution%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%2B%3D%20percentage%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20bucket%20%3C%20cumulative%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20variant%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22control%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20variant%20%3A%3D%20execResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22ab_variant%22%2C%20variant)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(variant)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%0AabNode%20%3A%3D%20createABTestNode(%22checkout_flow%22%2C%20map%5Bstring%5Dint%7B%0A%20%20%20%20%22variant_a%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22variant_b%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22control%22%3A%20%20%2034%2C%20%20%2F%2F%2034%25%20of%20users%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Action%20Names**%3A%20Use%20descriptive%20action%20names%20that%20indicate%20the%20path%0A2.%20**Document%20Branches**%3A%20Comment%20all%20possible%20branches%20and%20their%20conditions%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%0A4.%20**Avoid%20Deep%20Nesting**%3A%20Keep%20branching%20logic%20simple%20and%20readable%0A5.%20**Test%20All%20Paths**%3A%20Write%20tests%20for%20each%20branch%20condition%0A6.%20**Monitor%20Branch%20Usage**%3A%20Track%20which%20paths%20are%20taken%20most%20frequently%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Deep%20dive%20into%20action%20system%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Building%20complex%20workflows%0A-%20%5BState%20Machines%5D(%2Fpatterns%2Fbranching%23state-machine-pattern)%20-%20Advanced%20state%20management",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./branching-BVqx7a3F.js"),[]),path:"/patterns/branching.html",type:"mdx",filePath:"patterns/branching.mdx",content:"%23%20Conditional%20Branching%0A%0AControl%20flow%20execution%20dynamically%20based%20on%20runtime%20conditions%20using%20action-based%20routing.%0A%0A%23%23%20Simple%20Binary%20Branching%0A%0AMake%20yes%2Fno%20decisions%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20clear%20node%20configuration%0AvalidationNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20isValid%20%3A%3D%20len(data)%20%3E%200%20%26%26%20len(data)%20%3C%20100%0A%20%20%20%20%20%20%20%20return%20isValid%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20if%20execResult.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22valid%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22invalid%22%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(validationNode)%0Aflow.Connect(validationNode%2C%20%22valid%22%2C%20processNode)%0Aflow.Connect(validationNode%2C%20%22invalid%22%2C%20errorNode)%0A%60%60%60%0A%0A%23%23%20Multi-Way%20Branching%0A%0ARoute%20to%20multiple%20paths%3A%0A%0A%60%60%60go%0A%2F%2F%20Fluent%20API%20for%20multi-way%20branching%0AcategoryNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20value%20%3A%3D%20prepResult.(float64)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20switch%20%7B%0A%20%20%20%20%20%20%20%20case%20value%20%3C%2010%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22small%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%20100%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22medium%22%2C%20nil%0A%20%20%20%20%20%20%20%20case%20value%20%3C%201000%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22large%22%2C%20nil%0A%20%20%20%20%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22xlarge%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(categoryNode)%0Aflow.Connect(categoryNode%2C%20%22small%22%2C%20smallHandler)%0Aflow.Connect(categoryNode%2C%20%22medium%22%2C%20mediumHandler)%0Aflow.Connect(categoryNode%2C%20%22large%22%2C%20largeHandler)%0Aflow.Connect(categoryNode%2C%20%22xlarge%22%2C%20xlargeHandler)%0A%60%60%60%0A%0A%23%23%20State%20Machine%20Pattern%0A%0AImplement%20state%20transitions%3A%0A%0A%60%60%60go%0Atype%20StateMachine%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20state%20%3A%3D%20shared.GetStringOr(%22state%22%2C%20%22init%22)%0A%20%20%20%20event%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20State%20transition%20logic%0A%20%20%20%20nextState%20%3A%3D%20n.transition(state%2C%20event)%0A%20%20%20%20shared.Set(%22state%22%2C%20nextState)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20action%20based%20on%20new%20state%0A%20%20%20%20return%20flyt.Action(nextState)%2C%20nil%0A%7D%0A%0Afunc%20(n%20*StateMachine)%20transition(state%2C%20event%20string)%20string%20%7B%0A%20%20%20%20transitions%20%3A%3D%20map%5Bstring%5Dmap%5Bstring%5Dstring%7B%0A%20%20%20%20%20%20%20%20%22init%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22start%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22processing%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22complete%22%3A%20%22done%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22failed%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22pause%22%3A%20%22paused%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22paused%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22resume%22%3A%20%22processing%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cancel%22%3A%20%22cancelled%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20stateTransitions%2C%20ok%20%3A%3D%20transitions%5Bstate%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20if%20nextState%2C%20ok%20%3A%3D%20stateTransitions%5Bevent%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nextState%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20state%20%2F%2F%20No%20transition%0A%7D%0A%60%60%60%0A%0A%23%23%20Dynamic%20Routing%0A%0ARoute%20based%20on%20external%20configuration%3A%0A%0A%60%60%60go%0Atype%20DynamicRouter%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20routes%20map%5Bstring%5Dstring%0A%7D%0A%0Afunc%20NewDynamicRouter(configPath%20string)%20*DynamicRouter%20%7B%0A%20%20%20%20%2F%2F%20Load%20routing%20configuration%0A%20%20%20%20data%2C%20_%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20var%20routes%20map%5Bstring%5Dstring%0A%20%20%20%20json.Unmarshal(data%2C%20%26routes)%0A%20%20%20%20%0A%20%20%20%20return%20%26DynamicRouter%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20routes%3A%20%20%20routes%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*DynamicRouter)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20result%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Look%20up%20route%20in%20configuration%0A%20%20%20%20if%20action%2C%20ok%20%3A%3D%20n.routes%5Bresult%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Default%20route%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Weighted%20Routing%0A%0ADistribute%20load%20across%20paths%3A%0A%0A%60%60%60go%0Atype%20LoadBalancer%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20weights%20%20map%5Bstring%5Dint%0A%20%20%20%20counter%20%20int%0A%20%20%20%20mu%20%20%20%20%20%20%20sync.Mutex%0A%7D%0A%0Afunc%20NewLoadBalancer(weights%20map%5Bstring%5Dint)%20*LoadBalancer%20%7B%0A%20%20%20%20return%20%26LoadBalancer%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20weights%3A%20%20weights%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*LoadBalancer)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20n.mu.Lock()%0A%20%20%20%20defer%20n.mu.Unlock()%0A%20%20%20%20%0A%20%20%20%20n.counter%2B%2B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Calculate%20total%20weight%0A%20%20%20%20totalWeight%20%3A%3D%200%0A%20%20%20%20for%20_%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20totalWeight%20%2B%3D%20weight%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Determine%20which%20path%20based%20on%20counter%0A%20%20%20%20position%20%3A%3D%20n.counter%20%25%20totalWeight%0A%20%20%20%20currentWeight%20%3A%3D%200%0A%20%20%20%20%0A%20%20%20%20for%20action%2C%20weight%20%3A%3D%20range%20n.weights%20%7B%0A%20%20%20%20%20%20%20%20currentWeight%20%2B%3D%20weight%0A%20%20%20%20%20%20%20%20if%20position%20%3C%20currentWeight%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(action)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0Abalancer%20%3A%3D%20NewLoadBalancer(map%5Bstring%5Dint%7B%0A%20%20%20%20%22server1%22%3A%203%2C%20%20%2F%2F%2030%25%20of%20traffic%0A%20%20%20%20%22server2%22%3A%205%2C%20%20%2F%2F%2050%25%20of%20traffic%0A%20%20%20%20%22server3%22%3A%202%2C%20%20%2F%2F%2020%25%20of%20traffic%0A%7D)%0A%60%60%60%0A%0A%23%23%20Conditional%20Loops%0A%0ACreate%20loops%20with%20exit%20conditions%3A%0A%0A%60%60%60go%0A%2F%2F%20Clean%20fluent%20API%20for%20conditional%20loops%0AretryNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20shared.GetInt(%22attempts%22)%0A%20%20%20%20%20%20%20%20return%20attempts%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20prepResult.(int)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Try%20operation%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20performOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22attempts%22%3A%20attempts%20%2B%201%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22success%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22result%22%3A%20result%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20result%20%3A%3D%20execResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20result%5B%22success%22%5D.(bool)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22success%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20attempts%20%3A%3D%20result%5B%22attempts%22%5D.(int)%0A%20%20%20%20%20%20%20%20shared.Set(%22attempts%22%2C%20attempts)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20attempts%20%3C%203%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%20%20%2F%2F%20Loop%20back%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%22failed%22%2C%20nil%20%20%2F%2F%20Exit%20loop%0A%20%20%20%20%7D)%0A%0Aflow%20%3A%3D%20flyt.NewFlow(retryNode)%0Aflow.Connect(retryNode%2C%20%22retry%22%2C%20retryNode)%20%20%2F%2F%20Loop%20back%20to%20self%0Aflow.Connect(retryNode%2C%20%22success%22%2C%20successNode)%0Aflow.Connect(retryNode%2C%20%22failed%22%2C%20failureNode)%0A%60%60%60%0A%0A%23%23%20Pipeline%20Branching%0A%0ABranch%20and%20merge%20pipelines%3A%0A%0A%60%60%60go%0A%2F%2F%20Split%20node%20decides%20which%20pipeline(s)%20to%20execute%0AsplitNode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20needsValidation%20%3A%3D%20data%5B%22validate%22%5D.(bool)%0A%20%20%20%20%20%20%20%20needsEnrichment%20%3A%3D%20data%5B%22enrich%22%5D.(bool)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20needsValidation%20%26%26%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22both%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsValidation%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22validate_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20needsEnrichment%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22enrich_only%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22skip%22%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(execResult.(string))%2C%20nil%0A%20%20%20%20%7D)%0A%0A%2F%2F%20Build%20flow%20with%20different%20pipelines%0Aflow%20%3A%3D%20flyt.NewFlow(splitNode)%0A%0A%2F%2F%20Both%20pipelines%0Aflow.Connect(splitNode%2C%20%22both%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20flyt.DefaultAction%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20flyt.DefaultAction%2C%20mergeNode)%0A%0A%2F%2F%20Validation%20only%0Aflow.Connect(splitNode%2C%20%22validate_only%22%2C%20validateNode)%0Aflow.Connect(validateNode%2C%20%22skip_enrich%22%2C%20mergeNode)%0A%0A%2F%2F%20Enrichment%20only%0Aflow.Connect(splitNode%2C%20%22enrich_only%22%2C%20enrichNode)%0Aflow.Connect(enrichNode%2C%20%22skip_validate%22%2C%20mergeNode)%0A%0A%2F%2F%20Skip%20both%0Aflow.Connect(splitNode%2C%20%22skip%22%2C%20mergeNode)%0A%60%60%60%0A%0A%23%23%20Feature%20Flags%0A%0AControl%20flow%20with%20feature%20toggles%3A%0A%0A%60%60%60go%0Atype%20FeatureFlagNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20flags%20map%5Bstring%5Dbool%0A%7D%0A%0Afunc%20(n%20*FeatureFlagNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20feature%20%3A%3D%20execResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Check%20if%20feature%20is%20enabled%0A%20%20%20%20if%20enabled%2C%20ok%20%3A%3D%20n.flags%5Bfeature%5D%3B%20ok%20%26%26%20enabled%20%7B%0A%20%20%20%20%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_enabled%22)%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.Action(feature%20%2B%20%22_disabled%22)%2C%20nil%0A%7D%0A%0A%2F%2F%20Usage%0AflagNode%20%3A%3D%20%26FeatureFlagNode%7B%0A%20%20%20%20BaseNode%3A%20flyt.NewBaseNode()%2C%0A%20%20%20%20flags%3A%20map%5Bstring%5Dbool%7B%0A%20%20%20%20%20%20%20%20%22new_algorithm%22%3A%20true%2C%0A%20%20%20%20%20%20%20%20%22beta_feature%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%22experimental%22%3A%20true%2C%0A%20%20%20%20%7D%2C%0A%7D%0A%0Aflow%20%3A%3D%20flyt.NewFlow(flagNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_enabled%22%2C%20newAlgorithmNode)%0Aflow.Connect(flagNode%2C%20%22new_algorithm_disabled%22%2C%20oldAlgorithmNode)%0A%60%60%60%0A%0A%23%23%20A%2FB%20Testing%0A%0ARoute%20based%20on%20experiment%20groups%3A%0A%0A%60%60%60go%0Afunc%20createABTestNode(testName%20string%2C%20distribution%20map%5Bstring%5Dint)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%20with%20chained%20configuration%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%20%3A%3D%20shared.GetString(%22user_id%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20userID%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20userID%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Hash%20user%20ID%20for%20consistent%20assignment%0A%20%20%20%20%20%20%20%20%20%20%20%20h%20%3A%3D%20fnv.New32a()%0A%20%20%20%20%20%20%20%20%20%20%20%20h.Write(%5B%5Dbyte(userID%20%2B%20testName))%0A%20%20%20%20%20%20%20%20%20%20%20%20hash%20%3A%3D%20h.Sum32()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Determine%20variant%20based%20on%20distribution%0A%20%20%20%20%20%20%20%20%20%20%20%20bucket%20%3A%3D%20int(hash%20%25%20100)%0A%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%3A%3D%200%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20variant%2C%20percentage%20%3A%3D%20range%20distribution%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20cumulative%20%2B%3D%20percentage%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20bucket%20%3C%20cumulative%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20variant%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22control%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20variant%20%3A%3D%20execResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22ab_variant%22%2C%20variant)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Action(variant)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%0AabNode%20%3A%3D%20createABTestNode(%22checkout_flow%22%2C%20map%5Bstring%5Dint%7B%0A%20%20%20%20%22variant_a%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22variant_b%22%3A%2033%2C%20%20%2F%2F%2033%25%20of%20users%0A%20%20%20%20%22control%22%3A%20%20%2034%2C%20%20%2F%2F%2034%25%20of%20users%0A%7D)%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Clear%20Action%20Names**%3A%20Use%20descriptive%20action%20names%20that%20indicate%20the%20path%0A2.%20**Document%20Branches**%3A%20Comment%20all%20possible%20branches%20and%20their%20conditions%0A3.%20**Handle%20All%20Cases**%3A%20Ensure%20all%20possible%20actions%20have%20connections%0A4.%20**Avoid%20Deep%20Nesting**%3A%20Keep%20branching%20logic%20simple%20and%20readable%0A5.%20**Test%20All%20Paths**%3A%20Write%20tests%20for%20each%20branch%20condition%0A6.%20**Monitor%20Branch%20Usage**%3A%20Track%20which%20paths%20are%20taken%20most%20frequently%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BActions%5D(%2Fconcepts%2Factions)%20-%20Deep%20dive%20into%20action%20system%0A-%20%5BFlows%5D(%2Fconcepts%2Fflows)%20-%20Building%20complex%20workflows%0A-%20%5BState%20Machines%5D(%2Fpatterns%2Fbranching%23state-machine-pattern)%20-%20Advanced%20state%20management",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./closures-WeevBCud.js"),[]),path:"/patterns/closures",type:"mdx",filePath:"patterns/closures.mdx",content:"%23%20Configuration%20via%20Closures%0A%0AUse%20closures%20to%20create%20configurable%2C%20reusable%20nodes%20with%20encapsulated%20state%20and%20configuration.%0A%0A%23%23%20Basic%20Closure%20Pattern%0A%0APass%20configuration%20to%20nodes%20using%20closures%3A%0A%0A%60%60%60go%0Afunc%20createAPINode(apiKey%20string%2C%20baseURL%20string)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%20with%20closure%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apiKey%20and%20baseURL%20are%20captured%20in%20the%20closure%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20fmt.Sprintf(%22%25s%2Fdata%22%2C%20baseURL)%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(%22GET%22%2C%20url%2C%20nil)%0A%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(%22Authorization%22%2C%20fmt.Sprintf(%22Bearer%20%25s%22%2C%20apiKey))%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26data)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%0AapiNode%20%3A%3D%20createAPINode(%22secret-key-123%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Afunc%20createCounterNode()%20flyt.Node%20%7B%0A%20%20%20%20count%20%3A%3D%200%0A%20%20%20%20mu%20%3A%3D%20%26sync.Mutex%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fluent%20API%20with%20stateful%20closure%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20current%20%3A%3D%20count%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20current)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%20Objects%0A%0AUse%20structs%20for%20complex%20configuration%3A%0A%0A%60%60%60go%0Atype%20DatabaseConfig%20struct%20%7B%0A%20%20%20%20Host%20%20%20%20%20string%0A%20%20%20%20Port%20%20%20%20%20int%0A%20%20%20%20User%20%20%20%20%20string%0A%20%20%20%20Password%20string%0A%20%20%20%20Database%20string%0A%20%20%20%20MaxConns%20int%0A%7D%0A%0Afunc%20createDatabaseNode(config%20DatabaseConfig)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Create%20connection%20pool%20once%0A%20%20%20%20dsn%20%3A%3D%20fmt.Sprintf(%22%25s%3A%25s%40tcp(%25s%3A%25d)%2F%25s%22%2C%0A%20%20%20%20%20%20%20%20config.User%2C%20config.Password%2C%20config.Host%2C%20config.Port%2C%20config.Database)%0A%20%20%20%20%0A%20%20%20%20db%2C%20_%20%3A%3D%20sql.Open(%22mysql%22%2C%20dsn)%0A%20%20%20%20db.SetMaxOpenConns(config.MaxConns)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Clean%20fluent%20API%20with%20configuration%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%0AdbNode%20%3A%3D%20createDatabaseNode(DatabaseConfig%7B%0A%20%20%20%20Host%3A%20%20%20%20%20%22localhost%22%2C%0A%20%20%20%20Port%3A%20%20%20%20%203306%2C%0A%20%20%20%20User%3A%20%20%20%20%20%22app%22%2C%0A%20%20%20%20Password%3A%20%22secret%22%2C%0A%20%20%20%20Database%3A%20%22myapp%22%2C%0A%20%20%20%20MaxConns%3A%2010%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Factory%20Functions%0A%0ACreate%20specialized%20node%20variants%3A%0A%0A%60%60%60go%0Afunc%20createHTTPNode(method%20string%2C%20headers%20map%5Bstring%5Dstring)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Fluent%20API%20for%20factory%20function%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20shared.GetString(%22url%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20body%20%3A%3D%20shared.GetMap(%22body%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%22url%22%3A%20url%2C%20%22body%22%3A%20body%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20data%5B%22url%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20bodyReader%20io.Reader%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20body%2C%20ok%20%3A%3D%20data%5B%22body%22%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyBytes%2C%20_%20%3A%3D%20json.Marshal(body)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyReader%20%3D%20bytes.NewReader(bodyBytes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(method%2C%20url%2C%20bodyReader)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20configured%20headers%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(key%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Create%20specialized%20nodes%0AgetNode%20%3A%3D%20createHTTPNode(%22GET%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%0ApostNode%20%3A%3D%20createHTTPNode(%22POST%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Content-Type%22%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0AManage%20shared%20resources%3A%0A%0A%60%60%60go%0Afunc%20createFileProcessorNode(bufferSize%20int)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Pre-allocate%20buffer%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20bufferSize)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fluent%20API%20with%20resource%20management%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filePath%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(filePath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20file.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reuse%20buffer%0A%20%20%20%20%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20err%20!%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20buffer%5B%3An%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processData(buffer%5B%3An%5D)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%20Pattern%0A%0AWrap%20nodes%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20node%20flyt.Node)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Starting%20prep%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20node.Prep(ctx%2C%20shared)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%20took%20%25v%22%2C%20name%2C%20time.Since(start))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20action%2C%20err%20%3A%3D%20node.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Returning%20action%3A%20%25s%22%2C%20name%2C%20action)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20action%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AprocessNode%20%3A%3D%20withLogging(%22processor%22%2C%20createProcessNode())%0A%60%60%60%0A%0A%23%23%20Dynamic%20Configuration%0A%0ALoad%20configuration%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createConfigurableNode(configPath%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Load%20config%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20config%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.Unmarshal(data%2C%20%26config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20configuration%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithConfig(config)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Dependency%20Injection%0A%0AInject%20dependencies%20through%20closures%3A%0A%0A%60%60%60go%0Atype%20Dependencies%20struct%20%7B%0A%20%20%20%20DB%20%20%20%20%20%20%20*sql.DB%0A%20%20%20%20Cache%20%20%20%20*redis.Client%0A%20%20%20%20Logger%20%20%20*log.Logger%0A%20%20%20%20Metrics%20%20*prometheus.Registry%0A%7D%0A%0Afunc%20createServiceNode(deps%20Dependencies)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20injected%20dependencies%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Println(%22Processing%20request%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%2C%20err%20%3A%3D%20deps.Cache.Get(ctx%2C%20%22key%22).Result()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Metrics.Inc(%22cache_hits%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20queryDB(deps.DB%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Printf(%22DB%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Cache.Set(ctx%2C%20%22key%22%2C%20result%2C%20time.Hour)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Immutable%20Configuration**%3A%20Don't%20modify%20captured%20variables%20after%20node%20creation%0A2.%20**Thread%20Safety**%3A%20Use%20mutexes%20for%20shared%20state%20in%20concurrent%20scenarios%0A3.%20**Resource%20Cleanup**%3A%20Ensure%20resources%20are%20properly%20closed%0A4.%20**Error%20Handling**%3A%20Handle%20configuration%20errors%20gracefully%0A5.%20**Documentation**%3A%20Document%20required%20configuration%20clearly%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20nodes%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./closures-WeevBCud.js"),[]),path:"/patterns/closures.html",type:"mdx",filePath:"patterns/closures.mdx",content:"%23%20Configuration%20via%20Closures%0A%0AUse%20closures%20to%20create%20configurable%2C%20reusable%20nodes%20with%20encapsulated%20state%20and%20configuration.%0A%0A%23%23%20Basic%20Closure%20Pattern%0A%0APass%20configuration%20to%20nodes%20using%20closures%3A%0A%0A%60%60%60go%0Afunc%20createAPINode(apiKey%20string%2C%20baseURL%20string)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Using%20fluent%20API%20with%20closure%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apiKey%20and%20baseURL%20are%20captured%20in%20the%20closure%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20fmt.Sprintf(%22%25s%2Fdata%22%2C%20baseURL)%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(%22GET%22%2C%20url%2C%20nil)%0A%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(%22Authorization%22%2C%20fmt.Sprintf(%22Bearer%20%25s%22%2C%20apiKey))%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7BTimeout%3A%2030%20*%20time.Second%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20data%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26data)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%0AapiNode%20%3A%3D%20createAPINode(%22secret-key-123%22%2C%20%22https%3A%2F%2Fapi.example.com%22)%0A%60%60%60%0A%0A%23%23%20Stateful%20Nodes%0A%0AMaintain%20state%20across%20executions%3A%0A%0A%60%60%60go%0Afunc%20createCounterNode()%20flyt.Node%20%7B%0A%20%20%20%20count%20%3A%3D%200%0A%20%20%20%20mu%20%3A%3D%20%26sync.Mutex%7B%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fluent%20API%20with%20stateful%20closure%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Lock()%0A%20%20%20%20%20%20%20%20%20%20%20%20count%2B%2B%0A%20%20%20%20%20%20%20%20%20%20%20%20current%20%3A%3D%20count%0A%20%20%20%20%20%20%20%20%20%20%20%20mu.Unlock()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20fmt.Sprintf(%22Execution%20%23%25d%22%2C%20current)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Configuration%20Objects%0A%0AUse%20structs%20for%20complex%20configuration%3A%0A%0A%60%60%60go%0Atype%20DatabaseConfig%20struct%20%7B%0A%20%20%20%20Host%20%20%20%20%20string%0A%20%20%20%20Port%20%20%20%20%20int%0A%20%20%20%20User%20%20%20%20%20string%0A%20%20%20%20Password%20string%0A%20%20%20%20Database%20string%0A%20%20%20%20MaxConns%20int%0A%7D%0A%0Afunc%20createDatabaseNode(config%20DatabaseConfig)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Create%20connection%20pool%20once%0A%20%20%20%20dsn%20%3A%3D%20fmt.Sprintf(%22%25s%3A%25s%40tcp(%25s%3A%25d)%2F%25s%22%2C%0A%20%20%20%20%20%20%20%20config.User%2C%20config.Password%2C%20config.Host%2C%20config.Port%2C%20config.Database)%0A%20%20%20%20%0A%20%20%20%20db%2C%20_%20%3A%3D%20sql.Open(%22mysql%22%2C%20dsn)%0A%20%20%20%20db.SetMaxOpenConns(config.MaxConns)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Clean%20fluent%20API%20with%20configuration%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20query%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20rows%2C%20err%20%3A%3D%20db.QueryContext(ctx%2C%20query)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20rows.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20results%20%5B%5Dmap%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20rows...%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Usage%0AdbNode%20%3A%3D%20createDatabaseNode(DatabaseConfig%7B%0A%20%20%20%20Host%3A%20%20%20%20%20%22localhost%22%2C%0A%20%20%20%20Port%3A%20%20%20%20%203306%2C%0A%20%20%20%20User%3A%20%20%20%20%20%22app%22%2C%0A%20%20%20%20Password%3A%20%22secret%22%2C%0A%20%20%20%20Database%3A%20%22myapp%22%2C%0A%20%20%20%20MaxConns%3A%2010%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Factory%20Functions%0A%0ACreate%20specialized%20node%20variants%3A%0A%0A%60%60%60go%0Afunc%20createHTTPNode(method%20string%2C%20headers%20map%5Bstring%5Dstring)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Fluent%20API%20for%20factory%20function%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20shared.GetString(%22url%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20body%20%3A%3D%20shared.GetMap(%22body%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%22url%22%3A%20url%2C%20%22body%22%3A%20body%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%7D).%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20url%20%3A%3D%20data%5B%22url%22%5D.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20bodyReader%20io.Reader%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20body%2C%20ok%20%3A%3D%20data%5B%22body%22%5D%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyBytes%2C%20_%20%3A%3D%20json.Marshal(body)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20bodyReader%20%3D%20bytes.NewReader(bodyBytes)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20req%2C%20_%20%3A%3D%20http.NewRequest(method%2C%20url%2C%20bodyReader)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Apply%20configured%20headers%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20key%2C%20value%20%3A%3D%20range%20headers%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20req.Header.Set(key%2C%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20client%20%3A%3D%20%26http.Client%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20resp%2C%20err%20%3A%3D%20client.Do(req)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20resp.Body.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20result%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.NewDecoder(resp.Body).Decode(%26result)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%0A%2F%2F%20Create%20specialized%20nodes%0AgetNode%20%3A%3D%20createHTTPNode(%22GET%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%0ApostNode%20%3A%3D%20createHTTPNode(%22POST%22%2C%20map%5Bstring%5Dstring%7B%0A%20%20%20%20%22Content-Type%22%3A%20%22application%2Fjson%22%2C%0A%20%20%20%20%22Accept%22%3A%20%22application%2Fjson%22%2C%0A%7D)%0A%60%60%60%0A%0A%23%23%20Resource%20Management%0A%0AManage%20shared%20resources%3A%0A%0A%60%60%60go%0Afunc%20createFileProcessorNode(bufferSize%20int)%20flyt.Node%20%7B%0A%20%20%20%20%2F%2F%20Pre-allocate%20buffer%0A%20%20%20%20buffer%20%3A%3D%20make(%5B%5Dbyte%2C%20bufferSize)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Fluent%20API%20with%20resource%20management%0A%20%20%20%20return%20flyt.NewNode().%0A%20%20%20%20%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20filePath%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20file%2C%20err%20%3A%3D%20os.Open(filePath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20defer%20file.Close()%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Reuse%20buffer%0A%20%20%20%20%20%20%20%20%20%20%20%20n%2C%20err%20%3A%3D%20file.Read(buffer)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%26%26%20err%20!%3D%20io.EOF%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Process%20buffer%5B%3An%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processData(buffer%5B%3An%5D)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%0A%7D%0A%60%60%60%0A%0A%23%23%20Middleware%20Pattern%0A%0AWrap%20nodes%20with%20additional%20behavior%3A%0A%0A%60%60%60go%0Afunc%20withLogging(name%20string%2C%20node%20flyt.Node)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Starting%20prep%22%2C%20name)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20node.Prep(ctx%2C%20shared)%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20start%20%3A%3D%20time.Now()%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20node.Exec(ctx%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Exec%20took%20%25v%22%2C%20name%2C%20time.Since(start))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithPostFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20action%2C%20err%20%3A%3D%20node.Post(ctx%2C%20shared%2C%20prepResult%2C%20execResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%5B%25s%5D%20Returning%20action%3A%20%25s%22%2C%20name%2C%20action)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20action%2C%20err%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%0A%2F%2F%20Usage%0AprocessNode%20%3A%3D%20withLogging(%22processor%22%2C%20createProcessNode())%0A%60%60%60%0A%0A%23%23%20Dynamic%20Configuration%0A%0ALoad%20configuration%20at%20runtime%3A%0A%0A%60%60%60go%0Afunc%20createConfigurableNode(configPath%20string)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithPrepFuncAny(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Load%20config%20file%0A%20%20%20%20%20%20%20%20%20%20%20%20data%2C%20err%20%3A%3D%20os.ReadFile(configPath)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20config%20map%5Bstring%5Dany%0A%20%20%20%20%20%20%20%20%20%20%20%20json.Unmarshal(data%2C%20%26config)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20config%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20config%20%3A%3D%20prepResult.(map%5Bstring%5Dany)%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20configuration%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20processWithConfig(config)%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Dependency%20Injection%0A%0AInject%20dependencies%20through%20closures%3A%0A%0A%60%60%60go%0Atype%20Dependencies%20struct%20%7B%0A%20%20%20%20DB%20%20%20%20%20%20%20*sql.DB%0A%20%20%20%20Cache%20%20%20%20*redis.Client%0A%20%20%20%20Logger%20%20%20*log.Logger%0A%20%20%20%20Metrics%20%20*prometheus.Registry%0A%7D%0A%0Afunc%20createServiceNode(deps%20Dependencies)%20flyt.Node%20%7B%0A%20%20%20%20return%20flyt.NewNode(%0A%20%20%20%20%20%20%20%20flyt.WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Use%20injected%20dependencies%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Println(%22Processing%20request%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Check%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20cached%2C%20err%20%3A%3D%20deps.Cache.Get(ctx%2C%20%22key%22).Result()%3B%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Metrics.Inc(%22cache_hits%22)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Query%20database%0A%20%20%20%20%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20queryDB(deps.DB%2C%20prepResult)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20deps.Logger.Printf(%22DB%20error%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%0A%20%20%20%20%20%20%20%20%20%20%20%20deps.Cache.Set(ctx%2C%20%22key%22%2C%20result%2C%20time.Hour)%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20%20%20%20%20%7D)%2C%0A%20%20%20%20)%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Immutable%20Configuration**%3A%20Don't%20modify%20captured%20variables%20after%20node%20creation%0A2.%20**Thread%20Safety**%3A%20Use%20mutexes%20for%20shared%20state%20in%20concurrent%20scenarios%0A3.%20**Resource%20Cleanup**%3A%20Ensure%20resources%20are%20properly%20closed%0A4.%20**Error%20Handling**%3A%20Handle%20configuration%20errors%20gracefully%0A5.%20**Documentation**%3A%20Document%20required%20configuration%20clearly%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Build%20resilient%20nodes%0A-%20%5BCustom%20Node%20Types%5D(%2Fadvanced%2Fcustom-nodes)%20-%20Advanced%20node%20patterns%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./error-handling-LBm-qMg2.js"),[]),path:"/patterns/error-handling",type:"mdx",filePath:"patterns/error-handling.mdx",content:"%23%20Error%20Handling%20%26%20Retries%0A%0ABuild%20resilient%20workflows%20with%20proper%20error%20handling%20and%20retry%20strategies.%0A%0A%23%23%20Basic%20Retry%20Configuration%0A%0AConfigure%20retries%20at%20the%20node%20level%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20clean%20configuration%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20will%20be%20retried%20up%20to%203%20times%0A%20%20%20%20%20%20%20%20return%20callFlakeyAPI()%0A%20%20%20%20%7D).%0A%20%20%20%20WithMaxRetries(3).%0A%20%20%20%20WithWait(time.Second).%20%2F%2F%20Wait%201%20second%20between%20retries%0A%20%20%20%20WithExecFallbackFunc(func(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Called%20after%20all%20retries%20fail%0A%20%20%20%20%20%20%20%20log.Printf(%22API%20failed%20after%20retries%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20nil%20%2F%2F%20Return%20nil%20to%20handle%20in%20Post%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Exponential%20Backoff%0A%0AImplement%20exponential%20backoff%20with%20RetryableNode%3A%0A%0A%60%60%60go%0Atype%20BackoffNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempt%20int%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20return%205%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20%2F%2F%20Exponential%20backoff%3A%201s%2C%202s%2C%204s%2C%208s%2C%2016s%0A%20%20%20%20return%20time.Duration(math.Pow(2%2C%20float64(n.attempt)))%20*%20time.Second%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempt%2B%2B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%3A%20%25v%22%2C%20n.attempt%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20n.attempt%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pattern%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%7D%0A%0Afunc%20NewCircuitBreakerNode()%20*CircuitBreakerNode%20%7B%0A%20%20%20%20return%20%26CircuitBreakerNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20threshold%3A%205%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.failures%20%3E%3D%20n.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(n.lastFailure)%20%3C%20n.timeout%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20n.failures%20%3D%200%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.failures%2B%2B%0A%20%20%20%20%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.failures%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20on%20Failure%0A%0AImplement%20the%20FallbackNode%20interface%20for%20graceful%20degradation%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20sync.Map%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20result%0A%20%20%20%20%20%20%20%20n.cache.Store(key%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20cached%20data%20on%20failure%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(key)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20for%20%25s%20due%20to%20error%3A%20%25v%22%2C%20key%2C%20err)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20default%20if%20no%20cache%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22cached%22%3A%20false%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Aggregation%0A%0ACollect%20errors%20from%20batch%20operations%20using%20BatchNode%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20each%20item%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%20%20%2F%2F%20Error%20for%20this%20specific%20item%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20errors%20%5B%5Derror%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20errors%20and%20successes%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20fmt.Errorf(%22item%20%25d%3A%20%25w%22%2C%20i%2C%20result.Error()))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20%20%20%20%20shared.Set(%22successful%22%2C%20successful)%0A%20%20%20%20%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22batch_error%22%2C%20%26flyt.BatchError%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Errors%3A%20errors%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%25d%2F%25d%20items%20failed%22%2C%20len(errors)%2C%20len(items))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22partial_failure%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchErrorHandling(true)%20%20%2F%2F%20Continue%20processing%20despite%20errors%0A%60%60%60%0A%0A%23%23%20Retry%20with%20Jitter%0A%0AAdd%20randomization%20to%20prevent%20thundering%20herd%3A%0A%0A%60%60%60go%0Afunc%20(n%20*JitterNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20base%20%3A%3D%20time.Second%20*%20time.Duration(n.attempt)%0A%20%20%20%20jitter%20%3A%3D%20time.Duration(rand.Intn(1000))%20*%20time.Millisecond%0A%20%20%20%20return%20base%20%2B%20jitter%0A%7D%0A%60%60%60%0A%0A%23%23%20Selective%20Retry%0A%0AOnly%20retry%20specific%20errors%3A%0A%0A%60%60%60go%0Afunc%20(n%20*SelectiveRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Only%20retry%20on%20network%20errors%0A%20%20%20%20%20%20%20%20if%20isNetworkError(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20be%20retried%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20business%20logic%20errors%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22permanent%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*SelectiveRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Check%20error%20type%20from%20last%20execution%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20!isRetryable(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20return%200%20%2F%2F%20Don't%20retry%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Context%0A%0AProvide%20context%20for%20debugging%3A%0A%0A%60%60%60go%0Atype%20ErrorContext%20struct%20%7B%0A%20%20%20%20Node%20%20%20%20%20%20string%0A%20%20%20%20Action%20%20%20%20string%0A%20%20%20%20Input%20%20%20%20%20any%0A%20%20%20%20Error%20%20%20%20%20error%0A%20%20%20%20Timestamp%20time.Time%0A%20%20%20%20Attempts%20%20int%0A%7D%0A%0Afunc%20(n%20*DetailedErrorNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%2C%20ok%20%3A%3D%20execResult.(error)%3B%20ok%20%26%26%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20errorCtx%20%3A%3D%20ErrorContext%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Node%3A%20%20%20%20%20%20%22DetailedErrorNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Action%3A%20%20%20%20%22process%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Input%3A%20%20%20%20%20prepResult%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20%20%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Attempts%3A%20%20n.attempts%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20errorCtx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20n.attempts%20%3C%20n.maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Timeout%20Handling%0A%0APrevent%20hanging%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*TimeoutNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20resultChan%20%3A%3D%20make(chan%20any)%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20longRunningOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%3A%20%25w%22%2C%20ctx.Err())%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Identify%20Transient%20vs%20Permanent%20Errors**%3A%20Only%20retry%20transient%20failures%0A2.%20**Set%20Reasonable%20Limits**%3A%20Don't%20retry%20indefinitely%0A3.%20**Use%20Backoff**%3A%20Avoid%20overwhelming%20failing%20services%0A4.%20**Log%20Failures**%3A%20Track%20retry%20attempts%20for%20debugging%0A5.%20**Provide%20Fallbacks**%3A%20Gracefully%20degrade%20when%20possible%0A6.%20**Monitor%20Retry%20Rates**%3A%20High%20retry%20rates%20indicate%20problems%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFallback%20on%20Failure%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BBatch%20Error%20Handling%5D(%2Fadvanced%2Fbatch-processing%23batch-error-handling)%20-%20Handle%20batch%20failures%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./error-handling-LBm-qMg2.js"),[]),path:"/patterns/error-handling.html",type:"mdx",filePath:"patterns/error-handling.mdx",content:"%23%20Error%20Handling%20%26%20Retries%0A%0ABuild%20resilient%20workflows%20with%20proper%20error%20handling%20and%20retry%20strategies.%0A%0A%23%23%20Basic%20Retry%20Configuration%0A%0AConfigure%20retries%20at%20the%20node%20level%3A%0A%0A%60%60%60go%0A%2F%2F%20Using%20fluent%20API%20for%20clean%20configuration%0Anode%20%3A%3D%20flyt.NewNode().%0A%20%20%20%20WithExecFuncAny(func(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20will%20be%20retried%20up%20to%203%20times%0A%20%20%20%20%20%20%20%20return%20callFlakeyAPI()%0A%20%20%20%20%7D).%0A%20%20%20%20WithMaxRetries(3).%0A%20%20%20%20WithWait(time.Second).%20%2F%2F%20Wait%201%20second%20between%20retries%0A%20%20%20%20WithExecFallbackFunc(func(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Called%20after%20all%20retries%20fail%0A%20%20%20%20%20%20%20%20log.Printf(%22API%20failed%20after%20retries%3A%20%25v%22%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20nil%20%2F%2F%20Return%20nil%20to%20handle%20in%20Post%0A%20%20%20%20%7D)%0A%60%60%60%0A%0A%23%23%20Exponential%20Backoff%0A%0AImplement%20exponential%20backoff%20with%20RetryableNode%3A%0A%0A%60%60%60go%0Atype%20BackoffNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20attempt%20int%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20return%205%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20%2F%2F%20Exponential%20backoff%3A%201s%2C%202s%2C%204s%2C%208s%2C%2016s%0A%20%20%20%20return%20time.Duration(math.Pow(2%2C%20float64(n.attempt)))%20*%20time.Second%0A%7D%0A%0Afunc%20(n%20*BackoffNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20n.attempt%2B%2B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Attempt%20%25d%20failed%3A%20%25v%22%2C%20n.attempt%2C%20err)%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20n.attempt%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Pattern%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%7D%0A%0Afunc%20NewCircuitBreakerNode()%20*CircuitBreakerNode%20%7B%0A%20%20%20%20return%20%26CircuitBreakerNode%7B%0A%20%20%20%20%20%20%20%20BaseNode%3A%20%20flyt.NewBaseNode()%2C%0A%20%20%20%20%20%20%20%20threshold%3A%205%2C%0A%20%20%20%20%20%20%20%20timeout%3A%20%20%2030%20*%20time.Second%2C%0A%20%20%20%20%7D%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.failures%20%3E%3D%20n.threshold%20%7B%0A%20%20%20%20%20%20%20%20if%20time.Since(n.lastFailure)%20%3C%20n.timeout%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Reset%20after%20timeout%0A%20%20%20%20%20%20%20%20n.failures%20%3D%200%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.failures%2B%2B%0A%20%20%20%20%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.failures%20%3D%200%20%2F%2F%20Reset%20on%20success%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20on%20Failure%0A%0AImplement%20the%20FallbackNode%20interface%20for%20graceful%20degradation%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20sync.Map%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Cache%20successful%20result%0A%20%20%20%20%20%20%20%20n.cache.Store(key%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20cached%20data%20on%20failure%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(key)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20for%20%25s%20due%20to%20error%3A%20%25v%22%2C%20key%2C%20err)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20default%20if%20no%20cache%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22cached%22%3A%20false%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Aggregation%0A%0ACollect%20errors%20from%20batch%20operations%20using%20BatchNode%3A%0A%0A%60%60%60go%0AbatchNode%20%3A%3D%20flyt.NewBatchNode().%0A%20%20%20%20WithPrepFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore)%20(%5B%5Dflyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20items%20%3A%3D%20shared.GetSlice(%22items%22)%0A%20%20%20%20%20%20%20%20results%20%3A%3D%20make(%5B%5Dflyt.Result%2C%20len(items))%0A%20%20%20%20%20%20%20%20for%20i%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20results%5Bi%5D%20%3D%20flyt.NewResult(item)%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20results%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithExecFunc(func(ctx%20context.Context%2C%20item%20flyt.Result)%20(flyt.Result%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20each%20item%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item.Value())%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20flyt.Result%7B%7D%2C%20err%20%20%2F%2F%20Error%20for%20this%20specific%20item%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20flyt.NewResult(result)%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithPostFunc(func(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20items%2C%20results%20%5B%5Dflyt.Result)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20%20%20%20%20var%20errors%20%5B%5Derror%0A%20%20%20%20%20%20%20%20var%20successful%20%5B%5Dany%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Aggregate%20errors%20and%20successes%0A%20%20%20%20%20%20%20%20for%20i%2C%20result%20%3A%3D%20range%20results%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20result.IsError()%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20errors%20%3D%20append(errors%2C%20fmt.Errorf(%22item%20%25d%3A%20%25w%22%2C%20i%2C%20result.Error()))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20successful%20%3D%20append(successful%2C%20result.Value())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Store%20results%0A%20%20%20%20%20%20%20%20shared.Set(%22successful%22%2C%20successful)%0A%20%20%20%20%20%20%20%20if%20len(errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20shared.Set(%22batch_error%22%2C%20%26flyt.BatchError%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Errors%3A%20errors%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%0A%20%20%20%20%20%20%20%20%20%20%20%20log.Printf(%22%25d%2F%25d%20items%20failed%22%2C%20len(errors)%2C%20len(items))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22partial_failure%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%20%20%20%20%7D).%0A%20%20%20%20WithBatchErrorHandling(true)%20%20%2F%2F%20Continue%20processing%20despite%20errors%0A%60%60%60%0A%0A%23%23%20Retry%20with%20Jitter%0A%0AAdd%20randomization%20to%20prevent%20thundering%20herd%3A%0A%0A%60%60%60go%0Afunc%20(n%20*JitterNode)%20GetWait()%20time.Duration%20%7B%0A%20%20%20%20base%20%3A%3D%20time.Second%20*%20time.Duration(n.attempt)%0A%20%20%20%20jitter%20%3A%3D%20time.Duration(rand.Intn(1000))%20*%20time.Millisecond%0A%20%20%20%20return%20base%20%2B%20jitter%0A%7D%0A%60%60%60%0A%0A%23%23%20Selective%20Retry%0A%0AOnly%20retry%20specific%20errors%3A%0A%0A%60%60%60go%0Afunc%20(n%20*SelectiveRetryNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20result%2C%20err%20%3A%3D%20callAPI()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Only%20retry%20on%20network%20errors%0A%20%20%20%20%20%20%20%20if%20isNetworkError(err)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20be%20retried%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2F%20Don't%20retry%20business%20logic%20errors%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22permanent%20error%3A%20%25w%22%2C%20err)%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*SelectiveRetryNode)%20GetMaxRetries()%20int%20%7B%0A%20%20%20%20%2F%2F%20Check%20error%20type%20from%20last%20execution%0A%20%20%20%20if%20n.lastError%20!%3D%20nil%20%26%26%20!isRetryable(n.lastError)%20%7B%0A%20%20%20%20%20%20%20%20return%200%20%2F%2F%20Don't%20retry%0A%20%20%20%20%7D%0A%20%20%20%20return%203%0A%7D%0A%60%60%60%0A%0A%23%23%20Error%20Context%0A%0AProvide%20context%20for%20debugging%3A%0A%0A%60%60%60go%0Atype%20ErrorContext%20struct%20%7B%0A%20%20%20%20Node%20%20%20%20%20%20string%0A%20%20%20%20Action%20%20%20%20string%0A%20%20%20%20Input%20%20%20%20%20any%0A%20%20%20%20Error%20%20%20%20%20error%0A%20%20%20%20Timestamp%20time.Time%0A%20%20%20%20Attempts%20%20int%0A%7D%0A%0Afunc%20(n%20*DetailedErrorNode)%20Post(ctx%20context.Context%2C%20shared%20*flyt.SharedStore%2C%20prepResult%2C%20execResult%20any)%20(flyt.Action%2C%20error)%20%7B%0A%20%20%20%20if%20err%2C%20ok%20%3A%3D%20execResult.(error)%3B%20ok%20%26%26%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20errorCtx%20%3A%3D%20ErrorContext%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Node%3A%20%20%20%20%20%20%22DetailedErrorNode%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Action%3A%20%20%20%20%22process%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Input%3A%20%20%20%20%20prepResult%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Error%3A%20%20%20%20%20err%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Attempts%3A%20%20n.attempts%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20shared.Set(%22last_error%22%2C%20errorCtx)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20n.attempts%20%3C%20n.maxRetries%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22retry%22%2C%20nil%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%22error%22%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20flyt.DefaultAction%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Timeout%20Handling%0A%0APrevent%20hanging%20operations%3A%0A%0A%60%60%60go%0Afunc%20(n%20*TimeoutNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Create%20timeout%20context%0A%20%20%20%20ctx%2C%20cancel%20%3A%3D%20context.WithTimeout(ctx%2C%2030*time.Second)%0A%20%20%20%20defer%20cancel()%0A%20%20%20%20%0A%20%20%20%20resultChan%20%3A%3D%20make(chan%20any)%0A%20%20%20%20errChan%20%3A%3D%20make(chan%20error)%0A%20%20%20%20%0A%20%20%20%20go%20func()%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20longRunningOperation()%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20errChan%20%3C-%20err%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20resultChan%20%3C-%20result%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D()%0A%20%20%20%20%0A%20%20%20%20select%20%7B%0A%20%20%20%20case%20result%20%3A%3D%20%3C-resultChan%3A%0A%20%20%20%20%20%20%20%20return%20result%2C%20nil%0A%20%20%20%20case%20err%20%3A%3D%20%3C-errChan%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20case%20%3C-ctx.Done()%3A%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22operation%20timed%20out%3A%20%25w%22%2C%20ctx.Err())%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Identify%20Transient%20vs%20Permanent%20Errors**%3A%20Only%20retry%20transient%20failures%0A2.%20**Set%20Reasonable%20Limits**%3A%20Don't%20retry%20indefinitely%0A3.%20**Use%20Backoff**%3A%20Avoid%20overwhelming%20failing%20services%0A4.%20**Log%20Failures**%3A%20Track%20retry%20attempts%20for%20debugging%0A5.%20**Provide%20Fallbacks**%3A%20Gracefully%20degrade%20when%20possible%0A6.%20**Monitor%20Retry%20Rates**%3A%20High%20retry%20rates%20indicate%20problems%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BFallback%20on%20Failure%5D(%2Fpatterns%2Ffallback)%20-%20Graceful%20degradation%0A-%20%5BBatch%20Error%20Handling%5D(%2Fadvanced%2Fbatch-processing%23batch-error-handling)%20-%20Handle%20batch%20failures%0A-%20%5BBest%20Practices%5D(%2Fbest-practices)%20-%20General%20guidelines",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./fallback-tj-PwJ25.js"),[]),path:"/patterns/fallback",type:"mdx",filePath:"patterns/fallback.mdx",content:"%23%20Fallback%20on%20Failure%0A%0AImplement%20graceful%20degradation%20when%20operations%20fail%2C%20ensuring%20your%20workflows%20remain%20resilient%20and%20provide%20the%20best%20possible%20user%20experience%20even%20during%20failures.%0A%0A%23%23%20FallbackNode%20Interface%0A%0AThe%20%60FallbackNode%60%20interface%20allows%20custom%20fallback%20behavior%3A%0A%0A%60%60%60go%0Atype%20FallbackNode%20interface%20%7B%0A%20%20%20%20Node%0A%20%20%20%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%0A%7D%0A%60%60%60%0A%0A%23%23%20Basic%20Fallback%0A%0AReturn%20default%20values%20on%20failure%3A%0A%0A%60%60%60go%0Atype%20DefaultValueNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20fetchFromPrimarySource()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20fallback%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20log.Printf(%22Primary%20source%20failed%3A%20%25v%2C%20returning%20default%22%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20safe%20default%20value%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%22default_value%22%2C%0A%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Cached%20Fallback%0A%0AUse%20cached%20data%20when%20fresh%20data%20is%20unavailable%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20map%5Bstring%5DCacheEntry%0A%20%20%20%20mu%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20CacheEntry%20struct%20%7B%0A%20%20%20%20Data%20%20%20%20%20%20any%0A%20%20%20%20Timestamp%20time.Time%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%20on%20success%0A%20%20%20%20%20%20%20%20n.mu.Lock()%0A%20%20%20%20%20%20%20%20n.cache%5Bkey%5D%20%3D%20CacheEntry%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20n.cache%5Bkey%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20age%20%3A%3D%20time.Since(entry.Timestamp)%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20(age%3A%20%25v)%20due%20to%20error%3A%20%25v%22%2C%20age%2C%20err)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20metadata%20about%20cache%20usage%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20%20%20%20%20%20%20entry.Data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cached%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cache_age%22%3A%20%20age.Seconds()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%20%20%20%20%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20No%20cache%20available%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20fallback%20available%3A%20%25w%22%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Multi-Level%20Fallback%0A%0ATry%20multiple%20fallback%20strategies%3A%0A%0A%60%60%60go%0Atype%20MultiLevelFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryURL%20%20%20string%0A%20%20%20%20secondaryURL%20string%0A%20%20%20%20cache%20%20%20%20%20%20%20%20sync.Map%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.primaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.cache.Store(%22last_good%22%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20ExecFallback(prepResult%20any%2C%20primaryErr%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Level%201%3A%20Try%20secondary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.secondaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20secondary%20source%20due%20to%20primary%20error%3A%20%25v%22%2C%20primaryErr)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%202%3A%20Try%20cache%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(%22last_good%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20cached%20data%20due%20to%20all%20sources%20failing%22)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%203%3A%20Return%20minimal%20default%0A%20%20%20%20log.Printf(%22All%20fallbacks%20exhausted%2C%20returning%20minimal%20response%22)%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Partial%20Fallback%0A%0AReturn%20partial%20results%20when%20complete%20processing%20fails%3A%0A%0A%60%60%60go%0Atype%20BatchProcessorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20results%20%5B%5DResult%0A%20%20%20%20errors%20%20%5B%5Derror%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20n.results%20%3D%20make(%5B%5DResult%2C%200%2C%20len(items))%0A%20%20%20%20n.errors%20%3D%20make(%5B%5Derror%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20n.errors%20%3D%20append(n.errors%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.results%20%3D%20append(n.results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(n.errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22processing%20failed%3A%20%25d%20errors%22%2C%20len(n.errors))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.results%2C%20nil%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Return%20partial%20results%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22partial_results%22%3A%20n.results%2C%0A%20%20%20%20%20%20%20%20%22success_count%22%3A%20%20%20len(n.results)%2C%0A%20%20%20%20%20%20%20%20%22error_count%22%3A%20%20%20%20%20len(n.errors)%2C%0A%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%20%20%20%20%20%20%20n.errors%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%20%20%20%20%20%20%22partial_success%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Fallback%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%20%20%20%20fallbackMsg%20string%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.recordFailure()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.reset()%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20cached%20or%20default%20response%20immediately%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22circuit_open%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20n.fallbackMsg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%20n.timeout%20-%20time.Since(n.lastFailure)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Circuit%20not%20open%2C%20but%20request%20failed%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20isCircuitOpen()%20bool%20%7B%0A%20%20%20%20return%20n.failures%20%3E%3D%20n.threshold%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20time.Since(n.lastFailure)%20%3C%20n.timeout%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20recordFailure()%20%7B%0A%20%20%20%20n.failures%2B%2B%0A%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20reset()%20%7B%0A%20%20%20%20n.failures%20%3D%200%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20with%20Metrics%0A%0ATrack%20fallback%20usage%3A%0A%0A%60%60%60go%0Atype%20MetricsFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryCalls%20%20%20int64%0A%20%20%20%20fallbackCalls%20%20int64%0A%20%20%20%20lastFallback%20%20%20time.Time%0A%7D%0A%0Afunc%20(n%20*MetricsFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26n.fallbackCalls%2C%201)%0A%20%20%20%20n.lastFallback%20%3D%20time.Now()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20metrics%0A%20%20%20%20total%20%3A%3D%20atomic.LoadInt64(%26n.primaryCalls)%20%2B%20atomic.LoadInt64(%26n.fallbackCalls)%0A%20%20%20%20fallbackRate%20%3A%3D%20float64(n.fallbackCalls)%20%2F%20float64(total)%20*%20100%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Fallback%20metrics%20-%20Rate%3A%20%25.2f%25%25%2C%20Total%20fallbacks%3A%20%25d%22%2C%20%0A%20%20%20%20%20%20%20%20fallbackRate%2C%20n.fallbackCalls)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20fallback%20data%0A%20%20%20%20return%20getDefaultResponse()%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Fallback%0A%0ADifferent%20fallbacks%20based%20on%20error%20type%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ConditionalFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20errors.Is(err%2C%20ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20timeouts%2C%20return%20cached%20data%0A%20%20%20%20%20%20%20%20return%20n.getCachedResponse()%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrRateLimit)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20rate%20limits%2C%20return%20throttled%20message%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22rate_limited%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%2060%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrNotFound)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20not%20found%2C%20return%20empty%20result%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22found%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20nil%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generic%20fallback%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22error%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20unavailable%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Log%20Fallback%20Usage**%3A%20Track%20when%20and%20why%20fallbacks%20are%20triggered%0A2.%20**Monitor%20Fallback%20Rates**%3A%20High%20rates%20indicate%20system%20issues%0A3.%20**Set%20Appropriate%20Timeouts**%3A%20Don't%20wait%20too%20long%20before%20falling%20back%0A4.%20**Provide%20Meaningful%20Defaults**%3A%20Fallback%20data%20should%20be%20useful%0A5.%20**Document%20Fallback%20Behavior**%3A%20Make%20it%20clear%20what%20happens%20during%20failures%0A6.%20**Test%20Fallback%20Paths**%3A%20Ensure%20fallbacks%20work%20correctly%0A7.%20**Consider%20User%20Experience**%3A%20Degraded%20service%20is%20better%20than%20no%20service%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Comprehensive%20error%20strategies%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Dynamic%20flow%20control%0A-%20%5BCircuit%20Breaker%20Pattern%5D(%2Fpatterns%2Ferror-handling%23circuit-breaker-pattern)%20-%20Prevent%20cascading%20failures",lastUpdatedAt:1758815363e3},{lazy:()=>M0(()=>import("./fallback-tj-PwJ25.js"),[]),path:"/patterns/fallback.html",type:"mdx",filePath:"patterns/fallback.mdx",content:"%23%20Fallback%20on%20Failure%0A%0AImplement%20graceful%20degradation%20when%20operations%20fail%2C%20ensuring%20your%20workflows%20remain%20resilient%20and%20provide%20the%20best%20possible%20user%20experience%20even%20during%20failures.%0A%0A%23%23%20FallbackNode%20Interface%0A%0AThe%20%60FallbackNode%60%20interface%20allows%20custom%20fallback%20behavior%3A%0A%0A%60%60%60go%0Atype%20FallbackNode%20interface%20%7B%0A%20%20%20%20Node%0A%20%20%20%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%0A%7D%0A%60%60%60%0A%0A%23%23%20Basic%20Fallback%0A%0AReturn%20default%20values%20on%20failure%3A%0A%0A%60%60%60go%0Atype%20DefaultValueNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20operation%0A%20%20%20%20result%2C%20err%20%3A%3D%20fetchFromPrimarySource()%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%20%2F%2F%20Will%20trigger%20fallback%0A%20%20%20%20%7D%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*DefaultValueNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20log.Printf(%22Primary%20source%20failed%3A%20%25v%2C%20returning%20default%22%2C%20err)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20safe%20default%20value%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22data%22%3A%20%22default_value%22%2C%0A%20%20%20%20%20%20%20%20%22error%22%3A%20err.Error()%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Cached%20Fallback%0A%0AUse%20cached%20data%20when%20fresh%20data%20is%20unavailable%3A%0A%0A%60%60%60go%0Atype%20CachedAPINode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20cache%20map%5Bstring%5DCacheEntry%0A%20%20%20%20mu%20%20%20%20sync.RWMutex%0A%7D%0A%0Atype%20CacheEntry%20struct%20%7B%0A%20%20%20%20Data%20%20%20%20%20%20any%0A%20%20%20%20Timestamp%20time.Time%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Try%20to%20fetch%20fresh%20data%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromAPI(key)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Update%20cache%20on%20success%0A%20%20%20%20%20%20%20%20n.mu.Lock()%0A%20%20%20%20%20%20%20%20n.cache%5Bkey%5D%20%3D%20CacheEntry%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20Data%3A%20%20%20%20%20%20data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20Timestamp%3A%20time.Now()%2C%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.mu.Unlock()%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*CachedAPINode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20key%20%3A%3D%20prepResult.(string)%0A%20%20%20%20%0A%20%20%20%20n.mu.RLock()%0A%20%20%20%20entry%2C%20exists%20%3A%3D%20n.cache%5Bkey%5D%0A%20%20%20%20n.mu.RUnlock()%0A%20%20%20%20%0A%20%20%20%20if%20exists%20%7B%0A%20%20%20%20%20%20%20%20age%20%3A%3D%20time.Since(entry.Timestamp)%0A%20%20%20%20%20%20%20%20log.Printf(%22Returning%20cached%20data%20(age%3A%20%25v)%20due%20to%20error%3A%20%25v%22%2C%20age%2C%20err)%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Add%20metadata%20about%20cache%20usage%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20%20%20%20%20%20%20entry.Data%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cached%22%3A%20%20%20%20%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22cache_age%22%3A%20%20age.Seconds()%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%20%20%20%20%20err.Error()%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20No%20cache%20available%0A%20%20%20%20return%20nil%2C%20fmt.Errorf(%22no%20fallback%20available%3A%20%25w%22%2C%20err)%0A%7D%0A%60%60%60%0A%0A%23%23%20Multi-Level%20Fallback%0A%0ATry%20multiple%20fallback%20strategies%3A%0A%0A%60%60%60go%0Atype%20MultiLevelFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryURL%20%20%20string%0A%20%20%20%20secondaryURL%20string%0A%20%20%20%20cache%20%20%20%20%20%20%20%20sync.Map%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Try%20primary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.primaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.cache.Store(%22last_good%22%2C%20data)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20nil%2C%20err%0A%7D%0A%0Afunc%20(n%20*MultiLevelFallbackNode)%20ExecFallback(prepResult%20any%2C%20primaryErr%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Level%201%3A%20Try%20secondary%20source%0A%20%20%20%20data%2C%20err%20%3A%3D%20fetchFromURL(n.secondaryURL)%0A%20%20%20%20if%20err%20%3D%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20secondary%20source%20due%20to%20primary%20error%3A%20%25v%22%2C%20primaryErr)%0A%20%20%20%20%20%20%20%20return%20data%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%202%3A%20Try%20cache%0A%20%20%20%20if%20cached%2C%20ok%20%3A%3D%20n.cache.Load(%22last_good%22)%3B%20ok%20%7B%0A%20%20%20%20%20%20%20%20log.Printf(%22Using%20cached%20data%20due%20to%20all%20sources%20failing%22)%0A%20%20%20%20%20%20%20%20return%20cached%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Level%203%3A%20Return%20minimal%20default%0A%20%20%20%20log.Printf(%22All%20fallbacks%20exhausted%2C%20returning%20minimal%20response%22)%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22unavailable%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Partial%20Fallback%0A%0AReturn%20partial%20results%20when%20complete%20processing%20fails%3A%0A%0A%60%60%60go%0Atype%20BatchProcessorNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20results%20%5B%5DResult%0A%20%20%20%20errors%20%20%5B%5Derror%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20items%20%3A%3D%20prepResult.(%5B%5DItem)%0A%20%20%20%20n.results%20%3D%20make(%5B%5DResult%2C%200%2C%20len(items))%0A%20%20%20%20n.errors%20%3D%20make(%5B%5Derror%2C%200)%0A%20%20%20%20%0A%20%20%20%20for%20_%2C%20item%20%3A%3D%20range%20items%20%7B%0A%20%20%20%20%20%20%20%20result%2C%20err%20%3A%3D%20processItem(item)%0A%20%20%20%20%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20n.errors%20%3D%20append(n.errors%2C%20err)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20n.results%20%3D%20append(n.results%2C%20result)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20len(n.errors)%20%3E%200%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22processing%20failed%3A%20%25d%20errors%22%2C%20len(n.errors))%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20n.results%2C%20nil%0A%7D%0A%0Afunc%20(n%20*BatchProcessorNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Return%20partial%20results%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22partial_results%22%3A%20n.results%2C%0A%20%20%20%20%20%20%20%20%22success_count%22%3A%20%20%20len(n.results)%2C%0A%20%20%20%20%20%20%20%20%22error_count%22%3A%20%20%20%20%20len(n.errors)%2C%0A%20%20%20%20%20%20%20%20%22errors%22%3A%20%20%20%20%20%20%20%20%20%20n.errors%2C%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%20%20%20%20%20%20%20%20%20%22partial_success%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Circuit%20Breaker%20Fallback%0A%0APrevent%20cascading%20failures%3A%0A%0A%60%60%60go%0Atype%20CircuitBreakerNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20failures%20%20%20%20int%0A%20%20%20%20lastFailure%20time.Time%0A%20%20%20%20threshold%20%20%20int%0A%20%20%20%20timeout%20%20%20%20%20time.Duration%0A%20%20%20%20fallbackMsg%20string%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20Exec(ctx%20context.Context%2C%20prepResult%20any)%20(any%2C%20error)%20%7B%0A%20%20%20%20%2F%2F%20Check%20if%20circuit%20is%20open%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20return%20nil%2C%20fmt.Errorf(%22circuit%20breaker%20open%22)%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20result%2C%20err%20%3A%3D%20callService(prepResult)%0A%20%20%20%20if%20err%20!%3D%20nil%20%7B%0A%20%20%20%20%20%20%20%20n.recordFailure()%0A%20%20%20%20%20%20%20%20return%20nil%2C%20err%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20n.reset()%0A%20%20%20%20return%20result%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20if%20n.isCircuitOpen()%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Return%20cached%20or%20default%20response%20immediately%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22circuit_open%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20n.fallbackMsg%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%20n.timeout%20-%20time.Since(n.lastFailure)%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Circuit%20not%20open%2C%20but%20request%20failed%0A%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%22status%22%3A%20%22degraded%22%2C%0A%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20temporarily%20unavailable%22%2C%0A%20%20%20%20%7D%2C%20nil%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20isCircuitOpen()%20bool%20%7B%0A%20%20%20%20return%20n.failures%20%3E%3D%20n.threshold%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20time.Since(n.lastFailure)%20%3C%20n.timeout%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20recordFailure()%20%7B%0A%20%20%20%20n.failures%2B%2B%0A%20%20%20%20n.lastFailure%20%3D%20time.Now()%0A%7D%0A%0Afunc%20(n%20*CircuitBreakerNode)%20reset()%20%7B%0A%20%20%20%20n.failures%20%3D%200%0A%7D%0A%60%60%60%0A%0A%23%23%20Fallback%20with%20Metrics%0A%0ATrack%20fallback%20usage%3A%0A%0A%60%60%60go%0Atype%20MetricsFallbackNode%20struct%20%7B%0A%20%20%20%20*flyt.BaseNode%0A%20%20%20%20primaryCalls%20%20%20int64%0A%20%20%20%20fallbackCalls%20%20int64%0A%20%20%20%20lastFallback%20%20%20time.Time%0A%7D%0A%0Afunc%20(n%20*MetricsFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20atomic.AddInt64(%26n.fallbackCalls%2C%201)%0A%20%20%20%20n.lastFallback%20%3D%20time.Now()%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Log%20metrics%0A%20%20%20%20total%20%3A%3D%20atomic.LoadInt64(%26n.primaryCalls)%20%2B%20atomic.LoadInt64(%26n.fallbackCalls)%0A%20%20%20%20fallbackRate%20%3A%3D%20float64(n.fallbackCalls)%20%2F%20float64(total)%20*%20100%0A%20%20%20%20%0A%20%20%20%20log.Printf(%22Fallback%20metrics%20-%20Rate%3A%20%25.2f%25%25%2C%20Total%20fallbacks%3A%20%25d%22%2C%20%0A%20%20%20%20%20%20%20%20fallbackRate%2C%20n.fallbackCalls)%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Return%20fallback%20data%0A%20%20%20%20return%20getDefaultResponse()%2C%20nil%0A%7D%0A%60%60%60%0A%0A%23%23%20Conditional%20Fallback%0A%0ADifferent%20fallbacks%20based%20on%20error%20type%3A%0A%0A%60%60%60go%0Afunc%20(n%20*ConditionalFallbackNode)%20ExecFallback(prepResult%20any%2C%20err%20error)%20(any%2C%20error)%20%7B%0A%20%20%20%20switch%20%7B%0A%20%20%20%20case%20errors.Is(err%2C%20ErrTimeout)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20timeouts%2C%20return%20cached%20data%0A%20%20%20%20%20%20%20%20return%20n.getCachedResponse()%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrRateLimit)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20rate%20limits%2C%20return%20throttled%20message%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22error%22%3A%20%22rate_limited%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22retry_after%22%3A%2060%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20case%20errors.Is(err%2C%20ErrNotFound)%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20For%20not%20found%2C%20return%20empty%20result%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22found%22%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22data%22%3A%20nil%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20%20%20%2F%2F%20Generic%20fallback%0A%20%20%20%20%20%20%20%20return%20map%5Bstring%5Dany%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22status%22%3A%20%22error%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22message%22%3A%20%22Service%20unavailable%22%2C%0A%20%20%20%20%20%20%20%20%7D%2C%20nil%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A%23%23%20Best%20Practices%0A%0A1.%20**Log%20Fallback%20Usage**%3A%20Track%20when%20and%20why%20fallbacks%20are%20triggered%0A2.%20**Monitor%20Fallback%20Rates**%3A%20High%20rates%20indicate%20system%20issues%0A3.%20**Set%20Appropriate%20Timeouts**%3A%20Don't%20wait%20too%20long%20before%20falling%20back%0A4.%20**Provide%20Meaningful%20Defaults**%3A%20Fallback%20data%20should%20be%20useful%0A5.%20**Document%20Fallback%20Behavior**%3A%20Make%20it%20clear%20what%20happens%20during%20failures%0A6.%20**Test%20Fallback%20Paths**%3A%20Ensure%20fallbacks%20work%20correctly%0A7.%20**Consider%20User%20Experience**%3A%20Degraded%20service%20is%20better%20than%20no%20service%0A%0A%23%23%20Next%20Steps%0A%0A-%20%5BError%20Handling%5D(%2Fpatterns%2Ferror-handling)%20-%20Comprehensive%20error%20strategies%0A-%20%5BConditional%20Branching%5D(%2Fpatterns%2Fbranching)%20-%20Dynamic%20flow%20control%0A-%20%5BCircuit%20Breaker%20Pattern%5D(%2Fpatterns%2Ferror-handling%23circuit-breaker-pattern)%20-%20Prevent%20cascading%20failures",lastUpdatedAt:1758815363e3}];var Iu={background5:"var(--vocs-color_background5)",border:"var(--vocs-color_border)",border2:"var(--vocs-color_border2)"},Bp={default:"system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",mono:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},bp={default:"var(--vocs-fontFamily_default)",mono:"var(--vocs-fontFamily_mono)"},Qo={4:"var(--vocs-space_4)",8:"var(--vocs-space_8)",24:"var(--vocs-space_24)"},ou={horizontalPadding:"var(--vocs-content_horizontalPadding)",verticalPadding:"var(--vocs-content_verticalPadding)",width:"var(--vocs-content_width)"};function mC(t){var n,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(n=0;n<s;n++)t[n]&&(a=mC(t[n]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}function s0(){for(var t,n,a=0,l="",s=arguments.length;a<s;a++)(t=arguments[a])&&(n=mC(t))&&(l&&(l+=" "),l+=n);return l}function S1(t){var n=t.match(/^var\((.*)\)$/);return n?n[1]:t}function Me(t,n){var a={};{var l=t;for(var s in l){var c=l[s];c!=null&&(a[S1(s)]=c)}}return Object.defineProperty(a,"toString",{value:function(){return Object.keys(this).map(f=>"".concat(f,":").concat(this[f])).join(";")},writable:!1}),a}var R1="var(--vocs_ExternalLink_iconUrl)",E1="vocs_ExternalLink";const _1=g.forwardRef(({className:t,children:n,hideExternalIcon:a,href:l,...s},c)=>{const{basePath:A}=m2(),f=A;return C.jsx("a",{ref:c,className:s0(t,a||typeof n!="string"?void 0:E1),href:l,target:"_blank",rel:"noopener noreferrer",style:Me({[R1]:`url(${f}/.vocs/icons/arrow-diagonal.svg)`}),...s,children:n})});var Np="vocs_Link",Sp="vocs_Link_accent",Rp="vocs_Link_styleless",Uu=new Map,Ol=new WeakMap,Ep=0,k1=void 0;function T1(t){return t?(Ol.has(t)||(Ep+=1,Ol.set(t,Ep.toString())),Ol.get(t)):"0"}function P1(t){return Object.keys(t).sort().filter(n=>t[n]!==void 0).map(n=>`${n}_${n==="root"?T1(t.root):t[n]}`).toString()}function M1(t){const n=P1(t);let a=Uu.get(n);if(!a){const l=new Map;let s;const c=new IntersectionObserver(A=>{A.forEach(f=>{var p;const h=f.isIntersecting&&s.some(y=>f.intersectionRatio>=y);t.trackVisibility&&typeof f.isVisible>"u"&&(f.isVisible=h),(p=l.get(f.target))==null||p.forEach(y=>{y(h,f)})})},t);s=c.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),a={id:n,observer:c,elements:l},Uu.set(n,a)}return a}function O1(t,n,a={},l=k1){if(typeof window.IntersectionObserver>"u"&&l!==void 0){const p=t.getBoundingClientRect();return n(l,{isIntersecting:l,target:t,intersectionRatio:typeof a.threshold=="number"?a.threshold:0,time:0,boundingClientRect:p,intersectionRect:p,rootBounds:p}),()=>{}}const{id:s,observer:c,elements:A}=M1(a),f=A.get(t)||[];return A.has(t)||A.set(t,f),f.push(n),c.observe(t),function(){f.splice(f.indexOf(n),1),f.length===0&&(A.delete(t),c.unobserve(t)),A.size===0&&(c.disconnect(),Uu.delete(s))}}function CC({threshold:t,delay:n,trackVisibility:a,rootMargin:l,root:s,triggerOnce:c,skip:A,initialInView:f,fallbackInView:p,onChange:h}={}){var y;const[m,D]=g.useState(null),v=g.useRef(h),[w,x]=g.useState({inView:!!f,entry:void 0});v.current=h,g.useEffect(()=>{if(A||!m)return;let N;return N=O1(m,(_,T)=>{x({inView:_,entry:T}),v.current&&v.current(_,T),T.isIntersecting&&c&&N&&(N(),N=void 0)},{root:s,rootMargin:l,threshold:t,trackVisibility:a,delay:n},p),()=>{N&&N()}},[Array.isArray(t)?t.toString():t,m,s,l,c,A,a,p,n]);const B=(y=w.entry)==null?void 0:y.target,b=g.useRef(void 0);!m&&B&&!c&&!A&&b.current!==B&&(b.current=B,x({inView:!!f,entry:void 0}));const R=[D,w.inView,w.entry];return R.ref=R[0],R.inView=R[1],R.entry=R[2],R}function L1(...t){return n=>{j1(n,...t)}}function j1(t,...n){n.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}const kn=g.forwardRef((t,n)=>{const a=()=>{var c;return(c=FA.find(A=>A.path===t.to))==null?void 0:c.lazy()},{ref:l,inView:s}=CC();return g.useEffect(()=>{s&&a()},[s]),C.jsx(In,{ref:L1(n,l),...t})}),Fe=g.forwardRef((t,n)=>{const{hideExternalIcon:a,href:l,variant:s="accent"}=t,{pathname:c}=a2();if(l!=null&&l.match(/^(www|https?)/))return C.jsx(_1,{...t,ref:n,className:s0(t.className,Np,s==="accent"&&Sp,s==="styleless"&&Rp),hideExternalIcon:a});const[A,f]=(l||"").split("#"),p=`${A||c}${f?`#${f}`:""}`;return C.jsx(kn,{...t,ref:n,className:s0(t.className,Np,s==="accent"&&Sp,s==="styleless"&&Rp),to:p})});var I1="vocs_NotFound",U1="vocs_NotFound_divider",z1="vocs_H1",yC="vocs_Heading",gC="vocs_Heading_slugTarget";function Un({level:t,...n}){const a=`h${t}`;return C.jsxs(a,{...n,id:void 0,className:s0(n.className,yC),children:[C.jsx("div",{id:n.id,className:gC}),n.children]})}function DC(t){return C.jsx(Un,{...t,className:s0(t.className,z1),level:1})}var W1="vocs_Paragraph";function vC(t){return C.jsx("p",{...t,className:s0(t.className,W1)})}function H1(){return C.jsxs("div",{className:I1,children:[C.jsx(DC,{children:"Page Not Found"}),C.jsx("div",{style:{height:Qo[24]}}),C.jsx("hr",{className:U1}),C.jsx("div",{style:{height:Qo[24]}}),C.jsx(vC,{children:"The page you were looking for could not be found."}),C.jsx("div",{style:{height:Qo[8]}}),C.jsx(Fe,{href:"/",children:"Go to Home Page"})]})}var V1="var(--vocs_Banner_bannerBackgroundColor)",G1="var(--vocs_Banner_bannerHeight)",q1="var(--vocs_Banner_bannerTextColor)",$1="vocs_Banner",Y1="vocs_Banner_content",K1="vocs_Banner_inner",Z1="vocs_Banner_closeButton";const X1=Object.getPrototypeOf(Q1).constructor;async function Q1(t,n){return new X1(String(t))(n)}function J1(t,n){return new Function(String(t))(n)}function Mr(t,n){if(t==null)return{};var a={},l=Object.keys(t),s,c;for(c=0;c<l.length;c++)s=l[c],!(n.indexOf(s)>=0)&&(a[s]=t[s]);return a}var ew=["color"],tw=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,ew);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M6.85355 3.14645C7.04882 3.34171 7.04882 3.65829 6.85355 3.85355L3.70711 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H3.70711L6.85355 11.1464C7.04882 11.3417 7.04882 11.6583 6.85355 11.8536C6.65829 12.0488 6.34171 12.0488 6.14645 11.8536L2.14645 7.85355C1.95118 7.65829 1.95118 7.34171 2.14645 7.14645L6.14645 3.14645C6.34171 2.95118 6.65829 2.95118 6.85355 3.14645Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),rw=["color"],nw=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,rw);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),ow=["color"],aw=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,ow);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),lw=["color"],iw=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,lw);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M3.5 2C3.22386 2 3 2.22386 3 2.5V12.5C3 12.7761 3.22386 13 3.5 13H11.5C11.7761 13 12 12.7761 12 12.5V6H8.5C8.22386 6 8 5.77614 8 5.5V2H3.5ZM9 2.70711L11.2929 5H9V2.70711ZM2 2.5C2 1.67157 2.67157 1 3.5 1H8.5C8.63261 1 8.75979 1.05268 8.85355 1.14645L12.8536 5.14645C12.9473 5.24021 13 5.36739 13 5.5V12.5C13 13.3284 12.3284 14 11.5 14H3.5C2.67157 14 2 13.3284 2 12.5V2.5Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),sw=["color"],cw=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,sw);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M1.5 5.25C1.91421 5.25 2.25 4.91421 2.25 4.5C2.25 4.08579 1.91421 3.75 1.5 3.75C1.08579 3.75 0.75 4.08579 0.75 4.5C0.75 4.91421 1.08579 5.25 1.5 5.25ZM4 4.5C4 4.22386 4.22386 4 4.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H4.5C4.22386 5 4 4.77614 4 4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H13.5C13.7761 8 14 7.77614 14 7.5C14 7.22386 13.7761 7 13.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H13.5C13.7761 11 14 10.7761 14 10.5C14 10.2239 13.7761 10 13.5 10H4.5ZM2.25 7.5C2.25 7.91421 1.91421 8.25 1.5 8.25C1.08579 8.25 0.75 7.91421 0.75 7.5C0.75 7.08579 1.08579 6.75 1.5 6.75C1.91421 6.75 2.25 7.08579 2.25 7.5ZM1.5 11.25C1.91421 11.25 2.25 10.9142 2.25 10.5C2.25 10.0858 1.91421 9.75 1.5 9.75C1.08579 9.75 0.75 10.0858 0.75 10.5C0.75 10.9142 1.08579 11.25 1.5 11.25Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),uw=["color"],BA=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,uw);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))}),Aw=["color"],fw=g.forwardRef(function(t,n){var a=t.color,l=a===void 0?"currentColor":a,s=Mr(t,Aw);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:n}),g.createElement("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:l,fillRule:"evenodd",clipRule:"evenodd"}))});function Er(t,n){if(typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map((l,s)=>Er(l,s));const a=t.props.children?{...t.props,children:Er(t.props.children)}:t.props;return n2.createElement(t.type,{...a,key:n})}function dw({hide:t}){const{banner:n}=m2(),a=g.useMemo(()=>{const l=(n==null?void 0:n.content)??"";if(!l)return null;if(typeof l!="string")return()=>Er(l);const{default:s}=J1(l,{...f6,Fragment:g.Fragment});return s},[n]);return a?C.jsx("div",{className:s0($1),style:Me({[V1]:n==null?void 0:n.backgroundColor,[q1]:n==null?void 0:n.textColor}),children:C.jsxs("div",{className:s0(K1),children:[C.jsx("div",{className:s0(Y1),children:C.jsx(a,{})}),(n==null?void 0:n.dismissable)!=="false"&&C.jsx("button",{className:s0(Z1),onClick:t,type:"button",children:C.jsx(aw,{width:14,height:14})})]})}):null}var hw="vocs_Content";function xC({children:t,className:n}){return C.jsx("article",{className:s0(n,hw),children:t})}const pw=({children:t})=>t,mw=({children:t})=>t,bA=({children:t})=>t;function wC({items:t,pathname:n}){const a=n.replace(/\.html$/,""),l=[];for(const s of t)(s.link&&a.startsWith(s.match||s.link)||s.items&&wC({items:s.items,pathname:n}).length>0)&&l.push(s.id);return l}function ia({items:t,pathname:n}){return g.useMemo(()=>wC({items:t,pathname:n}),[t,n])}function tr(){const t=g.useContext(FC);if(!t)throw new Error("`usePageData` must be used within `PageDataContext.Provider`.");return t}const FC=g.createContext(void 0);function wi(){const{pathname:t}=a2(),n=m2(),{sidebar:a}=n;if(!a)return{items:[]};if(Array.isArray(a))return{items:a};const l=g.useMemo(()=>{const s=Object.keys(a).filter(c=>t.startsWith(c));return s[s.length-1]},[a,t]);return l?Array.isArray(a[l])?{key:l,items:a[l]}:{...a[l],key:l}:{items:[]}}function rr(){const{aiCta:t}=m2(),n=wi(),{frontmatter:a}=tr(),{layout:l,showLogo:s,showAiCta:c,showOutline:A,showSidebar:f,showTopNav:p}=a||{},h=l??"docs";return{layout:h,get showLogo(){return typeof s<"u"?s:!0},get showAiCta(){return typeof c<"u"?c:t===!1?!1:h==="docs"},get showOutline(){return typeof A<"u"?A:h==="docs"},get showSidebar(){return n.items.length===0?!1:typeof f<"u"?f:!(h==="minimal"||h==="landing")},get showTopNav(){return typeof p<"u"?p:!0}}}function h0(t,n,{checkForDefaultPrevented:a=!0}={}){return function(s){if(t==null||t(s),a===!1||!s.defaultPrevented)return n==null?void 0:n(s)}}function _p(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function sa(...t){return n=>{let a=!1;const l=t.map(s=>{const c=_p(s,n);return!a&&typeof c=="function"&&(a=!0),c});if(a)return()=>{for(let s=0;s<l.length;s++){const c=l[s];typeof c=="function"?c():_p(t[s],null)}}}}function o2(...t){return g.useCallback(sa(...t),t)}function Cw(t,n){const a=g.createContext(n),l=c=>{const{children:A,...f}=c,p=g.useMemo(()=>f,Object.values(f));return C.jsx(a.Provider,{value:p,children:A})};l.displayName=t+"Provider";function s(c){const A=g.useContext(a);if(A)return A;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${t}\``)}return[l,s]}function Oe(t,n=[]){let a=[];function l(c,A){const f=g.createContext(A),p=a.length;a=[...a,A];const h=m=>{var b;const{scope:D,children:v,...w}=m,x=((b=D==null?void 0:D[t])==null?void 0:b[p])||f,B=g.useMemo(()=>w,Object.values(w));return C.jsx(x.Provider,{value:B,children:v})};h.displayName=c+"Provider";function y(m,D){var x;const v=((x=D==null?void 0:D[t])==null?void 0:x[p])||f,w=g.useContext(v);if(w)return w;if(A!==void 0)return A;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[h,y]}const s=()=>{const c=a.map(A=>g.createContext(A));return function(f){const p=(f==null?void 0:f[t])||c;return g.useMemo(()=>({[`__scope${t}`]:{...f,[t]:p}}),[f,p])}};return s.scopeName=t,[l,yw(s,...n)]}function yw(...t){const n=t[0];if(t.length===1)return n;const a=()=>{const l=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(c){const A=l.reduce((f,{useScope:p,scopeName:h})=>{const m=p(c)[`__scope${h}`];return{...f,...m}},{});return g.useMemo(()=>({[`__scope${n.scopeName}`]:A}),[A])}};return a.scopeName=n.scopeName,a}var Be=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},gw=gi[" useId ".trim().toString()]||(()=>{}),Dw=0;function xe(t){const[n,a]=g.useState(gw());return Be(()=>{a(l=>l??String(Dw++))},[t]),t||(n?`radix-${n}`:"")}var vw=gi[" useInsertionEffect ".trim().toString()]||Be;function Qe({prop:t,defaultProp:n,onChange:a=()=>{},caller:l}){const[s,c,A]=xw({defaultProp:n,onChange:a}),f=t!==void 0,p=f?t:s;{const y=g.useRef(t!==void 0);g.useEffect(()=>{const m=y.current;m!==f&&console.warn(`${l} is changing from ${m?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=f},[f,l])}const h=g.useCallback(y=>{var m;if(f){const D=ww(y)?y(t):y;D!==t&&((m=A.current)==null||m.call(A,D))}else c(y)},[f,t,c,A]);return[p,h]}function xw({defaultProp:t,onChange:n}){const[a,l]=g.useState(t),s=g.useRef(a),c=g.useRef(n);return vw(()=>{c.current=n},[n]),g.useEffect(()=>{var A;s.current!==a&&((A=c.current)==null||A.call(c,a),s.current=a)},[a,s]),[a,l,c]}function ww(t){return typeof t=="function"}function Tn(t){const n=Fw(t),a=g.forwardRef((l,s)=>{const{children:c,...A}=l,f=g.Children.toArray(c),p=f.find(bw);if(p){const h=p.props.children,y=f.map(m=>m===p?g.Children.count(h)>1?g.Children.only(null):g.isValidElement(h)?h.props.children:null:m);return C.jsx(n,{...A,ref:s,children:g.isValidElement(h)?g.cloneElement(h,void 0,y):null})}return C.jsx(n,{...A,ref:s,children:c})});return a.displayName=`${t}.Slot`,a}function Fw(t){const n=g.forwardRef((a,l)=>{const{children:s,...c}=a;if(g.isValidElement(s)){const A=Sw(s),f=Nw(c,s.props);return s.type!==g.Fragment&&(f.ref=l?sa(l,A):A),g.cloneElement(s,f)}return g.Children.count(s)>1?g.Children.only(null):null});return n.displayName=`${t}.SlotClone`,n}var Bw=Symbol("radix.slottable");function bw(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Bw}function Nw(t,n){const a={...n};for(const l in n){const s=t[l],c=n[l];/^on[A-Z]/.test(l)?s&&c?a[l]=(...f)=>{const p=c(...f);return s(...f),p}:s&&(a[l]=s):l==="style"?a[l]={...s,...c}:l==="className"&&(a[l]=[s,c].filter(Boolean).join(" "))}return{...t,...a}}function Sw(t){var l,s;let n=(l=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:l.get,a=n&&"isReactWarning"in n&&n.isReactWarning;return a?t.ref:(n=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,a=n&&"isReactWarning"in n&&n.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Rw=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],E0=Rw.reduce((t,n)=>{const a=Tn(`Primitive.${n}`),l=g.forwardRef((s,c)=>{const{asChild:A,...f}=s,p=A?a:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(p,{...f,ref:c})});return l.displayName=`Primitive.${n}`,{...t,[n]:l}},{});function li(t,n){t&&wA.flushSync(()=>t.dispatchEvent(n))}function L2(t){const n=g.useRef(t);return g.useEffect(()=>{n.current=t}),g.useMemo(()=>(...a)=>{var l;return(l=n.current)==null?void 0:l.call(n,...a)},[])}function Ew(t,n=globalThis==null?void 0:globalThis.document){const a=L2(t);g.useEffect(()=>{const l=s=>{s.key==="Escape"&&a(s)};return n.addEventListener("keydown",l,{capture:!0}),()=>n.removeEventListener("keydown",l,{capture:!0})},[a,n])}var _w="DismissableLayer",zu="dismissableLayer.update",kw="dismissableLayer.pointerDownOutside",Tw="dismissableLayer.focusOutside",kp,BC=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ca=g.forwardRef((t,n)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:c,onInteractOutside:A,onDismiss:f,...p}=t,h=g.useContext(BC),[y,m]=g.useState(null),D=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=g.useState({}),w=o2(n,O=>m(O)),x=Array.from(h.layers),[B]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(B),R=y?x.indexOf(y):-1,N=h.layersWithOutsidePointerEventsDisabled.size>0,_=R>=b,T=Ow(O=>{const U=O.target,H=[...h.branches].some(n0=>n0.contains(U));!_||H||(s==null||s(O),A==null||A(O),O.defaultPrevented||f==null||f())},D),E=Lw(O=>{const U=O.target;[...h.branches].some(n0=>n0.contains(U))||(c==null||c(O),A==null||A(O),O.defaultPrevented||f==null||f())},D);return Ew(O=>{R===h.layers.size-1&&(l==null||l(O),!O.defaultPrevented&&f&&(O.preventDefault(),f()))},D),g.useEffect(()=>{if(y)return a&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(kp=D.body.style.pointerEvents,D.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(y)),h.layers.add(y),Tp(),()=>{a&&h.layersWithOutsidePointerEventsDisabled.size===1&&(D.body.style.pointerEvents=kp)}},[y,D,a,h]),g.useEffect(()=>()=>{y&&(h.layers.delete(y),h.layersWithOutsidePointerEventsDisabled.delete(y),Tp())},[y,h]),g.useEffect(()=>{const O=()=>v({});return document.addEventListener(zu,O),()=>document.removeEventListener(zu,O)},[]),C.jsx(E0.div,{...p,ref:w,style:{pointerEvents:N?_?"auto":"none":void 0,...t.style},onFocusCapture:h0(t.onFocusCapture,E.onFocusCapture),onBlurCapture:h0(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:h0(t.onPointerDownCapture,T.onPointerDownCapture)})});ca.displayName=_w;var Pw="DismissableLayerBranch",Mw=g.forwardRef((t,n)=>{const a=g.useContext(BC),l=g.useRef(null),s=o2(n,l);return g.useEffect(()=>{const c=l.current;if(c)return a.branches.add(c),()=>{a.branches.delete(c)}},[a.branches]),C.jsx(E0.div,{...t,ref:s})});Mw.displayName=Pw;function Ow(t,n=globalThis==null?void 0:globalThis.document){const a=L2(t),l=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const c=f=>{if(f.target&&!l.current){let p=function(){bC(kw,a,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",s.current),s.current=p,n.addEventListener("click",s.current,{once:!0})):p()}else n.removeEventListener("click",s.current);l.current=!1},A=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(A),n.removeEventListener("pointerdown",c),n.removeEventListener("click",s.current)}},[n,a]),{onPointerDownCapture:()=>l.current=!0}}function Lw(t,n=globalThis==null?void 0:globalThis.document){const a=L2(t),l=g.useRef(!1);return g.useEffect(()=>{const s=c=>{c.target&&!l.current&&bC(Tw,a,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",s),()=>n.removeEventListener("focusin",s)},[n,a]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function Tp(){const t=new CustomEvent(zu);document.dispatchEvent(t)}function bC(t,n,a,{discrete:l}){const s=a.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});n&&s.addEventListener(t,n,{once:!0}),l?li(s,c):s.dispatchEvent(c)}var au="focusScope.autoFocusOnMount",lu="focusScope.autoFocusOnUnmount",Pp={bubbles:!1,cancelable:!0},jw="FocusScope",Fi=g.forwardRef((t,n)=>{const{loop:a=!1,trapped:l=!1,onMountAutoFocus:s,onUnmountAutoFocus:c,...A}=t,[f,p]=g.useState(null),h=L2(s),y=L2(c),m=g.useRef(null),D=o2(n,x=>p(x)),v=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(l){let x=function(N){if(v.paused||!f)return;const _=N.target;f.contains(_)?m.current=_:Zt(m.current,{select:!0})},B=function(N){if(v.paused||!f)return;const _=N.relatedTarget;_!==null&&(f.contains(_)||Zt(m.current,{select:!0}))},b=function(N){if(document.activeElement===document.body)for(const T of N)T.removedNodes.length>0&&Zt(f)};document.addEventListener("focusin",x),document.addEventListener("focusout",B);const R=new MutationObserver(b);return f&&R.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",B),R.disconnect()}}},[l,f,v.paused]),g.useEffect(()=>{if(f){Op.add(v);const x=document.activeElement;if(!f.contains(x)){const b=new CustomEvent(au,Pp);f.addEventListener(au,h),f.dispatchEvent(b),b.defaultPrevented||(Iw(Vw(NC(f)),{select:!0}),document.activeElement===x&&Zt(f))}return()=>{f.removeEventListener(au,h),setTimeout(()=>{const b=new CustomEvent(lu,Pp);f.addEventListener(lu,y),f.dispatchEvent(b),b.defaultPrevented||Zt(x??document.body,{select:!0}),f.removeEventListener(lu,y),Op.remove(v)},0)}}},[f,h,y,v]);const w=g.useCallback(x=>{if(!a&&!l||v.paused)return;const B=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,b=document.activeElement;if(B&&b){const R=x.currentTarget,[N,_]=Uw(R);N&&_?!x.shiftKey&&b===_?(x.preventDefault(),a&&Zt(N,{select:!0})):x.shiftKey&&b===N&&(x.preventDefault(),a&&Zt(_,{select:!0})):b===R&&x.preventDefault()}},[a,l,v.paused]);return C.jsx(E0.div,{tabIndex:-1,...A,ref:D,onKeyDown:w})});Fi.displayName=jw;function Iw(t,{select:n=!1}={}){const a=document.activeElement;for(const l of t)if(Zt(l,{select:n}),document.activeElement!==a)return}function Uw(t){const n=NC(t),a=Mp(n,t),l=Mp(n.reverse(),t);return[a,l]}function NC(t){const n=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const s=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||s?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)n.push(a.currentNode);return n}function Mp(t,n){for(const a of t)if(!zw(a,{upTo:n}))return a}function zw(t,{upTo:n}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(n!==void 0&&t===n)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Ww(t){return t instanceof HTMLInputElement&&"select"in t}function Zt(t,{select:n=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&Ww(t)&&n&&t.select()}}var Op=Hw();function Hw(){let t=[];return{add(n){const a=t[0];n!==a&&(a==null||a.pause()),t=Lp(t,n),t.unshift(n)},remove(n){var a;t=Lp(t,n),(a=t[0])==null||a.resume()}}}function Lp(t,n){const a=[...t],l=a.indexOf(n);return l!==-1&&a.splice(l,1),a}function Vw(t){return t.filter(n=>n.tagName!=="A")}var Gw="Portal",Bi=g.forwardRef((t,n)=>{var f;const{container:a,...l}=t,[s,c]=g.useState(!1);Be(()=>c(!0),[]);const A=a||s&&((f=globalThis==null?void 0:globalThis.document)==null?void 0:f.body);return A?fC.createPortal(C.jsx(E0.div,{...l,ref:n}),A):null});Bi.displayName=Gw;function qw(t,n){return g.useReducer((a,l)=>n[a][l]??a,t)}var j2=t=>{const{present:n,children:a}=t,l=$w(n),s=typeof a=="function"?a({present:l.isPresent}):g.Children.only(a),c=o2(l.ref,Yw(s));return typeof a=="function"||l.isPresent?g.cloneElement(s,{ref:c}):null};j2.displayName="Presence";function $w(t){const[n,a]=g.useState(),l=g.useRef(null),s=g.useRef(t),c=g.useRef("none"),A=t?"mounted":"unmounted",[f,p]=qw(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const h=Ll(l.current);c.current=f==="mounted"?h:"none"},[f]),Be(()=>{const h=l.current,y=s.current;if(y!==t){const D=c.current,v=Ll(h);t?p("MOUNT"):v==="none"||(h==null?void 0:h.display)==="none"?p("UNMOUNT"):p(y&&D!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,p]),Be(()=>{if(n){let h;const y=n.ownerDocument.defaultView??window,m=v=>{const x=Ll(l.current).includes(v.animationName);if(v.target===n&&x&&(p("ANIMATION_END"),!s.current)){const B=n.style.animationFillMode;n.style.animationFillMode="forwards",h=y.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=B)})}},D=v=>{v.target===n&&(c.current=Ll(l.current))};return n.addEventListener("animationstart",D),n.addEventListener("animationcancel",m),n.addEventListener("animationend",m),()=>{y.clearTimeout(h),n.removeEventListener("animationstart",D),n.removeEventListener("animationcancel",m),n.removeEventListener("animationend",m)}}else p("ANIMATION_END")},[n,p]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:g.useCallback(h=>{l.current=h?getComputedStyle(h):null,a(h)},[])}}function Ll(t){return(t==null?void 0:t.animationName)||"none"}function Yw(t){var l,s;let n=(l=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:l.get,a=n&&"isReactWarning"in n&&n.isReactWarning;return a?t.ref:(n=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,a=n&&"isReactWarning"in n&&n.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var iu=0;function NA(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??jp()),document.body.insertAdjacentElement("beforeend",t[1]??jp()),iu++,()=>{iu===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),iu--}},[])}function jp(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $e=function(){return $e=Object.assign||function(n){for(var a,l=1,s=arguments.length;l<s;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},$e.apply(this,arguments)};function SC(t,n){var a={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&n.indexOf(l)<0&&(a[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(t);s<l.length;s++)n.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(t,l[s])&&(a[l[s]]=t[l[s]]);return a}function Kw(t,n,a){if(a||arguments.length===2)for(var l=0,s=n.length,c;l<s;l++)(c||!(l in n))&&(c||(c=Array.prototype.slice.call(n,0,l)),c[l]=n[l]);return t.concat(c||Array.prototype.slice.call(n))}var Jl="right-scroll-bar-position",ei="width-before-scroll-bar",Zw="with-scroll-bars-hidden",Xw="--removed-body-scroll-bar-size";function su(t,n){return typeof t=="function"?t(n):t&&(t.current=n),t}function Qw(t,n){var a=g.useState(function(){return{value:t,callback:n,facade:{get current(){return a.value},set current(l){var s=a.value;s!==l&&(a.value=l,a.callback(l,s))}}}})[0];return a.callback=n,a.facade}var Jw=typeof window<"u"?g.useLayoutEffect:g.useEffect,Ip=new WeakMap;function eF(t,n){var a=Qw(null,function(l){return t.forEach(function(s){return su(s,l)})});return Jw(function(){var l=Ip.get(a);if(l){var s=new Set(l),c=new Set(t),A=a.current;s.forEach(function(f){c.has(f)||su(f,null)}),c.forEach(function(f){s.has(f)||su(f,A)})}Ip.set(a,t)},[t]),a}function tF(t){return t}function rF(t,n){n===void 0&&(n=tF);var a=[],l=!1,s={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(c){var A=n(c,l);return a.push(A),function(){a=a.filter(function(f){return f!==A})}},assignSyncMedium:function(c){for(l=!0;a.length;){var A=a;a=[],A.forEach(c)}a={push:function(f){return c(f)},filter:function(){return a}}},assignMedium:function(c){l=!0;var A=[];if(a.length){var f=a;a=[],f.forEach(c),A=a}var p=function(){var y=A;A=[],y.forEach(c)},h=function(){return Promise.resolve().then(p)};h(),a={push:function(y){A.push(y),h()},filter:function(y){return A=A.filter(y),a}}}};return s}function nF(t){t===void 0&&(t={});var n=rF(null);return n.options=$e({async:!0,ssr:!1},t),n}var RC=function(t){var n=t.sideCar,a=SC(t,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=n.read();if(!l)throw new Error("Sidecar medium not found");return g.createElement(l,$e({},a))};RC.isSideCarExport=!0;function oF(t,n){return t.useMedium(n),RC}var EC=nF(),cu=function(){},bi=g.forwardRef(function(t,n){var a=g.useRef(null),l=g.useState({onScrollCapture:cu,onWheelCapture:cu,onTouchMoveCapture:cu}),s=l[0],c=l[1],A=t.forwardProps,f=t.children,p=t.className,h=t.removeScrollBar,y=t.enabled,m=t.shards,D=t.sideCar,v=t.noRelative,w=t.noIsolation,x=t.inert,B=t.allowPinchZoom,b=t.as,R=b===void 0?"div":b,N=t.gapMode,_=SC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=D,E=eF([a,n]),O=$e($e({},_),s);return g.createElement(g.Fragment,null,y&&g.createElement(T,{sideCar:EC,removeScrollBar:h,shards:m,noRelative:v,noIsolation:w,inert:x,setCallbacks:c,allowPinchZoom:!!B,lockRef:a,gapMode:N}),A?g.cloneElement(g.Children.only(f),$e($e({},O),{ref:E})):g.createElement(R,$e({},O,{className:p,ref:E}),f))});bi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bi.classNames={fullWidth:ei,zeroRight:Jl};var aF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var n=aF();return n&&t.setAttribute("nonce",n),t}function iF(t,n){t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}function sF(t){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(t)}var cF=function(){var t=0,n=null;return{add:function(a){t==0&&(n=lF())&&(iF(n,a),sF(n)),t++},remove:function(){t--,!t&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},uF=function(){var t=cF();return function(n,a){g.useEffect(function(){return t.add(n),function(){t.remove()}},[n&&a])}},_C=function(){var t=uF(),n=function(a){var l=a.styles,s=a.dynamic;return t(l,s),null};return n},AF={left:0,top:0,right:0,gap:0},uu=function(t){return parseInt(t||"",10)||0},fF=function(t){var n=window.getComputedStyle(document.body),a=n[t==="padding"?"paddingLeft":"marginLeft"],l=n[t==="padding"?"paddingTop":"marginTop"],s=n[t==="padding"?"paddingRight":"marginRight"];return[uu(a),uu(l),uu(s)]},dF=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AF;var n=fF(t),a=document.documentElement.clientWidth,l=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,l-a+n[2]-n[0])}},hF=_C(),En="data-scroll-locked",pF=function(t,n,a,l){var s=t.left,c=t.top,A=t.right,f=t.gap;return a===void 0&&(a="margin"),`
  .`.concat(Zw,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(f,"px ").concat(l,`;
  }
  body[`).concat(En,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(l,";"),a==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(A,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(l,`;
    `),a==="padding"&&"padding-right: ".concat(f,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jl,` {
    right: `).concat(f,"px ").concat(l,`;
  }
  
  .`).concat(ei,` {
    margin-right: `).concat(f,"px ").concat(l,`;
  }
  
  .`).concat(Jl," .").concat(Jl,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(ei," .").concat(ei,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(En,`] {
    `).concat(Xw,": ").concat(f,`px;
  }
`)},Up=function(){var t=parseInt(document.body.getAttribute(En)||"0",10);return isFinite(t)?t:0},mF=function(){g.useEffect(function(){return document.body.setAttribute(En,(Up()+1).toString()),function(){var t=Up()-1;t<=0?document.body.removeAttribute(En):document.body.setAttribute(En,t.toString())}},[])},CF=function(t){var n=t.noRelative,a=t.noImportant,l=t.gapMode,s=l===void 0?"margin":l;mF();var c=g.useMemo(function(){return dF(s)},[s]);return g.createElement(hF,{styles:pF(c,!n,s,a?"":"!important")})},Wu=!1;if(typeof window<"u")try{var jl=Object.defineProperty({},"passive",{get:function(){return Wu=!0,!0}});window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{Wu=!1}var wn=Wu?{passive:!1}:!1,yF=function(t){return t.tagName==="TEXTAREA"},kC=function(t,n){if(!(t instanceof Element))return!1;var a=window.getComputedStyle(t);return a[n]!=="hidden"&&!(a.overflowY===a.overflowX&&!yF(t)&&a[n]==="visible")},gF=function(t){return kC(t,"overflowY")},DF=function(t){return kC(t,"overflowX")},zp=function(t,n){var a=n.ownerDocument,l=n;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var s=TC(t,l);if(s){var c=PC(t,l),A=c[1],f=c[2];if(A>f)return!0}l=l.parentNode}while(l&&l!==a.body);return!1},vF=function(t){var n=t.scrollTop,a=t.scrollHeight,l=t.clientHeight;return[n,a,l]},xF=function(t){var n=t.scrollLeft,a=t.scrollWidth,l=t.clientWidth;return[n,a,l]},TC=function(t,n){return t==="v"?gF(n):DF(n)},PC=function(t,n){return t==="v"?vF(n):xF(n)},wF=function(t,n){return t==="h"&&n==="rtl"?-1:1},FF=function(t,n,a,l,s){var c=wF(t,window.getComputedStyle(n).direction),A=c*l,f=a.target,p=n.contains(f),h=!1,y=A>0,m=0,D=0;do{if(!f)break;var v=PC(t,f),w=v[0],x=v[1],B=v[2],b=x-B-c*w;(w||b)&&TC(t,f)&&(m+=b,D+=w);var R=f.parentNode;f=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!p&&f!==document.body||p&&(n.contains(f)||n===f));return(y&&Math.abs(m)<1||!y&&Math.abs(D)<1)&&(h=!0),h},Il=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Wp=function(t){return[t.deltaX,t.deltaY]},Hp=function(t){return t&&"current"in t?t.current:t},BF=function(t,n){return t[0]===n[0]&&t[1]===n[1]},bF=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},NF=0,Fn=[];function SF(t){var n=g.useRef([]),a=g.useRef([0,0]),l=g.useRef(),s=g.useState(NF++)[0],c=g.useState(_C)[0],A=g.useRef(t);g.useEffect(function(){A.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=Kw([t.lockRef.current],(t.shards||[]).map(Hp),!0).filter(Boolean);return x.forEach(function(B){return B.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(B){return B.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var f=g.useCallback(function(x,B){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!A.current.allowPinchZoom;var b=Il(x),R=a.current,N="deltaX"in x?x.deltaX:R[0]-b[0],_="deltaY"in x?x.deltaY:R[1]-b[1],T,E=x.target,O=Math.abs(N)>Math.abs(_)?"h":"v";if("touches"in x&&O==="h"&&E.type==="range")return!1;var U=zp(O,E);if(!U)return!0;if(U?T=O:(T=O==="v"?"h":"v",U=zp(O,E)),!U)return!1;if(!l.current&&"changedTouches"in x&&(N||_)&&(l.current=T),!T)return!0;var H=l.current||T;return FF(H,B,x,H==="h"?N:_)},[]),p=g.useCallback(function(x){var B=x;if(!(!Fn.length||Fn[Fn.length-1]!==c)){var b="deltaY"in B?Wp(B):Il(B),R=n.current.filter(function(T){return T.name===B.type&&(T.target===B.target||B.target===T.shadowParent)&&BF(T.delta,b)})[0];if(R&&R.should){B.cancelable&&B.preventDefault();return}if(!R){var N=(A.current.shards||[]).map(Hp).filter(Boolean).filter(function(T){return T.contains(B.target)}),_=N.length>0?f(B,N[0]):!A.current.noIsolation;_&&B.cancelable&&B.preventDefault()}}},[]),h=g.useCallback(function(x,B,b,R){var N={name:x,delta:B,target:b,should:R,shadowParent:RF(b)};n.current.push(N),setTimeout(function(){n.current=n.current.filter(function(_){return _!==N})},1)},[]),y=g.useCallback(function(x){a.current=Il(x),l.current=void 0},[]),m=g.useCallback(function(x){h(x.type,Wp(x),x.target,f(x,t.lockRef.current))},[]),D=g.useCallback(function(x){h(x.type,Il(x),x.target,f(x,t.lockRef.current))},[]);g.useEffect(function(){return Fn.push(c),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:D}),document.addEventListener("wheel",p,wn),document.addEventListener("touchmove",p,wn),document.addEventListener("touchstart",y,wn),function(){Fn=Fn.filter(function(x){return x!==c}),document.removeEventListener("wheel",p,wn),document.removeEventListener("touchmove",p,wn),document.removeEventListener("touchstart",y,wn)}},[]);var v=t.removeScrollBar,w=t.inert;return g.createElement(g.Fragment,null,w?g.createElement(c,{styles:bF(s)}):null,v?g.createElement(CF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function RF(t){for(var n=null;t!==null;)t instanceof ShadowRoot&&(n=t.host,t=t.host),t=t.parentNode;return n}const EF=oF(EC,SF);var Ni=g.forwardRef(function(t,n){return g.createElement(bi,$e({},t,{ref:n,sideCar:EF}))});Ni.classNames=bi.classNames;var _F=function(t){if(typeof document>"u")return null;var n=Array.isArray(t)?t[0]:t;return n.ownerDocument.body},Bn=new WeakMap,Ul=new WeakMap,zl={},Au=0,MC=function(t){return t&&(t.host||MC(t.parentNode))},kF=function(t,n){return n.map(function(a){if(t.contains(a))return a;var l=MC(a);return l&&t.contains(l)?l:(console.error("aria-hidden",a,"in not contained inside",t,". Doing nothing"),null)}).filter(function(a){return!!a})},TF=function(t,n,a,l){var s=kF(n,Array.isArray(t)?t:[t]);zl[a]||(zl[a]=new WeakMap);var c=zl[a],A=[],f=new Set,p=new Set(s),h=function(m){!m||f.has(m)||(f.add(m),h(m.parentNode))};s.forEach(h);var y=function(m){!m||p.has(m)||Array.prototype.forEach.call(m.children,function(D){if(f.has(D))y(D);else try{var v=D.getAttribute(l),w=v!==null&&v!=="false",x=(Bn.get(D)||0)+1,B=(c.get(D)||0)+1;Bn.set(D,x),c.set(D,B),A.push(D),x===1&&w&&Ul.set(D,!0),B===1&&D.setAttribute(a,"true"),w||D.setAttribute(l,"true")}catch(b){console.error("aria-hidden: cannot operate on ",D,b)}})};return y(n),f.clear(),Au++,function(){A.forEach(function(m){var D=Bn.get(m)-1,v=c.get(m)-1;Bn.set(m,D),c.set(m,v),D||(Ul.has(m)||m.removeAttribute(l),Ul.delete(m)),v||m.removeAttribute(a)}),Au--,Au||(Bn=new WeakMap,Bn=new WeakMap,Ul=new WeakMap,zl={})}},SA=function(t,n,a){a===void 0&&(a="data-aria-hidden");var l=Array.from(Array.isArray(t)?t:[t]),s=_F(t);return s?(l.push.apply(l,Array.from(s.querySelectorAll("[aria-live], script"))),TF(l,s,a,"aria-hidden")):function(){return null}},Si="Dialog",[OC,W8]=Oe(Si),[PF,Le]=OC(Si),LC=t=>{const{__scopeDialog:n,children:a,open:l,defaultOpen:s,onOpenChange:c,modal:A=!0}=t,f=g.useRef(null),p=g.useRef(null),[h,y]=Qe({prop:l,defaultProp:s??!1,onChange:c,caller:Si});return C.jsx(PF,{scope:n,triggerRef:f,contentRef:p,contentId:xe(),titleId:xe(),descriptionId:xe(),open:h,onOpenChange:y,onOpenToggle:g.useCallback(()=>y(m=>!m),[y]),modal:A,children:a})};LC.displayName=Si;var jC="DialogTrigger",IC=g.forwardRef((t,n)=>{const{__scopeDialog:a,...l}=t,s=Le(jC,a),c=o2(n,s.triggerRef);return C.jsx(E0.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_A(s.open),...l,ref:c,onClick:h0(t.onClick,s.onOpenToggle)})});IC.displayName=jC;var RA="DialogPortal",[MF,UC]=OC(RA,{forceMount:void 0}),zC=t=>{const{__scopeDialog:n,forceMount:a,children:l,container:s}=t,c=Le(RA,n);return C.jsx(MF,{scope:n,forceMount:a,children:g.Children.map(l,A=>C.jsx(j2,{present:a||c.open,children:C.jsx(Bi,{asChild:!0,container:s,children:A})}))})};zC.displayName=RA;var ii="DialogOverlay",WC=g.forwardRef((t,n)=>{const a=UC(ii,t.__scopeDialog),{forceMount:l=a.forceMount,...s}=t,c=Le(ii,t.__scopeDialog);return c.modal?C.jsx(j2,{present:l||c.open,children:C.jsx(LF,{...s,ref:n})}):null});WC.displayName=ii;var OF=Tn("DialogOverlay.RemoveScroll"),LF=g.forwardRef((t,n)=>{const{__scopeDialog:a,...l}=t,s=Le(ii,a);return C.jsx(Ni,{as:OF,allowPinchZoom:!0,shards:[s.contentRef],children:C.jsx(E0.div,{"data-state":_A(s.open),...l,ref:n,style:{pointerEvents:"auto",...l.style}})})}),_r="DialogContent",HC=g.forwardRef((t,n)=>{const a=UC(_r,t.__scopeDialog),{forceMount:l=a.forceMount,...s}=t,c=Le(_r,t.__scopeDialog);return C.jsx(j2,{present:l||c.open,children:c.modal?C.jsx(jF,{...s,ref:n}):C.jsx(IF,{...s,ref:n})})});HC.displayName=_r;var jF=g.forwardRef((t,n)=>{const a=Le(_r,t.__scopeDialog),l=g.useRef(null),s=o2(n,a.contentRef,l);return g.useEffect(()=>{const c=l.current;if(c)return SA(c)},[]),C.jsx(VC,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h0(t.onCloseAutoFocus,c=>{var A;c.preventDefault(),(A=a.triggerRef.current)==null||A.focus()}),onPointerDownOutside:h0(t.onPointerDownOutside,c=>{const A=c.detail.originalEvent,f=A.button===0&&A.ctrlKey===!0;(A.button===2||f)&&c.preventDefault()}),onFocusOutside:h0(t.onFocusOutside,c=>c.preventDefault())})}),IF=g.forwardRef((t,n)=>{const a=Le(_r,t.__scopeDialog),l=g.useRef(!1),s=g.useRef(!1);return C.jsx(VC,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var A,f;(A=t.onCloseAutoFocus)==null||A.call(t,c),c.defaultPrevented||(l.current||(f=a.triggerRef.current)==null||f.focus(),c.preventDefault()),l.current=!1,s.current=!1},onInteractOutside:c=>{var p,h;(p=t.onInteractOutside)==null||p.call(t,c),c.defaultPrevented||(l.current=!0,c.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const A=c.target;((h=a.triggerRef.current)==null?void 0:h.contains(A))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.current&&c.preventDefault()}})}),VC=g.forwardRef((t,n)=>{const{__scopeDialog:a,trapFocus:l,onOpenAutoFocus:s,onCloseAutoFocus:c,...A}=t,f=Le(_r,a),p=g.useRef(null),h=o2(n,p);return NA(),C.jsxs(C.Fragment,{children:[C.jsx(Fi,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:s,onUnmountAutoFocus:c,children:C.jsx(ca,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":_A(f.open),...A,ref:h,onDismiss:()=>f.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(WF,{titleId:f.titleId}),C.jsx(VF,{contentRef:p,descriptionId:f.descriptionId})]})]})}),EA="DialogTitle",GC=g.forwardRef((t,n)=>{const{__scopeDialog:a,...l}=t,s=Le(EA,a);return C.jsx(E0.h2,{id:s.titleId,...l,ref:n})});GC.displayName=EA;var qC="DialogDescription",UF=g.forwardRef((t,n)=>{const{__scopeDialog:a,...l}=t,s=Le(qC,a);return C.jsx(E0.p,{id:s.descriptionId,...l,ref:n})});UF.displayName=qC;var $C="DialogClose",zF=g.forwardRef((t,n)=>{const{__scopeDialog:a,...l}=t,s=Le($C,a);return C.jsx(E0.button,{type:"button",...l,ref:n,onClick:h0(t.onClick,()=>s.onOpenChange(!1))})});zF.displayName=$C;function _A(t){return t?"open":"closed"}var YC="DialogTitleWarning",[H8,KC]=Cw(YC,{contentName:_r,titleName:EA,docsSlug:"dialog"}),WF=({titleId:t})=>{const n=KC(YC),a=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},HF="DialogDescriptionWarning",VF=({contentRef:t,descriptionId:n})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KC(HF).contentName}}.`;return g.useEffect(()=>{var c;const s=(c=t.current)==null?void 0:c.getAttribute("aria-describedby");n&&s&&(document.getElementById(n)||console.warn(l))},[l,t,n]),null},ZC=LC,XC=IC,GF=zC,qF=WC,$F=HC,YF=GC;const KF=async()=>JSON.stringify(await(await fetch("/.vocs/search-index-4dc577dc.json")).json());var r2=function(){return r2=Object.assign||function(n){for(var a,l=1,s=arguments.length;l<s;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},r2.apply(this,arguments)};function ZF(t,n,a,l){function s(c){return c instanceof a?c:new a(function(A){A(c)})}return new(a||(a=Promise))(function(c,A){function f(y){try{h(l.next(y))}catch(m){A(m)}}function p(y){try{h(l.throw(y))}catch(m){A(m)}}function h(y){y.done?c(y.value):s(y.value).then(f,p)}h((l=l.apply(t,[])).next())})}function XF(t,n){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},l,s,c,A;return A={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function f(h){return function(y){return p([h,y])}}function p(h){if(l)throw new TypeError("Generator is already executing.");for(;A&&(A=0,h[0]&&(a=0)),a;)try{if(l=1,s&&(c=h[0]&2?s.return:h[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,h[1])).done)return c;switch(s=0,c&&(h=[h[0]&2,c.value]),h[0]){case 0:case 1:c=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,s=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(h[0]===6||h[0]===2)){a=0;continue}if(h[0]===3&&(!c||h[1]>c[0]&&h[1]<c[3])){a.label=h[1];break}if(h[0]===6&&a.label<c[1]){a.label=c[1],c=h;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(h);break}c[2]&&a.ops.pop(),a.trys.pop();continue}h=n.call(t,a)}catch(y){h=[6,y],s=0}finally{l=c=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function O0(t){var n=typeof Symbol=="function"&&Symbol.iterator,a=n&&t[n],l=0;if(a)return a.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&l>=t.length&&(t=void 0),{value:t&&t[l++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function g2(t,n){var a=typeof Symbol=="function"&&t[Symbol.iterator];if(!a)return t;var l=a.call(t),s,c=[],A;try{for(;(n===void 0||n-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){A={error:f}}finally{try{s&&!s.done&&(a=l.return)&&a.call(l)}finally{if(A)throw A.error}}return c}var QF="ENTRIES",QC="KEYS",JC="VALUES",T2="",fu=function(){function t(n,a){var l=n._tree,s=Array.from(l.keys());this.set=n,this._type=a,this._path=s.length>0?[{node:l,keys:s}]:[]}return t.prototype.next=function(){var n=this.dive();return this.backtrack(),n},t.prototype.dive=function(){if(this._path.length===0)return{done:!0,value:void 0};var n=bn(this._path),a=n.node,l=n.keys;if(bn(l)===T2)return{done:!1,value:this.result()};var s=a.get(bn(l));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()},t.prototype.backtrack=function(){if(this._path.length!==0){var n=bn(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map(function(n){var a=n.keys;return bn(a)}).filter(function(n){return n!==T2}).join("")},t.prototype.value=function(){return bn(this._path).node.get(T2)},t.prototype.result=function(){switch(this._type){case JC:return this.value();case QC:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),bn=function(t){return t[t.length-1]},JF=function(t,n,a){var l=new Map;if(n===void 0)return l;for(var s=n.length+1,c=s+a,A=new Uint8Array(c*s).fill(a+1),f=0;f<s;++f)A[f]=f;for(var p=1;p<c;++p)A[p*s]=p;return ey(t,n,a,l,A,1,s,""),l},ey=function(t,n,a,l,s,c,A,f){var p,h,y=c*A;try{e:for(var m=O0(t.keys()),D=m.next();!D.done;D=m.next()){var v=D.value;if(v===T2){var w=s[y-1];w<=a&&l.set(f,[t.get(v),w])}else{for(var x=c,B=0;B<v.length;++B,++x){for(var b=v[B],R=A*x,N=R-A,_=s[R],T=Math.max(0,x-a-1),E=Math.min(A-1,x+a),O=T;O<E;++O){var U=b!==n[O],H=s[N+O]+ +U,n0=s[N+O+1]+1,u0=s[R+O]+1,l0=s[R+O+1]=Math.min(H,n0,u0);l0<_&&(_=l0)}if(_>a)continue e}ey(t.get(v),n,a,l,s,x,A,f+v)}}}catch(i0){p={error:i0}}finally{try{D&&!D.done&&(h=m.return)&&h.call(m)}finally{if(p)throw p.error}}},du=function(){function t(n,a){n===void 0&&(n=new Map),a===void 0&&(a=""),this._size=void 0,this._tree=n,this._prefix=a}return t.prototype.atPrefix=function(n){var a,l;if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");var s=g2(si(this._tree,n.slice(this._prefix.length)),2),c=s[0],A=s[1];if(c===void 0){var f=g2(kA(A),2),p=f[0],h=f[1];try{for(var y=O0(p.keys()),m=y.next();!m.done;m=y.next()){var D=m.value;if(D!==T2&&D.startsWith(h)){var v=new Map;return v.set(D.slice(h.length),p.get(D)),new t(v,n)}}}catch(w){a={error:w}}finally{try{m&&!m.done&&(l=y.return)&&l.call(y)}finally{if(a)throw a.error}}}return new t(c,n)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(n){return this._size=void 0,e5(this._tree,n)},t.prototype.entries=function(){return new fu(this,QF)},t.prototype.forEach=function(n){var a,l;try{for(var s=O0(this),c=s.next();!c.done;c=s.next()){var A=g2(c.value,2),f=A[0],p=A[1];n(f,p,this)}}catch(h){a={error:h}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},t.prototype.fuzzyGet=function(n,a){return JF(this._tree,n,a)},t.prototype.get=function(n){var a=Hu(this._tree,n);return a!==void 0?a.get(T2):void 0},t.prototype.has=function(n){var a=Hu(this._tree,n);return a!==void 0&&a.has(T2)},t.prototype.keys=function(){return new fu(this,QC)},t.prototype.set=function(n,a){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var l=hu(this._tree,n);return l.set(T2,a),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var n=this.entries();!n.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(n,a){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var l=hu(this._tree,n);return l.set(T2,a(l.get(T2))),this},t.prototype.fetch=function(n,a){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;var l=hu(this._tree,n),s=l.get(T2);return s===void 0&&l.set(T2,s=a()),s},t.prototype.values=function(){return new fu(this,JC)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(n){var a,l,s=new t;try{for(var c=O0(n),A=c.next();!A.done;A=c.next()){var f=g2(A.value,2),p=f[0],h=f[1];s.set(p,h)}}catch(y){a={error:y}}finally{try{A&&!A.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}return s},t.fromObject=function(n){return t.from(Object.entries(n))},t}(),si=function(t,n,a){var l,s;if(a===void 0&&(a=[]),n.length===0||t==null)return[t,a];try{for(var c=O0(t.keys()),A=c.next();!A.done;A=c.next()){var f=A.value;if(f!==T2&&n.startsWith(f))return a.push([t,f]),si(t.get(f),n.slice(f.length),a)}}catch(p){l={error:p}}finally{try{A&&!A.done&&(s=c.return)&&s.call(c)}finally{if(l)throw l.error}}return a.push([t,n]),si(void 0,"",a)},Hu=function(t,n){var a,l;if(n.length===0||t==null)return t;try{for(var s=O0(t.keys()),c=s.next();!c.done;c=s.next()){var A=c.value;if(A!==T2&&n.startsWith(A))return Hu(t.get(A),n.slice(A.length))}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},hu=function(t,n){var a,l,s=n.length;e:for(var c=0;t&&c<s;){try{for(var A=(a=void 0,O0(t.keys())),f=A.next();!f.done;f=A.next()){var p=f.value;if(p!==T2&&n[c]===p[0]){for(var h=Math.min(s-c,p.length),y=1;y<h&&n[c+y]===p[y];)++y;var m=t.get(p);if(y===p.length)t=m;else{var D=new Map;D.set(p.slice(y),m),t.set(n.slice(c,c+y),D),t.delete(p),t=D}c+=y;continue e}}}catch(w){a={error:w}}finally{try{f&&!f.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}var v=new Map;return t.set(n.slice(c),v),v}return t},e5=function(t,n){var a=g2(si(t,n),2),l=a[0],s=a[1];if(l!==void 0){if(l.delete(T2),l.size===0)ty(s);else if(l.size===1){var c=g2(l.entries().next().value,2),A=c[0],f=c[1];ry(s,A,f)}}},ty=function(t){if(t.length!==0){var n=g2(kA(t),2),a=n[0],l=n[1];if(a.delete(l),a.size===0)ty(t.slice(0,-1));else if(a.size===1){var s=g2(a.entries().next().value,2),c=s[0],A=s[1];c!==T2&&ry(t.slice(0,-1),c,A)}}},ry=function(t,n,a){if(t.length!==0){var l=g2(kA(t),2),s=l[0],c=l[1];s.set(c+n,a),s.delete(c)}},kA=function(t){return t[t.length-1]},$o,TA="or",ny="and",t5="and_not",r5=function(){function t(n){if((n==null?void 0:n.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');var a=n.autoVacuum==null||n.autoVacuum===!0?Cu:n.autoVacuum;this._options=r2(r2(r2({},mu),n),{autoVacuum:a,searchOptions:r2(r2({},Vp),n.searchOptions||{}),autoSuggestOptions:r2(r2({},i5),n.autoSuggestOptions||{})}),this._index=new du,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Gu,this.addFields(this._options.fields)}return t.prototype.add=function(n){var a,l,s,c,A,f,p=this._options,h=p.extractField,y=p.tokenize,m=p.processTerm,D=p.fields,v=p.idField,w=h(n,v);if(w==null)throw new Error('MiniSearch: document does not have ID field "'.concat(v,'"'));if(this._idToShortId.has(w))throw new Error("MiniSearch: duplicate ID ".concat(w));var x=this.addDocumentId(w);this.saveStoredFields(x,n);try{for(var B=O0(D),b=B.next();!b.done;b=B.next()){var R=b.value,N=h(n,R);if(N!=null){var _=y(N.toString(),R),T=this._fieldIds[R],E=new Set(_).size;this.addFieldLength(x,T,this._documentCount-1,E);try{for(var O=(s=void 0,O0(_)),U=O.next();!U.done;U=O.next()){var H=U.value,n0=m(H,R);if(Array.isArray(n0))try{for(var u0=(A=void 0,O0(n0)),l0=u0.next();!l0.done;l0=u0.next()){var i0=l0.value;this.addTerm(T,x,i0)}}catch(q){A={error:q}}finally{try{l0&&!l0.done&&(f=u0.return)&&f.call(u0)}finally{if(A)throw A.error}}else n0&&this.addTerm(T,x,n0)}}catch(q){s={error:q}}finally{try{U&&!U.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}}}}catch(q){a={error:q}}finally{try{b&&!b.done&&(l=B.return)&&l.call(B)}finally{if(a)throw a.error}}},t.prototype.addAll=function(n){var a,l;try{for(var s=O0(n),c=s.next();!c.done;c=s.next()){var A=c.value;this.add(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},t.prototype.addAllAsync=function(n,a){var l=this;a===void 0&&(a={});var s=a.chunkSize,c=s===void 0?10:s,A={chunk:[],promise:Promise.resolve()},f=n.reduce(function(y,m,D){var v=y.chunk,w=y.promise;return v.push(m),(D+1)%c===0?{chunk:[],promise:w.then(function(){return new Promise(function(x){return setTimeout(x,0)})}).then(function(){return l.addAll(v)})}:{chunk:v,promise:w}},A),p=f.chunk,h=f.promise;return h.then(function(){return l.addAll(p)})},t.prototype.remove=function(n){var a,l,s,c,A,f,p=this._options,h=p.tokenize,y=p.processTerm,m=p.extractField,D=p.fields,v=p.idField,w=m(n,v);if(w==null)throw new Error('MiniSearch: document does not have ID field "'.concat(v,'"'));var x=this._idToShortId.get(w);if(x==null)throw new Error("MiniSearch: cannot remove document with ID ".concat(w,": it is not in the index"));try{for(var B=O0(D),b=B.next();!b.done;b=B.next()){var R=b.value,N=m(n,R);if(N!=null){var _=h(N.toString(),R),T=this._fieldIds[R],E=new Set(_).size;this.removeFieldLength(x,T,this._documentCount,E);try{for(var O=(s=void 0,O0(_)),U=O.next();!U.done;U=O.next()){var H=U.value,n0=y(H,R);if(Array.isArray(n0))try{for(var u0=(A=void 0,O0(n0)),l0=u0.next();!l0.done;l0=u0.next()){var i0=l0.value;this.removeTerm(T,x,i0)}}catch(q){A={error:q}}finally{try{l0&&!l0.done&&(f=u0.return)&&f.call(u0)}finally{if(A)throw A.error}}else n0&&this.removeTerm(T,x,n0)}}catch(q){s={error:q}}finally{try{U&&!U.done&&(c=O.return)&&c.call(O)}finally{if(s)throw s.error}}}}}catch(q){a={error:q}}finally{try{b&&!b.done&&(l=B.return)&&l.call(B)}finally{if(a)throw a.error}}this._storedFields.delete(x),this._documentIds.delete(x),this._idToShortId.delete(w),this._fieldLength.delete(x),this._documentCount-=1},t.prototype.removeAll=function(n){var a,l;if(n)try{for(var s=O0(n),c=s.next();!c.done;c=s.next()){var A=c.value;this.remove(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new du,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.discard=function(n){var a=this,l=this._idToShortId.get(n);if(l==null)throw new Error("MiniSearch: cannot discard document with ID ".concat(n,": it is not in the index"));this._idToShortId.delete(n),this._documentIds.delete(l),this._storedFields.delete(l),(this._fieldLength.get(l)||[]).forEach(function(s,c){a.removeFieldLength(l,c,a._documentCount,s)}),this._fieldLength.delete(l),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},t.prototype.maybeAutoVacuum=function(){if(this._options.autoVacuum!==!1){var n=this._options.autoVacuum,a=n.minDirtFactor,l=n.minDirtCount,s=n.batchSize,c=n.batchWait;this.conditionalVacuum({batchSize:s,batchWait:c},{minDirtCount:l,minDirtFactor:a})}},t.prototype.discardAll=function(n){var a,l,s=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var c=O0(n),A=c.next();!A.done;A=c.next()){var f=A.value;this.discard(f)}}catch(p){a={error:p}}finally{try{A&&!A.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()},t.prototype.replace=function(n){var a=this._options,l=a.idField,s=a.extractField,c=s(n,l);this.discard(c),this.add(n)},t.prototype.vacuum=function(n){return n===void 0&&(n={}),this.conditionalVacuum(n)},t.prototype.conditionalVacuum=function(n,a){var l=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&a,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(function(){var s=l._enqueuedVacuumConditions;return l._enqueuedVacuumConditions=Gu,l.performVacuuming(n,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(a)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)},t.prototype.performVacuuming=function(n,a){return ZF(this,void 0,void 0,function(){var l,s,c,A,f,p,h,y,m,D,v,w,x,B,b,R,N,_,T,E,O,U,H,n0,u0;return XF(this,function(l0){switch(l0.label){case 0:if(l=this._dirtCount,!this.vacuumConditionsMet(a))return[3,10];s=n.batchSize||Vu.batchSize,c=n.batchWait||Vu.batchWait,A=1,l0.label=1;case 1:l0.trys.push([1,7,8,9]),f=O0(this._index),p=f.next(),l0.label=2;case 2:if(p.done)return[3,6];h=g2(p.value,2),y=h[0],m=h[1];try{for(D=(U=void 0,O0(m)),v=D.next();!v.done;v=D.next()){w=g2(v.value,2),x=w[0],B=w[1];try{for(b=(n0=void 0,O0(B)),R=b.next();!R.done;R=b.next())N=g2(R.value,1),_=N[0],!this._documentIds.has(_)&&(B.size<=1?m.delete(x):B.delete(_))}catch(i0){n0={error:i0}}finally{try{R&&!R.done&&(u0=b.return)&&u0.call(b)}finally{if(n0)throw n0.error}}}}catch(i0){U={error:i0}}finally{try{v&&!v.done&&(H=D.return)&&H.call(D)}finally{if(U)throw U.error}}return this._index.get(y).size===0&&this._index.delete(y),A%s!==0?[3,4]:[4,new Promise(function(i0){return setTimeout(i0,c)})];case 3:l0.sent(),l0.label=4;case 4:A+=1,l0.label=5;case 5:return p=f.next(),[3,2];case 6:return[3,9];case 7:return T=l0.sent(),E={error:T},[3,9];case 8:try{p&&!p.done&&(O=f.return)&&O.call(f)}finally{if(E)throw E.error}return[7];case 9:this._dirtCount-=l,l0.label=10;case 10:return[4,null];case 11:return l0.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}})})},t.prototype.vacuumConditionsMet=function(n){if(n==null)return!0;var a=n.minDirtCount,l=n.minDirtFactor;return a=a||Cu.minDirtCount,l=l||Cu.minDirtFactor,this.dirtCount>=a&&this.dirtFactor>=l},Object.defineProperty(t.prototype,"isVacuuming",{get:function(){return this._currentVacuum!=null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),t.prototype.has=function(n){return this._idToShortId.has(n)},t.prototype.getStoredFields=function(n){var a=this._idToShortId.get(n);if(a!=null)return this._storedFields.get(a)},t.prototype.search=function(n,a){var l,s;a===void 0&&(a={});var c=this.executeQuery(n,a),A=[];try{for(var f=O0(c),p=f.next();!p.done;p=f.next()){var h=g2(p.value,2),y=h[0],m=h[1],D=m.score,v=m.terms,w=m.match,x=v.length||1,B={id:this._documentIds.get(y),score:D*x,terms:Object.keys(w),queryTerms:v,match:w};Object.assign(B,this._storedFields.get(y)),(a.filter==null||a.filter(B))&&A.push(B)}}catch(b){l={error:b}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(l)throw l.error}}return n===t.wildcard&&a.boostDocument==null&&this._options.searchOptions.boostDocument==null||A.sort(qp),A},t.prototype.autoSuggest=function(n,a){var l,s,c,A;a===void 0&&(a={}),a=r2(r2({},this._options.autoSuggestOptions),a);var f=new Map;try{for(var p=O0(this.search(n,a)),h=p.next();!h.done;h=p.next()){var y=h.value,m=y.score,D=y.terms,v=D.join(" "),w=f.get(v);w!=null?(w.score+=m,w.count+=1):f.set(v,{score:m,terms:D,count:1})}}catch(T){l={error:T}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(l)throw l.error}}var x=[];try{for(var B=O0(f),b=B.next();!b.done;b=B.next()){var R=g2(b.value,2),w=R[0],N=R[1],m=N.score,D=N.terms,_=N.count;x.push({suggestion:w,terms:D,score:m/_})}}catch(T){c={error:T}}finally{try{b&&!b.done&&(A=B.return)&&A.call(B)}finally{if(c)throw c.error}}return x.sort(qp),x},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),t.loadJSON=function(n,a){if(a==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),a)},t.getDefault=function(n){if(mu.hasOwnProperty(n))return pu(mu,n);throw new Error('MiniSearch: unknown option "'.concat(n,'"'))},t.loadJS=function(n,a){var l,s,c,A,f,p,h=n.index,y=n.documentCount,m=n.nextId,D=n.documentIds,v=n.fieldIds,w=n.fieldLength,x=n.averageFieldLength,B=n.storedFields,b=n.dirtCount,R=n.serializationVersion;if(R!==1&&R!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var N=new t(a);N._documentCount=y,N._nextId=m,N._documentIds=Wl(D),N._idToShortId=new Map,N._fieldIds=v,N._fieldLength=Wl(w),N._avgFieldLength=x,N._storedFields=Wl(B),N._dirtCount=b||0,N._index=new du;try{for(var _=O0(N._documentIds),T=_.next();!T.done;T=_.next()){var E=g2(T.value,2),O=E[0],U=E[1];N._idToShortId.set(U,O)}}catch(K){l={error:K}}finally{try{T&&!T.done&&(s=_.return)&&s.call(_)}finally{if(l)throw l.error}}try{for(var H=O0(h),n0=H.next();!n0.done;n0=H.next()){var u0=g2(n0.value,2),l0=u0[0],i0=u0[1],q=new Map;try{for(var A0=(f=void 0,O0(Object.keys(i0))),L=A0.next();!L.done;L=A0.next()){var G=L.value,X=i0[G];R===1&&(X=X.ds),q.set(parseInt(G,10),Wl(X))}}catch(K){f={error:K}}finally{try{L&&!L.done&&(p=A0.return)&&p.call(A0)}finally{if(f)throw f.error}}N._index.set(l0,q)}}catch(K){c={error:K}}finally{try{n0&&!n0.done&&(A=H.return)&&A.call(H)}finally{if(c)throw c.error}}return N},t.prototype.executeQuery=function(n,a){var l=this;if(a===void 0&&(a={}),n===t.wildcard)return this.executeWildcardQuery(a);if(typeof n!="string"){var s=r2(r2(r2({},a),n),{queries:void 0}),c=n.queries.map(function(B){return l.executeQuery(B,s)});return this.combineResults(c,s.combineWith)}var A=this._options,f=A.tokenize,p=A.processTerm,h=A.searchOptions,y=r2(r2({tokenize:f,processTerm:p},h),a),m=y.tokenize,D=y.processTerm,v=m(n).flatMap(function(B){return D(B)}).filter(function(B){return!!B}),w=v.map(l5(y)),x=w.map(function(B){return l.executeQuerySpec(B,y)});return this.combineResults(x,y.combineWith)},t.prototype.executeQuerySpec=function(n,a){var l,s,c,A,f=r2(r2({},this._options.searchOptions),a),p=(f.fields||this._options.fields).reduce(function(G,X){var K;return r2(r2({},G),(K={},K[X]=pu(f.boost,X)||1,K))},{}),h=f.boostDocument,y=f.weights,m=f.maxFuzzy,D=f.bm25,v=r2(r2({},Vp.weights),y),w=v.fuzzy,x=v.prefix,B=this._index.get(n.term),b=this.termResults(n.term,n.term,1,B,p,h,D),R,N;if(n.prefix&&(R=this._index.atPrefix(n.term)),n.fuzzy){var _=n.fuzzy===!0?.2:n.fuzzy,T=_<1?Math.min(m,Math.round(n.term.length*_)):_;T&&(N=this._index.fuzzyGet(n.term,T))}if(R)try{for(var E=O0(R),O=E.next();!O.done;O=E.next()){var U=g2(O.value,2),H=U[0],n0=U[1],u0=H.length-n.term.length;if(u0){N==null||N.delete(H);var l0=x*H.length/(H.length+.3*u0);this.termResults(n.term,H,l0,n0,p,h,D,b)}}}catch(G){l={error:G}}finally{try{O&&!O.done&&(s=E.return)&&s.call(E)}finally{if(l)throw l.error}}if(N)try{for(var i0=O0(N.keys()),q=i0.next();!q.done;q=i0.next()){var H=q.value,A0=g2(N.get(H),2),L=A0[0],u0=A0[1];if(u0){var l0=w*H.length/(H.length+u0);this.termResults(n.term,H,l0,L,p,h,D,b)}}}catch(G){c={error:G}}finally{try{q&&!q.done&&(A=i0.return)&&A.call(i0)}finally{if(c)throw c.error}}return b},t.prototype.executeWildcardQuery=function(n){var a,l,s=new Map,c=r2(r2({},this._options.searchOptions),n);try{for(var A=O0(this._documentIds),f=A.next();!f.done;f=A.next()){var p=g2(f.value,2),h=p[0],y=p[1],m=c.boostDocument?c.boostDocument(y,"",this._storedFields.get(h)):1;s.set(h,{score:m,terms:[],match:{}})}}catch(D){a={error:D}}finally{try{f&&!f.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}return s},t.prototype.combineResults=function(n,a){if(a===void 0&&(a=TA),n.length===0)return new Map;var l=a.toLowerCase();return n.reduce(n5[l])||new Map},t.prototype.toJSON=function(){var n,a,l,s,c=[];try{for(var A=O0(this._index),f=A.next();!f.done;f=A.next()){var p=g2(f.value,2),h=p[0],y=p[1],m={};try{for(var D=(l=void 0,O0(y)),v=D.next();!v.done;v=D.next()){var w=g2(v.value,2),x=w[0],B=w[1];m[x]=Object.fromEntries(B)}}catch(b){l={error:b}}finally{try{v&&!v.done&&(s=D.return)&&s.call(D)}finally{if(l)throw l.error}}c.push([h,m])}}catch(b){n={error:b}}finally{try{f&&!f.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:c,serializationVersion:2}},t.prototype.termResults=function(n,a,l,s,c,A,f,p){var h,y,m,D,v;if(p===void 0&&(p=new Map),s==null)return p;try{for(var w=O0(Object.keys(c)),x=w.next();!x.done;x=w.next()){var B=x.value,b=c[B],R=this._fieldIds[B],N=s.get(R);if(N!=null){var _=N.size,T=this._avgFieldLength[R];try{for(var E=(m=void 0,O0(N.keys())),O=E.next();!O.done;O=E.next()){var U=O.value;if(!this._documentIds.has(U)){this.removeTerm(R,U,a),_-=1;continue}var H=A?A(this._documentIds.get(U),a,this._storedFields.get(U)):1;if(H){var n0=N.get(U),u0=this._fieldLength.get(U)[R],l0=a5(n0,_,this._documentCount,u0,T,f),i0=l*b*H*l0,q=p.get(U);if(q){q.score+=i0,s5(q.terms,n);var A0=pu(q.match,a);A0?A0.push(B):q.match[a]=[B]}else p.set(U,{score:i0,terms:[n],match:(v={},v[a]=[B],v)})}}}catch(L){m={error:L}}finally{try{O&&!O.done&&(D=E.return)&&D.call(E)}finally{if(m)throw m.error}}}}}catch(L){h={error:L}}finally{try{x&&!x.done&&(y=w.return)&&y.call(w)}finally{if(h)throw h.error}}return p},t.prototype.addTerm=function(n,a,l){var s=this._index.fetch(l,$p),c=s.get(n);if(c==null)c=new Map,c.set(a,1),s.set(n,c);else{var A=c.get(a);c.set(a,(A||0)+1)}},t.prototype.removeTerm=function(n,a,l){if(!this._index.has(l)){this.warnDocumentChanged(a,n,l);return}var s=this._index.fetch(l,$p),c=s.get(n);c==null||c.get(a)==null?this.warnDocumentChanged(a,n,l):c.get(a)<=1?c.size<=1?s.delete(n):c.delete(a):c.set(a,c.get(a)-1),this._index.get(l).size===0&&this._index.delete(l)},t.prototype.warnDocumentChanged=function(n,a,l){var s,c;try{for(var A=O0(Object.keys(this._fieldIds)),f=A.next();!f.done;f=A.next()){var p=f.value;if(this._fieldIds[p]===a){this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(n),' has changed before removal: term "').concat(l,'" was not present in field "').concat(p,'". Removing a document after it has changed can corrupt the index!'),"version_conflict");return}}}catch(h){s={error:h}}finally{try{f&&!f.done&&(c=A.return)&&c.call(A)}finally{if(s)throw s.error}}},t.prototype.addDocumentId=function(n){var a=this._nextId;return this._idToShortId.set(n,a),this._documentIds.set(a,n),this._documentCount+=1,this._nextId+=1,a},t.prototype.addFields=function(n){for(var a=0;a<n.length;a++)this._fieldIds[n[a]]=a},t.prototype.addFieldLength=function(n,a,l,s){var c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[a]=s;var A=this._avgFieldLength[a]||0,f=A*l+s;this._avgFieldLength[a]=f/(l+1)},t.prototype.removeFieldLength=function(n,a,l,s){if(l===1){this._avgFieldLength[a]=0;return}var c=this._avgFieldLength[a]*l-s;this._avgFieldLength[a]=c/(l-1)},t.prototype.saveStoredFields=function(n,a){var l,s,c=this._options,A=c.storeFields,f=c.extractField;if(!(A==null||A.length===0)){var p=this._storedFields.get(n);p==null&&this._storedFields.set(n,p={});try{for(var h=O0(A),y=h.next();!y.done;y=h.next()){var m=y.value,D=f(a,m);D!==void 0&&(p[m]=D)}}catch(v){l={error:v}}finally{try{y&&!y.done&&(s=h.return)&&s.call(h)}finally{if(l)throw l.error}}}},t.wildcard=Symbol("*"),t}(),pu=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)?t[n]:void 0},n5=($o={},$o[TA]=function(t,n){var a,l;try{for(var s=O0(n.keys()),c=s.next();!c.done;c=s.next()){var A=c.value,f=t.get(A);if(f==null)t.set(A,n.get(A));else{var p=n.get(A),h=p.score,y=p.terms,m=p.match;f.score=f.score+h,f.match=Object.assign(f.match,m),Gp(f.terms,y)}}}catch(D){a={error:D}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}return t},$o[ny]=function(t,n){var a,l,s=new Map;try{for(var c=O0(n.keys()),A=c.next();!A.done;A=c.next()){var f=A.value,p=t.get(f);if(p!=null){var h=n.get(f),y=h.score,m=h.terms,D=h.match;Gp(p.terms,m),s.set(f,{score:p.score+y,terms:p.terms,match:Object.assign(p.match,D)})}}}catch(v){a={error:v}}finally{try{A&&!A.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}return s},$o[t5]=function(t,n){var a,l;try{for(var s=O0(n.keys()),c=s.next();!c.done;c=s.next()){var A=c.value;t.delete(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}return t},$o),o5={k:1.2,b:.7,d:.5},a5=function(t,n,a,l,s,c){var A=c.k,f=c.b,p=c.d,h=Math.log(1+(a-n+.5)/(n+.5));return h*(p+t*(A+1)/(t+A*(1-f+f*l/s)))},l5=function(t){return function(n,a,l){var s=typeof t.fuzzy=="function"?t.fuzzy(n,a,l):t.fuzzy||!1,c=typeof t.prefix=="function"?t.prefix(n,a,l):t.prefix===!0;return{term:n,fuzzy:s,prefix:c}}},mu={idField:"id",extractField:function(t,n){return t[n]},tokenize:function(t){return t.split(c5)},processTerm:function(t){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(t,n){typeof(console==null?void 0:console[t])=="function"&&console[t](n)},autoVacuum:!0},Vp={combineWith:TA,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:o5},i5={combineWith:ny,prefix:function(t,n,a){return n===a.length-1}},Vu={batchSize:1e3,batchWait:10},Gu={minDirtFactor:.1,minDirtCount:20},Cu=r2(r2({},Vu),Gu),s5=function(t,n){t.includes(n)||t.push(n)},Gp=function(t,n){var a,l;try{for(var s=O0(n),c=s.next();!c.done;c=s.next()){var A=c.value;t.includes(A)||t.push(A)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(l=s.return)&&l.call(s)}finally{if(a)throw a.error}}},qp=function(t,n){var a=t.score,l=n.score;return l-a},$p=function(){return new Map},Wl=function(t){var n,a,l=new Map;try{for(var s=O0(Object.keys(t)),c=s.next();!c.done;c=s.next()){var A=c.value;l.set(parseInt(A,10),t[A])}}catch(f){n={error:f}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return l},c5=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;let yu;function oy(){const[t,n]=g.useState();return g.useEffect(()=>{(async()=>{yu||(yu=KF());const a=await yu,l=r5.loadJSON(a,{fields:["title","titles","text"],searchOptions:{boost:{title:4,text:2,titles:1},fuzzy:.2,prefix:!0},storeFields:["href","html","isPage","text","title","titles"]});n(l)})()},[]),g.useEffect(()=>{},[]),t}var u5="vocs_DesktopSearch_search",A5="vocs_DesktopSearch_searchCommand",f5="Label",ay=g.forwardRef((t,n)=>C.jsx(E0.label,{...t,ref:n,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));ay.displayName=f5;var d5=ay,ti={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 20142018, Julian Khnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/var h5=ti.exports,Yp;function p5(){return Yp||(Yp=1,function(t,n){(function(a,l){t.exports=l()})(h5,function(){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l=function(h,y){if(!(h instanceof y))throw new TypeError("Cannot call a class as a function")},s=function(){function h(y,m){for(var D=0;D<m.length;D++){var v=m[D];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(y,v.key,v)}}return function(y,m,D){return m&&h(y.prototype,m),D&&h(y,D),y}}(),c=Object.assign||function(h){for(var y=1;y<arguments.length;y++){var m=arguments[y];for(var D in m)Object.prototype.hasOwnProperty.call(m,D)&&(h[D]=m[D])}return h},A=function(){function h(y){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;l(this,h),this.ctx=y,this.iframes=m,this.exclude=D,this.iframesTimeout=v}return s(h,[{key:"getContexts",value:function(){var m=void 0,D=[];return typeof this.ctx>"u"||!this.ctx?m=[]:NodeList.prototype.isPrototypeOf(this.ctx)?m=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?m=this.ctx:typeof this.ctx=="string"?m=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):m=[this.ctx],m.forEach(function(v){var w=D.filter(function(x){return x.contains(v)}).length>0;D.indexOf(v)===-1&&!w&&D.push(v)}),D}},{key:"getIframeContents",value:function(m,D){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},w=void 0;try{var x=m.contentWindow;if(w=x.document,!x||!w)throw new Error("iframe inaccessible")}catch{v()}w&&D(w)}},{key:"isIframeBlank",value:function(m){var D="about:blank",v=m.getAttribute("src").trim(),w=m.contentWindow.location.href;return w===D&&v!==D&&v}},{key:"observeIframeLoad",value:function(m,D,v){var w=this,x=!1,B=null,b=function R(){if(!x){x=!0,clearTimeout(B);try{w.isIframeBlank(m)||(m.removeEventListener("load",R),w.getIframeContents(m,D,v))}catch{v()}}};m.addEventListener("load",b),B=setTimeout(b,this.iframesTimeout)}},{key:"onIframeReady",value:function(m,D,v){try{m.contentWindow.document.readyState==="complete"?this.isIframeBlank(m)?this.observeIframeLoad(m,D,v):this.getIframeContents(m,D,v):this.observeIframeLoad(m,D,v)}catch{v()}}},{key:"waitForIframes",value:function(m,D){var v=this,w=0;this.forEachIframe(m,function(){return!0},function(x){w++,v.waitForIframes(x.querySelector("html"),function(){--w||D()})},function(x){x||D()})}},{key:"forEachIframe",value:function(m,D,v){var w=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},B=m.querySelectorAll("iframe"),b=B.length,R=0;B=Array.prototype.slice.call(B);var N=function(){--b<=0&&x(R)};b||N(),B.forEach(function(_){h.matches(_,w.exclude)?N():w.onIframeReady(_,function(T){D(_)&&(R++,v(T)),N()},N)})}},{key:"createIterator",value:function(m,D,v){return document.createNodeIterator(m,D,v,!1)}},{key:"createInstanceOnIframe",value:function(m){return new h(m.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(m,D,v){var w=m.compareDocumentPosition(v),x=Node.DOCUMENT_POSITION_PRECEDING;if(w&x)if(D!==null){var B=D.compareDocumentPosition(v),b=Node.DOCUMENT_POSITION_FOLLOWING;if(B&b)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(m){var D=m.previousNode(),v=void 0;return D===null?v=m.nextNode():v=m.nextNode()&&m.nextNode(),{prevNode:D,node:v}}},{key:"checkIframeFilter",value:function(m,D,v,w){var x=!1,B=!1;return w.forEach(function(b,R){b.val===v&&(x=R,B=b.handled)}),this.compareNodeIframe(m,D,v)?(x===!1&&!B?w.push({val:v,handled:!0}):x!==!1&&!B&&(w[x].handled=!0),!0):(x===!1&&w.push({val:v,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(m,D,v,w){var x=this;m.forEach(function(B){B.handled||x.getIframeContents(B.val,function(b){x.createInstanceOnIframe(b).forEachNode(D,v,w)})})}},{key:"iterateThroughNodes",value:function(m,D,v,w,x){for(var B=this,b=this.createIterator(D,m,w),R=[],N=[],_=void 0,T=void 0,E=function(){var U=B.getIteratorNode(b);return T=U.prevNode,_=U.node,_};E();)this.iframes&&this.forEachIframe(D,function(O){return B.checkIframeFilter(_,T,O,R)},function(O){B.createInstanceOnIframe(O).forEachNode(m,function(U){return N.push(U)},w)}),N.push(_);N.forEach(function(O){v(O)}),this.iframes&&this.handleOpenIframes(R,m,v,w),x()}},{key:"forEachNode",value:function(m,D,v){var w=this,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},B=this.getContexts(),b=B.length;b||x(),B.forEach(function(R){var N=function(){w.iterateThroughNodes(m,R,D,v,function(){--b<=0&&x()})};w.iframes?w.waitForIframes(R,N):N()})}}],[{key:"matches",value:function(m,D){var v=typeof D=="string"?[D]:D,w=m.matches||m.matchesSelector||m.msMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.webkitMatchesSelector;if(w){var x=!1;return v.every(function(B){return w.call(m,B)?(x=!0,!1):!0}),x}else return!1}}]),h}(),f=function(){function h(y){l(this,h),this.ctx=y,this.ie=!1;var m=window.navigator.userAgent;(m.indexOf("MSIE")>-1||m.indexOf("Trident")>-1)&&(this.ie=!0)}return s(h,[{key:"log",value:function(m){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",v=this.opt.log;this.opt.debug&&(typeof v>"u"?"undefined":a(v))==="object"&&typeof v[D]=="function"&&v[D]("mark.js: "+m)}},{key:"escapeStr",value:function(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(m){return this.opt.wildcards!=="disabled"&&(m=this.setupWildcardsRegExp(m)),m=this.escapeStr(m),Object.keys(this.opt.synonyms).length&&(m=this.createSynonymsRegExp(m)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(m=this.setupIgnoreJoinersRegExp(m)),this.opt.diacritics&&(m=this.createDiacriticsRegExp(m)),m=this.createMergedBlanksRegExp(m),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(m=this.createJoinersRegExp(m)),this.opt.wildcards!=="disabled"&&(m=this.createWildcardsRegExp(m)),m=this.createAccuracyRegExp(m),m}},{key:"createSynonymsRegExp",value:function(m){var D=this.opt.synonyms,v=this.opt.caseSensitive?"":"i",w=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var x in D)if(D.hasOwnProperty(x)){var B=D[x],b=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(x):this.escapeStr(x),R=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(B):this.escapeStr(B);b!==""&&R!==""&&(m=m.replace(new RegExp("("+this.escapeStr(b)+"|"+this.escapeStr(R)+")","gm"+v),w+("("+this.processSynomyms(b)+"|")+(this.processSynomyms(R)+")")+w))}return m}},{key:"processSynomyms",value:function(m){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(m=this.setupIgnoreJoinersRegExp(m)),m}},{key:"setupWildcardsRegExp",value:function(m){return m=m.replace(/(?:\\)*\?/g,function(D){return D.charAt(0)==="\\"?"?":""}),m.replace(/(?:\\)*\*/g,function(D){return D.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(m){var D=this.opt.wildcards==="withSpaces";return m.replace(/\u0001/g,D?"[\\S\\s]?":"\\S?").replace(/\u0002/g,D?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(m){return m.replace(/[^(|)\\]/g,function(D,v,w){var x=w.charAt(v+1);return/[(|)\\]/.test(x)||x===""?D:D+"\0"})}},{key:"createJoinersRegExp",value:function(m){var D=[],v=this.opt.ignorePunctuation;return Array.isArray(v)&&v.length&&D.push(this.escapeStr(v.join(""))),this.opt.ignoreJoiners&&D.push("\\u00ad\\u200b\\u200c\\u200d"),D.length?m.split(/\u0000+/).join("["+D.join("")+"]*"):m}},{key:"createDiacriticsRegExp",value:function(m){var D=this.opt.caseSensitive?"":"i",v=this.opt.caseSensitive?["a","A","c","C","d","D","e","E","i","I","l","L","n","N","o","O","r","R","s","S","t","T","u","U","y","Y","z","Z"]:["aA","cC","dD","eE","iI","lL","nN","oO","rR","sS","tT","uU","yY","zZ"],w=[];return m.split("").forEach(function(x){v.every(function(B){if(B.indexOf(x)!==-1){if(w.indexOf(B)>-1)return!1;m=m.replace(new RegExp("["+B+"]","gm"+D),"["+B+"]"),w.push(B)}return!0})}),m}},{key:"createMergedBlanksRegExp",value:function(m){return m.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(m){var D=this,v="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",w=this.opt.accuracy,x=typeof w=="string"?w:w.value,B=typeof w=="string"?[]:w.limiters,b="";switch(B.forEach(function(R){b+="|"+D.escapeStr(R)}),x){case"partially":default:return"()("+m+")";case"complementary":return b="\\s"+(b||this.escapeStr(v)),"()([^"+b+"]*"+m+"[^"+b+"]*)";case"exactly":return"(^|\\s"+b+")("+m+")(?=$|\\s"+b+")"}}},{key:"getSeparatedKeywords",value:function(m){var D=this,v=[];return m.forEach(function(w){D.opt.separateWordSearch?w.split(" ").forEach(function(x){x.trim()&&v.indexOf(x)===-1&&v.push(x)}):w.trim()&&v.indexOf(w)===-1&&v.push(w)}),{keywords:v.sort(function(w,x){return x.length-w.length}),length:v.length}}},{key:"isNumeric",value:function(m){return Number(parseFloat(m))==m}},{key:"checkRanges",value:function(m){var D=this;if(!Array.isArray(m)||Object.prototype.toString.call(m[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(m),[];var v=[],w=0;return m.sort(function(x,B){return x.start-B.start}).forEach(function(x){var B=D.callNoMatchOnInvalidRanges(x,w),b=B.start,R=B.end,N=B.valid;N&&(x.start=b,x.length=R-b,v.push(x),w=R)}),v}},{key:"callNoMatchOnInvalidRanges",value:function(m,D){var v=void 0,w=void 0,x=!1;return m&&typeof m.start<"u"?(v=parseInt(m.start,10),w=v+parseInt(m.length,10),this.isNumeric(m.start)&&this.isNumeric(m.length)&&w-D>0&&w-v>0?x=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(m))),this.opt.noMatch(m))):(this.log("Ignoring invalid range: "+JSON.stringify(m)),this.opt.noMatch(m)),{start:v,end:w,valid:x}}},{key:"checkWhitespaceRanges",value:function(m,D,v){var w=void 0,x=!0,B=v.length,b=D-B,R=parseInt(m.start,10)-b;return R=R>B?B:R,w=R+parseInt(m.length,10),w>B&&(w=B,this.log("End range automatically set to the max value of "+B)),R<0||w-R<0||R>B||w>B?(x=!1,this.log("Invalid range: "+JSON.stringify(m)),this.opt.noMatch(m)):v.substring(R,w).replace(/\s+/g,"")===""&&(x=!1,this.log("Skipping whitespace only range: "+JSON.stringify(m)),this.opt.noMatch(m)),{start:R,end:w,valid:x}}},{key:"getTextNodes",value:function(m){var D=this,v="",w=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(x){w.push({start:v.length,end:(v+=x.textContent).length,node:x})},function(x){return D.matchesExclude(x.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){m({value:v,nodes:w})})}},{key:"matchesExclude",value:function(m){return A.matches(m,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(m,D,v){var w=this.opt.element?this.opt.element:"mark",x=m.splitText(D),B=x.splitText(v-D),b=document.createElement(w);return b.setAttribute("data-markjs","true"),this.opt.className&&b.setAttribute("class",this.opt.className),b.textContent=x.textContent,x.parentNode.replaceChild(b,x),B}},{key:"wrapRangeInMappedTextNode",value:function(m,D,v,w,x){var B=this;m.nodes.every(function(b,R){var N=m.nodes[R+1];if(typeof N>"u"||N.start>D){if(!w(b.node))return!1;var _=D-b.start,T=(v>b.end?b.end:v)-b.start,E=m.value.substr(0,b.start),O=m.value.substr(T+b.start);if(b.node=B.wrapRangeInTextNode(b.node,_,T),m.value=E+O,m.nodes.forEach(function(U,H){H>=R&&(m.nodes[H].start>0&&H!==R&&(m.nodes[H].start-=T),m.nodes[H].end-=T)}),v-=T,x(b.node.previousSibling,b.start),v>b.end)D=b.end;else return!1}return!0})}},{key:"wrapMatches",value:function(m,D,v,w,x){var B=this,b=D===0?0:D+1;this.getTextNodes(function(R){R.nodes.forEach(function(N){N=N.node;for(var _=void 0;(_=m.exec(N.textContent))!==null&&_[b]!=="";)if(v(_[b],N)){var T=_.index;if(b!==0)for(var E=1;E<b;E++)T+=_[E].length;N=B.wrapRangeInTextNode(N,T,T+_[b].length),w(N.previousSibling),m.lastIndex=0}}),x()})}},{key:"wrapMatchesAcrossElements",value:function(m,D,v,w,x){var B=this,b=D===0?0:D+1;this.getTextNodes(function(R){for(var N=void 0;(N=m.exec(R.value))!==null&&N[b]!=="";){var _=N.index;if(b!==0)for(var T=1;T<b;T++)_+=N[T].length;var E=_+N[b].length;B.wrapRangeInMappedTextNode(R,_,E,function(O){return v(N[b],O)},function(O,U){m.lastIndex=U,w(O)})}x()})}},{key:"wrapRangeFromIndex",value:function(m,D,v,w){var x=this;this.getTextNodes(function(B){var b=B.value.length;m.forEach(function(R,N){var _=x.checkWhitespaceRanges(R,b,B.value),T=_.start,E=_.end,O=_.valid;O&&x.wrapRangeInMappedTextNode(B,T,E,function(U){return D(U,R,B.value.substring(T,E),N)},function(U){v(U,R)})}),w()})}},{key:"unwrapMatches",value:function(m){for(var D=m.parentNode,v=document.createDocumentFragment();m.firstChild;)v.appendChild(m.removeChild(m.firstChild));D.replaceChild(v,m),this.ie?this.normalizeTextNode(D):D.normalize()}},{key:"normalizeTextNode",value:function(m){if(m){if(m.nodeType===3)for(;m.nextSibling&&m.nextSibling.nodeType===3;)m.nodeValue+=m.nextSibling.nodeValue,m.parentNode.removeChild(m.nextSibling);else this.normalizeTextNode(m.firstChild);this.normalizeTextNode(m.nextSibling)}}},{key:"markRegExp",value:function(m,D){var v=this;this.opt=D,this.log('Searching with expression "'+m+'"');var w=0,x="wrapMatches",B=function(R){w++,v.opt.each(R)};this.opt.acrossElements&&(x="wrapMatchesAcrossElements"),this[x](m,this.opt.ignoreGroups,function(b,R){return v.opt.filter(R,b,w)},B,function(){w===0&&v.opt.noMatch(m),v.opt.done(w)})}},{key:"mark",value:function(m,D){var v=this;this.opt=D;var w=0,x="wrapMatches",B=this.getSeparatedKeywords(typeof m=="string"?[m]:m),b=B.keywords,R=B.length,N=this.opt.caseSensitive?"":"i",_=function T(E){var O=new RegExp(v.createRegExp(E),"gm"+N),U=0;v.log('Searching with expression "'+O+'"'),v[x](O,1,function(H,n0){return v.opt.filter(n0,E,w,U)},function(H){U++,w++,v.opt.each(H)},function(){U===0&&v.opt.noMatch(E),b[R-1]===E?v.opt.done(w):T(b[b.indexOf(E)+1])})};this.opt.acrossElements&&(x="wrapMatchesAcrossElements"),R===0?this.opt.done(w):_(b[0])}},{key:"markRanges",value:function(m,D){var v=this;this.opt=D;var w=0,x=this.checkRanges(m);x&&x.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(x)),this.wrapRangeFromIndex(x,function(B,b,R,N){return v.opt.filter(B,b,R,N)},function(B,b){w++,v.opt.each(B,b)},function(){v.opt.done(w)})):this.opt.done(w)}},{key:"unmark",value:function(m){var D=this;this.opt=m;var v=this.opt.element?this.opt.element:"*";v+="[data-markjs]",this.opt.className&&(v+="."+this.opt.className),this.log('Removal selector "'+v+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(w){D.unwrapMatches(w)},function(w){var x=A.matches(w,v),B=D.matchesExclude(w);return!x||B?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(m){this._opt=c({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},m)},get:function(){return this._opt}},{key:"iterator",get:function(){return new A(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),h}();function p(h){var y=this,m=new f(h);return this.mark=function(D,v){return m.mark(D,v),y},this.markRegExp=function(D,v){return m.markRegExp(D,v),y},this.markRanges=function(D,v){return m.markRanges(D,v),y},this.unmark=function(D){return m.unmark(D),y},this}return p})}(ti)),ti.exports}var m5=p5();const C5=yi(m5);function y5(t,n){const[a,l]=g.useState(t);return g.useEffect(()=>{const s=setTimeout(()=>l(t),n);return()=>{clearTimeout(s)}},[t,n]),a}function ly(t,n){const[a,l]=g.useState();g.useEffect(()=>{const c=g5(t);l(typeof c>"u"||c===null?n:c)},[n,t]);const s=g.useCallback(c=>{l(A=>{let f;typeof c=="function"?f=c(A):f=c;try{localStorage.setItem(t,JSON.stringify(f))}catch{}return f})},[t]);return[a,s]}function g5(t){try{const n=localStorage.getItem(t);return typeof n=="string"?JSON.parse(n):void 0}catch{return}}function D5(t,n){const[a,l]=g.useState();g.useEffect(()=>{const c=v5(t);l(typeof c>"u"||c===null?n:c)},[n,t]);const s=g.useCallback(c=>{l(A=>{let f;typeof c=="function"?f=c(A):f=c;try{sessionStorage.setItem(t,JSON.stringify(f))}catch{}return f})},[t]);return[a,s]}function v5(t){try{const n=sessionStorage.getItem(t);return typeof n=="string"?JSON.parse(n):void 0}catch{return}}var iy="vocs_utils_visuallyHidden",x5="vocs_Kbd";function sy(t){return C.jsx("kbd",{...t,className:s0(t.className,x5)})}var w5="vocs_KeyboardShortcut",F5="vocs_KeyboardShortcut_kbdGroup";function Sn(t){const{description:n,keys:a}=t;return C.jsxs("span",{className:w5,children:[n,C.jsx("span",{className:F5,children:a.map(l=>C.jsx(sy,{children:l},l))})]})}var B5="vocs_SearchDialog",b5="vocs_SearchDialog_overlay",N5="vocs_SearchDialog_searchBox",S5="vocs_SearchDialog_searchInput",Hl="vocs_SearchDialog_searchInputIcon",R5="vocs_SearchDialog_searchInputIconDesktop",E5="vocs_SearchDialog_searchInputIconMobile",_5="vocs_SearchDialog_results",k5="vocs_SearchDialog_result",T5="vocs_SearchDialog_resultSelected",Kp="vocs_SearchDialog_resultIcon",P5="vocs_SearchDialog_titles",Zp="vocs_SearchDialog_title",M5="vocs_SearchDialog_titleIcon",O5="vocs_SearchDialog_content",Xp="vocs_SearchDialog_excerpt",L5="vocs_SearchDialog_searchShortcuts";function cy(t){const{search:n}=m2(),a=CA(),l=g.useRef(null),s=g.useRef(null),[c,A]=D5("filterText",""),f=y5(c,200),p=oy(),[h,y]=g.useState(-1),[m,D]=g.useState(!1),[v,w]=ly("showDetailView",!0),x=g.useMemo(()=>p?f?(y(0),p.search(f,n).slice(0,16)):(y(-1),[]):[],[p,n,f]),B=x.length,b=x[h],R=g.useCallback(()=>{var E,O,U;if(!s.current)return;const N=new Set;for(const H of x)for(const n0 in H.match)N.add(n0);const _=new C5(s.current);_.unmark({done(){_==null||_.markRegExp(j5(N))}});const T=s.current.querySelectorAll(`.${Xp}`);for(const H of T)(E=H.querySelector('mark[data-markjs="true"]'))==null||E.scrollIntoView({block:"center"});(U=(O=s.current)==null?void 0:O.firstElementChild)==null||U.scrollIntoView({block:"start"})},[x]);return g.useEffect(()=>{if(!t.open)return;function N(_){var T;switch(_.key){case"ArrowDown":{_.preventDefault(),y(E=>{var H;let O=E+1;O>=B&&(O=0);const U=(H=s.current)==null?void 0:H.children[O];return U==null||U.scrollIntoView({block:"nearest"}),O}),D(!0);break}case"ArrowUp":{_.preventDefault(),y(E=>{var H;let O=E-1;O<0&&(O=B-1);const U=(H=s.current)==null?void 0:H.children[O];return U==null||U.scrollIntoView({block:"nearest"}),O}),D(!0);break}case"Backspace":{if(!_.metaKey)return;_.preventDefault(),A(""),(T=l.current)==null||T.focus();break}case"Enter":{if(_.target instanceof HTMLButtonElement&&_.target.type!=="submit"||!b)return;_.preventDefault(),a(b.href),t.onClose();break}}}return window.addEventListener("keydown",N),()=>{window.removeEventListener("keydown",N)}},[a,B,A,b,t.open,t.onClose]),g.useEffect(()=>{f!==""&&s.current&&R()},[R,f]),C.jsxs(GF,{children:[C.jsx(qF,{className:b5}),C.jsxs($F,{onOpenAutoFocus:N=>{l.current&&(N.preventDefault(),l.current.focus()),R()},onCloseAutoFocus:()=>{y(0)},className:B5,"aria-describedby":void 0,children:[C.jsx(YF,{className:iy,children:"Search"}),C.jsxs("form",{className:N5,children:[C.jsx("button",{"aria-label":"Close search dialog",type:"button",onClick:()=>t.onClose(),className:E5,children:C.jsx(tw,{className:Hl,height:20,width:20})}),C.jsx(d5,{htmlFor:"search-input",children:C.jsx(BA,{"aria-label":"Search",className:s0(Hl,R5),height:20,width:20})}),C.jsx("input",{ref:l,tabIndex:0,className:S5,id:"search-input",onChange:N=>A(N.target.value),placeholder:"Search",type:"search",value:c}),C.jsx("button",{"aria-label":"Toggle detail view",type:"button",onClick:()=>w(N=>!N),children:C.jsx(cw,{className:Hl,height:20,width:20})}),C.jsx("button",{"aria-label":"Reset search",type:"button",className:Hl,onClick:()=>{var N;A(""),(N=l.current)==null||N.focus()},children:""})]}),C.jsxs("ul",{className:_5,role:x.length?"listbox":void 0,onMouseMove:()=>D(!1),ref:s,children:[f&&x.length===0&&C.jsxs("li",{children:['No results for "',C.jsx("span",{children:f}),'"']}),x.map((N,_)=>{var T;return C.jsx("li",{role:"option",className:s0(k5,_===h&&T5),"aria-selected":_===h,"aria-label":[...N.titles.filter(E=>!!E),N.title].join(" > "),children:C.jsxs(In,{to:N.href,onClick:E=>{E.metaKey||t.onClose()},onMouseEnter:()=>!m&&y(_),onFocus:()=>y(_),children:[C.jsxs("div",{className:P5,children:[N.isPage?C.jsx(iw,{className:Kp}):C.jsx("span",{className:Kp,children:"#"}),N.titles.filter(E=>!!E).map(E=>C.jsxs("span",{className:Zp,children:[C.jsx("span",{dangerouslySetInnerHTML:{__html:E}}),C.jsx(nw,{className:M5})]},E)),C.jsx("span",{className:Zp,children:C.jsx("span",{dangerouslySetInnerHTML:{__html:N.title}})})]}),v&&((T=N.text)==null?void 0:T.trim())&&C.jsx("div",{className:Xp,children:C.jsx(xC,{className:O5,children:C.jsx("div",{dangerouslySetInnerHTML:{__html:N.html}})})})]})},N.id)})]}),C.jsxs("div",{className:L5,children:[C.jsx(Sn,{description:"Navigate",keys:["",""]}),C.jsx(Sn,{description:"Select",keys:["enter"]}),C.jsx(Sn,{description:"Close",keys:["esc"]}),C.jsx(Sn,{description:"Reset",keys:["",""]})]})]})]})}function j5(t){return new RegExp([...t].sort((n,a)=>a.length-n.length).map(n=>`(${n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})`).join("|"),"gi")}function I5(){oy();const[t,n]=g.useState(!1);return g.useEffect(()=>{function a(l){const s=document.activeElement instanceof HTMLElement&&(["input","select","textarea"].includes(document.activeElement.tagName.toLowerCase())||document.activeElement.isContentEditable);l.key==="/"&&!t&&!s?(l.preventDefault(),n(!0)):l.metaKey===!0&&l.key==="k"&&(l.preventDefault(),n(c=>!c))}return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[t]),C.jsxs(ZC,{open:t,onOpenChange:n,children:[C.jsx(XC,{asChild:!0,children:C.jsxs("button",{className:u5,type:"button",children:[C.jsx(BA,{style:{marginTop:2}}),"Search...",C.jsx("div",{className:A5,children:C.jsx("div",{style:{background:"currentColor",transform:"rotate(45deg)",width:1.5,borderRadius:2,height:"100%"}})})]})}),C.jsx(cy,{open:t,onClose:()=>n(!1)})]})}var U5="vocs_DesktopTopNav",z5="vocs_DesktopTopNav_withLogo",W5="vocs_DesktopTopNav_content",H5="vocs_DesktopTopNav_curtain",V5="vocs_DesktopTopNav_group",Qp="vocs_DesktopTopNav_item",G5="vocs_DesktopTopNav_logo",q5="vocs_DesktopTopNav_logoWrapper",Jp="vocs_DesktopTopNav_section",gu="vocs_Logo",$5="vocs_Logo_logoDark",Y5="vocs_Logo_logoLight";function K5({className:t}){const{logoUrl:n}=m2();return n?C.jsx(C.Fragment,{children:typeof n=="string"?C.jsx("img",{alt:"Logo",className:s0(t,gu),src:n}):C.jsxs(C.Fragment,{children:[C.jsx("img",{alt:"Logo",className:s0(t,gu,$5),src:n.dark}),C.jsx("img",{alt:"Logo",className:s0(t,gu,Y5),src:n.light})]})}):null}var Z5="vocs_NavLogo_logoImage",X5="vocs_NavLogo_title";function PA(){const t=m2();return t.logoUrl?C.jsx(K5,{className:Z5}):C.jsx("div",{className:X5,children:t.title})}var Q5=g.createContext(void 0);function ua(t){const n=g.useContext(Q5);return t||n||"ltr"}function Aa(t){const n=t+"CollectionProvider",[a,l]=Oe(n),[s,c]=a(n,{collectionRef:{current:null},itemMap:new Map}),A=x=>{const{scope:B,children:b}=x,R=n2.useRef(null),N=n2.useRef(new Map).current;return C.jsx(s,{scope:B,itemMap:N,collectionRef:R,children:b})};A.displayName=n;const f=t+"CollectionSlot",p=Tn(f),h=n2.forwardRef((x,B)=>{const{scope:b,children:R}=x,N=c(f,b),_=o2(B,N.collectionRef);return C.jsx(p,{ref:_,children:R})});h.displayName=f;const y=t+"CollectionItemSlot",m="data-radix-collection-item",D=Tn(y),v=n2.forwardRef((x,B)=>{const{scope:b,children:R,...N}=x,_=n2.useRef(null),T=o2(B,_),E=c(y,b);return n2.useEffect(()=>(E.itemMap.set(_,{ref:_,...N}),()=>void E.itemMap.delete(_))),C.jsx(D,{[m]:"",ref:T,children:R})});v.displayName=y;function w(x){const B=c(t+"CollectionConsumer",x);return n2.useCallback(()=>{const R=B.collectionRef.current;if(!R)return[];const N=Array.from(R.querySelectorAll(`[${m}]`));return Array.from(B.itemMap.values()).sort((E,O)=>N.indexOf(E.ref.current)-N.indexOf(O.ref.current))},[B.collectionRef,B.itemMap])}return[{Provider:A,Slot:h,ItemSlot:v},w,l]}function J5(t){const n=g.useRef({value:t,previous:t});return g.useMemo(()=>(n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous),[t])}var eB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tB="VisuallyHidden",uy=g.forwardRef((t,n)=>C.jsx(E0.span,{...t,ref:n,style:{...eB,...t.style}}));uy.displayName=tB;var rB=uy,Or="NavigationMenu",[MA,Ay,nB]=Aa(Or),[qu,oB,aB]=Aa(Or),[OA,V8]=Oe(Or,[nB,aB]),[lB,Se]=OA(Or),[iB,sB]=OA(Or),fy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,value:l,onValueChange:s,defaultValue:c,delayDuration:A=200,skipDelayDuration:f=300,orientation:p="horizontal",dir:h,...y}=t,[m,D]=g.useState(null),v=o2(n,H=>D(H)),w=ua(h),x=g.useRef(0),B=g.useRef(0),b=g.useRef(0),[R,N]=g.useState(!0),[_,T]=Qe({prop:l,onChange:H=>{const n0=H!=="",u0=f>0;n0?(window.clearTimeout(b.current),u0&&N(!1)):(window.clearTimeout(b.current),b.current=window.setTimeout(()=>N(!0),f)),s==null||s(H)},defaultProp:c??"",caller:Or}),E=g.useCallback(()=>{window.clearTimeout(B.current),B.current=window.setTimeout(()=>T(""),150)},[T]),O=g.useCallback(H=>{window.clearTimeout(B.current),T(H)},[T]),U=g.useCallback(H=>{_===H?window.clearTimeout(B.current):x.current=window.setTimeout(()=>{window.clearTimeout(B.current),T(H)},A)},[_,T,A]);return g.useEffect(()=>()=>{window.clearTimeout(x.current),window.clearTimeout(B.current),window.clearTimeout(b.current)},[]),C.jsx(dy,{scope:a,isRootMenu:!0,value:_,dir:w,orientation:p,rootNavigationMenu:m,onTriggerEnter:H=>{window.clearTimeout(x.current),R?U(H):O(H)},onTriggerLeave:()=>{window.clearTimeout(x.current),E()},onContentEnter:()=>window.clearTimeout(B.current),onContentLeave:E,onItemSelect:H=>{T(n0=>n0===H?"":H)},onItemDismiss:()=>T(""),children:C.jsx(E0.nav,{"aria-label":"Main","data-orientation":p,dir:w,...y,ref:v})})});fy.displayName=Or;var $u="NavigationMenuSub",cB=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,value:l,onValueChange:s,defaultValue:c,orientation:A="horizontal",...f}=t,p=Se($u,a),[h,y]=Qe({prop:l,onChange:s,defaultProp:c??"",caller:$u});return C.jsx(dy,{scope:a,isRootMenu:!1,value:h,dir:p.dir,orientation:A,rootNavigationMenu:p.rootNavigationMenu,onTriggerEnter:m=>y(m),onItemSelect:m=>y(m),onItemDismiss:()=>y(""),children:C.jsx(E0.div,{"data-orientation":A,...f,ref:n})})});cB.displayName=$u;var dy=t=>{const{scope:n,isRootMenu:a,rootNavigationMenu:l,dir:s,orientation:c,children:A,value:f,onItemSelect:p,onItemDismiss:h,onTriggerEnter:y,onTriggerLeave:m,onContentEnter:D,onContentLeave:v}=t,[w,x]=g.useState(null),[B,b]=g.useState(new Map),[R,N]=g.useState(null);return C.jsx(lB,{scope:n,isRootMenu:a,rootNavigationMenu:l,value:f,previousValue:J5(f),baseId:xe(),dir:s,orientation:c,viewport:w,onViewportChange:x,indicatorTrack:R,onIndicatorTrackChange:N,onTriggerEnter:L2(y),onTriggerLeave:L2(m),onContentEnter:L2(D),onContentLeave:L2(v),onItemSelect:L2(p),onItemDismiss:L2(h),onViewportContentChange:g.useCallback((_,T)=>{b(E=>(E.set(_,T),new Map(E)))},[]),onViewportContentRemove:g.useCallback(_=>{b(T=>T.has(_)?(T.delete(_),new Map(T)):T)},[]),children:C.jsx(MA.Provider,{scope:n,children:C.jsx(iB,{scope:n,items:B,children:A})})})},hy="NavigationMenuList",py=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,...l}=t,s=Se(hy,a),c=C.jsx(E0.ul,{"data-orientation":s.orientation,...l,ref:n});return C.jsx(E0.div,{style:{position:"relative"},ref:s.onIndicatorTrackChange,children:C.jsx(MA.Slot,{scope:a,children:s.isRootMenu?C.jsx(wy,{asChild:!0,children:c}):c})})});py.displayName=hy;var my="NavigationMenuItem",[uB,Cy]=OA(my),yy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,value:l,...s}=t,c=xe(),A=l||c||"LEGACY_REACT_AUTO_VALUE",f=g.useRef(null),p=g.useRef(null),h=g.useRef(null),y=g.useRef(()=>{}),m=g.useRef(!1),D=g.useCallback((w="start")=>{if(f.current){y.current();const x=Ku(f.current);x.length&&IA(w==="start"?x:x.reverse())}},[]),v=g.useCallback(()=>{if(f.current){const w=Ku(f.current);w.length&&(y.current=gB(w))}},[]);return C.jsx(uB,{scope:a,value:A,triggerRef:p,contentRef:f,focusProxyRef:h,wasEscapeCloseRef:m,onEntryKeyDown:D,onFocusProxyEnter:D,onRootContentClose:v,onContentFocusOutside:v,children:C.jsx(E0.li,{...s,ref:n})})});yy.displayName=my;var Yu="NavigationMenuTrigger",gy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,disabled:l,...s}=t,c=Se(Yu,t.__scopeNavigationMenu),A=Cy(Yu,t.__scopeNavigationMenu),f=g.useRef(null),p=o2(f,A.triggerRef,n),h=By(c.baseId,A.value),y=by(c.baseId,A.value),m=g.useRef(!1),D=g.useRef(!1),v=A.value===c.value;return C.jsxs(C.Fragment,{children:[C.jsx(MA.ItemSlot,{scope:a,value:A.value,children:C.jsx(Fy,{asChild:!0,children:C.jsx(E0.button,{id:h,disabled:l,"data-disabled":l?"":void 0,"data-state":UA(v),"aria-expanded":v,"aria-controls":y,...s,ref:p,onPointerEnter:h0(t.onPointerEnter,()=>{D.current=!1,A.wasEscapeCloseRef.current=!1}),onPointerMove:h0(t.onPointerMove,ci(()=>{l||D.current||A.wasEscapeCloseRef.current||m.current||(c.onTriggerEnter(A.value),m.current=!0)})),onPointerLeave:h0(t.onPointerLeave,ci(()=>{l||(c.onTriggerLeave(),m.current=!1)})),onClick:h0(t.onClick,()=>{c.onItemSelect(A.value),D.current=v}),onKeyDown:h0(t.onKeyDown,w=>{const B={horizontal:"ArrowDown",vertical:c.dir==="rtl"?"ArrowLeft":"ArrowRight"}[c.orientation];v&&w.key===B&&(A.onEntryKeyDown(),w.preventDefault())})})})}),v&&C.jsxs(C.Fragment,{children:[C.jsx(rB,{"aria-hidden":!0,tabIndex:0,ref:A.focusProxyRef,onFocus:w=>{const x=A.contentRef.current,B=w.relatedTarget,b=B===f.current,R=x==null?void 0:x.contains(B);(b||!R)&&A.onFocusProxyEnter(b?"start":"end")}}),c.viewport&&C.jsx("span",{"aria-owns":y})]})]})});gy.displayName=Yu;var AB="NavigationMenuLink",em="navigationMenu.linkSelect",Dy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,active:l,onSelect:s,...c}=t;return C.jsx(Fy,{asChild:!0,children:C.jsx(E0.a,{"data-active":l?"":void 0,"aria-current":l?"page":void 0,...c,ref:n,onClick:h0(t.onClick,A=>{const f=A.target,p=new CustomEvent(em,{bubbles:!0,cancelable:!0});if(f.addEventListener(em,h=>s==null?void 0:s(h),{once:!0}),li(f,p),!p.defaultPrevented&&!A.metaKey){const h=new CustomEvent(ri,{bubbles:!0,cancelable:!0});li(f,h)}},{checkForDefaultPrevented:!1})})})});Dy.displayName=AB;var LA="NavigationMenuIndicator",fB=g.forwardRef((t,n)=>{const{forceMount:a,...l}=t,s=Se(LA,t.__scopeNavigationMenu),c=!!s.value;return s.indicatorTrack?fC.createPortal(C.jsx(j2,{present:a||c,children:C.jsx(dB,{...l,ref:n})}),s.indicatorTrack):null});fB.displayName=LA;var dB=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,...l}=t,s=Se(LA,a),c=Ay(a),[A,f]=g.useState(null),[p,h]=g.useState(null),y=s.orientation==="horizontal",m=!!s.value;g.useEffect(()=>{var x;const w=(x=c().find(B=>B.value===s.value))==null?void 0:x.ref.current;w&&f(w)},[c,s.value]);const D=()=>{A&&h({size:y?A.offsetWidth:A.offsetHeight,offset:y?A.offsetLeft:A.offsetTop})};return Zu(A,D),Zu(s.indicatorTrack,D),p?C.jsx(E0.div,{"aria-hidden":!0,"data-state":m?"visible":"hidden","data-orientation":s.orientation,...l,ref:n,style:{position:"absolute",...y?{left:0,width:p.size+"px",transform:`translateX(${p.offset}px)`}:{top:0,height:p.size+"px",transform:`translateY(${p.offset}px)`},...l.style}}):null}),Pn="NavigationMenuContent",vy=g.forwardRef((t,n)=>{const{forceMount:a,...l}=t,s=Se(Pn,t.__scopeNavigationMenu),c=Cy(Pn,t.__scopeNavigationMenu),A=o2(c.contentRef,n),f=c.value===s.value,p={value:c.value,triggerRef:c.triggerRef,focusProxyRef:c.focusProxyRef,wasEscapeCloseRef:c.wasEscapeCloseRef,onContentFocusOutside:c.onContentFocusOutside,onRootContentClose:c.onRootContentClose,...l};return s.viewport?C.jsx(hB,{forceMount:a,...p,ref:A}):C.jsx(j2,{present:a||f,children:C.jsx(xy,{"data-state":UA(f),...p,ref:A,onPointerEnter:h0(t.onPointerEnter,s.onContentEnter),onPointerLeave:h0(t.onPointerLeave,ci(s.onContentLeave)),style:{pointerEvents:!f&&s.isRootMenu?"none":void 0,...p.style}})})});vy.displayName=Pn;var hB=g.forwardRef((t,n)=>{const a=Se(Pn,t.__scopeNavigationMenu),{onViewportContentChange:l,onViewportContentRemove:s}=a;return Be(()=>{l(t.value,{ref:n,...t})},[t,n,l]),Be(()=>()=>s(t.value),[t.value,s]),null}),ri="navigationMenu.rootContentDismiss",xy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,value:l,triggerRef:s,focusProxyRef:c,wasEscapeCloseRef:A,onRootContentClose:f,onContentFocusOutside:p,...h}=t,y=Se(Pn,a),m=g.useRef(null),D=o2(m,n),v=By(y.baseId,l),w=by(y.baseId,l),x=Ay(a),B=g.useRef(null),{onItemDismiss:b}=y;g.useEffect(()=>{const N=m.current;if(y.isRootMenu&&N){const _=()=>{var T;b(),f(),N.contains(document.activeElement)&&((T=s.current)==null||T.focus())};return N.addEventListener(ri,_),()=>N.removeEventListener(ri,_)}},[y.isRootMenu,t.value,s,b,f]);const R=g.useMemo(()=>{const _=x().map(n0=>n0.value);y.dir==="rtl"&&_.reverse();const T=_.indexOf(y.value),E=_.indexOf(y.previousValue),O=l===y.value,U=E===_.indexOf(l);if(!O&&!U)return B.current;const H=(()=>{if(T!==E){if(O&&E!==-1)return T>E?"from-end":"from-start";if(U&&T!==-1)return T>E?"to-start":"to-end"}return null})();return B.current=H,H},[y.previousValue,y.value,y.dir,x,l]);return C.jsx(wy,{asChild:!0,children:C.jsx(ca,{id:w,"aria-labelledby":v,"data-motion":R,"data-orientation":y.orientation,...h,ref:D,disableOutsidePointerEvents:!1,onDismiss:()=>{var _;const N=new Event(ri,{bubbles:!0,cancelable:!0});(_=m.current)==null||_.dispatchEvent(N)},onFocusOutside:h0(t.onFocusOutside,N=>{var T;p();const _=N.target;(T=y.rootNavigationMenu)!=null&&T.contains(_)&&N.preventDefault()}),onPointerDownOutside:h0(t.onPointerDownOutside,N=>{var O;const _=N.target,T=x().some(U=>{var H;return(H=U.ref.current)==null?void 0:H.contains(_)}),E=y.isRootMenu&&((O=y.viewport)==null?void 0:O.contains(_));(T||E||!y.isRootMenu)&&N.preventDefault()}),onKeyDown:h0(t.onKeyDown,N=>{var E;const _=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!_){const O=Ku(N.currentTarget),U=document.activeElement,H=O.findIndex(l0=>l0===U),u0=N.shiftKey?O.slice(0,H).reverse():O.slice(H+1,O.length);IA(u0)?N.preventDefault():(E=c.current)==null||E.focus()}}),onEscapeKeyDown:h0(t.onEscapeKeyDown,N=>{A.current=!0})})})}),jA="NavigationMenuViewport",pB=g.forwardRef((t,n)=>{const{forceMount:a,...l}=t,c=!!Se(jA,t.__scopeNavigationMenu).value;return C.jsx(j2,{present:a||c,children:C.jsx(mB,{...l,ref:n})})});pB.displayName=jA;var mB=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,children:l,...s}=t,c=Se(jA,a),A=o2(n,c.onViewportChange),f=sB(Pn,t.__scopeNavigationMenu),[p,h]=g.useState(null),[y,m]=g.useState(null),D=p?(p==null?void 0:p.width)+"px":void 0,v=p?(p==null?void 0:p.height)+"px":void 0,w=!!c.value,x=w?c.value:c.previousValue;return Zu(y,()=>{y&&h({width:y.offsetWidth,height:y.offsetHeight})}),C.jsx(E0.div,{"data-state":UA(w),"data-orientation":c.orientation,...s,ref:A,style:{pointerEvents:!w&&c.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":D,"--radix-navigation-menu-viewport-height":v,...s.style},onPointerEnter:h0(t.onPointerEnter,c.onContentEnter),onPointerLeave:h0(t.onPointerLeave,ci(c.onContentLeave)),children:Array.from(f.items).map(([b,{ref:R,forceMount:N,..._}])=>{const T=x===b;return C.jsx(j2,{present:N||T,children:C.jsx(xy,{..._,ref:sa(R,E=>{T&&E&&m(E)})})},b)})})}),CB="FocusGroup",wy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,...l}=t,s=Se(CB,a);return C.jsx(qu.Provider,{scope:a,children:C.jsx(qu.Slot,{scope:a,children:C.jsx(E0.div,{dir:s.dir,...l,ref:n})})})}),tm=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],yB="FocusGroupItem",Fy=g.forwardRef((t,n)=>{const{__scopeNavigationMenu:a,...l}=t,s=oB(a),c=Se(yB,a);return C.jsx(qu.ItemSlot,{scope:a,children:C.jsx(E0.button,{...l,ref:n,onKeyDown:h0(t.onKeyDown,A=>{if(["Home","End",...tm].includes(A.key)){let p=s().map(m=>m.ref.current);if([c.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(A.key)&&p.reverse(),tm.includes(A.key)){const m=p.indexOf(A.currentTarget);p=p.slice(m+1)}setTimeout(()=>IA(p)),A.preventDefault()}})})})});function Ku(t){const n=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const s=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||s?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)n.push(a.currentNode);return n}function IA(t){const n=document.activeElement;return t.some(a=>a===n?!0:(a.focus(),document.activeElement!==n))}function gB(t){return t.forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")}),()=>{t.forEach(n=>{const a=n.dataset.tabindex;n.setAttribute("tabindex",a)})}}function Zu(t,n){const a=L2(n);Be(()=>{let l=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(a)});return s.observe(t),()=>{window.cancelAnimationFrame(l),s.unobserve(t)}}},[t,a])}function UA(t){return t?"open":"closed"}function By(t,n){return`${t}-trigger-${n}`}function by(t,n){return`${t}-content-${n}`}function ci(t){return n=>n.pointerType==="mouse"?t(n):void 0}var DB=fy,vB=py,xB=yy,wB=gy,FB=Dy,BB=vy,bB="vocs_NavigationMenu",NB="vocs_NavigationMenu_list",SB="vocs_NavigationMenu_link",RB="vocs_NavigationMenu_item",EB="var(--vocs_NavigationMenu_chevronDownIcon)",_B="vocs_NavigationMenu_trigger vocs_NavigationMenu_link",kB="vocs_NavigationMenu_content";const Ny=t=>C.jsx(DB,{...t,className:s0(t.className,bB)}),Sy=t=>C.jsx(vB,{...t,className:s0(t.className,NB)}),Ri=({active:t,children:n,className:a,href:l})=>C.jsx(FB,{asChild:!0,children:C.jsx(Fe,{"data-active":t,className:s0(a,SB),href:l,variant:"styleless",children:n})}),Ry=t=>C.jsx(xB,{...t,className:s0(t.className,RB)}),Ey=({active:t,className:n,...a})=>{const{basePath:l}=m2(),s=l;return C.jsx(wB,{...a,"data-active":t,className:s0(n,_B),style:Me({[EB]:`url(${s}/.vocs/icons/chevron-down.svg)`})})},_y=t=>C.jsx(BB,{...t,className:s0(t.className,kB)});Xu.Curtain=TB;function Xu(){var l;const t=m2(),{showLogo:n,showSidebar:a}=rr();return C.jsxs("div",{className:s0(U5,n&&!a&&z5),children:[C.jsx(I5,{}),n&&C.jsx("div",{className:q5,children:C.jsx("div",{className:G5,children:C.jsx(kn,{to:"/",style:{alignItems:"center",display:"flex",height:"56px",marginTop:"4px"},children:C.jsx(PA,{})})})}),C.jsx("div",{className:Jp}),C.jsx("div",{className:Jp,children:(((l=t.topNav)==null?void 0:l.length)||0)>0&&C.jsx("div",{className:V5,children:C.jsx(PB,{})})})]})}function TB(){return C.jsx("div",{className:H5})}function PB(){const{topNav:t}=m2();if(!t)return null;const{pathname:n}=a2(),a=ia({pathname:n,items:t});return C.jsx(Ny,{delayDuration:0,children:C.jsxs(Sy,{children:[t.map((l,s)=>l.element?Er(l.element):l.link?C.jsx(Ri,{active:a.includes(l.id),className:Qp,href:l.link,children:l.text},s):l.items?C.jsxs(Ry,{className:Qp,children:[C.jsx(Ey,{active:a.includes(l.id),children:l.text}),C.jsx(_y,{className:W5,children:C.jsx(MB,{items:l.items})})]},s):null),C.jsx(bA,{})]})})}function MB({items:t}){const{pathname:n}=a2(),a=ia({pathname:n,items:t});return C.jsx("ul",{children:t==null?void 0:t.map((l,s)=>C.jsx(Ri,{active:a.includes(l.id),href:l.link,children:l.text},s))})}function OB(){const t=tr(),n=m2();return g.useMemo(()=>{const{pattern:a="",text:l="Edit page"}=n.editLink??{};let s="";return typeof a=="function"?s="":t.filePath&&(s=a.replace(/:path/g,t.filePath)),{url:s,text:l}},[n.editLink,t.filePath])}function zA(){const[t,n]=g.useState(!1);return g.useEffect(()=>{n(!0)},[]),t}var LB="vocs_Footer",jB="vocs_Footer_container",IB="vocs_Footer_editLink",UB="vocs_Footer_lastUpdated",zB="vocs_Footer_navigation",rm="vocs_Footer_navigationIcon",WB="vocs_Footer_navigationIcon_left",HB="vocs_Footer_navigationIcon_right",nm="vocs_Footer_navigationItem",VB="vocs_Footer_navigationItem_left",GB="vocs_Footer_navigationItem_right",om="vocs_Footer_navigationText",am="vocs_Footer_navigationTextInner",Qu="var(--vocs_Icon_size)",qB="vocs_Icon";function W2({className:t,label:n,icon:a,size:l,style:s}){return C.jsx("div",{"aria-label":n,className:s0(qB,t),role:"img",style:{...s,...Me({[Qu]:l})},children:C.jsx(a,{height:l,width:l})})}var $B="vocs_Socials",YB="vocs_Socials_button",KB="vocs_Socials_icon";function ZB(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 127.14 96.36",children:[C.jsx("title",{children:"Discord"}),C.jsx("g",{id:"_2","data-name":" 2",children:C.jsx("g",{id:"Discord_Logos","data-name":"Discord Logos",children:C.jsx("g",{id:"Discord_Logo_-_Large_-_White","data-name":"Discord Logo - Large - White",children:C.jsx("path",{d:"M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z",fill:"currentColor"})})})})]})}function XB(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 98 96",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"GitHub"}),C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"currentColor"})]})}function QB(){return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 50 50",children:[C.jsx("title",{children:"Telegram"}),C.jsx("path",{d:"M25 2c12.703 0 23 10.297 23 23S37.703 48 25 48 2 37.703 2 25 12.297 2 25 2zm7.934 32.375c.423-1.298 2.405-14.234 2.65-16.783.074-.772-.17-1.285-.648-1.514-.578-.278-1.434-.139-2.427.219-1.362.491-18.774 7.884-19.78 8.312-.954.405-1.856.847-1.856 1.487 0 .45.267.703 1.003.966.766.273 2.695.858 3.834 1.172 1.097.303 2.346.04 3.046-.395.742-.461 9.305-6.191 9.92-6.693.614-.502 1.104.141.602.644-.502.502-6.38 6.207-7.155 6.997-.941.959-.273 1.953.358 2.351.721.454 5.906 3.932 6.687 4.49.781.558 1.573.811 2.298.811.725 0 1.107-.955 1.468-2.064z",fill:"currentColor"})]})}function JB(){return C.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Warpcast"}),C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.92028 31.9901H24.0698C28.4371 31.9901 31.9901 28.4373 31.9901 24.0699V7.92053C31.9901 3.55319 28.4371 0.000137329 24.0698 0.000137329H7.92028C3.55304 0.000137329 0 3.55319 0 7.92053V24.0699C0 28.4373 3.55304 31.9901 7.92028 31.9901ZM19.4134 16.048L20.9908 10.124H25.1383L21.2924 23.2218H17.7062L15.9951 17.1397L14.284 23.2218H10.7055L6.85115 10.124H10.999L12.5915 16.0916L14.1891 10.124H17.8309L19.4134 16.048Z",fill:"currentColor"})]})}function eb(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 1200 1227",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"X"}),C.jsx("path",{d:"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z",fill:"currentColor"})]})}const tb={discord:ZB,github:XB,telegram:QB,warpcast:JB,x:eb},rb={discord:"18px",github:"17px",telegram:"17px",warpcast:"17px",x:"16px"};function WA(){const t=m2();return!t.socials||t.socials.length===0?null:C.jsx("div",{className:$B,children:t.socials.map((n,a)=>C.jsxs(g.Fragment,{children:[a!==0&&C.jsx("div",{style:{width:"1px",marginTop:Qo[4],marginBottom:Qo[4],backgroundColor:Iu.border}}),C.jsx("a",{className:YB,href:n.link,target:"_blank",rel:"noopener noreferrer",children:C.jsx(W2,{className:KB,label:n.label,icon:tb[n.icon],size:rb[n.icon]||"20px"})})]},a))})}function nb(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Arrow Left"}),C.jsx("path",{d:"M0.325684 29.7461C0.325684 30.8203 0.813963 31.8457 1.69286 32.6758L26.8882 57.8223C27.7671 58.6524 28.7437 59.043 29.7691 59.043C31.9175 59.043 33.5777 57.4317 33.5777 55.2344C33.5777 54.209 33.2359 53.1836 32.5035 52.5L25.7652 45.5176L9.26126 30.6738L8.38236 32.7734L21.3706 33.7012H67.4644C69.7593 33.7012 71.3706 32.041 71.3706 29.7461C71.3706 27.4512 69.7593 25.791 67.4644 25.791H21.3706L8.38236 26.7188L9.26126 28.8672L25.7652 13.9746L32.5035 6.99221C33.2359 6.30861 33.5777 5.28322 33.5777 4.25782C33.5777 2.06052 31.9175 0.449219 29.7691 0.449219C28.7437 0.449219 27.7671 0.839814 26.8882 1.66991L1.69286 26.8164C0.813963 27.6465 0.325684 28.6719 0.325684 29.7461Z",fill:"currentColor"})]})}function ob(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Arrow Right"}),C.jsx("path",{d:"M71.3706 29.7461C71.3706 28.6719 70.8824 27.6465 70.0035 26.8164L44.8081 1.66991C43.9292 0.839814 42.9527 0.449219 41.9273 0.449219C39.7789 0.449219 38.1187 2.06052 38.1187 4.25782C38.1187 5.28322 38.4605 6.30861 39.1929 6.99221L45.9312 13.9746L62.4351 28.8672L63.314 26.7188L50.3257 25.791H4.23196C1.93706 25.791 0.325684 27.4512 0.325684 29.7461C0.325684 32.041 1.93706 33.7012 4.23196 33.7012H50.3257L63.314 32.7734L62.4351 30.6738L45.9312 45.5176L39.1929 52.5C38.4605 53.1836 38.1187 54.209 38.1187 55.2344C38.1187 57.4317 39.7789 59.043 41.9273 59.043C42.9527 59.043 43.9292 58.6524 44.8081 57.8223L70.0035 32.6758C70.8824 31.8457 71.3706 30.8203 71.3706 29.7461Z",fill:"currentColor"})]})}function ab(){const{layout:t}=rr(),n=zA(),a=tr(),l=g.useMemo(()=>a.lastUpdatedAt?new Date(a.lastUpdatedAt):void 0,[a.lastUpdatedAt]),s=g.useMemo(()=>l==null?void 0:l.toISOString(),[l]);return C.jsxs("footer",{className:LB,"data-layout":t,children:[t==="docs"&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:jB,children:[C.jsx(lb,{}),n&&a.lastUpdatedAt&&C.jsxs("div",{className:UB,children:["Last updated:"," ",C.jsx("time",{dateTime:s,children:new Intl.DateTimeFormat(void 0,{dateStyle:"short",timeStyle:"short"}).format(l)})]})]}),C.jsx(ib,{})]}),t!=="docs"&&C.jsx(WA,{}),C.jsx(mw,{})]})}function lb(){const t=OB();return t.url?C.jsx("div",{children:C.jsxs(Fe,{className:IB,href:t.url,children:[C.jsx(fw,{})," ",t.text]})}):null}function ib(){const t=zA(),n=wi(),{pathname:a}=a2(),l=g.useMemo(()=>ky(n.items||[]).filter(p=>p.link),[n]),s=g.useMemo(()=>l.findIndex(p=>p.link===a),[l,a]),[c,A]=g.useMemo(()=>s<0?[]:s===0?[null,l[s+1]]:s===l.length-1?[l[s-1],null]:[l[s-1],l[s+1]],[s,l]),f=CA();return g.useEffect(()=>{let p=s,h=!1;const y=D=>{if(D.code==="ShiftLeft"&&(h=!0),h){const v=l[p+1],w=l[p-1];D.code==="ArrowRight"&&(v!=null&&v.link)&&(!v.link.match(/^(\.*\/|#)/)?window.open(v.link,"noopener,noreferrer"):f(v.link),p++),D.code==="ArrowLeft"&&(w!=null&&w.link)&&(!w.link.match(/^(\.*\/|#)/)?window.open(w.link,"noopener,noreferrer"):f(w.link),p--)}},m=D=>{D.code==="ShiftLeft"&&(h=!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",m),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",m)}},[]),t?C.jsxs("div",{className:zB,children:[c?C.jsxs(Fe,{className:s0(nm,VB),href:c.link,variant:"styleless",children:[C.jsxs("div",{className:om,children:[C.jsx("div",{className:s0(rm,WB),style:Me({[Qu]:"0.75em"}),children:C.jsx(W2,{label:"Previous",icon:nb})}),C.jsx("div",{className:am,children:c.text})]}),C.jsx(Sn,{description:"Previous",keys:["shift",""]})]}):C.jsx("div",{}),A?C.jsxs(Fe,{className:s0(nm,GB),href:A.link,variant:"styleless",children:[C.jsxs("div",{className:om,children:[C.jsx("div",{className:am,style:{textAlign:"right"},children:A.text}),C.jsx("div",{className:s0(rm,HB),style:Me({[Qu]:"0.75em"}),children:C.jsx(W2,{label:"Next",icon:ob})})]}),C.jsx(Sn,{description:"Next",keys:["shift",""]})]}):C.jsx("div",{})]}):null}function ky(t){const n=[];for(const a of t)a.link&&n.push(a),a.items&&n.push(...ky(a.items));return n}var Ei="Collapsible",[sb,Ty]=Oe(Ei),[cb,HA]=sb(Ei),Py=g.forwardRef((t,n)=>{const{__scopeCollapsible:a,open:l,defaultOpen:s,disabled:c,onOpenChange:A,...f}=t,[p,h]=Qe({prop:l,defaultProp:s??!1,onChange:A,caller:Ei});return C.jsx(cb,{scope:a,disabled:c,contentId:xe(),open:p,onOpenToggle:g.useCallback(()=>h(y=>!y),[h]),children:C.jsx(E0.div,{"data-state":GA(p),"data-disabled":c?"":void 0,...f,ref:n})})});Py.displayName=Ei;var My="CollapsibleTrigger",Oy=g.forwardRef((t,n)=>{const{__scopeCollapsible:a,...l}=t,s=HA(My,a);return C.jsx(E0.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":GA(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...l,ref:n,onClick:h0(t.onClick,s.onOpenToggle)})});Oy.displayName=My;var VA="CollapsibleContent",Ly=g.forwardRef((t,n)=>{const{forceMount:a,...l}=t,s=HA(VA,t.__scopeCollapsible);return C.jsx(j2,{present:a||s.open,children:({present:c})=>C.jsx(ub,{...l,ref:n,present:c})})});Ly.displayName=VA;var ub=g.forwardRef((t,n)=>{const{__scopeCollapsible:a,present:l,children:s,...c}=t,A=HA(VA,a),[f,p]=g.useState(l),h=g.useRef(null),y=o2(n,h),m=g.useRef(0),D=m.current,v=g.useRef(0),w=v.current,x=A.open||f,B=g.useRef(x),b=g.useRef(void 0);return g.useEffect(()=>{const R=requestAnimationFrame(()=>B.current=!1);return()=>cancelAnimationFrame(R)},[]),Be(()=>{const R=h.current;if(R){b.current=b.current||{transitionDuration:R.style.transitionDuration,animationName:R.style.animationName},R.style.transitionDuration="0s",R.style.animationName="none";const N=R.getBoundingClientRect();m.current=N.height,v.current=N.width,B.current||(R.style.transitionDuration=b.current.transitionDuration,R.style.animationName=b.current.animationName),p(l)}},[A.open,l]),C.jsx(E0.div,{"data-state":GA(A.open),"data-disabled":A.disabled?"":void 0,id:A.contentId,hidden:!x,...c,ref:y,style:{"--radix-collapsible-content-height":D?`${D}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:x&&s})});function GA(t){return t?"open":"closed"}var Ab=Py,fb=Oy,db=Ly,je="Accordion",hb=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[qA,pb,mb]=Aa(je),[_i,G8]=Oe(je,[mb,Ty]),$A=Ty(),jy=n2.forwardRef((t,n)=>{const{type:a,...l}=t,s=l,c=l;return C.jsx(qA.Provider,{scope:t.__scopeAccordion,children:a==="multiple"?C.jsx(Db,{...c,ref:n}):C.jsx(gb,{...s,ref:n})})});jy.displayName=je;var[Iy,Cb]=_i(je),[Uy,yb]=_i(je,{collapsible:!1}),gb=n2.forwardRef((t,n)=>{const{value:a,defaultValue:l,onValueChange:s=()=>{},collapsible:c=!1,...A}=t,[f,p]=Qe({prop:a,defaultProp:l??"",onChange:s,caller:je});return C.jsx(Iy,{scope:t.__scopeAccordion,value:n2.useMemo(()=>f?[f]:[],[f]),onItemOpen:p,onItemClose:n2.useCallback(()=>c&&p(""),[c,p]),children:C.jsx(Uy,{scope:t.__scopeAccordion,collapsible:c,children:C.jsx(zy,{...A,ref:n})})})}),Db=n2.forwardRef((t,n)=>{const{value:a,defaultValue:l,onValueChange:s=()=>{},...c}=t,[A,f]=Qe({prop:a,defaultProp:l??[],onChange:s,caller:je}),p=n2.useCallback(y=>f((m=[])=>[...m,y]),[f]),h=n2.useCallback(y=>f((m=[])=>m.filter(D=>D!==y)),[f]);return C.jsx(Iy,{scope:t.__scopeAccordion,value:A,onItemOpen:p,onItemClose:h,children:C.jsx(Uy,{scope:t.__scopeAccordion,collapsible:!0,children:C.jsx(zy,{...c,ref:n})})})}),[vb,ki]=_i(je),zy=n2.forwardRef((t,n)=>{const{__scopeAccordion:a,disabled:l,dir:s,orientation:c="vertical",...A}=t,f=n2.useRef(null),p=o2(f,n),h=pb(a),m=ua(s)==="ltr",D=h0(t.onKeyDown,v=>{var U;if(!hb.includes(v.key))return;const w=v.target,x=h().filter(H=>{var n0;return!((n0=H.ref.current)!=null&&n0.disabled)}),B=x.findIndex(H=>H.ref.current===w),b=x.length;if(B===-1)return;v.preventDefault();let R=B;const N=0,_=b-1,T=()=>{R=B+1,R>_&&(R=N)},E=()=>{R=B-1,R<N&&(R=_)};switch(v.key){case"Home":R=N;break;case"End":R=_;break;case"ArrowRight":c==="horizontal"&&(m?T():E());break;case"ArrowDown":c==="vertical"&&T();break;case"ArrowLeft":c==="horizontal"&&(m?E():T());break;case"ArrowUp":c==="vertical"&&E();break}const O=R%b;(U=x[O].ref.current)==null||U.focus()});return C.jsx(vb,{scope:a,disabled:l,direction:s,orientation:c,children:C.jsx(qA.Slot,{scope:a,children:C.jsx(E0.div,{...A,"data-orientation":c,ref:p,onKeyDown:l?void 0:D})})})}),ui="AccordionItem",[xb,YA]=_i(ui),Wy=n2.forwardRef((t,n)=>{const{__scopeAccordion:a,value:l,...s}=t,c=ki(ui,a),A=Cb(ui,a),f=$A(a),p=xe(),h=l&&A.value.includes(l)||!1,y=c.disabled||t.disabled;return C.jsx(xb,{scope:a,open:h,disabled:y,triggerId:p,children:C.jsx(Ab,{"data-orientation":c.orientation,"data-state":$y(h),...f,...s,ref:n,disabled:y,open:h,onOpenChange:m=>{m?A.onItemOpen(l):A.onItemClose(l)}})})});Wy.displayName=ui;var Hy="AccordionHeader",wb=n2.forwardRef((t,n)=>{const{__scopeAccordion:a,...l}=t,s=ki(je,a),c=YA(Hy,a);return C.jsx(E0.h3,{"data-orientation":s.orientation,"data-state":$y(c.open),"data-disabled":c.disabled?"":void 0,...l,ref:n})});wb.displayName=Hy;var Ju="AccordionTrigger",Vy=n2.forwardRef((t,n)=>{const{__scopeAccordion:a,...l}=t,s=ki(je,a),c=YA(Ju,a),A=yb(Ju,a),f=$A(a);return C.jsx(qA.ItemSlot,{scope:a,children:C.jsx(fb,{"aria-disabled":c.open&&!A.collapsible||void 0,"data-orientation":s.orientation,id:c.triggerId,...f,...l,ref:n})})});Vy.displayName=Ju;var Gy="AccordionContent",qy=n2.forwardRef((t,n)=>{const{__scopeAccordion:a,...l}=t,s=ki(je,a),c=YA(Gy,a),A=$A(a);return C.jsx(db,{role:"region","aria-labelledby":c.triggerId,"data-orientation":s.orientation,...A,...l,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});qy.displayName=Gy;function $y(t){return t?"open":"closed"}var Fb=jy,Bb=Wy,bb=Vy,Nb=qy,Sb="vocs_MobileSearch_searchButton";function Rb(){const[t,n]=g.useState(!1);return C.jsxs(ZC,{open:t,onOpenChange:n,children:[C.jsx(XC,{asChild:!0,children:C.jsx("button",{className:Sb,type:"button","aria-label":"Search",children:C.jsx(BA,{height:21,width:21})})}),C.jsx(cy,{open:t,onClose:()=>n(!1)})]})}var Eb="vocs_MobileTopNav",_b="vocs_MobileTopNav_content",kb="vocs_MobileTopNav_curtain",lm="vocs_MobileTopNav_curtainGroup",Du="vocs_MobileTopNav_curtainItem",vu="vocs_MobileTopNav_group",Tb="vocs_MobileTopNav_item",Pb="vocs_MobileTopNav_logo",Yy="vocs_MobileTopNav_menuTrigger",Mb="vocs_MobileTopNav_menuTitle",Ob="vocs_MobileTopNav_navigation_compact",Ky="vocs_MobileTopNav_navigation",Lb="vocs_MobileTopNav_navigationContent",Vl="vocs_MobileTopNav_navigationItem",jb="var(--vocs_MobileTopNav_chevronDownIcon)",Ib="var(--vocs_MobileTopNav_chevronUpIcon)",Ub="vocs_MobileTopNav_trigger",im="vocs_MobileTopNav_outlineTrigger",zb="vocs_MobileTopNav_outlinePopover",sm="vocs_MobileTopNav_section",Wb="vocs_MobileTopNav_separator",Hb="vocs_MobileTopNav_sidebarPopover",Vb="vocs_MobileTopNav_topNavPopover",Gb="vocs_MobileTopNav_topNavPopoverFooter";function qb(t,n){let a=!1;return()=>{a=!0,setTimeout(()=>{a&&t(),a=!1},n)}}function $b(t){const[n,a]=g.useState(void 0);return Be(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const l=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const c=s[0];let A,f;if("borderBoxSize"in c){const p=c.borderBoxSize,h=Array.isArray(p)?p[0]:p;A=h.inlineSize,f=h.blockSize}else A=t.offsetWidth,f=t.offsetHeight;a({width:A,height:f})});return l.observe(t,{box:"border-box"}),()=>l.unobserve(t)}else a(void 0)},[t]),n}const Yb=["top","right","bottom","left"],Qt=Math.min,ie=Math.max,Ai=Math.round,Gl=Math.floor,Ze=t=>({x:t,y:t}),Kb={left:"right",right:"left",bottom:"top",top:"bottom"},Zb={start:"end",end:"start"};function eA(t,n,a){return ie(t,Qt(n,a))}function vt(t,n){return typeof t=="function"?t(n):t}function xt(t){return t.split("-")[0]}function zn(t){return t.split("-")[1]}function KA(t){return t==="x"?"y":"x"}function ZA(t){return t==="y"?"height":"width"}const Xb=new Set(["top","bottom"]);function Ye(t){return Xb.has(xt(t))?"y":"x"}function XA(t){return KA(Ye(t))}function Qb(t,n,a){a===void 0&&(a=!1);const l=zn(t),s=XA(t),c=ZA(s);let A=s==="x"?l===(a?"end":"start")?"right":"left":l==="start"?"bottom":"top";return n.reference[c]>n.floating[c]&&(A=fi(A)),[A,fi(A)]}function Jb(t){const n=fi(t);return[tA(t),n,tA(n)]}function tA(t){return t.replace(/start|end/g,n=>Zb[n])}const cm=["left","right"],um=["right","left"],eN=["top","bottom"],tN=["bottom","top"];function rN(t,n,a){switch(t){case"top":case"bottom":return a?n?um:cm:n?cm:um;case"left":case"right":return n?eN:tN;default:return[]}}function nN(t,n,a,l){const s=zn(t);let c=rN(xt(t),a==="start",l);return s&&(c=c.map(A=>A+"-"+s),n&&(c=c.concat(c.map(tA)))),c}function fi(t){return t.replace(/left|right|bottom|top/g,n=>Kb[n])}function oN(t){return{top:0,right:0,bottom:0,left:0,...t}}function Zy(t){return typeof t!="number"?oN(t):{top:t,right:t,bottom:t,left:t}}function di(t){const{x:n,y:a,width:l,height:s}=t;return{width:l,height:s,top:a,left:n,right:n+l,bottom:a+s,x:n,y:a}}function Am(t,n,a){let{reference:l,floating:s}=t;const c=Ye(n),A=XA(n),f=ZA(A),p=xt(n),h=c==="y",y=l.x+l.width/2-s.width/2,m=l.y+l.height/2-s.height/2,D=l[f]/2-s[f]/2;let v;switch(p){case"top":v={x:y,y:l.y-s.height};break;case"bottom":v={x:y,y:l.y+l.height};break;case"right":v={x:l.x+l.width,y:m};break;case"left":v={x:l.x-s.width,y:m};break;default:v={x:l.x,y:l.y}}switch(zn(n)){case"start":v[A]-=D*(a&&h?-1:1);break;case"end":v[A]+=D*(a&&h?-1:1);break}return v}const aN=async(t,n,a)=>{const{placement:l="bottom",strategy:s="absolute",middleware:c=[],platform:A}=a,f=c.filter(Boolean),p=await(A.isRTL==null?void 0:A.isRTL(n));let h=await A.getElementRects({reference:t,floating:n,strategy:s}),{x:y,y:m}=Am(h,l,p),D=l,v={},w=0;for(let x=0;x<f.length;x++){const{name:B,fn:b}=f[x],{x:R,y:N,data:_,reset:T}=await b({x:y,y:m,initialPlacement:l,placement:D,strategy:s,middlewareData:v,rects:h,platform:A,elements:{reference:t,floating:n}});y=R??y,m=N??m,v={...v,[B]:{...v[B],..._}},T&&w<=50&&(w++,typeof T=="object"&&(T.placement&&(D=T.placement),T.rects&&(h=T.rects===!0?await A.getElementRects({reference:t,floating:n,strategy:s}):T.rects),{x:y,y:m}=Am(h,D,p)),x=-1)}return{x:y,y:m,placement:D,strategy:s,middlewareData:v}};async function ra(t,n){var a;n===void 0&&(n={});const{x:l,y:s,platform:c,rects:A,elements:f,strategy:p}=t,{boundary:h="clippingAncestors",rootBoundary:y="viewport",elementContext:m="floating",altBoundary:D=!1,padding:v=0}=vt(n,t),w=Zy(v),B=f[D?m==="floating"?"reference":"floating":m],b=di(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(B)))==null||a?B:B.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:h,rootBoundary:y,strategy:p})),R=m==="floating"?{x:l,y:s,width:A.floating.width,height:A.floating.height}:A.reference,N=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),_=await(c.isElement==null?void 0:c.isElement(N))?await(c.getScale==null?void 0:c.getScale(N))||{x:1,y:1}:{x:1,y:1},T=di(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:R,offsetParent:N,strategy:p}):R);return{top:(b.top-T.top+w.top)/_.y,bottom:(T.bottom-b.bottom+w.bottom)/_.y,left:(b.left-T.left+w.left)/_.x,right:(T.right-b.right+w.right)/_.x}}const lN=t=>({name:"arrow",options:t,async fn(n){const{x:a,y:l,placement:s,rects:c,platform:A,elements:f,middlewareData:p}=n,{element:h,padding:y=0}=vt(t,n)||{};if(h==null)return{};const m=Zy(y),D={x:a,y:l},v=XA(s),w=ZA(v),x=await A.getDimensions(h),B=v==="y",b=B?"top":"left",R=B?"bottom":"right",N=B?"clientHeight":"clientWidth",_=c.reference[w]+c.reference[v]-D[v]-c.floating[w],T=D[v]-c.reference[v],E=await(A.getOffsetParent==null?void 0:A.getOffsetParent(h));let O=E?E[N]:0;(!O||!await(A.isElement==null?void 0:A.isElement(E)))&&(O=f.floating[N]||c.floating[w]);const U=_/2-T/2,H=O/2-x[w]/2-1,n0=Qt(m[b],H),u0=Qt(m[R],H),l0=n0,i0=O-x[w]-u0,q=O/2-x[w]/2+U,A0=eA(l0,q,i0),L=!p.arrow&&zn(s)!=null&&q!==A0&&c.reference[w]/2-(q<l0?n0:u0)-x[w]/2<0,G=L?q<l0?q-l0:q-i0:0;return{[v]:D[v]+G,data:{[v]:A0,centerOffset:q-A0-G,...L&&{alignmentOffset:G}},reset:L}}}),iN=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(n){var a,l;const{placement:s,middlewareData:c,rects:A,initialPlacement:f,platform:p,elements:h}=n,{mainAxis:y=!0,crossAxis:m=!0,fallbackPlacements:D,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:x=!0,...B}=vt(t,n);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const b=xt(s),R=Ye(f),N=xt(f)===f,_=await(p.isRTL==null?void 0:p.isRTL(h.floating)),T=D||(N||!x?[fi(f)]:Jb(f)),E=w!=="none";!D&&E&&T.push(...nN(f,x,w,_));const O=[f,...T],U=await ra(n,B),H=[];let n0=((l=c.flip)==null?void 0:l.overflows)||[];if(y&&H.push(U[b]),m){const q=Qb(s,A,_);H.push(U[q[0]],U[q[1]])}if(n0=[...n0,{placement:s,overflows:H}],!H.every(q=>q<=0)){var u0,l0;const q=(((u0=c.flip)==null?void 0:u0.index)||0)+1,A0=O[q];if(A0&&(!(m==="alignment"?R!==Ye(A0):!1)||n0.every(X=>Ye(X.placement)===R?X.overflows[0]>0:!0)))return{data:{index:q,overflows:n0},reset:{placement:A0}};let L=(l0=n0.filter(G=>G.overflows[0]<=0).sort((G,X)=>G.overflows[1]-X.overflows[1])[0])==null?void 0:l0.placement;if(!L)switch(v){case"bestFit":{var i0;const G=(i0=n0.filter(X=>{if(E){const K=Ye(X.placement);return K===R||K==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(K=>K>0).reduce((K,k)=>K+k,0)]).sort((X,K)=>X[1]-K[1])[0])==null?void 0:i0[0];G&&(L=G);break}case"initialPlacement":L=f;break}if(s!==L)return{reset:{placement:L}}}return{}}}};function fm(t,n){return{top:t.top-n.height,right:t.right-n.width,bottom:t.bottom-n.height,left:t.left-n.width}}function dm(t){return Yb.some(n=>t[n]>=0)}const sN=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(n){const{rects:a}=n,{strategy:l="referenceHidden",...s}=vt(t,n);switch(l){case"referenceHidden":{const c=await ra(n,{...s,elementContext:"reference"}),A=fm(c,a.reference);return{data:{referenceHiddenOffsets:A,referenceHidden:dm(A)}}}case"escaped":{const c=await ra(n,{...s,altBoundary:!0}),A=fm(c,a.floating);return{data:{escapedOffsets:A,escaped:dm(A)}}}default:return{}}}}},Xy=new Set(["left","top"]);async function cN(t,n){const{placement:a,platform:l,elements:s}=t,c=await(l.isRTL==null?void 0:l.isRTL(s.floating)),A=xt(a),f=zn(a),p=Ye(a)==="y",h=Xy.has(A)?-1:1,y=c&&p?-1:1,m=vt(n,t);let{mainAxis:D,crossAxis:v,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return f&&typeof w=="number"&&(v=f==="end"?w*-1:w),p?{x:v*y,y:D*h}:{x:D*h,y:v*y}}const uN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(n){var a,l;const{x:s,y:c,placement:A,middlewareData:f}=n,p=await cN(n,t);return A===((a=f.offset)==null?void 0:a.placement)&&(l=f.arrow)!=null&&l.alignmentOffset?{}:{x:s+p.x,y:c+p.y,data:{...p,placement:A}}}}},AN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(n){const{x:a,y:l,placement:s}=n,{mainAxis:c=!0,crossAxis:A=!1,limiter:f={fn:B=>{let{x:b,y:R}=B;return{x:b,y:R}}},...p}=vt(t,n),h={x:a,y:l},y=await ra(n,p),m=Ye(xt(s)),D=KA(m);let v=h[D],w=h[m];if(c){const B=D==="y"?"top":"left",b=D==="y"?"bottom":"right",R=v+y[B],N=v-y[b];v=eA(R,v,N)}if(A){const B=m==="y"?"top":"left",b=m==="y"?"bottom":"right",R=w+y[B],N=w-y[b];w=eA(R,w,N)}const x=f.fn({...n,[D]:v,[m]:w});return{...x,data:{x:x.x-a,y:x.y-l,enabled:{[D]:c,[m]:A}}}}}},fN=function(t){return t===void 0&&(t={}),{options:t,fn(n){const{x:a,y:l,placement:s,rects:c,middlewareData:A}=n,{offset:f=0,mainAxis:p=!0,crossAxis:h=!0}=vt(t,n),y={x:a,y:l},m=Ye(s),D=KA(m);let v=y[D],w=y[m];const x=vt(f,n),B=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(p){const N=D==="y"?"height":"width",_=c.reference[D]-c.floating[N]+B.mainAxis,T=c.reference[D]+c.reference[N]-B.mainAxis;v<_?v=_:v>T&&(v=T)}if(h){var b,R;const N=D==="y"?"width":"height",_=Xy.has(xt(s)),T=c.reference[m]-c.floating[N]+(_&&((b=A.offset)==null?void 0:b[m])||0)+(_?0:B.crossAxis),E=c.reference[m]+c.reference[N]+(_?0:((R=A.offset)==null?void 0:R[m])||0)-(_?B.crossAxis:0);w<T?w=T:w>E&&(w=E)}return{[D]:v,[m]:w}}}},dN=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(n){var a,l;const{placement:s,rects:c,platform:A,elements:f}=n,{apply:p=()=>{},...h}=vt(t,n),y=await ra(n,h),m=xt(s),D=zn(s),v=Ye(s)==="y",{width:w,height:x}=c.floating;let B,b;m==="top"||m==="bottom"?(B=m,b=D===(await(A.isRTL==null?void 0:A.isRTL(f.floating))?"start":"end")?"left":"right"):(b=m,B=D==="end"?"top":"bottom");const R=x-y.top-y.bottom,N=w-y.left-y.right,_=Qt(x-y[B],R),T=Qt(w-y[b],N),E=!n.middlewareData.shift;let O=_,U=T;if((a=n.middlewareData.shift)!=null&&a.enabled.x&&(U=N),(l=n.middlewareData.shift)!=null&&l.enabled.y&&(O=R),E&&!D){const n0=ie(y.left,0),u0=ie(y.right,0),l0=ie(y.top,0),i0=ie(y.bottom,0);v?U=w-2*(n0!==0||u0!==0?n0+u0:ie(y.left,y.right)):O=x-2*(l0!==0||i0!==0?l0+i0:ie(y.top,y.bottom))}await p({...n,availableWidth:U,availableHeight:O});const H=await A.getDimensions(f.floating);return w!==H.width||x!==H.height?{reset:{rects:!0}}:{}}}};function Ti(){return typeof window<"u"}function Wn(t){return Qy(t)?(t.nodeName||"").toLowerCase():"#document"}function se(t){var n;return(t==null||(n=t.ownerDocument)==null?void 0:n.defaultView)||window}function Je(t){var n;return(n=(Qy(t)?t.ownerDocument:t.document)||window.document)==null?void 0:n.documentElement}function Qy(t){return Ti()?t instanceof Node||t instanceof se(t).Node:!1}function S2(t){return Ti()?t instanceof Element||t instanceof se(t).Element:!1}function Xe(t){return Ti()?t instanceof HTMLElement||t instanceof se(t).HTMLElement:!1}function hi(t){return!Ti()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof se(t).ShadowRoot}const hN=new Set(["inline","contents"]);function fa(t){const{overflow:n,overflowX:a,overflowY:l,display:s}=be(t);return/auto|scroll|overlay|hidden|clip/.test(n+l+a)&&!hN.has(s)}const pN=new Set(["table","td","th"]);function mN(t){return pN.has(Wn(t))}const CN=[":popover-open",":modal"];function Pi(t){return CN.some(n=>{try{return t.matches(n)}catch{return!1}})}const yN=["transform","translate","scale","rotate","perspective"],gN=["transform","translate","scale","rotate","perspective","filter"],DN=["paint","layout","strict","content"];function QA(t){const n=JA(),a=S2(t)?be(t):t;return yN.some(l=>a[l]?a[l]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!n&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!n&&(a.filter?a.filter!=="none":!1)||gN.some(l=>(a.willChange||"").includes(l))||DN.some(l=>(a.contain||"").includes(l))}function vN(t){let n=Jt(t);for(;Xe(n)&&!Mn(n);){if(QA(n))return n;if(Pi(n))return null;n=Jt(n)}return null}function JA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xN=new Set(["html","body","#document"]);function Mn(t){return xN.has(Wn(t))}function be(t){return se(t).getComputedStyle(t)}function Mi(t){return S2(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Jt(t){if(Wn(t)==="html")return t;const n=t.assignedSlot||t.parentNode||hi(t)&&t.host||Je(t);return hi(n)?n.host:n}function Jy(t){const n=Jt(t);return Mn(n)?t.ownerDocument?t.ownerDocument.body:t.body:Xe(n)&&fa(n)?n:Jy(n)}function na(t,n,a){var l;n===void 0&&(n=[]),a===void 0&&(a=!0);const s=Jy(t),c=s===((l=t.ownerDocument)==null?void 0:l.body),A=se(s);if(c){const f=rA(A);return n.concat(A,A.visualViewport||[],fa(s)?s:[],f&&a?na(f):[])}return n.concat(s,na(s,[],a))}function rA(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function eg(t){const n=be(t);let a=parseFloat(n.width)||0,l=parseFloat(n.height)||0;const s=Xe(t),c=s?t.offsetWidth:a,A=s?t.offsetHeight:l,f=Ai(a)!==c||Ai(l)!==A;return f&&(a=c,l=A),{width:a,height:l,$:f}}function ef(t){return S2(t)?t:t.contextElement}function _n(t){const n=ef(t);if(!Xe(n))return Ze(1);const a=n.getBoundingClientRect(),{width:l,height:s,$:c}=eg(n);let A=(c?Ai(a.width):a.width)/l,f=(c?Ai(a.height):a.height)/s;return(!A||!Number.isFinite(A))&&(A=1),(!f||!Number.isFinite(f))&&(f=1),{x:A,y:f}}const wN=Ze(0);function tg(t){const n=se(t);return!JA()||!n.visualViewport?wN:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function FN(t,n,a){return n===void 0&&(n=!1),!a||n&&a!==se(t)?!1:n}function kr(t,n,a,l){n===void 0&&(n=!1),a===void 0&&(a=!1);const s=t.getBoundingClientRect(),c=ef(t);let A=Ze(1);n&&(l?S2(l)&&(A=_n(l)):A=_n(t));const f=FN(c,a,l)?tg(c):Ze(0);let p=(s.left+f.x)/A.x,h=(s.top+f.y)/A.y,y=s.width/A.x,m=s.height/A.y;if(c){const D=se(c),v=l&&S2(l)?se(l):l;let w=D,x=rA(w);for(;x&&l&&v!==w;){const B=_n(x),b=x.getBoundingClientRect(),R=be(x),N=b.left+(x.clientLeft+parseFloat(R.paddingLeft))*B.x,_=b.top+(x.clientTop+parseFloat(R.paddingTop))*B.y;p*=B.x,h*=B.y,y*=B.x,m*=B.y,p+=N,h+=_,w=se(x),x=rA(w)}}return di({width:y,height:m,x:p,y:h})}function tf(t,n){const a=Mi(t).scrollLeft;return n?n.left+a:kr(Je(t)).left+a}function rg(t,n,a){a===void 0&&(a=!1);const l=t.getBoundingClientRect(),s=l.left+n.scrollLeft-(a?0:tf(t,l)),c=l.top+n.scrollTop;return{x:s,y:c}}function BN(t){let{elements:n,rect:a,offsetParent:l,strategy:s}=t;const c=s==="fixed",A=Je(l),f=n?Pi(n.floating):!1;if(l===A||f&&c)return a;let p={scrollLeft:0,scrollTop:0},h=Ze(1);const y=Ze(0),m=Xe(l);if((m||!m&&!c)&&((Wn(l)!=="body"||fa(A))&&(p=Mi(l)),Xe(l))){const v=kr(l);h=_n(l),y.x=v.x+l.clientLeft,y.y=v.y+l.clientTop}const D=A&&!m&&!c?rg(A,p,!0):Ze(0);return{width:a.width*h.x,height:a.height*h.y,x:a.x*h.x-p.scrollLeft*h.x+y.x+D.x,y:a.y*h.y-p.scrollTop*h.y+y.y+D.y}}function bN(t){return Array.from(t.getClientRects())}function NN(t){const n=Je(t),a=Mi(t),l=t.ownerDocument.body,s=ie(n.scrollWidth,n.clientWidth,l.scrollWidth,l.clientWidth),c=ie(n.scrollHeight,n.clientHeight,l.scrollHeight,l.clientHeight);let A=-a.scrollLeft+tf(t);const f=-a.scrollTop;return be(l).direction==="rtl"&&(A+=ie(n.clientWidth,l.clientWidth)-s),{width:s,height:c,x:A,y:f}}function SN(t,n){const a=se(t),l=Je(t),s=a.visualViewport;let c=l.clientWidth,A=l.clientHeight,f=0,p=0;if(s){c=s.width,A=s.height;const h=JA();(!h||h&&n==="fixed")&&(f=s.offsetLeft,p=s.offsetTop)}return{width:c,height:A,x:f,y:p}}const RN=new Set(["absolute","fixed"]);function EN(t,n){const a=kr(t,!0,n==="fixed"),l=a.top+t.clientTop,s=a.left+t.clientLeft,c=Xe(t)?_n(t):Ze(1),A=t.clientWidth*c.x,f=t.clientHeight*c.y,p=s*c.x,h=l*c.y;return{width:A,height:f,x:p,y:h}}function hm(t,n,a){let l;if(n==="viewport")l=SN(t,a);else if(n==="document")l=NN(Je(t));else if(S2(n))l=EN(n,a);else{const s=tg(t);l={x:n.x-s.x,y:n.y-s.y,width:n.width,height:n.height}}return di(l)}function ng(t,n){const a=Jt(t);return a===n||!S2(a)||Mn(a)?!1:be(a).position==="fixed"||ng(a,n)}function _N(t,n){const a=n.get(t);if(a)return a;let l=na(t,[],!1).filter(f=>S2(f)&&Wn(f)!=="body"),s=null;const c=be(t).position==="fixed";let A=c?Jt(t):t;for(;S2(A)&&!Mn(A);){const f=be(A),p=QA(A);!p&&f.position==="fixed"&&(s=null),(c?!p&&!s:!p&&f.position==="static"&&!!s&&RN.has(s.position)||fa(A)&&!p&&ng(t,A))?l=l.filter(y=>y!==A):s=f,A=Jt(A)}return n.set(t,l),l}function kN(t){let{element:n,boundary:a,rootBoundary:l,strategy:s}=t;const A=[...a==="clippingAncestors"?Pi(n)?[]:_N(n,this._c):[].concat(a),l],f=A[0],p=A.reduce((h,y)=>{const m=hm(n,y,s);return h.top=ie(m.top,h.top),h.right=Qt(m.right,h.right),h.bottom=Qt(m.bottom,h.bottom),h.left=ie(m.left,h.left),h},hm(n,f,s));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function TN(t){const{width:n,height:a}=eg(t);return{width:n,height:a}}function PN(t,n,a){const l=Xe(n),s=Je(n),c=a==="fixed",A=kr(t,!0,c,n);let f={scrollLeft:0,scrollTop:0};const p=Ze(0);function h(){p.x=tf(s)}if(l||!l&&!c)if((Wn(n)!=="body"||fa(s))&&(f=Mi(n)),l){const v=kr(n,!0,c,n);p.x=v.x+n.clientLeft,p.y=v.y+n.clientTop}else s&&h();c&&!l&&s&&h();const y=s&&!l&&!c?rg(s,f):Ze(0),m=A.left+f.scrollLeft-p.x-y.x,D=A.top+f.scrollTop-p.y-y.y;return{x:m,y:D,width:A.width,height:A.height}}function xu(t){return be(t).position==="static"}function pm(t,n){if(!Xe(t)||be(t).position==="fixed")return null;if(n)return n(t);let a=t.offsetParent;return Je(t)===a&&(a=a.ownerDocument.body),a}function og(t,n){const a=se(t);if(Pi(t))return a;if(!Xe(t)){let s=Jt(t);for(;s&&!Mn(s);){if(S2(s)&&!xu(s))return s;s=Jt(s)}return a}let l=pm(t,n);for(;l&&mN(l)&&xu(l);)l=pm(l,n);return l&&Mn(l)&&xu(l)&&!QA(l)?a:l||vN(t)||a}const MN=async function(t){const n=this.getOffsetParent||og,a=this.getDimensions,l=await a(t.floating);return{reference:PN(t.reference,await n(t.floating),t.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function ON(t){return be(t).direction==="rtl"}const LN={convertOffsetParentRelativeRectToViewportRelativeRect:BN,getDocumentElement:Je,getClippingRect:kN,getOffsetParent:og,getElementRects:MN,getClientRects:bN,getDimensions:TN,getScale:_n,isElement:S2,isRTL:ON};function ag(t,n){return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}function jN(t,n){let a=null,l;const s=Je(t);function c(){var f;clearTimeout(l),(f=a)==null||f.disconnect(),a=null}function A(f,p){f===void 0&&(f=!1),p===void 0&&(p=1),c();const h=t.getBoundingClientRect(),{left:y,top:m,width:D,height:v}=h;if(f||n(),!D||!v)return;const w=Gl(m),x=Gl(s.clientWidth-(y+D)),B=Gl(s.clientHeight-(m+v)),b=Gl(y),N={rootMargin:-w+"px "+-x+"px "+-B+"px "+-b+"px",threshold:ie(0,Qt(1,p))||1};let _=!0;function T(E){const O=E[0].intersectionRatio;if(O!==p){if(!_)return A();O?A(!1,O):l=setTimeout(()=>{A(!1,1e-7)},1e3)}O===1&&!ag(h,t.getBoundingClientRect())&&A(),_=!1}try{a=new IntersectionObserver(T,{...N,root:s.ownerDocument})}catch{a=new IntersectionObserver(T,N)}a.observe(t)}return A(!0),c}function IN(t,n,a,l){l===void 0&&(l={});const{ancestorScroll:s=!0,ancestorResize:c=!0,elementResize:A=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:p=!1}=l,h=ef(t),y=s||c?[...h?na(h):[],...na(n)]:[];y.forEach(b=>{s&&b.addEventListener("scroll",a,{passive:!0}),c&&b.addEventListener("resize",a)});const m=h&&f?jN(h,a):null;let D=-1,v=null;A&&(v=new ResizeObserver(b=>{let[R]=b;R&&R.target===h&&v&&(v.unobserve(n),cancelAnimationFrame(D),D=requestAnimationFrame(()=>{var N;(N=v)==null||N.observe(n)})),a()}),h&&!p&&v.observe(h),v.observe(n));let w,x=p?kr(t):null;p&&B();function B(){const b=kr(t);x&&!ag(x,b)&&a(),x=b,w=requestAnimationFrame(B)}return a(),()=>{var b;y.forEach(R=>{s&&R.removeEventListener("scroll",a),c&&R.removeEventListener("resize",a)}),m==null||m(),(b=v)==null||b.disconnect(),v=null,p&&cancelAnimationFrame(w)}}const UN=uN,zN=AN,WN=iN,HN=dN,VN=sN,mm=lN,GN=fN,qN=(t,n,a)=>{const l=new Map,s={platform:LN,...a},c={...s.platform,_c:l};return aN(t,n,{...s,platform:c})};var $N=typeof document<"u",YN=function(){},ni=$N?g.useLayoutEffect:YN;function pi(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(typeof t=="function"&&t.toString()===n.toString())return!0;let a,l,s;if(t&&n&&typeof t=="object"){if(Array.isArray(t)){if(a=t.length,a!==n.length)return!1;for(l=a;l--!==0;)if(!pi(t[l],n[l]))return!1;return!0}if(s=Object.keys(t),a=s.length,a!==Object.keys(n).length)return!1;for(l=a;l--!==0;)if(!{}.hasOwnProperty.call(n,s[l]))return!1;for(l=a;l--!==0;){const c=s[l];if(!(c==="_owner"&&t.$$typeof)&&!pi(t[c],n[c]))return!1}return!0}return t!==t&&n!==n}function lg(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cm(t,n){const a=lg(t);return Math.round(n*a)/a}function wu(t){const n=g.useRef(t);return ni(()=>{n.current=t}),n}function ig(t){t===void 0&&(t={});const{placement:n="bottom",strategy:a="absolute",middleware:l=[],platform:s,elements:{reference:c,floating:A}={},transform:f=!0,whileElementsMounted:p,open:h}=t,[y,m]=g.useState({x:0,y:0,strategy:a,placement:n,middlewareData:{},isPositioned:!1}),[D,v]=g.useState(l);pi(D,l)||v(l);const[w,x]=g.useState(null),[B,b]=g.useState(null),R=g.useCallback(X=>{X!==E.current&&(E.current=X,x(X))},[]),N=g.useCallback(X=>{X!==O.current&&(O.current=X,b(X))},[]),_=c||w,T=A||B,E=g.useRef(null),O=g.useRef(null),U=g.useRef(y),H=p!=null,n0=wu(p),u0=wu(s),l0=wu(h),i0=g.useCallback(()=>{if(!E.current||!O.current)return;const X={placement:n,strategy:a,middleware:D};u0.current&&(X.platform=u0.current),qN(E.current,O.current,X).then(K=>{const k={...K,isPositioned:l0.current!==!1};q.current&&!pi(U.current,k)&&(U.current=k,wA.flushSync(()=>{m(k)}))})},[D,n,a,u0,l0]);ni(()=>{h===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,m(X=>({...X,isPositioned:!1})))},[h]);const q=g.useRef(!1);ni(()=>(q.current=!0,()=>{q.current=!1}),[]),ni(()=>{if(_&&(E.current=_),T&&(O.current=T),_&&T){if(n0.current)return n0.current(_,T,i0);i0()}},[_,T,i0,n0,H]);const A0=g.useMemo(()=>({reference:E,floating:O,setReference:R,setFloating:N}),[R,N]),L=g.useMemo(()=>({reference:_,floating:T}),[_,T]),G=g.useMemo(()=>{const X={position:a,left:0,top:0};if(!L.floating)return X;const K=Cm(L.floating,y.x),k=Cm(L.floating,y.y);return f?{...X,transform:"translate("+K+"px, "+k+"px)",...lg(L.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:K,top:k}},[a,f,L.floating,y.x,y.y]);return g.useMemo(()=>({...y,update:i0,refs:A0,elements:L,floatingStyles:G}),[y,i0,A0,L,G])}const KN=t=>{function n(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:t,fn(a){const{element:l,padding:s}=typeof t=="function"?t(a):t;return l&&n(l)?l.current!=null?mm({element:l.current,padding:s}).fn(a):{}:l?mm({element:l,padding:s}).fn(a):{}}}},sg=(t,n)=>({...UN(t),options:[t,n]}),cg=(t,n)=>({...zN(t),options:[t,n]}),ZN=(t,n)=>({...GN(t),options:[t,n]}),XN=(t,n)=>({...WN(t),options:[t,n]}),QN=(t,n)=>({...HN(t),options:[t,n]}),JN=(t,n)=>({...VN(t),options:[t,n]}),ug=(t,n)=>({...KN(t),options:[t,n]});var eS="Arrow",Ag=g.forwardRef((t,n)=>{const{children:a,width:l=10,height:s=5,...c}=t;return C.jsx(E0.svg,{...c,ref:n,width:l,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?a:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ag.displayName=eS;var tS=Ag,rf="Popper",[fg,Oi]=Oe(rf),[rS,dg]=fg(rf),hg=t=>{const{__scopePopper:n,children:a}=t,[l,s]=g.useState(null);return C.jsx(rS,{scope:n,anchor:l,onAnchorChange:s,children:a})};hg.displayName=rf;var pg="PopperAnchor",mg=g.forwardRef((t,n)=>{const{__scopePopper:a,virtualRef:l,...s}=t,c=dg(pg,a),A=g.useRef(null),f=o2(n,A);return g.useEffect(()=>{c.onAnchorChange((l==null?void 0:l.current)||A.current)}),l?null:C.jsx(E0.div,{...s,ref:f})});mg.displayName=pg;var nf="PopperContent",[nS,oS]=fg(nf),Cg=g.forwardRef((t,n)=>{var $0,b0,T0,W0,u2,P2;const{__scopePopper:a,side:l="bottom",sideOffset:s=0,align:c="center",alignOffset:A=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:h=[],collisionPadding:y=0,sticky:m="partial",hideWhenDetached:D=!1,updatePositionStrategy:v="optimized",onPlaced:w,...x}=t,B=dg(nf,a),[b,R]=g.useState(null),N=o2(n,Re=>R(Re)),[_,T]=g.useState(null),E=$b(_),O=(E==null?void 0:E.width)??0,U=(E==null?void 0:E.height)??0,H=l+(c!=="center"?"-"+c:""),n0=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},u0=Array.isArray(h)?h:[h],l0=u0.length>0,i0={padding:n0,boundary:u0.filter(lS),altBoundary:l0},{refs:q,floatingStyles:A0,placement:L,isPositioned:G,middlewareData:X}=ig({strategy:"fixed",placement:H,whileElementsMounted:(...Re)=>IN(...Re,{animationFrame:v==="always"}),elements:{reference:B.anchor},middleware:[sg({mainAxis:s+U,alignmentAxis:A}),p&&cg({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?ZN():void 0,...i0}),p&&XN({...i0}),QN({...i0,apply:({elements:Re,rects:V2,availableWidth:Hn,availableHeight:Vn})=>{const{width:I2,height:Gn}=V2.reference,et=Re.floating.style;et.setProperty("--radix-popper-available-width",`${Hn}px`),et.setProperty("--radix-popper-available-height",`${Vn}px`),et.setProperty("--radix-popper-anchor-width",`${I2}px`),et.setProperty("--radix-popper-anchor-height",`${Gn}px`)}}),_&&ug({element:_,padding:f}),iS({arrowWidth:O,arrowHeight:U}),D&&JN({strategy:"referenceHidden",...i0})]}),[K,k]=Dg(L),Q=L2(w);Be(()=>{G&&(Q==null||Q())},[G,Q]);const J=($0=X.arrow)==null?void 0:$0.x,r0=(b0=X.arrow)==null?void 0:b0.y,f0=((T0=X.arrow)==null?void 0:T0.centerOffset)!==0,[w0,m0]=g.useState();return Be(()=>{b&&m0(window.getComputedStyle(b).zIndex)},[b]),C.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...A0,transform:G?A0.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:w0,"--radix-popper-transform-origin":[(W0=X.transformOrigin)==null?void 0:W0.x,(u2=X.transformOrigin)==null?void 0:u2.y].join(" "),...((P2=X.hide)==null?void 0:P2.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:C.jsx(nS,{scope:a,placedSide:K,onArrowChange:T,arrowX:J,arrowY:r0,shouldHideArrow:f0,children:C.jsx(E0.div,{"data-side":K,"data-align":k,...x,ref:N,style:{...x.style,animation:G?void 0:"none"}})})})});Cg.displayName=nf;var yg="PopperArrow",aS={top:"bottom",right:"left",bottom:"top",left:"right"},gg=g.forwardRef(function(n,a){const{__scopePopper:l,...s}=n,c=oS(yg,l),A=aS[c.placedSide];return C.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[A]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:C.jsx(tS,{...s,ref:a,style:{...s.style,display:"block"}})})});gg.displayName=yg;function lS(t){return t!==null}var iS=t=>({name:"transformOrigin",options:t,fn(n){var B,b,R;const{placement:a,rects:l,middlewareData:s}=n,A=((B=s.arrow)==null?void 0:B.centerOffset)!==0,f=A?0:t.arrowWidth,p=A?0:t.arrowHeight,[h,y]=Dg(a),m={start:"0%",center:"50%",end:"100%"}[y],D=(((b=s.arrow)==null?void 0:b.x)??0)+f/2,v=(((R=s.arrow)==null?void 0:R.y)??0)+p/2;let w="",x="";return h==="bottom"?(w=A?m:`${D}px`,x=`${-p}px`):h==="top"?(w=A?m:`${D}px`,x=`${l.floating.height+p}px`):h==="right"?(w=`${-p}px`,x=A?m:`${v}px`):h==="left"&&(w=`${l.floating.width+p}px`,x=A?m:`${v}px`),{data:{x:w,y:x}}}});function Dg(t){const[n,a="center"]=t.split("-");return[n,a]}var vg=hg,of=mg,xg=Cg,wg=gg,Fu="rovingFocusGroup.onEntryFocus",sS={bubbles:!1,cancelable:!0},da="RovingFocusGroup",[nA,Fg,cS]=Aa(da),[uS,Li]=Oe(da,[cS]),[AS,fS]=uS(da),Bg=g.forwardRef((t,n)=>C.jsx(nA.Provider,{scope:t.__scopeRovingFocusGroup,children:C.jsx(nA.Slot,{scope:t.__scopeRovingFocusGroup,children:C.jsx(dS,{...t,ref:n})})}));Bg.displayName=da;var dS=g.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:a,orientation:l,loop:s=!1,dir:c,currentTabStopId:A,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:p,onEntryFocus:h,preventScrollOnEntryFocus:y=!1,...m}=t,D=g.useRef(null),v=o2(n,D),w=ua(c),[x,B]=Qe({prop:A,defaultProp:f??null,onChange:p,caller:da}),[b,R]=g.useState(!1),N=L2(h),_=Fg(a),T=g.useRef(!1),[E,O]=g.useState(0);return g.useEffect(()=>{const U=D.current;if(U)return U.addEventListener(Fu,N),()=>U.removeEventListener(Fu,N)},[N]),C.jsx(AS,{scope:a,orientation:l,dir:w,loop:s,currentTabStopId:x,onItemFocus:g.useCallback(U=>B(U),[B]),onItemShiftTab:g.useCallback(()=>R(!0),[]),onFocusableItemAdd:g.useCallback(()=>O(U=>U+1),[]),onFocusableItemRemove:g.useCallback(()=>O(U=>U-1),[]),children:C.jsx(E0.div,{tabIndex:b||E===0?-1:0,"data-orientation":l,...m,ref:v,style:{outline:"none",...t.style},onMouseDown:h0(t.onMouseDown,()=>{T.current=!0}),onFocus:h0(t.onFocus,U=>{const H=!T.current;if(U.target===U.currentTarget&&H&&!b){const n0=new CustomEvent(Fu,sS);if(U.currentTarget.dispatchEvent(n0),!n0.defaultPrevented){const u0=_().filter(L=>L.focusable),l0=u0.find(L=>L.active),i0=u0.find(L=>L.id===x),A0=[l0,i0,...u0].filter(Boolean).map(L=>L.ref.current);Sg(A0,y)}}T.current=!1}),onBlur:h0(t.onBlur,()=>R(!1))})})}),bg="RovingFocusGroupItem",Ng=g.forwardRef((t,n)=>{const{__scopeRovingFocusGroup:a,focusable:l=!0,active:s=!1,tabStopId:c,children:A,...f}=t,p=xe(),h=c||p,y=fS(bg,a),m=y.currentTabStopId===h,D=Fg(a),{onFocusableItemAdd:v,onFocusableItemRemove:w,currentTabStopId:x}=y;return g.useEffect(()=>{if(l)return v(),()=>w()},[l,v,w]),C.jsx(nA.ItemSlot,{scope:a,id:h,focusable:l,active:s,children:C.jsx(E0.span,{tabIndex:m?0:-1,"data-orientation":y.orientation,...f,ref:n,onMouseDown:h0(t.onMouseDown,B=>{l?y.onItemFocus(h):B.preventDefault()}),onFocus:h0(t.onFocus,()=>y.onItemFocus(h)),onKeyDown:h0(t.onKeyDown,B=>{if(B.key==="Tab"&&B.shiftKey){y.onItemShiftTab();return}if(B.target!==B.currentTarget)return;const b=mS(B,y.orientation,y.dir);if(b!==void 0){if(B.metaKey||B.ctrlKey||B.altKey||B.shiftKey)return;B.preventDefault();let N=D().filter(_=>_.focusable).map(_=>_.ref.current);if(b==="last")N.reverse();else if(b==="prev"||b==="next"){b==="prev"&&N.reverse();const _=N.indexOf(B.currentTarget);N=y.loop?CS(N,_+1):N.slice(_+1)}setTimeout(()=>Sg(N))}}),children:typeof A=="function"?A({isCurrentTabStop:m,hasTabStop:x!=null}):A})})});Ng.displayName=bg;var hS={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pS(t,n){return n!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function mS(t,n,a){const l=pS(t.key,a);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return hS[l]}function Sg(t,n=!1){const a=document.activeElement;for(const l of t)if(l===a||(l.focus({preventScroll:n}),document.activeElement!==a))return}function CS(t,n){return t.map((a,l)=>t[(n+l)%t.length])}var Rg=Bg,Eg=Ng,oA=["Enter"," "],yS=["ArrowDown","PageUp","Home"],_g=["ArrowUp","PageDown","End"],gS=[...yS,..._g],DS={ltr:[...oA,"ArrowRight"],rtl:[...oA,"ArrowLeft"]},vS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ha="Menu",[oa,xS,wS]=Aa(ha),[Lr,kg]=Oe(ha,[wS,Oi,Li]),ji=Oi(),Tg=Li(),[FS,jr]=Lr(ha),[BS,pa]=Lr(ha),Pg=t=>{const{__scopeMenu:n,open:a=!1,children:l,dir:s,onOpenChange:c,modal:A=!0}=t,f=ji(n),[p,h]=g.useState(null),y=g.useRef(!1),m=L2(c),D=ua(s);return g.useEffect(()=>{const v=()=>{y.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>y.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),C.jsx(vg,{...f,children:C.jsx(FS,{scope:n,open:a,onOpenChange:m,content:p,onContentChange:h,children:C.jsx(BS,{scope:n,onClose:g.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:y,dir:D,modal:A,children:l})})})};Pg.displayName=ha;var bS="MenuAnchor",af=g.forwardRef((t,n)=>{const{__scopeMenu:a,...l}=t,s=ji(a);return C.jsx(of,{...s,...l,ref:n})});af.displayName=bS;var lf="MenuPortal",[NS,Mg]=Lr(lf,{forceMount:void 0}),Og=t=>{const{__scopeMenu:n,forceMount:a,children:l,container:s}=t,c=jr(lf,n);return C.jsx(NS,{scope:n,forceMount:a,children:C.jsx(j2,{present:a||c.open,children:C.jsx(Bi,{asChild:!0,container:s,children:l})})})};Og.displayName=lf;var we="MenuContent",[SS,sf]=Lr(we),Lg=g.forwardRef((t,n)=>{const a=Mg(we,t.__scopeMenu),{forceMount:l=a.forceMount,...s}=t,c=jr(we,t.__scopeMenu),A=pa(we,t.__scopeMenu);return C.jsx(oa.Provider,{scope:t.__scopeMenu,children:C.jsx(j2,{present:l||c.open,children:C.jsx(oa.Slot,{scope:t.__scopeMenu,children:A.modal?C.jsx(RS,{...s,ref:n}):C.jsx(ES,{...s,ref:n})})})})}),RS=g.forwardRef((t,n)=>{const a=jr(we,t.__scopeMenu),l=g.useRef(null),s=o2(n,l);return g.useEffect(()=>{const c=l.current;if(c)return SA(c)},[]),C.jsx(cf,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:h0(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),ES=g.forwardRef((t,n)=>{const a=jr(we,t.__scopeMenu);return C.jsx(cf,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),_S=Tn("MenuContent.ScrollLock"),cf=g.forwardRef((t,n)=>{const{__scopeMenu:a,loop:l=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:A,disableOutsidePointerEvents:f,onEntryFocus:p,onEscapeKeyDown:h,onPointerDownOutside:y,onFocusOutside:m,onInteractOutside:D,onDismiss:v,disableOutsideScroll:w,...x}=t,B=jr(we,a),b=pa(we,a),R=ji(a),N=Tg(a),_=xS(a),[T,E]=g.useState(null),O=g.useRef(null),U=o2(n,O,B.onContentChange),H=g.useRef(0),n0=g.useRef(""),u0=g.useRef(0),l0=g.useRef(null),i0=g.useRef("right"),q=g.useRef(0),A0=w?Ni:g.Fragment,L=w?{as:_S,allowPinchZoom:!0}:void 0,G=K=>{var $0,b0;const k=n0.current+K,Q=_().filter(T0=>!T0.disabled),J=document.activeElement,r0=($0=Q.find(T0=>T0.ref.current===J))==null?void 0:$0.textValue,f0=Q.map(T0=>T0.textValue),w0=HS(f0,k,r0),m0=(b0=Q.find(T0=>T0.textValue===w0))==null?void 0:b0.ref.current;(function T0(W0){n0.current=W0,window.clearTimeout(H.current),W0!==""&&(H.current=window.setTimeout(()=>T0(""),1e3))})(k),m0&&setTimeout(()=>m0.focus())};g.useEffect(()=>()=>window.clearTimeout(H.current),[]),NA();const X=g.useCallback(K=>{var Q,J;return i0.current===((Q=l0.current)==null?void 0:Q.side)&&GS(K,(J=l0.current)==null?void 0:J.area)},[]);return C.jsx(SS,{scope:a,searchRef:n0,onItemEnter:g.useCallback(K=>{X(K)&&K.preventDefault()},[X]),onItemLeave:g.useCallback(K=>{var k;X(K)||((k=O.current)==null||k.focus(),E(null))},[X]),onTriggerLeave:g.useCallback(K=>{X(K)&&K.preventDefault()},[X]),pointerGraceTimerRef:u0,onPointerGraceIntentChange:g.useCallback(K=>{l0.current=K},[]),children:C.jsx(A0,{...L,children:C.jsx(Fi,{asChild:!0,trapped:s,onMountAutoFocus:h0(c,K=>{var k;K.preventDefault(),(k=O.current)==null||k.focus({preventScroll:!0})}),onUnmountAutoFocus:A,children:C.jsx(ca,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:h,onPointerDownOutside:y,onFocusOutside:m,onInteractOutside:D,onDismiss:v,children:C.jsx(Rg,{asChild:!0,...N,dir:b.dir,orientation:"vertical",loop:l,currentTabStopId:T,onCurrentTabStopIdChange:E,onEntryFocus:h0(p,K=>{b.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(xg,{role:"menu","aria-orientation":"vertical","data-state":Jg(B.open),"data-radix-menu-content":"",dir:b.dir,...R,...x,ref:U,style:{outline:"none",...x.style},onKeyDown:h0(x.onKeyDown,K=>{const Q=K.target.closest("[data-radix-menu-content]")===K.currentTarget,J=K.ctrlKey||K.altKey||K.metaKey,r0=K.key.length===1;Q&&(K.key==="Tab"&&K.preventDefault(),!J&&r0&&G(K.key));const f0=O.current;if(K.target!==f0||!gS.includes(K.key))return;K.preventDefault();const m0=_().filter($0=>!$0.disabled).map($0=>$0.ref.current);_g.includes(K.key)&&m0.reverse(),zS(m0)}),onBlur:h0(t.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(H.current),n0.current="")}),onPointerMove:h0(t.onPointerMove,aa(K=>{const k=K.target,Q=q.current!==K.clientX;if(K.currentTarget.contains(k)&&Q){const J=K.clientX>q.current?"right":"left";i0.current=J,q.current=K.clientX}}))})})})})})})});Lg.displayName=we;var kS="MenuGroup",uf=g.forwardRef((t,n)=>{const{__scopeMenu:a,...l}=t;return C.jsx(E0.div,{role:"group",...l,ref:n})});uf.displayName=kS;var TS="MenuLabel",jg=g.forwardRef((t,n)=>{const{__scopeMenu:a,...l}=t;return C.jsx(E0.div,{...l,ref:n})});jg.displayName=TS;var mi="MenuItem",ym="menu.itemSelect",Ii=g.forwardRef((t,n)=>{const{disabled:a=!1,onSelect:l,...s}=t,c=g.useRef(null),A=pa(mi,t.__scopeMenu),f=sf(mi,t.__scopeMenu),p=o2(n,c),h=g.useRef(!1),y=()=>{const m=c.current;if(!a&&m){const D=new CustomEvent(ym,{bubbles:!0,cancelable:!0});m.addEventListener(ym,v=>l==null?void 0:l(v),{once:!0}),li(m,D),D.defaultPrevented?h.current=!1:A.onClose()}};return C.jsx(Ig,{...s,ref:p,disabled:a,onClick:h0(t.onClick,y),onPointerDown:m=>{var D;(D=t.onPointerDown)==null||D.call(t,m),h.current=!0},onPointerUp:h0(t.onPointerUp,m=>{var D;h.current||(D=m.currentTarget)==null||D.click()}),onKeyDown:h0(t.onKeyDown,m=>{const D=f.searchRef.current!=="";a||D&&m.key===" "||oA.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Ii.displayName=mi;var Ig=g.forwardRef((t,n)=>{const{__scopeMenu:a,disabled:l=!1,textValue:s,...c}=t,A=sf(mi,a),f=Tg(a),p=g.useRef(null),h=o2(n,p),[y,m]=g.useState(!1),[D,v]=g.useState("");return g.useEffect(()=>{const w=p.current;w&&v((w.textContent??"").trim())},[c.children]),C.jsx(oa.ItemSlot,{scope:a,disabled:l,textValue:s??D,children:C.jsx(Eg,{asChild:!0,...f,focusable:!l,children:C.jsx(E0.div,{role:"menuitem","data-highlighted":y?"":void 0,"aria-disabled":l||void 0,"data-disabled":l?"":void 0,...c,ref:h,onPointerMove:h0(t.onPointerMove,aa(w=>{l?A.onItemLeave(w):(A.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:h0(t.onPointerLeave,aa(w=>A.onItemLeave(w))),onFocus:h0(t.onFocus,()=>m(!0)),onBlur:h0(t.onBlur,()=>m(!1))})})})}),PS="MenuCheckboxItem",Ug=g.forwardRef((t,n)=>{const{checked:a=!1,onCheckedChange:l,...s}=t;return C.jsx(Gg,{scope:t.__scopeMenu,checked:a,children:C.jsx(Ii,{role:"menuitemcheckbox","aria-checked":Ci(a)?"mixed":a,...s,ref:n,"data-state":ff(a),onSelect:h0(s.onSelect,()=>l==null?void 0:l(Ci(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Ug.displayName=PS;var zg="MenuRadioGroup",[MS,OS]=Lr(zg,{value:void 0,onValueChange:()=>{}}),Wg=g.forwardRef((t,n)=>{const{value:a,onValueChange:l,...s}=t,c=L2(l);return C.jsx(MS,{scope:t.__scopeMenu,value:a,onValueChange:c,children:C.jsx(uf,{...s,ref:n})})});Wg.displayName=zg;var Hg="MenuRadioItem",Vg=g.forwardRef((t,n)=>{const{value:a,...l}=t,s=OS(Hg,t.__scopeMenu),c=a===s.value;return C.jsx(Gg,{scope:t.__scopeMenu,checked:c,children:C.jsx(Ii,{role:"menuitemradio","aria-checked":c,...l,ref:n,"data-state":ff(c),onSelect:h0(l.onSelect,()=>{var A;return(A=s.onValueChange)==null?void 0:A.call(s,a)},{checkForDefaultPrevented:!1})})})});Vg.displayName=Hg;var Af="MenuItemIndicator",[Gg,LS]=Lr(Af,{checked:!1}),qg=g.forwardRef((t,n)=>{const{__scopeMenu:a,forceMount:l,...s}=t,c=LS(Af,a);return C.jsx(j2,{present:l||Ci(c.checked)||c.checked===!0,children:C.jsx(E0.span,{...s,ref:n,"data-state":ff(c.checked)})})});qg.displayName=Af;var jS="MenuSeparator",$g=g.forwardRef((t,n)=>{const{__scopeMenu:a,...l}=t;return C.jsx(E0.div,{role:"separator","aria-orientation":"horizontal",...l,ref:n})});$g.displayName=jS;var IS="MenuArrow",Yg=g.forwardRef((t,n)=>{const{__scopeMenu:a,...l}=t,s=ji(a);return C.jsx(wg,{...s,...l,ref:n})});Yg.displayName=IS;var US="MenuSub",[q8,Kg]=Lr(US),Ko="MenuSubTrigger",Zg=g.forwardRef((t,n)=>{const a=jr(Ko,t.__scopeMenu),l=pa(Ko,t.__scopeMenu),s=Kg(Ko,t.__scopeMenu),c=sf(Ko,t.__scopeMenu),A=g.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:p}=c,h={__scopeMenu:t.__scopeMenu},y=g.useCallback(()=>{A.current&&window.clearTimeout(A.current),A.current=null},[]);return g.useEffect(()=>y,[y]),g.useEffect(()=>{const m=f.current;return()=>{window.clearTimeout(m),p(null)}},[f,p]),C.jsx(af,{asChild:!0,...h,children:C.jsx(Ig,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":s.contentId,"data-state":Jg(a.open),...t,ref:sa(n,s.onTriggerChange),onClick:m=>{var D;(D=t.onClick)==null||D.call(t,m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:h0(t.onPointerMove,aa(m=>{c.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!a.open&&!A.current&&(c.onPointerGraceIntentChange(null),A.current=window.setTimeout(()=>{a.onOpenChange(!0),y()},100))})),onPointerLeave:h0(t.onPointerLeave,aa(m=>{var v,w;y();const D=(v=a.content)==null?void 0:v.getBoundingClientRect();if(D){const x=(w=a.content)==null?void 0:w.dataset.side,B=x==="right",b=B?-5:5,R=D[B?"left":"right"],N=D[B?"right":"left"];c.onPointerGraceIntentChange({area:[{x:m.clientX+b,y:m.clientY},{x:R,y:D.top},{x:N,y:D.top},{x:N,y:D.bottom},{x:R,y:D.bottom}],side:x}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(m),m.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:h0(t.onKeyDown,m=>{var v;const D=c.searchRef.current!=="";t.disabled||D&&m.key===" "||DS[l.dir].includes(m.key)&&(a.onOpenChange(!0),(v=a.content)==null||v.focus(),m.preventDefault())})})})});Zg.displayName=Ko;var Xg="MenuSubContent",Qg=g.forwardRef((t,n)=>{const a=Mg(we,t.__scopeMenu),{forceMount:l=a.forceMount,...s}=t,c=jr(we,t.__scopeMenu),A=pa(we,t.__scopeMenu),f=Kg(Xg,t.__scopeMenu),p=g.useRef(null),h=o2(n,p);return C.jsx(oa.Provider,{scope:t.__scopeMenu,children:C.jsx(j2,{present:l||c.open,children:C.jsx(oa.Slot,{scope:t.__scopeMenu,children:C.jsx(cf,{id:f.contentId,"aria-labelledby":f.triggerId,...s,ref:h,align:"start",side:A.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:y=>{var m;A.isUsingKeyboardRef.current&&((m=p.current)==null||m.focus()),y.preventDefault()},onCloseAutoFocus:y=>y.preventDefault(),onFocusOutside:h0(t.onFocusOutside,y=>{y.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:h0(t.onEscapeKeyDown,y=>{A.onClose(),y.preventDefault()}),onKeyDown:h0(t.onKeyDown,y=>{var v;const m=y.currentTarget.contains(y.target),D=vS[A.dir].includes(y.key);m&&D&&(c.onOpenChange(!1),(v=f.trigger)==null||v.focus(),y.preventDefault())})})})})})});Qg.displayName=Xg;function Jg(t){return t?"open":"closed"}function Ci(t){return t==="indeterminate"}function ff(t){return Ci(t)?"indeterminate":t?"checked":"unchecked"}function zS(t){const n=document.activeElement;for(const a of t)if(a===n||(a.focus(),document.activeElement!==n))return}function WS(t,n){return t.map((a,l)=>t[(n+l)%t.length])}function HS(t,n,a){const s=n.length>1&&Array.from(n).every(h=>h===n[0])?n[0]:n,c=a?t.indexOf(a):-1;let A=WS(t,Math.max(c,0));s.length===1&&(A=A.filter(h=>h!==a));const p=A.find(h=>h.toLowerCase().startsWith(s.toLowerCase()));return p!==a?p:void 0}function VS(t,n){const{x:a,y:l}=t;let s=!1;for(let c=0,A=n.length-1;c<n.length;A=c++){const f=n[c],p=n[A],h=f.x,y=f.y,m=p.x,D=p.y;y>l!=D>l&&a<(m-h)*(l-y)/(D-y)+h&&(s=!s)}return s}function GS(t,n){if(!n)return!1;const a={x:t.clientX,y:t.clientY};return VS(a,n)}function aa(t){return n=>n.pointerType==="mouse"?t(n):void 0}var qS=Pg,$S=af,YS=Og,KS=Lg,ZS=uf,XS=jg,QS=Ii,JS=Ug,eR=Wg,tR=Vg,rR=qg,nR=$g,oR=Yg,aR=Zg,lR=Qg,Ui="DropdownMenu",[iR,$8]=Oe(Ui,[kg]),H2=kg(),[sR,eD]=iR(Ui),tD=t=>{const{__scopeDropdownMenu:n,children:a,dir:l,open:s,defaultOpen:c,onOpenChange:A,modal:f=!0}=t,p=H2(n),h=g.useRef(null),[y,m]=Qe({prop:s,defaultProp:c??!1,onChange:A,caller:Ui});return C.jsx(sR,{scope:n,triggerId:xe(),triggerRef:h,contentId:xe(),open:y,onOpenChange:m,onOpenToggle:g.useCallback(()=>m(D=>!D),[m]),modal:f,children:C.jsx(qS,{...p,open:y,onOpenChange:m,dir:l,modal:f,children:a})})};tD.displayName=Ui;var rD="DropdownMenuTrigger",nD=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,disabled:l=!1,...s}=t,c=eD(rD,a),A=H2(a);return C.jsx($S,{asChild:!0,...A,children:C.jsx(E0.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":l?"":void 0,disabled:l,...s,ref:sa(n,c.triggerRef),onPointerDown:h0(t.onPointerDown,f=>{!l&&f.button===0&&f.ctrlKey===!1&&(c.onOpenToggle(),c.open||f.preventDefault())}),onKeyDown:h0(t.onKeyDown,f=>{l||(["Enter"," "].includes(f.key)&&c.onOpenToggle(),f.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(f.key)&&f.preventDefault())})})})});nD.displayName=rD;var cR="DropdownMenuPortal",oD=t=>{const{__scopeDropdownMenu:n,...a}=t,l=H2(n);return C.jsx(YS,{...l,...a})};oD.displayName=cR;var aD="DropdownMenuContent",lD=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=eD(aD,a),c=H2(a),A=g.useRef(!1);return C.jsx(KS,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...l,ref:n,onCloseAutoFocus:h0(t.onCloseAutoFocus,f=>{var p;A.current||(p=s.triggerRef.current)==null||p.focus(),A.current=!1,f.preventDefault()}),onInteractOutside:h0(t.onInteractOutside,f=>{const p=f.detail.originalEvent,h=p.button===0&&p.ctrlKey===!0,y=p.button===2||h;(!s.modal||y)&&(A.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lD.displayName=aD;var uR="DropdownMenuGroup",AR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(ZS,{...s,...l,ref:n})});AR.displayName=uR;var fR="DropdownMenuLabel",dR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(XS,{...s,...l,ref:n})});dR.displayName=fR;var hR="DropdownMenuItem",iD=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(QS,{...s,...l,ref:n})});iD.displayName=hR;var pR="DropdownMenuCheckboxItem",mR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(JS,{...s,...l,ref:n})});mR.displayName=pR;var CR="DropdownMenuRadioGroup",yR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(eR,{...s,...l,ref:n})});yR.displayName=CR;var gR="DropdownMenuRadioItem",DR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(tR,{...s,...l,ref:n})});DR.displayName=gR;var vR="DropdownMenuItemIndicator",xR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(rR,{...s,...l,ref:n})});xR.displayName=vR;var wR="DropdownMenuSeparator",FR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(nR,{...s,...l,ref:n})});FR.displayName=wR;var BR="DropdownMenuArrow",bR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(oR,{...s,...l,ref:n})});bR.displayName=BR;var NR="DropdownMenuSubTrigger",SR=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(aR,{...s,...l,ref:n})});SR.displayName=NR;var RR="DropdownMenuSubContent",ER=g.forwardRef((t,n)=>{const{__scopeDropdownMenu:a,...l}=t,s=H2(a);return C.jsx(lR,{...s,...l,ref:n,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ER.displayName=RR;var _R=tD,kR=nD,TR=oD,PR=lD,MR=iD,zi="Popover",[sD,Y8]=Oe(zi,[Oi]),ma=Oi(),[OR,nr]=sD(zi),cD=t=>{const{__scopePopover:n,children:a,open:l,defaultOpen:s,onOpenChange:c,modal:A=!1}=t,f=ma(n),p=g.useRef(null),[h,y]=g.useState(!1),[m,D]=Qe({prop:l,defaultProp:s??!1,onChange:c,caller:zi});return C.jsx(vg,{...f,children:C.jsx(OR,{scope:n,contentId:xe(),triggerRef:p,open:m,onOpenChange:D,onOpenToggle:g.useCallback(()=>D(v=>!v),[D]),hasCustomAnchor:h,onCustomAnchorAdd:g.useCallback(()=>y(!0),[]),onCustomAnchorRemove:g.useCallback(()=>y(!1),[]),modal:A,children:a})})};cD.displayName=zi;var uD="PopoverAnchor",LR=g.forwardRef((t,n)=>{const{__scopePopover:a,...l}=t,s=nr(uD,a),c=ma(a),{onCustomAnchorAdd:A,onCustomAnchorRemove:f}=s;return g.useEffect(()=>(A(),()=>f()),[A,f]),C.jsx(of,{...c,...l,ref:n})});LR.displayName=uD;var AD="PopoverTrigger",fD=g.forwardRef((t,n)=>{const{__scopePopover:a,...l}=t,s=nr(AD,a),c=ma(a),A=o2(n,s.triggerRef),f=C.jsx(E0.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":CD(s.open),...l,ref:A,onClick:h0(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?f:C.jsx(of,{asChild:!0,...c,children:f})});fD.displayName=AD;var df="PopoverPortal",[jR,IR]=sD(df,{forceMount:void 0}),dD=t=>{const{__scopePopover:n,forceMount:a,children:l,container:s}=t,c=nr(df,n);return C.jsx(jR,{scope:n,forceMount:a,children:C.jsx(j2,{present:a||c.open,children:C.jsx(Bi,{asChild:!0,container:s,children:l})})})};dD.displayName=df;var On="PopoverContent",hD=g.forwardRef((t,n)=>{const a=IR(On,t.__scopePopover),{forceMount:l=a.forceMount,...s}=t,c=nr(On,t.__scopePopover);return C.jsx(j2,{present:l||c.open,children:c.modal?C.jsx(zR,{...s,ref:n}):C.jsx(WR,{...s,ref:n})})});hD.displayName=On;var UR=Tn("PopoverContent.RemoveScroll"),zR=g.forwardRef((t,n)=>{const a=nr(On,t.__scopePopover),l=g.useRef(null),s=o2(n,l),c=g.useRef(!1);return g.useEffect(()=>{const A=l.current;if(A)return SA(A)},[]),C.jsx(Ni,{as:UR,allowPinchZoom:!0,children:C.jsx(pD,{...t,ref:s,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:h0(t.onCloseAutoFocus,A=>{var f;A.preventDefault(),c.current||(f=a.triggerRef.current)==null||f.focus()}),onPointerDownOutside:h0(t.onPointerDownOutside,A=>{const f=A.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0,h=f.button===2||p;c.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:h0(t.onFocusOutside,A=>A.preventDefault(),{checkForDefaultPrevented:!1})})})}),WR=g.forwardRef((t,n)=>{const a=nr(On,t.__scopePopover),l=g.useRef(!1),s=g.useRef(!1);return C.jsx(pD,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var A,f;(A=t.onCloseAutoFocus)==null||A.call(t,c),c.defaultPrevented||(l.current||(f=a.triggerRef.current)==null||f.focus(),c.preventDefault()),l.current=!1,s.current=!1},onInteractOutside:c=>{var p,h;(p=t.onInteractOutside)==null||p.call(t,c),c.defaultPrevented||(l.current=!0,c.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const A=c.target;((h=a.triggerRef.current)==null?void 0:h.contains(A))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&s.current&&c.preventDefault()}})}),pD=g.forwardRef((t,n)=>{const{__scopePopover:a,trapFocus:l,onOpenAutoFocus:s,onCloseAutoFocus:c,disableOutsidePointerEvents:A,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:h,onInteractOutside:y,...m}=t,D=nr(On,a),v=ma(a);return NA(),C.jsx(Fi,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:s,onUnmountAutoFocus:c,children:C.jsx(ca,{asChild:!0,disableOutsidePointerEvents:A,onInteractOutside:y,onEscapeKeyDown:f,onPointerDownOutside:p,onFocusOutside:h,onDismiss:()=>D.onOpenChange(!1),children:C.jsx(xg,{"data-state":CD(D.open),role:"dialog",id:D.contentId,...v,...m,ref:n,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mD="PopoverClose",HR=g.forwardRef((t,n)=>{const{__scopePopover:a,...l}=t,s=nr(mD,a);return C.jsx(E0.button,{type:"button",...l,ref:n,onClick:h0(t.onClick,()=>s.onOpenChange(!1))})});HR.displayName=mD;var VR="PopoverArrow",GR=g.forwardRef((t,n)=>{const{__scopePopover:a,...l}=t,s=ma(a);return C.jsx(wg,{...s,...l,ref:n})});GR.displayName=VR;function CD(t){return t?"open":"closed"}var qR=cD,$R=fD,YR=dD,KR=hD,Wi="Tabs",[ZR,K8]=Oe(Wi,[Li]),yD=Li(),[XR,hf]=ZR(Wi),gD=g.forwardRef((t,n)=>{const{__scopeTabs:a,value:l,onValueChange:s,defaultValue:c,orientation:A="horizontal",dir:f,activationMode:p="automatic",...h}=t,y=ua(f),[m,D]=Qe({prop:l,onChange:s,defaultProp:c??"",caller:Wi});return C.jsx(XR,{scope:a,baseId:xe(),value:m,onValueChange:D,orientation:A,dir:y,activationMode:p,children:C.jsx(E0.div,{dir:y,"data-orientation":A,...h,ref:n})})});gD.displayName=Wi;var DD="TabsList",vD=g.forwardRef((t,n)=>{const{__scopeTabs:a,loop:l=!0,...s}=t,c=hf(DD,a),A=yD(a);return C.jsx(Rg,{asChild:!0,...A,orientation:c.orientation,dir:c.dir,loop:l,children:C.jsx(E0.div,{role:"tablist","aria-orientation":c.orientation,...s,ref:n})})});vD.displayName=DD;var xD="TabsTrigger",wD=g.forwardRef((t,n)=>{const{__scopeTabs:a,value:l,disabled:s=!1,...c}=t,A=hf(xD,a),f=yD(a),p=bD(A.baseId,l),h=ND(A.baseId,l),y=l===A.value;return C.jsx(Eg,{asChild:!0,...f,focusable:!s,active:y,children:C.jsx(E0.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":h,"data-state":y?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:p,...c,ref:n,onMouseDown:h0(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?A.onValueChange(l):m.preventDefault()}),onKeyDown:h0(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&A.onValueChange(l)}),onFocus:h0(t.onFocus,()=>{const m=A.activationMode!=="manual";!y&&!s&&m&&A.onValueChange(l)})})})});wD.displayName=xD;var FD="TabsContent",BD=g.forwardRef((t,n)=>{const{__scopeTabs:a,value:l,forceMount:s,children:c,...A}=t,f=hf(FD,a),p=bD(f.baseId,l),h=ND(f.baseId,l),y=l===f.value,m=g.useRef(y);return g.useEffect(()=>{const D=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(D)},[]),C.jsx(j2,{present:s||y,children:({present:D})=>C.jsx(E0.div,{"data-state":y?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":p,hidden:!D,id:h,tabIndex:0,...A,ref:n,style:{...t.style,animationDuration:m.current?"0s":void 0},children:D&&c})})});BD.displayName=FD;function bD(t,n){return`${t}-trigger-${n}`}function ND(t,n){return`${t}-content-${n}`}var QR=gD,JR=vD,eE=wD,tE=BD,rE="vocs_AiCtaDropdown",gm="vocs_AiCtaDropdown_buttonLeft vocs_AiCtaDropdown_button vocs_Button_button",nE="vocs_AiCtaDropdown_buttonRight vocs_AiCtaDropdown_button vocs_Button_button",oE="vocs_AiCtaDropdown_dropdownMenuContent",aE="vocs_AiCtaDropdown_dropdownMenuItem",Bu="vocs_Button_button",Z8="vocs_Button_button_accent";function SD(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Check"}),C.jsx("path",{d:"M7.49991 0.877045C3.84222 0.877045 0.877075 3.84219 0.877075 7.49988C0.877075 11.1575 3.84222 14.1227 7.49991 14.1227C11.1576 14.1227 14.1227 11.1575 14.1227 7.49988C14.1227 3.84219 11.1576 0.877045 7.49991 0.877045ZM1.82708 7.49988C1.82708 4.36686 4.36689 1.82704 7.49991 1.82704C10.6329 1.82704 13.1727 4.36686 13.1727 7.49988C13.1727 10.6329 10.6329 13.1727 7.49991 13.1727C4.36689 13.1727 1.82708 10.6329 1.82708 7.49988ZM10.1589 5.53774C10.3178 5.31191 10.2636 5.00001 10.0378 4.84109C9.81194 4.68217 9.50004 4.73642 9.34112 4.96225L6.51977 8.97154L5.35681 7.78706C5.16334 7.59002 4.84677 7.58711 4.64973 7.78058C4.45268 7.97404 4.44978 8.29061 4.64325 8.48765L6.22658 10.1003C6.33054 10.2062 6.47617 10.2604 6.62407 10.2483C6.77197 10.2363 6.90686 10.1591 6.99226 10.0377L10.1589 5.53774Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function RD(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Chevron Down"}),C.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function ED(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Copy"}),C.jsx("path",{d:"M5 2V1H10V2H5ZM4.75 0C4.33579 0 4 0.335786 4 0.75V1H3.5C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H7V13H3.5C3.22386 13 3 12.7761 3 12.5V2.5C3 2.22386 3.22386 2 3.5 2H4V2.25C4 2.66421 4.33579 3 4.75 3H10.25C10.6642 3 11 2.66421 11 2.25V2H11.5C11.7761 2 12 2.22386 12 2.5V7H13V2.5C13 1.67157 12.3284 1 11.5 1H11V0.75C11 0.335786 10.6642 0 10.25 0H4.75ZM9 8.5C9 8.77614 8.77614 9 8.5 9C8.22386 9 8 8.77614 8 8.5C8 8.22386 8.22386 8 8.5 8C8.77614 8 9 8.22386 9 8.5ZM10.5 9C10.7761 9 11 8.77614 11 8.5C11 8.22386 10.7761 8 10.5 8C10.2239 8 10 8.22386 10 8.5C10 8.77614 10.2239 9 10.5 9ZM13 8.5C13 8.77614 12.7761 9 12.5 9C12.2239 9 12 8.77614 12 8.5C12 8.22386 12.2239 8 12.5 8C12.7761 8 13 8.22386 13 8.5ZM14.5 9C14.7761 9 15 8.77614 15 8.5C15 8.22386 14.7761 8 14.5 8C14.2239 8 14 8.22386 14 8.5C14 8.77614 14.2239 9 14.5 9ZM15 10.5C15 10.7761 14.7761 11 14.5 11C14.2239 11 14 10.7761 14 10.5C14 10.2239 14.2239 10 14.5 10C14.7761 10 15 10.2239 15 10.5ZM14.5 13C14.7761 13 15 12.7761 15 12.5C15 12.2239 14.7761 12 14.5 12C14.2239 12 14 12.2239 14 12.5C14 12.7761 14.2239 13 14.5 13ZM14.5 15C14.7761 15 15 14.7761 15 14.5C15 14.2239 14.7761 14 14.5 14C14.2239 14 14 14.2239 14 14.5C14 14.7761 14.2239 15 14.5 15ZM8.5 11C8.77614 11 9 10.7761 9 10.5C9 10.2239 8.77614 10 8.5 10C8.22386 10 8 10.2239 8 10.5C8 10.7761 8.22386 11 8.5 11ZM9 12.5C9 12.7761 8.77614 13 8.5 13C8.22386 13 8 12.7761 8 12.5C8 12.2239 8.22386 12 8.5 12C8.77614 12 9 12.2239 9 12.5ZM8.5 15C8.77614 15 9 14.7761 9 14.5C9 14.2239 8.77614 14 8.5 14C8.22386 14 8 14.2239 8 14.5C8 14.7761 8.22386 15 8.5 15ZM11 14.5C11 14.7761 10.7761 15 10.5 15C10.2239 15 10 14.7761 10 14.5C10 14.2239 10.2239 14 10.5 14C10.7761 14 11 14.2239 11 14.5ZM12.5 15C12.7761 15 13 14.7761 13 14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5C12 14.7761 12.2239 15 12.5 15Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function lE(){return C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",children:[C.jsx("title",{children:"OpenAI"}),C.jsx("path",{fill:"currentColor",d:"M22.282 9.821a6 6 0 0 0-.516-4.91a6.05 6.05 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a6 6 0 0 0-3.998 2.9a6.05 6.05 0 0 0 .743 7.097a5.98 5.98 0 0 0 .51 4.911a6.05 6.05 0 0 0 6.515 2.9A6 6 0 0 0 13.26 24a6.06 6.06 0 0 0 5.772-4.206a6 6 0 0 0 3.997-2.9a6.06 6.06 0 0 0-.747-7.073M13.26 22.43a4.48 4.48 0 0 1-2.876-1.04l.141-.081l4.779-2.758a.8.8 0 0 0 .392-.681v-6.737l2.02 1.168a.07.07 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494M3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085l4.783 2.759a.77.77 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646M2.34 7.896a4.5 4.5 0 0 1 2.366-1.973V11.6a.77.77 0 0 0 .388.677l5.815 3.354l-2.02 1.168a.08.08 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.08.08 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667m2.01-3.023l-.141-.085l-4.774-2.782a.78.78 0 0 0-.785 0L9.409 9.23V6.897a.07.07 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.8.8 0 0 0-.393.681zm1.097-2.365l2.602-1.5l2.607 1.5v2.999l-2.597 1.5l-2.607-1.5Z"})]})}function iE(){const{content:t}=tr(),{aiCta:n}=m2(),a=a2(),[l,s]=g.useState(!1);g.useEffect(()=>{if(!l)return;const f=setTimeout(()=>s(!1),1e3);return()=>clearTimeout(f)},[l]);const c=g.useCallback(()=>{s(!0),navigator.clipboard.writeText(t??"")},[t]),A=g.useMemo(()=>{const f=window.location.origin+a.pathname;return typeof n=="object"?n.query({location:f}):`Please research and analyze this page: ${f} so I can ask you questions about it. Once you have read it, prompt me with any questions I have. Do not post content from the page in your response. Any of my follow up questions must reference the site I gave you.`},[n,a.pathname]);return C.jsxs("div",{className:rE,children:[l?C.jsxs("div",{className:s0(Bu,gm),children:[C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(SD,{})}),"Copied"]}):C.jsxs(Fe,{className:s0(Bu,gm),href:`https://chatgpt.com?hints=search&q=${encodeURIComponent(A)}`,variant:"styleless",children:[C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(lE,{})}),"Ask in ChatGPT"]}),C.jsxs(_R,{children:[C.jsx(kR,{asChild:!0,children:C.jsx("button",{className:s0(Bu,nE),type:"button",children:C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(RD,{})})})}),C.jsx(TR,{children:C.jsx(PR,{align:"end",className:oE,sideOffset:4,children:C.jsxs(MR,{className:aE,onClick:c,children:[C.jsx("div",{style:{width:"14px",height:"14px"},children:C.jsx(ED,{})}),"Copy page for LLMs"]})})})]})]})}var sE="vocs_Outline",cE="vocs_Outline_nav",uE="vocs_Outline_heading",AE="vocs_Outline_items",fE="vocs_Outline_item",dE="vocs_Outline_link";function _D({minLevel:t=2,maxLevel:n=3,highlightActive:a=!0,onClickItem:l,showTitle:s=!0}={}){const{outlineFooter:c}=m2(),{showOutline:A,showAiCta:f}=rr(),p=typeof A=="number"?t+A-1:n,h=g.useRef(!0),{pathname:y,hash:m}=a2(),[D,v]=g.useState([]);g.useEffect(()=>{if(typeof window>"u")return;const R=Array.from(document.querySelectorAll(`.${yC}`));v(R)},[y]);const w=g.useMemo(()=>D?D.map(R=>{const N=R.querySelector(`.${gC}`);if(!N)return null;const _=N.getBoundingClientRect(),T=N.id,E=Number(R.tagName[1]),O=R.textContent,U=window.scrollY+_.top;return E<t||E>p?null:{id:T,level:E,slugTargetElement:N,text:O,topOffset:U}}).filter(Boolean):[],[D,p,t]),[x,B]=g.useState(m.replace("#",""));if(g.useEffect(()=>{if(typeof window>"u")return;const R=new IntersectionObserver(([N])=>{var T;if(!h.current)return;const _=N.target.id;if(N.isIntersecting)B(_);else{if(!(N.target.getBoundingClientRect().top>0))return;const U=w.findIndex(n0=>n0.id===x),H=(T=w[U-1])==null?void 0:T.id;B(H)}},{rootMargin:"0px 0px -95% 0px"});for(const N of w)R.observe(N.slugTargetElement);return()=>R.disconnect()},[x,w]),g.useEffect(()=>{if(typeof window>"u")return;const R=new IntersectionObserver(([N])=>{var T;if(!h.current)return;const _=(T=w[w.length-1])==null?void 0:T.id;N.isIntersecting?B(_):x===_&&B(w[w.length-2].id)});return R.observe(document.querySelector("[data-bottom-observer]")),()=>R.disconnect()},[x,w]),g.useEffect(()=>{if(typeof window>"u")return;const R=qb(()=>{var N,_,T;if(h.current){if(window.scrollY===0){B((N=w[0])==null?void 0:N.id);return}if(window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight){B((_=w[w.length-1])==null?void 0:_.id);return}for(let E=0;E<w.length;E++){const O=w[E];if(window.scrollY<O.topOffset){B((T=w[E-1])==null?void 0:T.id);break}}}},100);return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[w]),w.length===0)return null;const b=w.filter(R=>R.level===t);return C.jsxs("aside",{className:sE,children:[f&&C.jsx(iE,{}),C.jsxs("nav",{className:cE,children:[s&&C.jsx("h2",{className:uE,children:"On this page"}),C.jsx(kD,{activeId:a?x:null,items:w,onClickItem:()=>{l==null||l(),h.current=!1,setTimeout(()=>{h.current=!0},500)},levelItems:b,setActiveId:B})]}),Er(c)]})}function kD({activeId:t,items:n,levelItems:a,onClickItem:l,setActiveId:s}){return C.jsx("ul",{className:AE,children:a.map(({id:c,level:A,text:f})=>{const p=`#${c}`,h=t===c,y=(()=>{var x;const D=n.findIndex(B=>B.id===c)+1,v=(x=n[D])==null?void 0:x.level;if(v<=A)return null;const w=[];for(let B=D;B<n.length;B++){const b=n[B];if(b.level!==v)break;w.push(b)}return w})();return C.jsxs(g.Fragment,{children:[C.jsx("li",{className:fE,children:C.jsx(In,{"data-active":h,to:p,onClick:()=>{l==null||l(),s(c)},className:dE,children:f})}),y&&C.jsx(kD,{activeId:t,levelItems:y,items:n,onClickItem:l,setActiveId:s})]},c)})})}var hE="vocs_Popover";Pe.Root=qR;Pe.Trigger=$R;function Pe({children:t,className:n}){return C.jsx(YR,{children:C.jsx(KR,{className:s0(hE,n),sideOffset:12,children:t})})}var pE="vocs_Sidebar",mE="vocs_Sidebar_backLink",CE="vocs_Sidebar_divider",yE="vocs_Sidebar_navigation",gE="vocs_Sidebar_group",DE="vocs_Sidebar_logo",vE="vocs_Sidebar_logoWrapper",TD="vocs_Sidebar_section",xE="vocs_Sidebar_level",wE="vocs_Sidebar_levelCollapsed",FE="vocs_Sidebar_levelInset",BE="vocs_Sidebar_footer",bE="vocs_Sidebar_footerContent",NE="vocs_Sidebar_footerCurtain",PD="vocs_Sidebar_items",Zo="vocs_Sidebar_item",ql="vocs_Sidebar_disabledItem",SE="vocs_Sidebar_sectionHeader",RE="vocs_Sidebar_sectionHeaderActive",Dm="vocs_Sidebar_sectionTitle",EE="vocs_Sidebar_sectionTitleLink",_E="vocs_Sidebar_sectionCollapse",kE="vocs_Sidebar_sectionCollapseActive";function TE(){const[t,n]=g.useState(()=>{if(!(typeof window>"u")){if(localStorage.getItem("vocs.theme")){const a=localStorage.getItem("vocs.theme");if(a)return a}return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}});return g.useEffect(()=>{t&&localStorage.setItem("vocs.theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),{setTheme:n,theme:t,toggle(){n(a=>a==="light"?"dark":"light")}}}var PE="vocs_ThemeToggle",vm="vocs_ThemeToggle_themeToggleButton";function ME(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Moon"}),C.jsx("path",{d:"M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89997 1.49998 8.89997C1.72089 8.89997 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.98184L8.24618 0.941586C8.03275 0.917676 7.90692 1.1655 8.02936 1.34194C8.17013 1.54479 8.29981 1.75592 8.41754 1.97445C8.91878 2.90485 9.20322 3.96932 9.20322 5.10022C9.20322 8.37201 6.82247 11.0878 3.69887 11.6097C3.45736 11.65 3.20988 11.6772 2.96008 11.6906C2.74563 11.702 2.62729 11.9535 2.77721 12.1072C2.84551 12.1773 2.91535 12.2458 2.98667 12.3128L3.05883 12.3795L3.31883 12.6045L3.50684 12.7532L3.62796 12.8433L3.81491 12.9742L3.99079 13.089C4.11175 13.1651 4.23536 13.2375 4.36157 13.3059L4.62496 13.4412L4.88553 13.5607L5.18837 13.6828L5.43169 13.7686C5.56564 13.8128 5.70149 13.8529 5.83857 13.8885C5.94262 13.9155 6.04767 13.9401 6.15405 13.9622C6.27993 13.9883 6.40713 14.0109 6.53544 14.0298L6.85241 14.0685L7.11934 14.0892C7.24637 14.0965 7.37436 14.1002 7.50322 14.1002C11.1483 14.1002 14.1032 11.1453 14.1032 7.50023C14.1032 7.25044 14.0893 7.00389 14.0623 6.76131L14.0255 6.48407C13.991 6.26083 13.9453 6.04129 13.8891 5.82642C13.8213 5.56709 13.7382 5.31398 13.6409 5.06881L13.5279 4.80132L13.4507 4.63542L13.3766 4.48666C13.2178 4.17773 13.0353 3.88295 12.8312 3.60423L12.6782 3.40352L12.4793 3.16432L12.3157 2.98361L12.1961 2.85951L12.0355 2.70246L11.8134 2.50184L11.4925 2.24191L11.2483 2.06498L10.9562 1.87446L10.6346 1.68894L10.3073 1.52378L10.1938 1.47176L9.95488 1.3706L9.67791 1.2669L9.42566 1.1846L9.10075 1.09489L8.83599 1.03486L8.54406 0.98184ZM10.4032 5.30023C10.4032 4.27588 10.2002 3.29829 9.83244 2.40604C11.7623 3.28995 13.1032 5.23862 13.1032 7.50023C13.1032 10.593 10.596 13.1002 7.50322 13.1002C6.63646 13.1002 5.81597 12.9036 5.08355 12.5522C6.5419 12.0941 7.81081 11.2082 8.74322 10.0416C8.87963 10.2284 9.10028 10.3497 9.34928 10.3497C9.76349 10.3497 10.0993 10.0139 10.0993 9.59971C10.0993 9.24256 9.84965 8.94373 9.51535 8.86816C9.57741 8.75165 9.63653 8.63334 9.6926 8.51332C9.88358 8.63163 10.1088 8.69993 10.35 8.69993C11.0403 8.69993 11.6 8.14028 11.6 7.44993C11.6 6.75976 11.0406 6.20024 10.3505 6.19993C10.3853 5.90487 10.4032 5.60464 10.4032 5.30023Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function OE(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",children:[C.jsx("title",{children:"Sun"}),C.jsx("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function MD(){const{theme:t,setTheme:n}=TE();return!zA()||!t?null:C.jsxs("div",{className:PE,children:[C.jsx("button",{"data-active":t==="light",type:"button",className:vm,onClick:()=>n("light"),children:C.jsx(W2,{label:"Light Mode",icon:OE,size:"16px"})}),C.jsx("button",{"data-active":t==="dark",type:"button",className:vm,onClick:()=>n("dark"),children:C.jsx(W2,{label:"Dark Mode",icon:ME,size:"16px"})})]})}function OD(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Chevron Right"}),C.jsx("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function LD(t){var y;const{className:n,onClickItem:a}=t,{theme:l}=m2(),{previousPath:s}=tr(),c=g.useRef(null),A=wi(),[f,p]=g.useState("/");if(g.useEffect(()=>{typeof window>"u"||s&&p(s)},[A.key,A.backLink]),!A)return null;const h=LE(A.items);return C.jsxs("aside",{ref:c,className:s0(pE,n),children:[C.jsxs("div",{children:[C.jsxs("div",{className:vE,children:[C.jsx("div",{className:DE,children:C.jsx(kn,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:C.jsx(PA,{})})}),C.jsx("div",{className:CE})]}),C.jsx("nav",{className:yE,children:C.jsxs("div",{className:gE,children:[A.backLink&&C.jsx("section",{className:TD,children:C.jsx("div",{className:PD,children:C.jsxs(kn,{className:s0(Zo,mE),to:f,children:[""," ",typeof history<"u"&&((y=history.state)!=null&&y.key)&&f!=="/"?"Back":"Home"]})})}),h.map((m,D)=>C.jsx(ID,{depth:0,item:m,onClick:a,sidebarRef:c},`${m.text}${D}`))]})})]}),C.jsxs("div",{className:BE,children:[C.jsx("div",{className:NE}),C.jsxs("div",{className:bE,children:[C.jsx(WA,{}),l!=null&&l.colorScheme?null:C.jsx(MD,{})]})]})]},A.key)}function LE(t){const n=[];let a=0;for(const l of t){if(l.items){a=n.push(l);continue}n[a]?n[a].items.push(l):n.push({text:"",items:[l]})}return n}function jD(t,n){return t.find(a=>Rr(n,a.link??"")||a.link===n?!0:a.items?jD(a.items,n):!1)}function ID(t){const{depth:n,item:a,onClick:l,sidebarRef:s}=t,c=g.useRef(null),{pathname:A}=a2(),f=xx(a.link||""),p=g.useMemo(()=>a.items?!!jD(a.items,A):!1,[a.items,A]),[h,y]=g.useState(()=>a.link&&f||!a.items||p?!1:!!a.collapsed),m=a.collapsed!==void 0&&a.items!==void 0,D=g.useCallback(x=>{"key"in x&&x.key!=="Enter"||y(B=>!B)},[]),v=g.useCallback(x=>{"key"in x&&x.key!=="Enter"||y(B=>!B)},[]),w=g.useRef(!0);return g.useEffect(()=>{!w.current||(w.current=!1,!Rr(A,a.link??""))||requestAnimationFrame(()=>{var R,N,_;const B=((R=c.current)==null?void 0:R.offsetTop)??0,b=((N=s==null?void 0:s.current)==null?void 0:N.clientHeight)??0;B<b||(_=s==null?void 0:s.current)==null||_.scrollTo({top:B-100})})},[a,A,s]),a.items?C.jsxs("section",{ref:c,className:s0(TD,n===0&&a.text&&xE,n===0&&a.text&&h&&wE),children:[a.text&&C.jsxs("div",{className:SE,...m&&!a.link?{role:"button",tabIndex:0,onClick:D,onKeyDown:D}:{},children:[a.text&&(a.link?C.jsx(Fe,{"data-active":!!f,onClick:x=>{l==null||l(x),D(x)},className:s0(n===0?[Dm,EE]:Zo,p&&RE,a.disabled&&ql),href:a.link,variant:"styleless",children:a.text}):C.jsx("div",{className:s0(n===0?Dm:Zo,a.disabled&&ql),children:a.text})),m&&C.jsx("div",{role:"button",tabIndex:0,onClick:v,onKeyDown:v,children:C.jsx(W2,{className:s0(_E,h&&kE),label:"toggle section",icon:OD,size:"16px"})})]}),!h&&C.jsx("div",{className:s0(PD,n!==0&&FE),children:a.items&&a.items.length>0&&n<5&&a.items.map((x,B)=>C.jsx(ID,{depth:n+1,item:x,onClick:l,sidebarRef:s},`${x.text}${B}`))})]}):C.jsx(C.Fragment,{children:a.link?C.jsx(Fe,{ref:c,"data-active":!!f,onClick:l,className:s0(Zo,a.disabled&&ql),href:a.link,variant:"styleless",children:a.text}):C.jsx("div",{className:s0(Zo,a.disabled&&ql),children:a.text})})}function jE(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Chevron Up"}),C.jsx("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function UD(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 48",fill:"none",children:[C.jsx("title",{children:"Menu"}),C.jsx("path",{fill:"currentColor",d:"M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"})]})}aA.Curtain=WE;function aA(){const t=m2(),{showLogo:n}=rr();return C.jsxs("div",{className:Eb,children:[C.jsxs("div",{className:sm,children:[n&&C.jsx("div",{className:vu,children:C.jsx("div",{className:Pb,children:C.jsx(kn,{to:"/",style:{alignItems:"center",display:"flex",height:"100%"},children:C.jsx(PA,{})})})}),t.topNav&&C.jsxs("div",{className:vu,children:[C.jsx(IE,{items:t.topNav}),C.jsx(zE,{items:t.topNav})]})]}),C.jsx("div",{className:sm,children:C.jsx("div",{className:vu,style:{marginRight:"-8px"},children:C.jsx(Rb,{})})})]})}function IE({items:t}){const{pathname:n}=a2(),a=ia({pathname:n,items:t});return C.jsx(Ny,{className:Ky,children:C.jsxs(Sy,{children:[t.map((l,s)=>l.element?Er(l.element):l.link?C.jsx(Ri,{active:a==null?void 0:a.includes(l.id),href:l.link,children:l.text},s):C.jsxs(Ry,{className:Tb,children:[C.jsx(Ey,{active:a==null?void 0:a.includes(l.id),children:l.text}),C.jsx(_y,{className:_b,children:C.jsx(UE,{items:l.items||[]})})]},s)),C.jsx(bA,{})]})})}function UE({items:t}){const{pathname:n}=a2(),a=ia({pathname:n,items:t});return C.jsx("ul",{children:t==null?void 0:t.map((l,s)=>C.jsx(Ri,{active:a.includes(l.id),href:l.link,children:l.text},s))})}function zE({items:t}){const[n,a]=g.useState(!1),{showSidebar:l}=rr(),{pathname:s}=a2(),c=ia({pathname:s,items:t}),A=t.filter(y=>y.id===c[0])[0],{basePath:f,theme:p}=m2(),h=f;return C.jsx("div",{className:s0(Ky,Ob),children:C.jsxs(Pe.Root,{modal:!0,open:n,onOpenChange:a,children:[C.jsx(Pe.Trigger,{className:s0(Yy,Vl),children:l||A?C.jsxs(C.Fragment,{children:[(A==null?void 0:A.text)??"Menu",C.jsx(W2,{label:"Menu",icon:RD,size:"16px"})]}):C.jsx(W2,{label:"Menu",icon:UD,size:"16px"})}),C.jsxs(Pe,{className:Vb,children:[C.jsxs(Fb,{type:"single",collapsible:!0,style:{display:"flex",flexDirection:"column"},children:[t.map((y,m)=>{var D;return y.element?Er(y.element):y.link?C.jsx(Fe,{"data-active":c.includes(y.id),className:Vl,href:y.link,onClick:()=>a(!1),variant:"styleless",children:y.text},m):C.jsxs(Bb,{value:m.toString(),children:[C.jsx(bb,{className:s0(Vl,Ub),"data-active":c.includes(y.id),style:Me({[jb]:`url(${h}/.vocs/icons/chevron-down.svg)`,[Ib]:`url(${h}/.vocs/icons/chevron-up.svg)`}),children:y.text}),C.jsx(Nb,{className:Lb,children:(D=y.items)==null?void 0:D.map((v,w)=>C.jsx(Fe,{className:Vl,href:v.link,onClick:()=>a(!1),variant:"styleless",children:v.text},w))})]},m)}),C.jsx(bA,{})]}),C.jsxs("div",{className:Gb,children:[C.jsx(WA,{}),p!=null&&p.colorScheme?null:C.jsx(MD,{})]})]})]})})}function WE({enableScrollToTop:t}){const{pathname:n}=a2(),{layout:a,showSidebar:l}=rr(),{frontmatter:s={}}=tr(),c=wi(),[A,f]=g.useState(!1),[p,h]=g.useState(!1),y=g.useMemo(()=>{if(!c||a==="minimal")return;const v=zD({sidebarItems:c.items,pathname:n});return v==null?void 0:v.text},[a,n,c]),m=g.useMemo(()=>{var v;if(!(typeof window>"u"))return(v=document.querySelector(".vocs_Content h1"))==null?void 0:v.textContent},[]),D=y||s.title||m;return C.jsxs("div",{className:kb,children:[C.jsx("div",{className:lm,children:C.jsx("div",{className:Du,children:l?C.jsxs(Pe.Root,{modal:!0,open:p,onOpenChange:h,children:[C.jsxs(Pe.Trigger,{className:Yy,children:[C.jsx(W2,{label:"Menu",icon:UD,size:"13px"}),C.jsx("div",{className:Mb,children:D})]}),C.jsx(Pe,{className:Hb,children:C.jsx(LD,{onClickItem:()=>h(!1)})})]}):D})}),C.jsxs("div",{className:lm,children:[t&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:Du,children:C.jsxs("button",{className:im,onClick:()=>window.scrollTo({behavior:"smooth",top:0}),type:"button",children:["Top",C.jsx(W2,{label:"Scroll to top",icon:jE,size:"16px"})]})}),C.jsx("div",{className:Wb})]}),a==="docs"&&C.jsx("div",{className:Du,children:C.jsxs(Pe.Root,{modal:!0,open:A,onOpenChange:f,children:[C.jsxs(Pe.Trigger,{className:im,children:["On this page",C.jsx(W2,{label:"On this page",icon:OD,size:"16px"})]}),C.jsx(Pe,{className:zb,children:C.jsx(_D,{onClickItem:()=>f(!1),showTitle:!1})})]})})]})]})}function zD({sidebarItems:t,pathname:n}){const a=n.replace(/(.+)\/$/,"$1");for(const l of t){if((l==null?void 0:l.link)===a)return l;if(l.items){const s=zD({sidebarItems:l.items,pathname:a});if(s)return s}}}var HE="vocs_SkipLink";const WD="vocs-content";function VE(){const{pathname:t}=a2();return C.jsx("a",{className:s0(HE,iy),href:`${t}#${WD}`,children:"Skip to content"})}var GE="vocs_DocsLayout",qE="vocs_DocsLayout_content",$E="vocs_DocsLayout_content_withTopNav",YE="vocs_DocsLayout_content_withSidebar",KE="vocs_DocsLayout_gutterLeft",ZE="vocs_DocsLayout_gutterTop",XE="vocs_DocsLayout_gutterTop_offsetLeftGutter",QE="vocs_DocsLayout_gutterTop_sticky",JE="vocs_DocsLayout_gutterTopCurtain",e4="vocs_DocsLayout_gutterTopCurtain_hidden",t4="vocs_DocsLayout_gutterTopCurtain_withSidebar",r4="vocs_DocsLayout_gutterRight",n4="vocs_DocsLayout_gutterRight_withSidebar",o4="vocs_DocsLayout_sidebar";function lA({children:t}){var v,w;const{banner:n,font:a}=m2(),{frontmatter:l={}}=tr(),{content:s}=l,{layout:c,showOutline:A,showSidebar:f,showTopNav:p}=rr(),{ref:h,inView:y}=CC({initialInView:!0,rootMargin:"100px 0px 0px 0px"}),[m,D]=ly("banner",!0);return C.jsxs("div",{className:GE,"data-layout":c,style:Me({[G1]:m?n==null?void 0:n.height:void 0,[bp.default]:(v=a==null?void 0:a.default)!=null&&v.google?`${a.default.google}, ${Bp.default}`:void 0,[bp.mono]:(w=a==null?void 0:a.mono)!=null&&w.google?`${a.mono.google}, ${Bp.mono}`:void 0}),children:[C.jsx(VE,{}),m&&C.jsx(dw,{hide:()=>D(!1)}),f&&C.jsx("div",{className:KE,children:C.jsx(LD,{className:o4})}),p&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{ref:h,className:s0(ZE,f&&XE,(c==="minimal"||c==="landing")&&QE),children:[C.jsx(Xu,{}),C.jsx(aA,{})]}),C.jsxs("div",{className:s0(JE,f&&t4,(c==="minimal"||c==="landing")&&e4),children:[C.jsx(Xu.Curtain,{}),C.jsx(aA.Curtain,{enableScrollToTop:!y})]})]}),A&&C.jsx("div",{className:s0(r4,f&&n4),children:C.jsx(_D,{})}),C.jsxs("div",{id:WD,className:s0(qE,f&&YE,p&&$E),style:Me({[ou.horizontalPadding]:s==null?void 0:s.horizontalPadding,[ou.width]:s==null?void 0:s.width,[ou.verticalPadding]:s==null?void 0:s.verticalPadding}),children:[C.jsx(xC,{children:t}),C.jsx(ab,{})]}),C.jsx("div",{"data-bottom-observer":!0})]})}const iA={},HD=n2.createContext(iA);function a4(t){const n=n2.useContext(HD);return n2.useMemo(function(){return typeof t=="function"?t(n):{...n,...t}},[n,t])}function l4(t){let n;return t.disableParentContext?n=typeof t.components=="function"?t.components(iA):t.components||iA:n=a4(t.components),n2.createElement(HD.Provider,{value:n},t.children)}var bu="vocs_Anchor",i4="vocs_Autolink";function s4(t){return t.href?C.jsx(In,{...t,className:s0(t.className,i4),to:t.href}):null}function c4(t){const{children:n,href:a}=t,{pathname:l}=a2();return n&&typeof n=="object"&&"props"in n&&n.props["data-autolink-icon"]?C.jsx(s4,{className:s0(t.className,bu),...t}):a!=null&&a.match(/^#/)?C.jsx("a",{className:s0(t.className,bu),...t,href:`${l}${a}`}):C.jsx(Fe,{className:s0(t.className,bu),...t,hideExternalIcon:!0})}var VD="vocs_Callout",GD="vocs_Callout_content",qD="vocs_Callout_icon",u4="vocs_Callout_note",A4="vocs_Callout_info",f4="vocs_Callout_warning",d4="vocs_Callout_danger",h4="vocs_Callout_tip",p4="vocs_Callout_success";const m4=Object.freeze(Object.defineProperty({__proto__:null,content:GD,danger:d4,icon:qD,info:A4,note:u4,root:VD,success:p4,tip:h4,warning:f4},Symbol.toStringTag,{value:"Module"}));function xm(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Exclamation"}),C.jsx("path",{d:"M8.4449 0.608765C8.0183 -0.107015 6.9817 -0.107015 6.55509 0.608766L0.161178 11.3368C-0.275824 12.07 0.252503 13 1.10608 13H13.8939C14.7475 13 15.2758 12.07 14.8388 11.3368L8.4449 0.608765ZM7.4141 1.12073C7.45288 1.05566 7.54712 1.05566 7.5859 1.12073L13.9798 11.8488C14.0196 11.9154 13.9715 12 13.8939 12H1.10608C1.02849 12 0.980454 11.9154 1.02018 11.8488L7.4141 1.12073ZM6.8269 4.48611C6.81221 4.10423 7.11783 3.78663 7.5 3.78663C7.88217 3.78663 8.18778 4.10423 8.1731 4.48612L8.01921 8.48701C8.00848 8.766 7.7792 8.98664 7.5 8.98664C7.2208 8.98664 6.99151 8.766 6.98078 8.48701L6.8269 4.48611ZM8.24989 10.476C8.24989 10.8902 7.9141 11.226 7.49989 11.226C7.08567 11.226 6.74989 10.8902 6.74989 10.476C6.74989 10.0618 7.08567 9.72599 7.49989 9.72599C7.9141 9.72599 8.24989 10.0618 8.24989 10.476Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function wm(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Info"}),C.jsx("path",{d:"M7.49991 0.876892C3.84222 0.876892 0.877075 3.84204 0.877075 7.49972C0.877075 11.1574 3.84222 14.1226 7.49991 14.1226C11.1576 14.1226 14.1227 11.1574 14.1227 7.49972C14.1227 3.84204 11.1576 0.876892 7.49991 0.876892ZM1.82707 7.49972C1.82707 4.36671 4.36689 1.82689 7.49991 1.82689C10.6329 1.82689 13.1727 4.36671 13.1727 7.49972C13.1727 10.6327 10.6329 13.1726 7.49991 13.1726C4.36689 13.1726 1.82707 10.6327 1.82707 7.49972ZM8.24992 4.49999C8.24992 4.9142 7.91413 5.24999 7.49992 5.24999C7.08571 5.24999 6.74992 4.9142 6.74992 4.49999C6.74992 4.08577 7.08571 3.74999 7.49992 3.74999C7.91413 3.74999 8.24992 4.08577 8.24992 4.49999ZM6.00003 5.99999H6.50003H7.50003C7.77618 5.99999 8.00003 6.22384 8.00003 6.49999V9.99999H8.50003H9.00003V11H8.50003H7.50003H6.50003H6.00003V9.99999H6.50003H7.00003V6.99999H6.50003H6.00003V5.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function C4(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"Lightning Bolt"}),C.jsx("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function y4({className:t,children:n,type:a}){return C.jsxs("aside",{className:s0(t,VD,m4[a]),children:[C.jsxs("div",{className:qD,children:[a==="note"&&C.jsx(wm,{}),a==="info"&&C.jsx(wm,{}),a==="warning"&&C.jsx(xm,{}),a==="danger"&&C.jsx(xm,{}),a==="tip"&&C.jsx(C4,{}),a==="success"&&C.jsx(SD,{})]}),C.jsx("div",{className:GD,children:n})]})}var g4="vocs_Aside";function D4(t){const n=s0(t.className,g4);return"data-callout"in t?C.jsx(y4,{className:n,type:t["data-callout"],children:t.children}):C.jsx("aside",{...t,className:n})}var v4="vocs_Blockquote";function x4(t){return C.jsx("blockquote",{...t,className:s0(t.className,v4)})}var w4="vocs_Code";function F4(t){const n=B4(t.children);return C.jsx("code",{...t,className:s0(t.className,w4),children:n})}function B4(t){return Array.isArray(t)?t.map((n,a)=>{var l,s,c;return n.props&&"data-line"in n.props&&typeof n.props.children=="string"&&n.props.children.trim()===""&&((c=(s=(l=t[a+1])==null?void 0:l.props)==null?void 0:s.className)!=null&&c.includes("twoslash-tag-line"))?null:n}).filter(Boolean):t}var b4="vocs_Details";function N4(t){return C.jsx("details",{...t,className:s0(t.className,b4)})}var S4="vocs_Authors",R4="vocs_Authors_authors",E4="vocs_Authors_link",Fm="vocs_Authors_separator";function $D(t){const{frontmatter:n}=tr(),{authors:a=n==null?void 0:n.authors,date:l=n==null?void 0:n.date}=t,s=g.useMemo(()=>{if(a)return Array.isArray(a)?a:a.split(",").map(A=>A.trim())},[a]),c=g.useMemo(()=>l?new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,[l]);return C.jsxs("div",{className:S4,children:[c,s&&(c?" by ":"By "),C.jsx("span",{className:R4,children:s==null?void 0:s.map((A,f)=>{const{text:p,url:h}=_4(A);return C.jsxs(g.Fragment,{children:[h?C.jsx("a",{className:E4,href:h,target:"_blank",rel:"noopener noreferrer",children:p}):p,f<s.length-2&&C.jsx("span",{className:Fm,children:", "}),f<s.length-1&&C.jsx("span",{className:Fm,children:" & "})]},f)})})]})}function _4(t){const n=t.match(/\[(.+)\]\((.+)\)/);return n?{text:n[1],url:n[2]}:{text:t,url:void 0}}const Bm=[];var k4="vocs_BlogPosts",T4="vocs_BlogPosts_description",P4="vocs_BlogPosts_divider",M4="vocs_BlogPosts_post",O4="vocs_BlogPosts_readMore",L4="vocs_BlogPosts_title";function j4(){return C.jsx("div",{className:k4,children:Bm.map((t,n)=>C.jsxs(g.Fragment,{children:[C.jsx("div",{className:M4,children:C.jsxs(kn,{to:t.path,children:[C.jsx("h2",{className:L4,children:t.title}),C.jsx($D,{authors:t.authors,date:t.date}),C.jsxs("p",{className:T4,children:[t.description," ",C.jsx("span",{className:O4,children:"[]"})]})]})}),n<Bm.length-1&&C.jsx("hr",{className:P4})]},n))})}var I4="var(--vocs_Sponsors_columns)",U4="var(--vocs_Sponsors_height)",z4="vocs_Sponsors",W4="vocs_Sponsors_title",H4="vocs_Sponsors_row",V4="vocs_Sponsors_column",G4="vocs_Sponsors_sponsor",q4="vocs_Sponsors_image";function $4(){const{sponsors:t}=m2();return C.jsx("div",{className:z4,children:t==null?void 0:t.map((n,a)=>C.jsxs(g.Fragment,{children:[C.jsx("div",{className:W4,children:n.name}),n.items.map((l,s)=>{var c;return C.jsx("div",{className:H4,style:Me({[I4]:l.length.toString(),[U4]:`${((c=n.height)==null?void 0:c.toString())??"40"}px`}),children:l.map((A,f)=>C.jsx(Fe,{className:s0(V4,A?G4:void 0),href:A==null?void 0:A.link,hideExternalIcon:!0,variant:"styleless",children:(A==null?void 0:A.image)&&C.jsx("img",{className:q4,src:A==null?void 0:A.image,alt:A==null?void 0:A.name})},f))},s)})]},a))})}var Y4="var(--vocs_AutolinkIcon_iconUrl)",K4="vocs_AutolinkIcon";function Z4(t){const{basePath:n}=m2(),a=n;return C.jsx("div",{...t,className:s0(t.className,K4),style:Me({[Y4]:`url(${a}/.vocs/icons/link.svg)`})})}var X4="vocs_Tabs",Q4="vocs_Tabs_list",J4="vocs_Tabs_trigger",e9="vocs_Tabs_content";function t9(t){return C.jsx(QR,{...t,className:s0(t.className,X4)})}function r9(t){return C.jsx(JR,{...t,className:s0(t.className,Q4)})}function n9(t){return C.jsx(eE,{...t,className:s0(t.className,J4)})}function o9(t){return C.jsx(tE,{...t,className:s0(t.className,e9)})}var a9="vocs_CodeGroup";function l9({children:t}){if(!Array.isArray(t))return null;const n=t.map(a=>{const l=a.props["data-title"]?a:a.props.children,{props:s}=l,c=s["data-title"],A=s.children;return{title:c,content:A}});return C.jsxs(t9,{className:a9,defaultValue:n[0].title,children:[C.jsx(r9,{"aria-label":"Code group",children:n.map(({title:a},l)=>C.jsx(n9,{value:a||l.toString(),children:a},a||l.toString()))}),n.map(({title:a,content:l},s)=>{var A,f,p,h;const c=(h=(p=(f=(A=l.props)==null?void 0:A.children)==null?void 0:f.props)==null?void 0:p.className)==null?void 0:h.includes("shiki");return C.jsx(o9,{"data-shiki":c,value:a||s.toString(),children:l},a||s.toString())})]})}var i9="vocs_Div",s9="vocs_Step",YD="vocs_Step_title",c9="vocs_Step_content",u9="vocs_H2";function KD(t){return C.jsx(Un,{...t,className:s0(t.className,u9),level:2})}var A9="vocs_H3";function ZD(t){return C.jsx(Un,{...t,className:s0(t.className,A9),level:3})}var f9="vocs_H4";function XD(t){return C.jsx(Un,{...t,className:s0(t.className,f9),level:4})}var d9="vocs_H5";function QD(t){return C.jsx(Un,{...t,className:s0(t.className,d9),level:5})}var h9="vocs_H6";function JD(t){return C.jsx(Un,{...t,className:s0(t.className,h9),level:6})}function p9({children:t,className:n,title:a,titleLevel:l=2}){const s=(()=>{if(l===2)return KD;if(l===3)return ZD;if(l===4)return XD;if(l===5)return QD;if(l===6)return JD;throw new Error("Invalid.")})();return C.jsxs("div",{className:s0(n,s9),children:[typeof a=="string"?C.jsx(s,{className:YD,children:a}):a,C.jsx("div",{className:c9,children:t})]})}var m9="vocs_Steps";function C9({children:t,className:n}){return C.jsx("div",{className:s0(n,m9),children:t})}function y9({children:t}){return Array.isArray(t)?C.jsx(C9,{children:t.map(({props:n},a)=>{const[l,...s]=Array.isArray(n.children)?n.children:[n.children];return C.jsx(p9,{title:g.cloneElement(l,{className:YD}),children:s},a)})}):null}var g9="vocs_Subtitle";function D9({children:t}){return C.jsx("div",{className:g9,children:t})}function v9(t){const{layout:n}=rr(),a=s0(t.className,i9);return t.className==="code-group"?C.jsx(l9,{...t,className:a}):"data-authors"in t?C.jsx($D,{}):"data-blog-posts"in t?C.jsx(j4,{}):"data-sponsors"in t?C.jsx($4,{}):"data-autolink-icon"in t&&n==="docs"?C.jsx(Z4,{...t,className:a}):"data-vocs-steps"in t?C.jsx(y9,{...t,className:a}):t.role==="doc-subtitle"?C.jsx(D9,{...t}):C.jsx("div",{...t,className:a})}var x9="vocs_Figcaption";function w9(t){const n=s0(t.className,x9);return C.jsx("figcaption",{...t,className:n})}var F9="vocs_Figure";function B9(t){const n=s0(t.className,F9);return C.jsx("figure",{...t,className:n})}var b9="vocs_Header";function N9(t){return C.jsx("header",{...t,className:s0(t.className,b9)})}var S9="vocs_HorizontalRule";function R9(t){return C.jsx("hr",{...t,className:s0(t.className,S9)})}var E9="vocs_List",_9="vocs_List_ordered",k9="vocs_List_unordered";function bm({ordered:t,...n}){const a=t?"ol":"ul";return C.jsx(a,{...n,className:s0(n.className,E9,t?_9:k9)})}var T9="vocs_ListItem";function P9(t){return C.jsx("li",{...t,className:s0(t.className,T9)})}function M9(){const t=g.useRef(null),[n,a]=g.useState(!1);g.useEffect(()=>{if(!n)return;const s=setTimeout(()=>a(!1),1e3);return()=>clearTimeout(s)},[n]);function l(){var A;a(!0);const s=(A=t.current)==null?void 0:A.cloneNode(!0),c=s==null?void 0:s.querySelectorAll("button,.line.diff.remove,.twoslash-popup-info-hover,.twoslash-popup-info,.twoslash-meta-line,.twoslash-tag-line");for(const f of c??[])f.remove();navigator.clipboard.writeText(s==null?void 0:s.textContent)}return{copied:n,copy:l,ref:t}}var O9="vocs_CopyButton",L9="vocs_CopyButton_copied";function j9(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 68 67",children:[C.jsx("title",{children:"Checkmark"}),C.jsx("path",{fill:"currentColor",d:"M26.175 66.121c1.904 0 3.418-.83 4.492-2.49L66.263 7.332c.83-1.27 1.123-2.295 1.123-3.32 0-2.393-1.563-4.004-4.004-4.004-1.758 0-2.734.586-3.809 2.295L25.98 56.209 8.304 32.381c-1.123-1.514-2.198-2.149-3.809-2.149-2.441 0-4.2 1.71-4.2 4.15 0 1.026.44 2.15 1.27 3.224l19.971 25.927c1.367 1.758 2.734 2.588 4.639 2.588Z"})]})}function I9({copy:t,copied:n}){return C.jsx("button",{className:O9,"data-copied":n,onClick:t,type:"button",children:n?C.jsx(W2,{label:"Copied",size:"14px",className:L9,icon:j9}):C.jsx(W2,{label:"Copy",size:"18px",icon:ED})})}var U9="vocs_CodeBlock";function z9(t){return C.jsx("div",{...t,className:s0(t.className,U9)})}function W9(){return C.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("title",{children:"File"}),C.jsx("path",{d:"M4.2 1H4.17741H4.1774C3.86936 0.999988 3.60368 0.999978 3.38609 1.02067C3.15576 1.04257 2.92825 1.09113 2.71625 1.22104C2.51442 1.34472 2.34473 1.51442 2.22104 1.71625C2.09113 1.92825 2.04257 2.15576 2.02067 2.38609C1.99998 2.60367 1.99999 2.86935 2 3.17738V3.1774V3.2V11.8V11.8226V11.8226C1.99999 12.1307 1.99998 12.3963 2.02067 12.6139C2.04257 12.8442 2.09113 13.0717 2.22104 13.2837C2.34473 13.4856 2.51442 13.6553 2.71625 13.779C2.92825 13.9089 3.15576 13.9574 3.38609 13.9793C3.60368 14 3.86937 14 4.17741 14H4.2H10.8H10.8226C11.1306 14 11.3963 14 11.6139 13.9793C11.8442 13.9574 12.0717 13.9089 12.2837 13.779C12.4856 13.6553 12.6553 13.4856 12.779 13.2837C12.9089 13.0717 12.9574 12.8442 12.9793 12.6139C13 12.3963 13 12.1306 13 11.8226V11.8V3.2V3.17741C13 2.86936 13 2.60368 12.9793 2.38609C12.9574 2.15576 12.9089 1.92825 12.779 1.71625C12.6553 1.51442 12.4856 1.34472 12.2837 1.22104C12.0717 1.09113 11.8442 1.04257 11.6139 1.02067C11.3963 0.999978 11.1306 0.999988 10.8226 1H10.8H4.2ZM3.23875 2.07368C3.26722 2.05623 3.32362 2.03112 3.48075 2.01618C3.64532 2.00053 3.86298 2 4.2 2H10.8C11.137 2 11.3547 2.00053 11.5193 2.01618C11.6764 2.03112 11.7328 2.05623 11.7613 2.07368C11.8285 2.11491 11.8851 2.17147 11.9263 2.23875C11.9438 2.26722 11.9689 2.32362 11.9838 2.48075C11.9995 2.64532 12 2.86298 12 3.2V11.8C12 12.137 11.9995 12.3547 11.9838 12.5193C11.9689 12.6764 11.9438 12.7328 11.9263 12.7613C11.8851 12.8285 11.8285 12.8851 11.7613 12.9263C11.7328 12.9438 11.6764 12.9689 11.5193 12.9838C11.3547 12.9995 11.137 13 10.8 13H4.2C3.86298 13 3.64532 12.9995 3.48075 12.9838C3.32362 12.9689 3.26722 12.9438 3.23875 12.9263C3.17147 12.8851 3.11491 12.8285 3.07368 12.7613C3.05624 12.7328 3.03112 12.6764 3.01618 12.5193C3.00053 12.3547 3 12.137 3 11.8V3.2C3 2.86298 3.00053 2.64532 3.01618 2.48075C3.03112 2.32362 3.05624 2.26722 3.07368 2.23875C3.11491 2.17147 3.17147 2.11491 3.23875 2.07368ZM5 10C4.72386 10 4.5 10.2239 4.5 10.5C4.5 10.7761 4.72386 11 5 11H8C8.27614 11 8.5 10.7761 8.5 10.5C8.5 10.2239 8.27614 10 8 10H5ZM4.5 7.5C4.5 7.22386 4.72386 7 5 7H10C10.2761 7 10.5 7.22386 10.5 7.5C10.5 7.77614 10.2761 8 10 8H5C4.72386 8 4.5 7.77614 4.5 7.5ZM5 4C4.72386 4 4.5 4.22386 4.5 4.5C4.5 4.77614 4.72386 5 5 5H10C10.2761 5 10.5 4.77614 10.5 4.5C10.5 4.22386 10.2761 4 10 4H5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})]})}function H9(){return C.jsxs("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 79 95",fill:"none",children:[C.jsx("title",{children:"Terminal"}),C.jsx("path",{fill:"currentColor",d:"M38.281 34.033c0-1.074-.39-2.05-1.22-2.88L6.885 1.171C6.152.39 5.175 0 4.053 0 1.758 0 0 1.709 0 4.004c0 1.074.488 2.1 1.172 2.88l27.295 27.15L1.172 61.181C.488 61.962 0 62.939 0 64.062c0 2.295 1.758 4.004 4.053 4.004 1.123 0 2.1-.39 2.832-1.172l30.176-29.98c.83-.83 1.22-1.807 1.22-2.88Z"}),C.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"8px",d:"M36 75h55"})]})}var V9="vocs_CodeTitle";function G9({children:t,className:n,language:a,...l}){return C.jsxs("div",{...l,className:s0(n,V9),children:[a==="bash"?C.jsx(W2,{label:"Terminal",size:"14px",icon:H9,style:{marginTop:3}}):t.match(/\.(.*)$/)?C.jsx(W2,{label:"File",size:"14px",icon:W9,style:{marginTop:1}}):null,t]})}var q9="vocs_Pre",$9="vocs_Pre_wrapper";function Y9({children:t,className:n,...a}){const{copied:l,copy:s,ref:c}=M9();function A(h){return!h||typeof h!="object"?h:"props"in h?{...h,props:{...h.props,children:Array.isArray(h.props.children)?h.props.children.map(A):A(h.props.children)}}:h}const f=g.useMemo(()=>A(t),[t]);return(h=>n!=null&&n.includes("shiki")?C.jsxs(z9,{children:[a["data-title"]&&C.jsx(G9,{language:a["data-lang"],children:a["data-title"]}),h]}):h)(C.jsx("div",{className:s0($9),children:C.jsxs("pre",{ref:c,...a,className:s0(n,q9),children:[C.jsx(I9,{copied:l,copy:s}),f]})}))}var K9="vocs_Footnotes";function Z9(t){return C.jsx("section",{...t,className:s0(t.className,K9)})}var Nm="vocs_Section";function X9(t){return"data-footnotes"in t?C.jsx(Z9,{...t,className:s0(t.className,Nm)}):C.jsx("section",{...t,className:s0(t.className,Nm)})}var Sm="vocs_Span";function Q9(t,n){if(!t||!n)return!1;const a=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(a&&hi(a)){let l=n;for(;l;){if(t===l)return!0;l=l.parentNode||l.host}}return!1}function $l(t){return(t==null?void 0:t.ownerDocument)||document}function sA(t,n){const a=["mouse","pen"];return a.push("",void 0),a.includes(t)}var J9=typeof document<"u",e8=function(){},Tr=J9?g.useLayoutEffect:e8;const t8={...gi};function Yl(t){const n=g.useRef(t);return Tr(()=>{n.current=t}),n}const r8=t8.useInsertionEffect,n8=r8||(t=>t());function Xo(t){const n=g.useRef(()=>{});return n8(()=>{n.current=t}),g.useCallback(function(){for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return n.current==null?void 0:n.current(...l)},[])}const o8="data-floating-ui-focusable",Rm="active",Em="selected",a8={...gi};let _m=!1,l8=0;const km=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+l8++;function i8(){const[t,n]=g.useState(()=>_m?km():void 0);return Tr(()=>{t==null&&n(km())},[]),g.useEffect(()=>{_m=!0},[]),t}const s8=a8.useId,ev=s8||i8,c8=g.forwardRef(function(n,a){const{context:{placement:l,elements:{floating:s},middlewareData:{arrow:c,shift:A}},width:f=14,height:p=7,tipRadius:h=0,strokeWidth:y=0,staticOffset:m,stroke:D,d:v,style:{transform:w,...x}={},...B}=n,b=ev(),[R,N]=g.useState(!1);if(Tr(()=>{if(!s)return;be(s).direction==="rtl"&&N(!0)},[s]),!s)return null;const[_,T]=l.split("-"),E=_==="top"||_==="bottom";let O=m;(E&&A!=null&&A.x||!E&&A!=null&&A.y)&&(O=null);const U=y*2,H=U/2,n0=f/2*(h/-8+1),u0=p/2*h/4,l0=!!v,i0=O&&T==="end"?"bottom":"top";let q=O&&T==="end"?"right":"left";O&&R&&(q=T==="end"?"left":"right");const A0=(c==null?void 0:c.x)!=null?O||c.x:"",L=(c==null?void 0:c.y)!=null?O||c.y:"",G=v||"M0,0"+(" H"+f)+(" L"+(f-n0)+","+(p-u0))+(" Q"+f/2+","+p+" "+n0+","+(p-u0))+" Z",X={top:l0?"rotate(180deg)":"",left:l0?"rotate(90deg)":"rotate(-90deg)",bottom:l0?"":"rotate(180deg)",right:l0?"rotate(-90deg)":"rotate(90deg)"}[_];return C.jsxs("svg",{...B,"aria-hidden":!0,ref:a,width:l0?f:f+U,height:f,viewBox:"0 0 "+f+" "+(p>f?p:f),style:{position:"absolute",pointerEvents:"none",[q]:A0,[i0]:L,[_]:E||l0?"100%":"calc(100% - "+U/2+"px)",transform:[X,w].filter(K=>!!K).join(" "),...x},children:[U>0&&C.jsx("path",{clipPath:"url(#"+b+")",fill:"none",stroke:D,strokeWidth:U+(v?0:1),d:G}),C.jsx("path",{stroke:U&&!v?B.fill:"none",d:G}),C.jsx("clipPath",{id:b,children:C.jsx("rect",{x:-H,y:H*(l0?-1:1),width:f+U,height:f})})]})});function u8(){const t=new Map;return{emit(n,a){var l;(l=t.get(n))==null||l.forEach(s=>s(a))},on(n,a){t.has(n)||t.set(n,new Set),t.get(n).add(a)},off(n,a){var l;(l=t.get(n))==null||l.delete(a)}}}const A8=g.createContext(null),f8=g.createContext(null),tv=()=>{var t;return((t=g.useContext(A8))==null?void 0:t.id)||null},rv=()=>g.useContext(f8);function d8(t){return"data-floating-ui-"+t}function ae(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const Tm=d8("safe-polygon");function Nu(t,n,a){if(a&&!sA(a))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const l=t();return typeof l=="number"?l:l==null?void 0:l[n]}return t==null?void 0:t[n]}function Su(t){return typeof t=="function"?t():t}function h8(t,n){n===void 0&&(n={});const{open:a,onOpenChange:l,dataRef:s,events:c,elements:A}=t,{enabled:f=!0,delay:p=0,handleClose:h=null,mouseOnly:y=!1,restMs:m=0,move:D=!0}=n,v=rv(),w=tv(),x=Yl(h),B=Yl(p),b=Yl(a),R=Yl(m),N=g.useRef(),_=g.useRef(-1),T=g.useRef(),E=g.useRef(-1),O=g.useRef(!0),U=g.useRef(!1),H=g.useRef(()=>{}),n0=g.useRef(!1),u0=Xo(()=>{var G;const X=(G=s.current.openEvent)==null?void 0:G.type;return(X==null?void 0:X.includes("mouse"))&&X!=="mousedown"});g.useEffect(()=>{if(!f)return;function G(X){let{open:K}=X;K||(ae(_),ae(E),O.current=!0,n0.current=!1)}return c.on("openchange",G),()=>{c.off("openchange",G)}},[f,c]),g.useEffect(()=>{if(!f||!x.current||!a)return;function G(K){u0()&&l(!1,K,"hover")}const X=$l(A.floating).documentElement;return X.addEventListener("mouseleave",G),()=>{X.removeEventListener("mouseleave",G)}},[A.floating,a,l,f,x,u0]);const l0=g.useCallback(function(G,X,K){X===void 0&&(X=!0),K===void 0&&(K="hover");const k=Nu(B.current,"close",N.current);k&&!T.current?(ae(_),_.current=window.setTimeout(()=>l(!1,G,K),k)):X&&(ae(_),l(!1,G,K))},[B,l]),i0=Xo(()=>{H.current(),T.current=void 0}),q=Xo(()=>{if(U.current){const G=$l(A.floating).body;G.style.pointerEvents="",G.removeAttribute(Tm),U.current=!1}}),A0=Xo(()=>s.current.openEvent?["click","mousedown"].includes(s.current.openEvent.type):!1);g.useEffect(()=>{if(!f)return;function G(J){if(ae(_),O.current=!1,y&&!sA(N.current)||Su(R.current)>0&&!Nu(B.current,"open"))return;const r0=Nu(B.current,"open",N.current);r0?_.current=window.setTimeout(()=>{b.current||l(!0,J,"hover")},r0):a||l(!0,J,"hover")}function X(J){if(A0()){q();return}H.current();const r0=$l(A.floating);if(ae(E),n0.current=!1,x.current&&s.current.floatingContext){a||ae(_),T.current=x.current({...s.current.floatingContext,tree:v,x:J.clientX,y:J.clientY,onClose(){q(),i0(),A0()||l0(J,!0,"safe-polygon")}});const w0=T.current;r0.addEventListener("mousemove",w0),H.current=()=>{r0.removeEventListener("mousemove",w0)};return}(N.current==="touch"?!Q9(A.floating,J.relatedTarget):!0)&&l0(J)}function K(J){A0()||s.current.floatingContext&&(x.current==null||x.current({...s.current.floatingContext,tree:v,x:J.clientX,y:J.clientY,onClose(){q(),i0(),A0()||l0(J)}})(J))}function k(){ae(_)}function Q(J){A0()||l0(J,!1)}if(S2(A.domReference)){const J=A.domReference,r0=A.floating;return a&&J.addEventListener("mouseleave",K),D&&J.addEventListener("mousemove",G,{once:!0}),J.addEventListener("mouseenter",G),J.addEventListener("mouseleave",X),r0&&(r0.addEventListener("mouseleave",K),r0.addEventListener("mouseenter",k),r0.addEventListener("mouseleave",Q)),()=>{a&&J.removeEventListener("mouseleave",K),D&&J.removeEventListener("mousemove",G),J.removeEventListener("mouseenter",G),J.removeEventListener("mouseleave",X),r0&&(r0.removeEventListener("mouseleave",K),r0.removeEventListener("mouseenter",k),r0.removeEventListener("mouseleave",Q))}}},[A,f,t,y,D,l0,i0,q,l,a,b,v,B,x,s,A0,R]),Tr(()=>{var G;if(f&&a&&(G=x.current)!=null&&(G=G.__options)!=null&&G.blockPointerEvents&&u0()){U.current=!0;const K=A.floating;if(S2(A.domReference)&&K){var X;const k=$l(A.floating).body;k.setAttribute(Tm,"");const Q=A.domReference,J=v==null||(X=v.nodesRef.current.find(r0=>r0.id===w))==null||(X=X.context)==null?void 0:X.elements.floating;return J&&(J.style.pointerEvents=""),k.style.pointerEvents="none",Q.style.pointerEvents="auto",K.style.pointerEvents="auto",()=>{k.style.pointerEvents="",Q.style.pointerEvents="",K.style.pointerEvents=""}}}},[f,a,w,A,v,x,u0]),Tr(()=>{a||(N.current=void 0,n0.current=!1,i0(),q())},[a,i0,q]),g.useEffect(()=>()=>{i0(),ae(_),ae(E),q()},[f,A.domReference,i0,q]);const L=g.useMemo(()=>{function G(X){N.current=X.pointerType}return{onPointerDown:G,onPointerEnter:G,onMouseMove(X){const{nativeEvent:K}=X;function k(){!O.current&&!b.current&&l(!0,K,"hover")}y&&!sA(N.current)||a||Su(R.current)===0||n0.current&&X.movementX**2+X.movementY**2<2||(ae(E),N.current==="touch"?k():(n0.current=!0,E.current=window.setTimeout(k,Su(R.current))))}}},[y,l,a,b,R]);return g.useMemo(()=>f?{reference:L}:{},[f,L])}function Ru(t,n){if(!t||!n)return!1;const a=n.getRootNode==null?void 0:n.getRootNode();if(t.contains(n))return!0;if(a&&hi(a)){let l=n;for(;l;){if(t===l)return!0;l=l.parentNode||l.host}}return!1}function p8(t){return"composedPath"in t?t.composedPath()[0]:t.target}function m8(t){const{open:n=!1,onOpenChange:a,elements:l}=t,s=ev(),c=g.useRef({}),[A]=g.useState(()=>u8()),f=tv()!=null,[p,h]=g.useState(l.reference),y=Xo((v,w,x)=>{c.current.openEvent=v?w:void 0,A.emit("openchange",{open:v,event:w,reason:x,nested:f}),a==null||a(v,w,x)}),m=g.useMemo(()=>({setPositionReference:h}),[]),D=g.useMemo(()=>({reference:p||l.reference||null,floating:l.floating||null,domReference:l.reference}),[p,l.reference,l.floating]);return g.useMemo(()=>({dataRef:c,open:n,onOpenChange:y,elements:D,events:A,floatingId:s,refs:m}),[n,y,D,A,s,m])}function C8(t){t===void 0&&(t={});const{nodeId:n}=t,a=m8({...t,elements:{reference:null,floating:null,...t.elements}}),l=t.rootContext||a,s=l.elements,[c,A]=g.useState(null),[f,p]=g.useState(null),y=(s==null?void 0:s.domReference)||c,m=g.useRef(null),D=rv();Tr(()=>{y&&(m.current=y)},[y]);const v=ig({...t,elements:{...s,...f&&{reference:f}}}),w=g.useCallback(N=>{const _=S2(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),getClientRects:()=>N.getClientRects(),contextElement:N}:N;p(_),v.refs.setReference(_)},[v.refs]),x=g.useCallback(N=>{(S2(N)||N===null)&&(m.current=N,A(N)),(S2(v.refs.reference.current)||v.refs.reference.current===null||N!==null&&!S2(N))&&v.refs.setReference(N)},[v.refs]),B=g.useMemo(()=>({...v.refs,setReference:x,setPositionReference:w,domReference:m}),[v.refs,x,w]),b=g.useMemo(()=>({...v.elements,domReference:y}),[v.elements,y]),R=g.useMemo(()=>({...v,...l,refs:B,elements:b,nodeId:n}),[v,B,b,n,l]);return Tr(()=>{l.dataRef.current.floatingContext=R;const N=D==null?void 0:D.nodesRef.current.find(_=>_.id===n);N&&(N.context=R)}),g.useMemo(()=>({...v,context:R,refs:B,elements:b}),[v,B,b,R])}function Eu(t,n,a){const l=new Map,s=a==="item";let c=t;if(s&&t){const{[Rm]:A,[Em]:f,...p}=t;c=p}return{...a==="floating"&&{tabIndex:-1,[o8]:""},...c,...n.map(A=>{const f=A?A[a]:null;return typeof f=="function"?t?f(t):null:f}).concat(t).reduce((A,f)=>(f&&Object.entries(f).forEach(p=>{let[h,y]=p;if(!(s&&[Rm,Em].includes(h)))if(h.indexOf("on")===0){if(l.has(h)||l.set(h,[]),typeof y=="function"){var m;(m=l.get(h))==null||m.push(y),A[h]=function(){for(var D,v=arguments.length,w=new Array(v),x=0;x<v;x++)w[x]=arguments[x];return(D=l.get(h))==null?void 0:D.map(B=>B(...w)).find(B=>B!==void 0)}}}else A[h]=y}),A),{})}}function y8(t){t===void 0&&(t=[]);const n=t.map(f=>f==null?void 0:f.reference),a=t.map(f=>f==null?void 0:f.floating),l=t.map(f=>f==null?void 0:f.item),s=g.useCallback(f=>Eu(f,t,"reference"),n),c=g.useCallback(f=>Eu(f,t,"floating"),a),A=g.useCallback(f=>Eu(f,t,"item"),l);return g.useMemo(()=>({getReferenceProps:s,getFloatingProps:c,getItemProps:A}),[s,c,A])}function nv(t,n,a){return a===void 0&&(a=!0),t.filter(s=>{var c;return s.parentId===n&&(!a||((c=s.context)==null?void 0:c.open))}).flatMap(s=>[s,...nv(t,s.id,a)])}function Pm(t,n){const[a,l]=t;let s=!1;const c=n.length;for(let A=0,f=c-1;A<c;f=A++){const[p,h]=n[A]||[0,0],[y,m]=n[f]||[0,0];h>=l!=m>=l&&a<=(y-p)*(l-h)/(m-h)+p&&(s=!s)}return s}function g8(t,n){return t[0]>=n.x&&t[0]<=n.x+n.width&&t[1]>=n.y&&t[1]<=n.y+n.height}function D8(t){t===void 0&&(t={});const{buffer:n=.5,blockPointerEvents:a=!1,requireIntent:l=!0}=t,s={current:-1};let c=!1,A=null,f=null,p=typeof performance<"u"?performance.now():0;function h(m,D){const v=performance.now(),w=v-p;if(A===null||f===null||w===0)return A=m,f=D,p=v,null;const x=m-A,B=D-f,R=Math.sqrt(x*x+B*B)/w;return A=m,f=D,p=v,R}const y=m=>{let{x:D,y:v,placement:w,elements:x,onClose:B,nodeId:b,tree:R}=m;return function(_){function T(){ae(s),B()}if(ae(s),!x.domReference||!x.floating||w==null||D==null||v==null)return;const{clientX:E,clientY:O}=_,U=[E,O],H=p8(_),n0=_.type==="mouseleave",u0=Ru(x.floating,H),l0=Ru(x.domReference,H),i0=x.domReference.getBoundingClientRect(),q=x.floating.getBoundingClientRect(),A0=w.split("-")[0],L=D>q.right-q.width/2,G=v>q.bottom-q.height/2,X=g8(U,i0),K=q.width>i0.width,k=q.height>i0.height,Q=(K?i0:q).left,J=(K?i0:q).right,r0=(k?i0:q).top,f0=(k?i0:q).bottom;if(u0&&(c=!0,!n0))return;if(l0&&(c=!1),l0&&!n0){c=!0;return}if(n0&&S2(_.relatedTarget)&&Ru(x.floating,_.relatedTarget)||R&&nv(R.nodesRef.current,b).length)return;if(A0==="top"&&v>=i0.bottom-1||A0==="bottom"&&v<=i0.top+1||A0==="left"&&D>=i0.right-1||A0==="right"&&D<=i0.left+1)return T();let w0=[];switch(A0){case"top":w0=[[Q,i0.top+1],[Q,q.bottom-1],[J,q.bottom-1],[J,i0.top+1]];break;case"bottom":w0=[[Q,q.top+1],[Q,i0.bottom-1],[J,i0.bottom-1],[J,q.top+1]];break;case"left":w0=[[q.right-1,f0],[q.right-1,r0],[i0.left+1,r0],[i0.left+1,f0]];break;case"right":w0=[[i0.right-1,f0],[i0.right-1,r0],[q.left+1,r0],[q.left+1,f0]];break}function m0($0){let[b0,T0]=$0;switch(A0){case"top":{const W0=[K?b0+n/2:L?b0+n*4:b0-n*4,T0+n+1],u2=[K?b0-n/2:L?b0+n*4:b0-n*4,T0+n+1],P2=[[q.left,L||K?q.bottom-n:q.top],[q.right,L?K?q.bottom-n:q.top:q.bottom-n]];return[W0,u2,...P2]}case"bottom":{const W0=[K?b0+n/2:L?b0+n*4:b0-n*4,T0-n],u2=[K?b0-n/2:L?b0+n*4:b0-n*4,T0-n],P2=[[q.left,L||K?q.top+n:q.bottom],[q.right,L?K?q.top+n:q.bottom:q.top+n]];return[W0,u2,...P2]}case"left":{const W0=[b0+n+1,k?T0+n/2:G?T0+n*4:T0-n*4],u2=[b0+n+1,k?T0-n/2:G?T0+n*4:T0-n*4];return[...[[G||k?q.right-n:q.left,q.top],[G?k?q.right-n:q.left:q.right-n,q.bottom]],W0,u2]}case"right":{const W0=[b0-n,k?T0+n/2:G?T0+n*4:T0-n*4],u2=[b0-n,k?T0-n/2:G?T0+n*4:T0-n*4],P2=[[G||k?q.left+n:q.right,q.top],[G?k?q.left+n:q.right:q.left+n,q.bottom]];return[W0,u2,...P2]}}}if(!Pm([E,O],w0)){if(c&&!X)return T();if(!n0&&l){const $0=h(_.clientX,_.clientY);if($0!==null&&$0<.1)return T()}Pm([E,O],m0([D,v]))?!c&&l&&(s.current=window.setTimeout(T,40)):T()}}};return y.__options={blockPointerEvents:a},y}function v8({children:t,...n}){const[a,l]=t,s=g.useRef(null),[c,A]=g.useState(!1),{context:f,refs:p,floatingStyles:h}=C8({middleware:[ug({element:s}),sg(8),cg()],open:c,onOpenChange:A,placement:"bottom-start"}),y=h8(f,{handleClose:D8()}),{getReferenceProps:m,getFloatingProps:D}=y8([y]),v=l.props.children,w=a.props.children;return C.jsxs("span",{...n,children:[C.jsx("span",{className:"twoslash-target",ref:p.setReference,...m(),children:v}),c&&C.jsxs("div",{className:"twoslash-popup-info-hover",ref:p.setFloating,style:h,...D(),children:[C.jsx(c8,{ref:s,context:f,fill:Iu.background5,height:3,stroke:Iu.border2,strokeWidth:1,width:7}),C.jsx("div",{className:"twoslash-popup-scroll-container",children:w})]})]})}function x8(t){var a;const n=s0(t.className,Sm);return(a=t.className)!=null&&a.includes("twoslash-hover")?C.jsx(v8,{...t,className:n}):C.jsx("span",{...t,className:s0(t.className,Sm)})}var w8="vocs_Strong";function F8(t){return C.jsx("strong",{...t,className:s0(t.className,w8)})}var B8="vocs_Summary";function b8(t){return C.jsx("summary",{...t,className:s0(t.className,B8)})}var N8="vocs_Table";function S8(t){return C.jsx("table",{...t,className:s0(t.className,N8)})}var R8="vocs_TableCell";function E8(t){return C.jsx("td",{...t,className:s0(t.className,R8)})}var _8="vocs_TableHeader";function k8(t){return C.jsx("th",{...t,className:s0(t.className,_8)})}var T8="vocs_TableRow";function P8(t){return C.jsx("tr",{...t,className:s0(t.className,T8)})}const M8={a:c4,aside:D4,blockquote:x4,code:F4,details:N4,div:v9,pre:Y9,header:N9,figcaption:w9,figure:B9,h1:DC,h2:KD,h3:ZD,h4:XD,h5:QD,h6:JD,hr:R9,kd:sy,li:P9,ol:t=>C.jsx(bm,{ordered:!0,...t}),p:vC,section:X9,span:x8,strong:F8,summary:b8,table:S8,td:E8,th:k8,tr:P8,ul:t=>C.jsx(bm,{ordered:!1,...t})};function O8(){const{pathname:t}=a2(),n=m2(),{ogImageUrl:a}=n;if(!a)return;if(typeof a=="string")return a;const l=g.useMemo(()=>{const s=Object.keys(a).filter(c=>t.startsWith(c));return s[s.length-1]},[a,t]);if(l)return a[l]}function cA(t){const{children:n,content:a,filePath:l,frontmatter:s,lastUpdatedAt:c,path:A}=t,{pathname:f}=a2(),p=g.useRef(void 0);return g.useEffect(()=>{p.current=f}),C.jsxs(C.Fragment,{children:[C.jsx(L8,{frontmatter:s}),typeof window<"u"&&C.jsx(uC,{}),C.jsx(l4,{components:M8,children:C.jsx(pw,{frontmatter:s,path:A,children:C.jsx(FC.Provider,{value:{content:a,filePath:l,frontmatter:s,lastUpdatedAt:c,previousPath:p.current},children:n})})})]})}function L8({frontmatter:t}){var D,v,w,x,B,b;const n=m2(),a=O8(),{baseUrl:l,font:s,iconUrl:c,logoUrl:A}=n,f=(t==null?void 0:t.description)??n.description,p=(t==null?void 0:t.title)??n.title,h=(()=>{if(n.title&&!p.includes(n.title))return n.titleTemplate})(),y=typeof window<"u"&&window.location.hostname==="localhost",m=h?h.replace("%s",p):p;return C.jsxs(C.Fragment,{children:[m&&C.jsx("title",{children:m}),l&&!0&&!y&&C.jsx("base",{href:l}),f!=="undefined"&&C.jsx("meta",{name:"description",content:f}),c&&typeof c=="string"&&C.jsx("link",{rel:"icon",href:c,type:_u(c)}),c&&typeof c!="string"&&C.jsx("link",{rel:"icon",href:c.light,type:_u(c.light)}),c&&typeof c!="string"&&C.jsx("link",{rel:"icon",href:c.dark,type:_u(c.dark),media:"(prefers-color-scheme: dark)"}),C.jsx("meta",{property:"og:type",content:"website"}),C.jsx("meta",{property:"og:title",content:p||n.title}),l&&C.jsx("meta",{property:"og:url",content:l}),f!=="undefined"&&C.jsx("meta",{property:"og:description",content:f}),a&&C.jsx("meta",{property:"og:image",content:a.replace("%logo",`${l||""}${typeof A=="string"?A:(A==null?void 0:A.dark)||""}`).replace("%title",p||"").replace("%description",(f!=="undefined"?f:"")||"")}),(((D=s==null?void 0:s.default)==null?void 0:D.google)||((v=s==null?void 0:s.mono)==null?void 0:v.google))&&C.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(((w=s==null?void 0:s.default)==null?void 0:w.google)||((x=s==null?void 0:s.mono)==null?void 0:x.google))&&C.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),((B=s==null?void 0:s.default)==null?void 0:B.google)&&C.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${s.default.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),((b=s==null?void 0:s.mono)==null?void 0:b.google)&&C.jsx("link",{href:`https://fonts.googleapis.com/css2?family=${s.mono.google}:wght@300;400;500&display=swap`,rel:"stylesheet"}),C.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a&&C.jsx("meta",{property:"twitter:image",content:a.replace("%logo",`${l||""}${typeof A=="string"?A:(A==null?void 0:A.dark)||""}`).replace("%title",p?encodeURIComponent(p):"").replace("%description",f?encodeURIComponent(f):"")})]})}function _u(t){if(t.endsWith(".svg"))return"image/svg+xml";if(t.endsWith(".png"))return"image/png";if(t.endsWith(".jpg"))return"image/jpeg";if(t.endsWith(".ico"))return"image/x-icon";if(t.endsWith(".webp"))return"image/webp"}const j8=(()=>{const t=FA.find(({path:n})=>n==="*");return t?{path:t.path,lazy:async()=>{const{frontmatter:n,...a}=await t.lazy();return{...a,element:C.jsx(cA,{frontmatter:n,path:t.path,children:C.jsx(lA,{children:C.jsx(a.default,{})})})}}}:{path:"*",lazy:void 0,element:C.jsx(cA,{frontmatter:{layout:"minimal"},path:"*",children:C.jsx(lA,{children:C.jsx(H1,{})})})}})(),Mm=[...FA.filter(({path:t})=>t!=="*").map(t=>({path:t.path,lazy:async()=>{const{frontmatter:n,...a}=await t.lazy();return{...a,element:C.jsx(cA,{content:decodeURIComponent(t.content??""),filePath:t.filePath,frontmatter:n,lastUpdatedAt:t.lastUpdatedAt,path:t.path,children:C.jsx(lA,{children:C.jsx(a.default,{})})})}}})),j8];async function I8(t,n){var l;const a=(l=Dt(t,window.location,n))==null?void 0:l.filter(s=>s.route.lazy);a&&(a==null?void 0:a.length)>0&&await Promise.all(a.map(async s=>{const c=await s.route.lazy();Object.assign(s.route,{...c,lazy:void 0})}))}function U8(){const t=document.querySelectorAll('style[data-vocs-temp-style="true"]');for(const n of t)n.remove()}z8();async function z8(){const t=pC().basePath;await I8(Mm,t),U8();const n=A1(Mm,{basename:t});g6.hydrateRoot(document.getElementById("app"),C.jsx(N1,{children:C.jsx(Ix,{router:n})}))}export{o9 as C,Fe as L,t9 as R,n9 as T,Z8 as a,Bu as b,s0 as c,m2 as d,K5 as e,r9 as f,C as j,a4 as u};
